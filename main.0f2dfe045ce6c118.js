"use strict";(self.webpackChunkToDoApp=self.webpackChunkToDoApp||[]).push([[179],{2011:(ot,Te,k)=>{k.d(Te,{hO:()=>qe,xv:()=>le,Dh:()=>de,GT:()=>pe,cc:()=>Ae,on:()=>j,pX:()=>X});var m=k(5e3),Y=k(127),O=k(5813);ot=k.hmd(ot);const ae=["ngOnDestroy"],X=(we,Xe,We,De={})=>new Proxy(we,{get:(_e,Ee)=>We.runOutsideAngular(()=>{var He;if(we[Ee])return(null===(He=null==De?void 0:De.spy)||void 0===He?void 0:He.get)&&De.spy.get(Ee,we[Ee]),we[Ee];if(ae.indexOf(Ee)>-1)return()=>{};const $e=Xe.toPromise().then(te=>{const W=te&&te[Ee];return"function"==typeof W?W.bind(te):W&&W.then?W.then(ne=>We.run(()=>ne)):We.run(()=>W)});return new Proxy(()=>{},{get:(te,W)=>$e[W],apply:(te,W,ne)=>$e.then(ge=>{var ie;const Ne=ge&&ge(...ne);return(null===(ie=null==De?void 0:De.spy)||void 0===ie?void 0:ie.apply)&&De.spy.apply(Ee,ne,Ne),Ne})})})}),pe=(we,Xe)=>{Xe.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(De=>{Object.defineProperty(we.prototype,De,Object.getOwnPropertyDescriptor(We.prototype||We,De))})})};class re{constructor(Xe){return Xe}}const de=new m.OlP("angularfire2.app.options"),le=new m.OlP("angularfire2.app.name");function j(we,Xe,We){const _e="object"==typeof We&&We||{};_e.name=_e.name||"string"==typeof We&&We||"[DEFAULT]";const He=Y.Z.apps.filter($e=>$e&&$e.name===_e.name)[0]||Xe.runOutsideAngular(()=>Y.Z.initializeApp(we,_e));try{JSON.stringify(we)!==JSON.stringify(He.options)&&$("error",`${He.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch($e){}return new re(He)}const $=(we,...Xe)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[we](...Xe)},J={provide:re,useFactory:j,deps:[de,m.R0b,[new m.FiY,le]]};let qe=(()=>{class we{constructor(We){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",m.q4F.full,We.toString())}static initializeApp(We,De){return{ngModule:we,providers:[{provide:de,useValue:We},{provide:le,useValue:De}]}}}return we.\u0275fac=function(We){return new(We||we)(m.LFG(m.Lbi))},we.\u0275mod=m.oAB({type:we}),we.\u0275inj=m.cJS({providers:[J]}),we})();function Ae(we,Xe,We,De,_e){const[,Ee,He]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===we)||[];if(Ee)return function Re(we,Xe){try{return we.toString()===Xe.toString()}catch(We){return we===Xe}}(_e,He)||(fe("error",`${Xe} was already initialized on the ${We} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:_e,was:He})),Ee;{const $e=De();return globalThis.\u0275AngularfireInstanceCache.push([we,$e,_e]),$e}}const Le=!!ot.hot,fe=(we,...Xe)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[we](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,Te,k)=>{k.d(Te,{q4:()=>Bl,iC:()=>ql,HU:()=>Su,vb:()=>yd,JM:()=>Qs});var m=k(5e3),Y=k(5867),O=k(5861),ae=k(9681),X=k(2090),pe=k(4859),re=k(1877);const de="@firebase/installations",$="w:0.5.7",J="FIS_v2",we=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Xe(D){return D instanceof X.ZR&&D.code.includes("request-failed")}function We({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function De(D){return{token:D.token,requestStatus:2,expiresIn:ne(D.expiresIn),creationTime:Date.now()}}function _e(D,C){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,O.Z)(function*(D,C){const F=(yield C.json()).error;return we.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function He({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function $e(D,{refreshToken:C}){const N=He(D);return N.append("Authorization",function ge(D){return`${J} ${D}`}(C)),N}function te(D){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function ne(D){return Number(D.replace("s","000"))}function ie(D,C){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:N}){const F=We(D),K=He(D),ee=C.getImmediate({optional:!0});if(ee){const wt=yield ee.getHeartbeatsHeader();wt&&K.append("x-firebase-client",wt)}const Me={method:"POST",headers:K,body:JSON.stringify({fid:N,authVersion:J,appId:D.appId,sdkVersion:$})},Ze=yield te(()=>fetch(F,Me));if(Ze.ok){const wt=yield Ze.json();return{fid:wt.fid||N,registrationStatus:2,refreshToken:wt.refreshToken,authToken:De(wt.authToken)}}throw yield _e("Create Installation",Ze)})).apply(this,arguments)}function oe(D){return new Promise(C=>{setTimeout(C,D)})}const Qt=/^[cdef][\w-]{21}$/;function at(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const N=function gt(D){return function It(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Qt.test(N)?N:""}catch(D){return""}}function un(D){return`${D.appName}!${D.appId}`}const ln=new Map;function Di(D,C){const N=un(D);Jt(N,C),function Gt(D,C){const N=function ui(){return!lr&&"BroadcastChannel"in self&&(lr=new BroadcastChannel("[Firebase] FID Change"),lr.onmessage=D=>{Jt(D.data.key,D.data.fid)}),lr}();N&&N.postMessage({key:D,fid:C}),function Ms(){0===ln.size&&lr&&(lr.close(),lr=null)}()}(N,C)}function Jt(D,C){const N=ln.get(D);if(N)for(const F of N)F(C)}let lr=null;const Fr="firebase-installations-store";let rs=null;function is(){return rs||(rs=(0,X.X3)("firebase-installations-database",1,(D,C)=>{0===C&&D.createObjectStore(Fr)})),rs}function ut(D,C){return qr.apply(this,arguments)}function qr(){return(qr=(0,O.Z)(function*(D,C){const N=un(D),K=(yield is()).transaction(Fr,"readwrite"),ee=K.objectStore(Fr),Se=yield ee.get(N);return yield ee.put(C,N),yield K.complete,(!Se||Se.fid!==C.fid)&&Di(D,C.fid),C})).apply(this,arguments)}function er(D){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,O.Z)(function*(D){const C=un(D),F=(yield is()).transaction(Fr,"readwrite");yield F.objectStore(Fr).delete(C),yield F.complete})).apply(this,arguments)}function li(D,C){return lo.apply(this,arguments)}function lo(){return(lo=(0,O.Z)(function*(D,C){const N=un(D),K=(yield is()).transaction(Fr,"readwrite"),ee=K.objectStore(Fr),Se=yield ee.get(N),Me=C(Se);return void 0===Me?yield ee.delete(N):yield ee.put(Me,N),yield K.complete,Me&&(!Se||Se.fid!==Me.fid)&&Di(D,Me.fid),Me})).apply(this,arguments)}function yn(D){return tr.apply(this,arguments)}function tr(){return(tr=(0,O.Z)(function*(D){let C;const N=yield li(D.appConfig,F=>{const K=xs(F),ee=Ca(D,K);return C=ee.registrationPromise,ee.installationEntry});return""===N.fid?{installationEntry:yield C}:{installationEntry:N,registrationPromise:C}})).apply(this,arguments)}function xs(D){return $t(D||{fid:at(),registrationStatus:0})}function Ca(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(we.create("app-offline"))};const N={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function qt(D,C){return rt.apply(this,arguments)}(D,N);return{installationEntry:N,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:vt(D)}:{installationEntry:C}}function rt(){return(rt=(0,O.Z)(function*(D,C){try{const N=yield ie(D,C);return ut(D.appConfig,N)}catch(N){throw Xe(N)&&409===N.customData.serverCode?yield er(D.appConfig):yield ut(D.appConfig,{fid:C.fid,registrationStatus:0}),N}})).apply(this,arguments)}function vt(D){return cr.apply(this,arguments)}function cr(){return(cr=(0,O.Z)(function*(D){let C=yield Gi(D.appConfig);for(;1===C.registrationStatus;)yield oe(100),C=yield Gi(D.appConfig);if(0===C.registrationStatus){const{installationEntry:N,registrationPromise:F}=yield yn(D);return F||N}return C})).apply(this,arguments)}function Gi(D){return li(D,C=>{if(!C)throw we.create("installation-not-found");return $t(C)})}function $t(D){return function co(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function wr(D,C){return dr.apply(this,arguments)}function dr(){return(dr=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},N){const F=ct(D,N),K=$e(D,N),ee=C.getImmediate({optional:!0});if(ee){const wt=yield ee.getHeartbeatsHeader();wt&&K.append("x-firebase-client",wt)}const Me={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:$,appId:D.appId}})},Ze=yield te(()=>fetch(F,Me));if(Ze.ok)return De(yield Ze.json());throw yield _e("Generate Auth Token",Ze)})).apply(this,arguments)}function ct(D,{fid:C}){return`${We(D)}/${C}/authTokens:generate`}function br(D){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,O.Z)(function*(D,C=!1){let N;const F=yield li(D.appConfig,ee=>{if(!Ft(ee))throw we.create("not-registered");const Se=ee.authToken;if(!C&&B(Se))return ee;if(1===Se.requestStatus)return N=Ke(D,C),ee;{if(!navigator.onLine)throw we.create("app-offline");const Me=G(ee);return N=dt(D,Me),Me}});return N?yield N:F.authToken})).apply(this,arguments)}function Ke(D,C){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,O.Z)(function*(D,C){let N=yield Qe(D.appConfig);for(;1===N.authToken.requestStatus;)yield oe(100),N=yield Qe(D.appConfig);const F=N.authToken;return 0===F.requestStatus?br(D,C):F})).apply(this,arguments)}function Qe(D){return li(D,C=>{if(!Ft(C))throw we.create("not-registered");return function ce(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function dt(D,C){return jt.apply(this,arguments)}function jt(){return(jt=(0,O.Z)(function*(D,C){try{const N=yield wr(D,C),F=Object.assign(Object.assign({},C),{authToken:N});return yield ut(D.appConfig,F),N}catch(N){if(!Xe(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield ut(D.appConfig,F)}else yield er(D.appConfig);throw N}})).apply(this,arguments)}function Ft(D){return void 0!==D&&2===D.registrationStatus}function B(D){return 2===D.requestStatus&&!function L(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function G(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function Ue(){return(Ue=(0,O.Z)(function*(D){const C=D,{installationEntry:N,registrationPromise:F}=yield yn(C);return F?F.catch(console.error):br(C).catch(console.error),N.fid})).apply(this,arguments)}function Zt(){return(Zt=(0,O.Z)(function*(D,C=!1){const N=D;return yield Ir(N),(yield br(N,C)).token})).apply(this,arguments)}function Ir(D){return zt.apply(this,arguments)}function zt(){return(zt=(0,O.Z)(function*(D){const{registrationPromise:C}=yield yn(D);C&&(yield C)})).apply(this,arguments)}function Zn(D){return we.create("missing-app-config-values",{valueName:D})}const Aa="installations",Oe=D=>{const C=D.getProvider("app").getImmediate(),N=function ss(D){if(!D||!D.options)throw Zn("App Configuration");if(!D.name)throw Zn("App Name");const C=["projectId","apiKey","appId"];for(const N of C)if(!D.options[N])throw Zn(N);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:N,heartbeatServiceProvider:(0,ae._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Pt=D=>{const C=D.getProvider("app").getImmediate(),N=(0,ae._getProvider)(C,Aa).getImmediate();return{getId:()=>function Q(D){return Ue.apply(this,arguments)}(N),getToken:K=>function mt(D){return Zt.apply(this,arguments)}(N,K)}};(function fn(){(0,ae._registerComponent)(new pe.wA(Aa,Oe,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("installations-internal",Pt,"PRIVATE"))})(),(0,ae.registerVersion)(de,"0.5.7"),(0,ae.registerVersion)(de,"0.5.7","esm2017");const hr="@firebase/remote-config",Rn=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Wh{constructor(C,N,F,K){this.client=C,this.storage=N,this.storageCache=F,this.logger=K}isCachedDataFresh(C,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-N,K=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${K}.`),K}fetch(C){var N=this;return(0,O.Z)(function*(){const[F,K]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(K&&N.isCachedDataFresh(C.cacheMaxAgeMillis,F))return K;C.eTag=K&&K.eTag;const ee=yield N.client.fetch(C),Se=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Se.push(N.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Se),ee})()}}function Zc(D=navigator){return D.languages&&D.languages[0]||D.language}class uu{constructor(C,N,F,K,ee,Se){this.firebaseInstallations=C,this.sdkVersion=N,this.namespace=F,this.projectId=K,this.apiKey=ee,this.appId=Se}fetch(C){var N=this;return(0,O.Z)(function*(){const[F,K]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Me={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Ze={sdk_version:N.sdkVersion,app_instance_id:F,app_instance_id_token:K,app_id:N.appId,language_code:Zc()},wt={method:"POST",headers:Me,body:JSON.stringify(Ze)},Rt=fetch(Se,wt),Dt=new Promise((_i,Pi)=>{C.signal.addEventListener(()=>{const To=new Error("The operation was aborted.");To.name="AbortError",Pi(To)})});let qn;try{yield Promise.race([Rt,Dt]),qn=yield Rt}catch(_i){let Pi="fetch-client-network";throw"AbortError"===_i.name&&(Pi="fetch-timeout"),Rn.create(Pi,{originalErrorMessage:_i.message})}let An=qn.status;const aa=qn.headers.get("ETag")||void 0;let Co,Vr;if(200===qn.status){let _i;try{_i=yield qn.json()}catch(Pi){throw Rn.create("fetch-client-parse",{originalErrorMessage:Pi.message})}Co=_i.entries,Vr=_i.state}if("INSTANCE_STATE_UNSPECIFIED"===Vr?An=500:"NO_CHANGE"===Vr?An=304:("NO_TEMPLATE"===Vr||"EMPTY_CONFIG"===Vr)&&(Co={}),304!==An&&200!==An)throw Rn.create("fetch-status",{httpStatus:An});return{status:An,eTag:aa,config:Co}})()}}class tg{constructor(C,N){this.client=C,this.storage=N}fetch(C){var N=this;return(0,O.Z)(function*(){const F=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:N,backoffCount:F}){var K=this;return(0,O.Z)(function*(){yield function $n(D,C){return new Promise((N,F)=>{const K=Math.max(C-Date.now(),0),ee=setTimeout(N,K);D.addEventListener(()=>{clearTimeout(ee),F(Rn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,N);try{const ee=yield K.client.fetch(C);return yield K.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function Yc(D){if(!(D instanceof X.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ee))throw ee;const Se={throttleEndTimeMillis:Date.now()+(0,X.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(Se),K.attemptFetch(C,Se)}})()}}class yl{constructor(C,N,F,K,ee){this.app=C,this._client=N,this._storageCache=F,this._storage=K,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _l(D,C){const N=D.target.error||void 0;return Rn.create(C,{originalErrorMessage:N&&N.message})}const ks="app_namespace_store";class sg{constructor(C,N,F,K=function ig(){return new Promise((D,C)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=F=>{C(_l(F,"storage-open"))},N.onsuccess=F=>{D(F.target.result)},N.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(ks,{keyPath:"compositeKey"})}}catch(N){C(Rn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=C,this.appName=N,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var N=this;return(0,O.Z)(function*(){const F=yield N.openDbPromise;return new Promise((K,ee)=>{const Me=F.transaction([ks],"readonly").objectStore(ks),Ze=N.createCompositeKey(C);try{const wt=Me.get(Ze);wt.onerror=Rt=>{ee(_l(Rt,"storage-get"))},wt.onsuccess=Rt=>{const Dt=Rt.target.result;K(Dt?Dt.value:void 0)}}catch(wt){ee(Rn.create("storage-get",{originalErrorMessage:wt&&wt.message}))}})})()}set(C,N){var F=this;return(0,O.Z)(function*(){const K=yield F.openDbPromise;return new Promise((ee,Se)=>{const Ze=K.transaction([ks],"readwrite").objectStore(ks),wt=F.createCompositeKey(C);try{const Rt=Ze.put({compositeKey:wt,value:N});Rt.onerror=Dt=>{Se(_l(Dt,"storage-set"))},Rt.onsuccess=()=>{ee()}}catch(Rt){Se(Rn.create("storage-set",{originalErrorMessage:Rt&&Rt.message}))}})})()}delete(C){var N=this;return(0,O.Z)(function*(){const F=yield N.openDbPromise;return new Promise((K,ee)=>{const Me=F.transaction([ks],"readwrite").objectStore(ks),Ze=N.createCompositeKey(C);try{const wt=Me.delete(Ze);wt.onerror=Rt=>{ee(_l(Rt,"storage-delete"))},wt.onsuccess=()=>{K()}}catch(wt){ee(Rn.create("storage-delete",{originalErrorMessage:wt&&wt.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Jc{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const N=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),K=C.storage.getActiveConfig(),ee=yield N;ee&&(C.lastFetchStatus=ee);const Se=yield F;Se&&(C.lastSuccessfulFetchTimestampMillis=Se);const Me=yield K;Me&&(C.activeConfig=Me)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function po(){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,O.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(D){return!1}})).apply(this,arguments)}!function zo(){(0,ae._registerComponent)(new pe.wA("remote-config",function D(C,{instanceIdentifier:N}){const F=C.getProvider("app").getImmediate(),K=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Rn.create("registration-window");if(!(0,X.hl)())throw Rn.create("indexed-db-unavailable");const{projectId:ee,apiKey:Se,appId:Me}=F.options;if(!ee)throw Rn.create("registration-project-id");if(!Se)throw Rn.create("registration-api-key");if(!Me)throw Rn.create("registration-app-id");const Ze=new sg(Me,F.name,N=N||"firebase"),wt=new Jc(Ze),Rt=new re.Yd(hr);Rt.logLevel=re.in.ERROR;const Dt=new uu(K,ae.SDK_VERSION,N,ee,Se,Me),qn=new tg(Dt,Ze),An=new Wh(qn,Ze,wt,Rt),aa=new yl(F,An,wt,Ze,Rt);return function Ci(D){const C=(0,X.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(aa),aa},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(hr,"0.3.6"),(0,ae.registerVersion)(hr,"0.3.6","esm2017")}();const vl="/firebase-messaging-sw.js",Fs="/firebase-cloud-messaging-push-scope",Wr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",go="google.c.a.c_id",Ma="google.c.a.c_l",Xc="google.c.a.ts",og="google.c.a.e";var Ls=(()=>{return(D=Ls||(Ls={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Ls;var D})();function hi(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cu(D){const N=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(N),K=new Uint8Array(F.length);for(let ee=0;ee<F.length;++ee)K[ee]=F.charCodeAt(ee);return K}const du="fcm_token_details_db",pr="fcm_token_object_Store";function Zh(D){return hu.apply(this,arguments)}function hu(){return hu=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(du))return null;let C=null;return(yield(0,X.X3)(du,5,function(){var F=(0,O.Z)(function*(K,ee,Se,Me){var Ze;if(ee<2||!K.objectStoreNames.contains(pr))return;const wt=Me.objectStore(pr),Rt=yield wt.index("fcmSenderId").get(D);if(yield wt.clear(),Rt)if(2===ee){const Dt=Rt;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;C={token:Dt.fcmToken,createTime:null!==(Ze=Dt.createTime)&&void 0!==Ze?Ze:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:hi(Dt.vapidKey)}}}else if(3===ee){const Dt=Rt;C={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:hi(Dt.auth),p256dh:hi(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:hi(Dt.vapidKey)}}}else if(4===ee){const Dt=Rt;C={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:hi(Dt.auth),p256dh:hi(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:hi(Dt.vapidKey)}}}});return function(K,ee,Se,Me){return F.apply(this,arguments)}}())).close(),yield(0,X.Lj)(du),yield(0,X.Lj)("fcm_vapid_details_db"),yield(0,X.Lj)("undefined"),ed(C)?C:null}),hu.apply(this,arguments)}function ed(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const ls="firebase-messaging-store";let xa=null;function El(){return xa||(xa=(0,X.X3)("firebase-messaging-database",1,(D,C)=>{0===C&&D.createObjectStore(ls)})),xa}function mn(D){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,O.Z)(function*(D){const C=yo(D),F=yield(yield El()).transaction(ls).objectStore(ls).get(C);if(F)return F;{const K=yield Zh(D.appConfig.senderId);if(K)return yield Vs(D,K),K}})).apply(this,arguments)}function Vs(D,C){return an.apply(this,arguments)}function an(){return(an=(0,O.Z)(function*(D,C){const N=yo(D),K=(yield El()).transaction(ls,"readwrite");return yield K.objectStore(ls).put(C,N),yield K.complete,C})).apply(this,arguments)}function td(D){return mo.apply(this,arguments)}function mo(){return(mo=(0,O.Z)(function*(D){const C=yo(D),F=(yield El()).transaction(ls,"readwrite");yield F.objectStore(ls).delete(C),yield F.complete})).apply(this,arguments)}function yo({appConfig:D}){return D.appId}const On=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Na(D,C){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,O.Z)(function*(D,C){const N=yield Bs(D),F=ht(C),K={method:"POST",headers:N,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch(Yr(D.appConfig),K)).json()}catch(Se){throw On.create("token-subscribe-failed",{errorInfo:Se})}if(ee.error)throw On.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw On.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Cr(D,C){return Us.apply(this,arguments)}function Us(){return(Us=(0,O.Z)(function*(D,C){const N=yield Bs(D),F=ht(C.subscriptionOptions),K={method:"PATCH",headers:N,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch(`${Yr(D.appConfig)}/${C.token}`,K)).json()}catch(Se){throw On.create("token-update-failed",{errorInfo:Se})}if(ee.error)throw On.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw On.create("token-update-no-token");return ee.token})).apply(this,arguments)}function cs(D,C){return gu.apply(this,arguments)}function gu(){return(gu=(0,O.Z)(function*(D,C){const F={method:"DELETE",headers:yield Bs(D)};try{const ee=yield(yield fetch(`${Yr(D.appConfig)}/${C}`,F)).json();if(ee.error)throw On.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(K){throw On.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function Yr({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Bs(D){return js.apply(this,arguments)}function js(){return(js=(0,O.Z)(function*({appConfig:D,installations:C}){const N=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function ht({p256dh:D,auth:C,endpoint:N,vapidKey:F}){const K={web:{endpoint:N,auth:C,p256dh:D}};return F!==Wr&&(K.web.applicationPubKey=F),K}const mu=6048e5;function Ra(D){return yu.apply(this,arguments)}function yu(){return(yu=(0,O.Z)(function*(D){const C=yield nd(D.swRegistration,D.vapidKey),N={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:hi(C.getKey("auth")),p256dh:hi(C.getKey("p256dh"))},F=yield mn(D.firebaseDependencies);if(F){if(Zo(F.subscriptionOptions,N))return Date.now()>=F.createTime+mu?wl(D,{token:F.token,createTime:Date.now(),subscriptionOptions:N}):F.token;try{yield cs(D.firebaseDependencies,F.token)}catch(K){console.warn(K)}return be(D.firebaseDependencies,N)}return be(D.firebaseDependencies,N)})).apply(this,arguments)}function _u(D){return vu.apply(this,arguments)}function vu(){return(vu=(0,O.Z)(function*(D){const C=yield mn(D.firebaseDependencies);C&&(yield cs(D.firebaseDependencies,C.token),yield td(D.firebaseDependencies));const N=yield D.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function wl(D,C){return bl.apply(this,arguments)}function bl(){return(bl=(0,O.Z)(function*(D,C){try{const N=yield Cr(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:N,createTime:Date.now()});return yield Vs(D.firebaseDependencies,F),N}catch(N){throw yield _u(D),N}})).apply(this,arguments)}function be(D,C){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,O.Z)(function*(D,C){const F={token:yield Na(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Vs(D,F),F.token})).apply(this,arguments)}function nd(D,C){return _n.apply(this,arguments)}function _n(){return(_n=(0,O.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:cu(C)})})).apply(this,arguments)}function Zo(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function Yo(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Qr(D,C){if(!C.notification)return;D.notification={};const N=C.notification.title;N&&(D.notification.title=N);const F=C.notification.body;F&&(D.notification.body=F);const K=C.notification.image;K&&(D.notification.image=K)}(C,D),function Il(D,C){!C.data||(D.data=C.data)}(C,D),function Dl(D,C){if(!C.fcmOptions)return;D.fcmOptions={};const N=C.fcmOptions.link;N&&(D.fcmOptions.link=N);const F=C.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(C,D),C}function rd(D){return"object"==typeof D&&!!D&&go in D}function Cl(D,C){const N=[];for(let F=0;F<D.length;F++)N.push(D.charAt(F)),F<C.length&&N.push(C.charAt(F));return N.join("")}function $s(D){return On.create("missing-app-config-values",{valueName:D})}Cl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Cl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class gr{constructor(C,N,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Eu(D){if(!D||!D.options)throw $s("App Configuration Object");if(!D.name)throw $s("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:N}=D;for(const F of C)if(!N[F])throw $s(F);return{appName:D.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:K,installations:N,analyticsProvider:F}}_delete(){return Promise.resolve()}}function fi(D){return wu.apply(this,arguments)}function wu(){return(wu=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(vl,{scope:Fs}),D.swRegistration.update().catch(()=>{})}catch(C){throw On.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function Hs(D,C){return Si.apply(this,arguments)}function Si(){return(Si=(0,O.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield fi(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw On.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function Tl(D,C){return bu.apply(this,arguments)}function bu(){return(bu=(0,O.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Wr)})).apply(this,arguments)}function Al(){return(Al=(0,O.Z)(function*(D,C){if(!navigator)throw On.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw On.create("permission-blocked");return yield Tl(D,null==C?void 0:C.vapidKey),yield Hs(D,null==C?void 0:C.serviceWorkerRegistration),Ra(D)})).apply(this,arguments)}function Oa(D,C,N){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,O.Z)(function*(D,C,N){const F=Sl(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:N[go],message_name:N[Ma],message_time:N[Xc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Sl(D){switch(D){case Ls.NOTIFICATION_CLICKED:return"notification_open";case Ls.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function id(){return(id=(0,O.Z)(function*(D,C){const N=C.data;if(!N.isFirebaseMessaging)return;D.onMessageHandler&&N.messageType===Ls.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Yo(N)):D.onMessageHandler.next(Yo(N)));const F=N.data;rd(F)&&"1"===F[og]&&(yield Oa(D,N.messageType,F))})).apply(this,arguments)}const xl="@firebase/messaging",sd=D=>{const C=new gr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function Ml(D,C){return id.apply(this,arguments)}(C,N)),C},vo=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function Iu(D,C){return Al.apply(this,arguments)}(C,F)}};function ad(){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,O.Z)(function*(){try{yield(0,X.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function od(){(0,ae._registerComponent)(new pe.wA("messaging",sd,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("messaging-internal",vo,"PRIVATE")),(0,ae.registerVersion)(xl,"0.9.11"),(0,ae.registerVersion)(xl,"0.9.11","esm2017")}();const Rl="analytics",Ny="firebase_id",Pa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Du="https://www.googletagmanager.com/gtag/js",Hn=new re.Yd("@firebase/analytics");function ud(D){return Promise.all(D.map(C=>C.catch(N=>N)))}function ag(D,C){const N=document.createElement("script");N.src=`${Du}?l=${D}&id=${C}`,N.async=!0,document.head.appendChild(N)}function Jo(D,C,N,F,K,ee){return ld.apply(this,arguments)}function ld(){return(ld=(0,O.Z)(function*(D,C,N,F,K,ee){const Se=F[K];try{if(Se)yield C[Se];else{const Ze=(yield ud(N)).find(wt=>wt.measurementId===K);Ze&&(yield C[Ze.appId])}}catch(Me){Hn.error(Me)}D("config",K,ee)})).apply(this,arguments)}function Pl(D,C,N,F,K){return wo.apply(this,arguments)}function wo(){return(wo=(0,O.Z)(function*(D,C,N,F,K){try{let ee=[];if(K&&K.send_to){let Se=K.send_to;Array.isArray(Se)||(Se=[Se]);const Me=yield ud(N);for(const Ze of Se){const wt=Me.find(Dt=>Dt.measurementId===Ze),Rt=wt&&C[wt.appId];if(!Rt){ee=[];break}ee.push(Rt)}}0===ee.length&&(ee=Object.values(C)),yield Promise.all(ee),D("event",F,K||{})}catch(ee){Hn.error(ee)}})).apply(this,arguments)}function ug(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(Du))return C;return null}const kn=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Xr=new class Jr{constructor(C={},N=1e3){this.throttleMetadata=C,this.intervalMillis=N}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,N){this.throttleMetadata[C]=N}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Xo(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function dd(D){return pn.apply(this,arguments)}function pn(){return(pn=(0,O.Z)(function*(D){var C;const{appId:N,apiKey:F}=D,K={method:"GET",headers:Xo(F)},ee=Pa.replace("{app-id}",N),Se=yield fetch(ee,K);if(200!==Se.status&&304!==Se.status){let Me="";try{const Ze=yield Se.json();(null===(C=Ze.error)||void 0===C?void 0:C.message)&&(Me=Ze.error.message)}catch(Ze){}throw kn.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:Me})}return Se.json()})).apply(this,arguments)}function Jh(D){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,O.Z)(function*(D,C=Xr,N){const{appId:F,apiKey:K,measurementId:ee}=D.options;if(!F)throw kn.create("no-app-id");if(!K){if(ee)return{measurementId:ee,appId:F};throw kn.create("no-api-key")}const Se=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Me=new kl;return setTimeout((0,O.Z)(function*(){Me.abort()}),void 0!==N?N:6e4),Cu({appId:F,apiKey:K,measurementId:ee},Se,Me,C)})).apply(this,arguments)}function Cu(D,C,N){return pi.apply(this,arguments)}function pi(){return(pi=(0,O.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:N},F,K=Xr){const{appId:ee,measurementId:Se}=D;try{yield Vt(F,C)}catch(Me){if(Se)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Me.message}]`),{appId:ee,measurementId:Se};throw Me}try{const Me=yield dd(D);return K.deleteThrottleMetadata(ee),Me}catch(Me){if(!hd(Me)){if(K.deleteThrottleMetadata(ee),Se)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Me.message}]`),{appId:ee,measurementId:Se};throw Me}const Ze=503===Number(Me.customData.httpStatus)?(0,X.$s)(N,K.intervalMillis,30):(0,X.$s)(N,K.intervalMillis),wt={throttleEndTimeMillis:Date.now()+Ze,backoffCount:N+1};return K.setThrottleMetadata(ee,wt),Hn.debug(`Calling attemptFetch again in ${Ze} millis`),Cu(D,wt,F,K)}})).apply(this,arguments)}function Vt(D,C){return new Promise((N,F)=>{const K=Math.max(C-Date.now(),0),ee=setTimeout(N,K);D.addEventListener(()=>{clearTimeout(ee),F(kn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function hd(D){if(!(D instanceof X.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class kl{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function fd(){return bo.apply(this,arguments)}function bo(){return(bo=(0,O.Z)(function*(){if(!(0,X.hl)())return Hn.warn(kn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(D){return Hn.warn(kn.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function fs(){return(fs=(0,O.Z)(function*(D,C,N,F,K,ee,Se){var Me;const Ze=Jh(D);Ze.then(An=>{N[An.measurementId]=An.appId,D.options.measurementId&&An.measurementId!==D.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${An.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(An=>Hn.error(An)),C.push(Ze);const wt=fd().then(An=>{if(An)return F.getId()}),[Rt,Dt]=yield Promise.all([Ze,wt]);ug()||ag(ee,Rt.measurementId),K("js",new Date);const qn=null!==(Me=null==Se?void 0:Se.config)&&void 0!==Me?Me:{};return qn.origin="firebase",qn.update=!0,null!=Dt&&(qn[Ny]=Dt),K("config",Rt.measurementId,qn),Rt.measurementId})).apply(this,arguments)}class ea{constructor(C){this.app=C}_delete(){return delete gi[this.app.options.appId],Promise.resolve()}}let gi={},zs=[];const ka={};let Ws,Wi,zi="dataLayer",Ll=!1;function xi(D,C,N){!function ta(){const D=[];if((0,X.ru)()&&D.push("This is a browser extension environment."),(0,X.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,K)=>`(${K+1}) ${F}`).join(" "),N=kn.create("invalid-analytics-context",{errorInfo:C});Hn.warn(N.message)}}();const F=D.options.appId;if(!F)throw kn.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw kn.create("no-api-key");Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=gi[F])throw kn.create("already-exists",{id:F});if(!Ll){!function hs(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(zi);const{wrappedGtag:ee,gtagCore:Se}=function Qh(D,C,N,F,K){let ee=function(...Se){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ee=window[K]),window[K]=function cd(D,C,N,F){function ee(){return(ee=(0,O.Z)(function*(Se,Me,Ze){try{"event"===Se?yield Pl(D,C,N,Me,Ze):"config"===Se?yield Jo(D,C,N,F,Me,Ze):D("set",Me)}catch(wt){Hn.error(wt)}})).apply(this,arguments)}return function K(Se,Me,Ze){return ee.apply(this,arguments)}}(ee,D,C,N),{gtagCore:ee,wrappedGtag:window[K]}}(gi,zs,ka,zi,"gtag");Wi=ee,Ws=Se,Ll=!0}return gi[F]=function Gn(D,C,N,F,K,ee,Se){return fs.apply(this,arguments)}(D,zs,ka,C,Ws,zi,N),new ea(D)}function Fa(){return(Fa=(0,O.Z)(function*(D,C,N,F,K){if(K&&K.global)D("event",N,F);else{const ee=yield C;D("event",N,Object.assign(Object.assign({},F),{send_to:ee}))}})).apply(this,arguments)}function Cn(){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,O.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(D){return!1}})).apply(this,arguments)}const Zs="@firebase/analytics";!function hg(){(0,ae._registerComponent)(new pe.wA(Rl,(C,{options:N})=>xi(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,ae._registerComponent)(new pe.wA("analytics-internal",function D(C){try{const N=C.getProvider(Rl).getImmediate();return{logEvent:(F,K,ee)=>function dg(D,C,N,F){D=(0,X.m9)(D),function na(D,C,N,F,K){return Fa.apply(this,arguments)}(Wi,gi[D.app.options.appId],C,N,F).catch(K=>Hn.error(K))}(N,F,K,ee)}}catch(N){throw kn.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,ae.registerVersion)(Zs,"0.7.7"),(0,ae.registerVersion)(Zs,"0.7.7","esm2017")}();var Ys=k(4408),Tu=k(7565);const Vl=new class En extends Tu.v{}(class gs extends Ys.o{constructor(C,N){super(C,N),this.scheduler=C,this.work=N}schedule(C,N=0){return N>0?super.schedule(C,N):(this.delay=N,this.state=C,this.scheduler.flush(this),this)}execute(C,N){return N>0||this.closed?super.execute(C,N):this._execute(C,N)}requestAsyncId(C,N,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,N,F):C.flush(this)}});var fg=k(4986),Ul=k(8505),Sr=k(9468),mi=k(5363);const Bl=new m.GfV("7.3.0"),ms="__angularfire_symbol__analyticsIsSupportedValue",Oi="__angularfire_symbol__analyticsIsSupported",Zi="__angularfire_symbol__remoteConfigIsSupportedValue",La="__angularfire_symbol__remoteConfigIsSupported",jl="__angularfire_symbol__messagingIsSupportedValue",$l="__angularfire_symbol__messagingIsSupported";function Qs(D,C,N){if(C){if(1===C.length)return C[0];const ee=C.filter(Se=>Se.app===N);if(1===ee.length)return ee[0]}return N.container.getProvider(D).getImmediate({optional:!0})}globalThis[Oi]||(globalThis[Oi]=Cn().then(D=>globalThis[ms]=D).catch(()=>globalThis[ms]=!1)),globalThis[$l]||(globalThis[$l]=ad().then(D=>globalThis[jl]=D).catch(()=>globalThis[jl]=!1)),globalThis[La]||(globalThis[La]=po().then(D=>globalThis[Zi]=D).catch(()=>globalThis[Zi]=!1));const yd=(D,C)=>{const N=C?[C]:(0,Y.C6)(),F=[];return N.forEach(K=>{K.container.getProvider(D).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function Io(){}class Au{constructor(C,N=Vl){this.zone=C,this.delegate=N}now(){return this.delegate.now()}schedule(C,N,F){const K=this.zone;return this.delegate.schedule(function(Se){K.runGuarded(()=>{C.apply(this,[Se])})},N,F)}}class Yi{constructor(C){this.zone=C,this.task=null}call(C,N){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Io,{},Io,Io)),N.pipe((0,Ul.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Su=(()=>{class D{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new Au(Zone.current)),this.insideAngular=N.run(()=>new Au(Zone.current,fg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(N){return new(N||D)(m.LFG(m.R0b))},D.\u0275prov=m.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Qi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function ql(D){return Qi(),function Do(D){return function(N){return(N=N.lift(new Yi(D.ngZone))).pipe((0,Sr.R)(D.outsideAngular),(0,mi.Q)(D.insideAngular))}}(Qi())(D)}},2090:(ot,Te,k)=>{k.d(Te,{BH:()=>Ae,LL:()=>It,ZR:()=>oe,zI:()=>ge,US:()=>re,tV:()=>j,L:()=>le,$s:()=>co,r3:()=>Jt,Sg:()=>Re,ne:()=>ut,vZ:()=>Ms,ZB:()=>J,Lj:()=>jt,pd:()=>rs,m9:()=>ct,z$:()=>Le,jU:()=>Xe,ru:()=>We,d:()=>_e,xb:()=>lr,w1:()=>Ee,hl:()=>W,uI:()=>fe,UG:()=>we,b$:()=>De,G6:()=>te,Mn:()=>He,X3:()=>dt,xO:()=>Hi,zd:()=>Fr,eu:()=>ne});var m=k(5861);const X=function(B){const L=[];let G=0;for(let ce=0;ce<B.length;ce++){let Q=B.charCodeAt(ce);Q<128?L[G++]=Q:Q<2048?(L[G++]=Q>>6|192,L[G++]=63&Q|128):55296==(64512&Q)&&ce+1<B.length&&56320==(64512&B.charCodeAt(ce+1))?(Q=65536+((1023&Q)<<10)+(1023&B.charCodeAt(++ce)),L[G++]=Q>>18|240,L[G++]=Q>>12&63|128,L[G++]=Q>>6&63|128,L[G++]=63&Q|128):(L[G++]=Q>>12|224,L[G++]=Q>>6&63|128,L[G++]=63&Q|128)}return L},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ce=[];for(let Q=0;Q<B.length;Q+=3){const Ue=B[Q],mt=Q+1<B.length,Zt=mt?B[Q+1]:0,Ir=Q+2<B.length,zt=Ir?B[Q+2]:0;let hn=(15&Zt)<<2|zt>>6,nr=63&zt;Ir||(nr=64,mt||(hn=64)),ce.push(G[Ue>>2],G[(3&Ue)<<4|Zt>>4],G[hn],G[nr])}return ce.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(X(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let G=0,ce=0;for(;G<B.length;){const Q=B[G++];if(Q<128)L[ce++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ue=B[G++];L[ce++]=String.fromCharCode((31&Q)<<6|63&Ue)}else if(Q>239&&Q<365){const Ir=((7&Q)<<18|(63&B[G++])<<12|(63&B[G++])<<6|63&B[G++])-65536;L[ce++]=String.fromCharCode(55296+(Ir>>10)),L[ce++]=String.fromCharCode(56320+(1023&Ir))}else{const Ue=B[G++],mt=B[G++];L[ce++]=String.fromCharCode((15&Q)<<12|(63&Ue)<<6|63&mt)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const G=L?this.charToByteMapWebSafe_:this.charToByteMap_,ce=[];for(let Q=0;Q<B.length;){const Ue=G[B.charAt(Q++)],Zt=Q<B.length?G[B.charAt(Q)]:0;++Q;const zt=Q<B.length?G[B.charAt(Q)]:64;++Q;const Nt=Q<B.length?G[B.charAt(Q)]:64;if(++Q,null==Ue||null==Zt||null==zt||null==Nt)throw Error();ce.push(Ue<<2|Zt>>4),64!==zt&&(ce.push(Zt<<4&240|zt>>2),64!==Nt&&ce.push(zt<<6&192|Nt))}return ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},le=function(B){return function(B){const L=X(B);return re.encodeByteArray(L,!0)}(B).replace(/\./g,"")},j=function(B){try{return re.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function J(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const G in L)!L.hasOwnProperty(G)||!qe(G)||(B[G]=J(B[G],L[G]));return B}function qe(B){return"__proto__"!==B}class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,G)=>{this.resolve=L,this.reject=G})}wrapCallback(L){return(G,ce)=>{G?this.reject(G):this.resolve(ce),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(G):L(G,ce))}}}function Re(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ce=L||"demo-project",Q=B.iat||0,Ue=B.sub||B.user_id;if(!Ue)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mt=Object.assign({iss:`https://securetoken.google.com/${ce}`,aud:ce,iat:Q,exp:Q+3600,auth_time:Q,sub:Ue,user_id:Ue,firebase:{sign_in_provider:"custom",identities:{}}},B);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(mt)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function Xe(){return"object"==typeof self&&self.self===self}function We(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return Le().indexOf("Electron/")>=0}function Ee(){const B=Le();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function He(){return Le().indexOf("MSAppHost/")>=0}function te(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W(){return"object"==typeof indexedDB}function ne(){return new Promise((B,L)=>{try{let G=!0;const ce="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(ce);Q.onsuccess=()=>{Q.result.close(),G||self.indexedDB.deleteDatabase(ce),B(!0)},Q.onupgradeneeded=()=>{G=!1},Q.onerror=()=>{var Ue;L((null===(Ue=Q.error)||void 0===Ue?void 0:Ue.message)||"")}}catch(G){L(G)}})}function ge(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class oe extends Error{constructor(L,G,ce){super(G),this.code=L,this.customData=ce,this.name="FirebaseError",Object.setPrototypeOf(this,oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}}class It{constructor(L,G,ce){this.service=L,this.serviceName=G,this.errors=ce}create(L,...G){const ce=G[0]||{},Q=`${this.service}/${L}`,Ue=this.errors[L],mt=Ue?function Qt(B,L){return B.replace(Nn,(G,ce)=>{const Q=L[ce];return null!=Q?String(Q):`<${ce}?>`})}(Ue,ce):"Error";return new oe(Q,`${this.serviceName}: ${mt} (${Q}).`,ce)}}const Nn=/\{\$([^}]+)}/g;function Jt(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function lr(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function Ms(B,L){if(B===L)return!0;const G=Object.keys(B),ce=Object.keys(L);for(const Q of G){if(!ce.includes(Q))return!1;const Ue=B[Q],mt=L[Q];if(kr(Ue)&&kr(mt)){if(!Ms(Ue,mt))return!1}else if(Ue!==mt)return!1}for(const Q of ce)if(!G.includes(Q))return!1;return!0}function kr(B){return null!==B&&"object"==typeof B}function Hi(B){const L=[];for(const[G,ce]of Object.entries(B))Array.isArray(ce)?ce.forEach(Q=>{L.push(encodeURIComponent(G)+"="+encodeURIComponent(Q))}):L.push(encodeURIComponent(G)+"="+encodeURIComponent(ce));return L.length?"&"+L.join("&"):""}function Fr(B){const L={};return B.replace(/^\?/,"").split("&").forEach(ce=>{if(ce){const[Q,Ue]=ce.split("=");L[decodeURIComponent(Q)]=decodeURIComponent(Ue)}}),L}function rs(B){const L=B.indexOf("?");if(!L)return"";const G=B.indexOf("#",L);return B.substring(L,G>0?G:void 0)}function ut(B,L){const G=new qr(B,L);return G.subscribe.bind(G)}class qr{constructor(L,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{L(this)}).catch(ce=>{this.error(ce)})}next(L){this.forEachObserver(G=>{G.next(L)})}error(L){this.forEachObserver(G=>{G.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,G,ce){let Q;if(void 0===L&&void 0===G&&void 0===ce)throw new Error("Missing Observer.");Q=function Kn(B,L){if("object"!=typeof B||null===B)return!1;for(const G of L)if(G in B&&"function"==typeof B[G])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:G,complete:ce},void 0===Q.next&&(Q.next=li),void 0===Q.error&&(Q.error=li),void 0===Q.complete&&(Q.complete=li);const Ue=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch(mt){}}),this.observers.push(Q),Ue}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,L)}sendOne(L,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{G(this.observers[L])}catch(ce){"undefined"!=typeof console&&console.error&&console.error(ce)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function li(){}function co(B,L=1e3,G=2){const ce=L*Math.pow(G,B),Q=Math.round(.5*ce*(Math.random()-.5)*2);return Math.min(144e5,ce+Q)}function ct(B){return B&&B._delegate?B._delegate:B}function br(B,L){return new Promise((G,ce)=>{B.onsuccess=Q=>{G(Q.target.result)},B.onerror=Q=>{var Ue;ce(`${L}: ${null===(Ue=Q.target.error)||void 0===Ue?void 0:Ue.message}`)}})}class Bt{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,G){return new Ke(this._db.transaction.call(this._db,L,G))}createObjectStore(L,G){return new Ce(this._db.createObjectStore(L,G))}close(){this._db.close()}}class Ke{constructor(L){this._transaction=L,this.complete=new Promise((G,ce)=>{this._transaction.oncomplete=function(){G()},this._transaction.onerror=()=>{ce(this._transaction.error)},this._transaction.onabort=()=>{ce(this._transaction.error)}})}objectStore(L){return new Ce(this._transaction.objectStore(L))}}class Ce{constructor(L){this._store=L}index(L){return new Qe(this._store.index(L))}createIndex(L,G,ce){return new Qe(this._store.createIndex(L,G,ce))}get(L){return br(this._store.get(L),"Error reading from IndexedDB")}put(L,G){return br(this._store.put(L,G),"Error writing to IndexedDB")}delete(L){return br(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return br(this._store.clear(),"Error clearing IndexedDB object store")}}class Qe{constructor(L){this._index=L}get(L){return br(this._index.get(L),"Error reading from IndexedDB")}}function dt(B,L,G){return new Promise((ce,Q)=>{try{const Ue=indexedDB.open(B,L);Ue.onsuccess=mt=>{ce(new Bt(mt.target.result))},Ue.onerror=mt=>{var Zt;Q(`Error opening indexedDB: ${null===(Zt=mt.target.error)||void 0===Zt?void 0:Zt.message}`)},Ue.onupgradeneeded=mt=>{G(new Bt(Ue.result),mt.oldVersion,mt.newVersion,new Ke(Ue.transaction))}}catch(Ue){Q(`Error opening indexedDB: ${Ue.message}`)}})}function jt(B){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,m.Z)(function*(B){return new Promise((L,G)=>{try{const ce=indexedDB.deleteDatabase(B);ce.onsuccess=()=>{L()},ce.onerror=Q=>{var Ue;G(`Error deleting indexedDB database "${B}": ${null===(Ue=Q.target.error)||void 0===Ue?void 0:Ue.message}`)}}catch(ce){G(`Error deleting indexedDB database "${B}": ${ce.message}`)}})})).apply(this,arguments)}},4319:(ot,Te,k)=>{var m=k(5e3);let Y=null;function O(){return Y}const re=new m.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function le(){return(0,m.LFG)($)}()},providedIn:"platform"}),n})();const j=new m.OlP("Location Initialized");let $=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){J()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){J()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(re))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function qe(){return new $((0,m.LFG)(re))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function we(n){const e=(0,m.LFG)(re).location;return new We((0,m.LFG)(de),e&&e.origin||"")}()},providedIn:"root"}),n})();const Xe=new m.OlP("appBaseHref");let We=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const c=this.prepareExternalUrl(o+Le(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){const c=this.prepareExternalUrl(o+Le(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de),m.LFG(Xe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let c=this.prepareExternalUrl(o+Le(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){let c=this.prepareExternalUrl(o+Le(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de),m.LFG(Xe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Re($e(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function He(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Ae,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(m.LFG(fe),m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ee(){return new _e((0,m.LFG)(fe),(0,m.LFG)(de))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}class Os{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fr=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,c)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Os(o.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,c),os(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{os(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function os(n,e){n.context.$implicit=e.item}class Yc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class tg{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const us=new tg,ng=new Yc;let yl=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,m.QGY)(t))return us;if((0,m.F4k)(t))return ng;throw function $n(n,e){return new m.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.sBO,16))},n.\u0275pipe=m.Yjl({name:"async",type:n,pure:!1}),n})(),Kr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function pr(n){return"server"===n}let fu=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new pu((0,m.LFG)(re),window)}),n})();class pu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function xa(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ls(this.window.history)||ls(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ls(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Vs extends class Ko extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){Y||(Y=n)}(new Vs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function td(){return an=an||document.querySelector("base"),an?an.getAttribute("href"):null}();return null==t?null:function yo(n){mo=mo||document.createElement("a"),mo.setAttribute("href",n);const e=mo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){an=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function qo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let mo,an=null;const Dr=new m.OlP("TRANSITION_ID"),Na=[{provide:m.ip1,useFactory:function On(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Dr,re,m.zs3],multi:!0}];class Ai{static init(){(0,m.VLi)(new Ai)}addToWindow(e){m.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const o=m.dqk.getAllAngularTestabilities();let u=o.length,c=!1;const g=function(v){c=c||v,u--,0==u&&r(c)};o.forEach(function(v){v.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Cr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Us=new m.OlP("EventManagerPlugins");let cs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const c=o[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Us),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class gu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Yr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Bs=(()=>{class n extends Yr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,o.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(js),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(js))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(re))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function js(n){O().remove(n)}const ht={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},mu=/%COMP%/g;function be(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?be(n,o,t):(o=o.replace(mu,n),t.push(o))}return t}function Lt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _n=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Zo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Il(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case m.ifc.ShadowDom:return new Dl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=be(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(cs),m.LFG(Bs),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Zo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ht[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=ht[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ht[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,o&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Lt(r)):this.eventManager.addEventListener(e,t,Lt(r))}}class Il extends Zo{constructor(e,t,r,o){super(e),this.component=r;const u=be(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function wl(n){return"_ngcontent-%COMP%".replace(mu,n)}(o+"-"+r.id),this.hostAttr=function bl(n){return"_nghost-%COMP%".replace(mu,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Dl extends Zo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=be(o.id,o.styles,[]);for(let c=0;c<u.length;c++){const g=document.createElement("style");g.textContent=u[c],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let rd=(()=>{class n extends gu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(re))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Cl=["alt","control","meta","shift"],$s={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},fi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wu=(()=>{class n extends gu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let c="";if(Cl.forEach(v=>{const I=r.indexOf(v);I>-1&&(r.splice(I,1),c+=v+".")}),c+=u,0!=r.length||0===u.length)return null;const g={};return g.domEventName=o,g.fullKey=c,g}static getEventFullKey(t){let r="",o=function Hs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&gr.hasOwnProperty(e)&&(e=gr[e]))}return $s[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Cl.forEach(u=>{u!=o&&fi[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(re))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Al=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Si(){Vs.makeCurrent(),Ai.init()},multi:!0},{provide:re,useFactory:function bu(){return(0,m.RDi)(document),document},deps:[]}]),Oa=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function Tl(){return new m.qLn},deps:[]},{provide:Us,useClass:rd,multi:!0,deps:[re,m.R0b,m.Lbi]},{provide:Us,useClass:wu,multi:!0,deps:[re]},{provide:_n,useClass:_n,deps:[cs,Bs,m.AFp]},{provide:m.FYo,useExisting:_n},{provide:Yr,useExisting:Bs},{provide:Bs,useClass:Bs,deps:[re]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:cs,useClass:cs,deps:[Us,m.R0b]},{provide:class mn{},useClass:Cr,deps:[]}];let Qo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:Dr,useExisting:m.AFp},Na]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(n,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:Oa,imports:[Kr,m.hGG]}),n})();"undefined"!=typeof window&&window;var Pn=k(8996),kn=k(7669);function yt(...n){const e=(0,kn.yG)(n);return(0,Pn.D)(n,e)}var mr=k(7579);class Jr extends mr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Xr=k(8306);const{isArray:Xo}=Array,{getPrototypeOf:dd,prototype:pn,keys:Jh}=Object;function Mi(n){if(1===n.length){const e=n[0];if(Xo(e))return{args:e,keys:null};if(function Cu(n){return n&&"object"==typeof n&&dd(n)===pn}(e)){const t=Jh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var pi=k(4671),Vt=k(4004);const{isArray:hd}=Array;function fd(n){return(0,Vt.U)(e=>function kl(n,e){return hd(e)?n(...e):n(e)}(n,e))}function bo(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Gn=k(5403),fs=k(9672);function zs(n,e,t){n?(0,fs.f)(t,n,e):e()}var ka=k(576);function zi(n,e){const t=(0,ka.m)(n)?n:()=>n,r=o=>o.error(t());return new Xr.y(e?o=>e.schedule(r,0,o):r)}const Ws=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Wi=k(8189);function pd(...n){return function Ll(){return(0,Wi.J)(1)}()((0,Pn.D)(n,(0,kn.yG)(n)))}var ta=k(8421);function xi(n){return new Xr.y(e=>{(0,ta.Xf)(n()).subscribe(e)})}var na=k(515),Fa=k(727),Lr=k(4482);function Ni(){return(0,Lr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Gn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class gd extends Xr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Lr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fa.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Gn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fa.w0.EMPTY)}return e}refCount(){return Ni()(this)}}function Fn(n,e){return(0,Lr.e)((t,r)=>{let o=null,u=0,c=!1;const g=()=>c&&!o&&r.complete();t.subscribe((0,Gn.x)(r,v=>{null==o||o.unsubscribe();let I=0;const S=u++;(0,ta.Xf)(n(v,S)).subscribe(o=(0,Gn.x)(r,x=>r.next(e?e(v,x,S,I++):x),()=>{o=null,g()}))},()=>{c=!0,g()}))})}var ra=k(5698);function Ri(...n){const e=(0,kn.yG)(n);return(0,Lr.e)((t,r)=>{(e?pd(n,t,e):pd(n,t)).subscribe(r)})}function ia(n,e,t,r,o){return(u,c)=>{let g=t,v=e,I=0;u.subscribe((0,Gn.x)(c,S=>{const x=I++;v=g?n(v,S,x):(g=!0,S),r&&c.next(v)},o&&(()=>{g&&c.next(v),c.complete()})))}}function Ar(n,e){return(0,Lr.e)(ia(n,e,arguments.length>=2,!0))}function ps(n,e){return(0,Lr.e)((t,r)=>{let o=0;t.subscribe((0,Gn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function Ki(n){return(0,Lr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Gn.x)(t,void 0,void 0,c=>{u=(0,ta.Xf)(n(c,Ki(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Cn=k(5577);function Ks(n,e){return(0,ka.m)(e)?(0,Cn.z)(n,e,1):(0,Cn.z)(n,1)}function md(n){return n<=0?()=>na.E:(0,Lr.e)((e,t)=>{let r=[];e.subscribe((0,Gn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Tn(n=lg){return(0,Lr.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function lg(){return new Ws}function cg(n){return(0,Lr.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Zs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ps((o,u)=>n(o,u,r)):pi.y,(0,ra.q)(1),t?cg(e):Tn(()=>new Ws))}var ei=k(8505);class Ys{constructor(e,t){this.id=e,this.url=t}}class gs extends Ys{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Tu extends Ys{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class En extends Ys{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vl extends Ys{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class sa extends Ys{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fg extends Ys{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ul extends Ys{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Sr extends Ys{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mi extends Ys{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ms{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Oi{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zi{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class La{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $l{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const kt="primary";class Hl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Yn(n){return new Hl(n)}const Gl="ngNavigationCancelingError";function Qs(n){const e=Error("NavigationCancelingError: "+n);return e[Gl]=!0,e}function Io(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const c=r[u],g=n[u];if(c.startsWith(":"))o[c.substring(1)]=g;else if(c!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Yi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Su(n[o],e[o]))return!1;return!0}function Su(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Qi(n){return Array.prototype.concat.apply([],n)}function _d(n){return n.length>0?n[n.length-1]:null}function Qn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function yi(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,Pn.D)(Promise.resolve(n)):yt(n)}const Do={exact:function C(n,e,t){if(!Rt(n.segments,e.segments)||!ee(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!C(n.children[r],e.children[r],t))return!1;return!0},subset:F},oa={exact:function D(n,e){return Yi(n,e)},subset:function N(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Su(n[t],e[t]))},ignored:()=>!0};function Mu(n,e,t){return Do[t.paths](n.root,e.root,t.matrixParams)&&oa[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function F(n,e,t){return K(n,e,e.segments,t)}function K(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Rt(o,t)||e.hasChildren()||!ee(o,t,r))}if(n.segments.length===t.length){if(!Rt(n.segments,t)||!ee(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!F(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Rt(n.segments,o)&&ee(n.segments,o,r)&&n.children[kt])&&K(n.children[kt],e,u,r)}}function ee(n,e,t){return e.every((r,o)=>oa[t](n[o].parameters,r.parameters))}class Se{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yn(this.queryParams)),this._queryParamMap}toString(){return aa.serialize(this)}}class Me{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Qn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Co(this)}}class Ze{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Yn(this.parameters)),this._parameterMap}toString(){return Va(this)}}function Rt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class qn{}class An{parse(e){const t=new Ed(e);return new Se(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Vr(e.root,!0)}`,r=function Ry(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Pi(t)}=${Pi(o)}`).join("&"):`${Pi(t)}=${Pi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function To(n){return encodeURI(n)}(e.fragment)}`:""}`}}const aa=new An;function Co(n){return n.segments.map(e=>Va(e)).join("/")}function Vr(n,e){if(!n.hasChildren())return Co(n);if(e){const t=n.children[kt]?Vr(n.children[kt],!1):"",r=[];return Qn(n.children,(o,u)=>{u!==kt&&r.push(`${u}:${Vr(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Dt(n,e){let t=[];return Qn(n.children,(r,o)=>{o===kt&&(t=t.concat(e(r,o)))}),Qn(n.children,(r,o)=>{o!==kt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===kt?[Vr(n.children[kt],!1)]:[`${o}:${Vr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[kt]?`${Co(n)}/${t[0]}`:`${Co(n)}/(${t.join("//")})`}}function _i(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pi(n){return _i(n).replace(/%3B/gi,";")}function vd(n){return _i(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zl(n){return decodeURIComponent(n)}function Wl(n){return zl(n.replace(/\+/g,"%20"))}function Va(n){return`${vd(n.path)}${function pg(n){return Object.keys(n).map(e=>`;${vd(e)}=${vd(n[e])}`).join("")}(n.parameters)}`}const Oy=/^[^\/()?;=#]+/;function ys(n){const e=n.match(Oy);return e?e[0]:""}const Kl=/^[^=?&#]+/,ky=/^[^&#]+/;class Ed{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[kt]=new Me(e,t)),r}parseSegment(){const e=ys(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ze(zl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ys(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=ys(this.remaining);o&&(r=o,this.capture(r))}e[zl(t)]=zl(r)}parseQueryParam(e){const t=function Py(n){const e=n.match(Kl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function gg(n){const e=n.match(ky);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const o=Wl(t),u=Wl(r);if(e.hasOwnProperty(o)){let c=e[o];Array.isArray(c)||(c=[c],e[o]=c),c.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ys(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=kt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[kt]:new Me([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Fy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Xh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Xh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ef(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return ef(e,this._root).map(t=>t.value)}}function Xh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Xh(n,t);if(r)return r}return null}function ef(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ef(n,t);if(r.length)return r.unshift(e),r}return[]}class Ao{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function So(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class wd extends Fy{constructor(e,t){super(e),this.snapshot=t,Id(this,e)}toString(){return this.snapshot.toString()}}function Ua(n,e){const t=function Ly(n,e){const c=new xu([],{},{},"",{},kt,e,null,n.root,-1,{});return new tf("",new Ao(c,[]))}(n,e),r=new Jr([new Ze("",{})]),o=new Jr({}),u=new Jr({}),c=new Jr({}),g=new Jr(""),v=new ua(r,o,c,g,u,kt,e,t.root);return v.snapshot=t.root,new wd(new Ao(v,[]),t)}class ua{constructor(e,t,r,o,u,c,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=g,this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Vt.U)(e=>Yn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Vt.U)(e=>Yn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Vy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function bd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class xu{constructor(e,t,r,o,u,c,g,v,I,S,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=g,this.routeConfig=v,this._urlSegment=I,this._lastPathIndex=S,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Yn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class tf extends Fy{constructor(e,t){super(t),this.url=e,Id(this,t)}toString(){return Dd(this._root)}}function Id(n,e){e.value._routerState=n,e.children.forEach(t=>Id(n,t))}function Dd(n){const e=n.children.length>0?` { ${n.children.map(Dd).join(", ")} } `:"";return`${n.value}${e}`}function Cd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Yi(e.params,t.params)||n.params.next(t.params),function Au(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Yi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function nf(n,e){const t=Yi(n.params,e.params)&&function wt(n,e){return Rt(n,e)&&n.every((t,r)=>Yi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||nf(n.parent,e.parent))}function Zl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function rf(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Zl(n,r,o);return Zl(n,r)})}(n,e,t);return new Ao(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(g=>Zl(n,g)),c}}const r=function By(n){return new ua(new Jr(n.url),new Jr(n.params),new Jr(n.queryParams),new Jr(n.fragment),new Jr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Zl(n,u));return new Ao(r,o)}}function la(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Nu(n){return"object"==typeof n&&null!=n&&n.outlets}function mg(n,e,t,r,o){let u={};if(r&&Qn(r,(g,v)=>{u[v]=Array.isArray(g)?g.map(I=>`${I}`):`${g}`}),n===e)return new Se(t,u,o);const c=sf(n,e,t);return new Se(c,u,o)}function sf(n,e,t){const r={};return Qn(n.children,(o,u)=>{r[u]=o===e?t:sf(o,e,t)}),new Me(n.segments,r)}class jy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&la(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Nu);if(o&&o!==_d(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class of{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function qy(n,e,t){if(n||(n=new Me([],{})),0===n.segments.length&&n.hasChildren())return Xs(n,e,t);const r=function XE(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const c=n.segments[o],g=t[r];if(Nu(g))break;const v=`${g}`,I=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&I&&"object"==typeof I&&void 0===I.outlets){if(!ki(v,I,c))return u;r+=2}else{if(!ki(v,{},c))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Me(n.segments.slice(0,r.pathIndex),{});return u.children[kt]=new Me(n.segments.slice(r.pathIndex),n.children),Xs(u,0,o)}return r.match&&0===o.length?new Me(n.segments,{}):r.match&&!n.hasChildren()?af(n,e,t):r.match?Xs(n,0,o):af(n,e,t)}function Xs(n,e,t){if(0===t.length)return new Me(n.segments,{});{const r=function Gy(n){return Nu(n[0])?n[0].outlets:{[kt]:n}}(t),o={};return Qn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[c]=qy(n.children[c],e,u))}),Qn(n.children,(u,c)=>{void 0===r[c]&&(o[c]=u)}),new Me(n.segments,o)}}function af(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Nu(u)){const v=Ru(u.outlets);return new Me(r,v)}if(0===o&&la(t[0])){r.push(new Ze(n.segments[e].path,uf(t[0]))),o++;continue}const c=Nu(u)?u.outlets[kt]:`${u}`,g=o<t.length-1?t[o+1]:null;c&&g&&la(g)?(r.push(new Ze(c,uf(g))),o+=2):(r.push(new Ze(c,{})),o++)}return new Me(r,{})}function Ru(n){const e={};return Qn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=af(new Me([],{}),0,t))}),e}function uf(n){const e={};return Qn(n,(t,r)=>e[r]=`${t}`),e}function ki(n,e,t){return n==t.path&&Yi(e,t.parameters)}class _g{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Cd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=So(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,o[c],r),delete o[c]}),Qn(o,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const c=r.getContext(o.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=So(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],o);if(r&&r.outlet){const c=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=So(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=So(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new jl(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Zi(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Cd(o),o===u)if(o.component){const c=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const c=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),c.children.onOutletReAttached(g.contexts),c.attachRef=g.componentRef,c.route=g.route.value,c.outlet&&c.outlet.attach(g.componentRef,g.route.value),Cd(g.route.value),this.activateChildRoutes(e,null,c.children)}else{const g=function Td(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),v=g?g.module.componentFactoryResolver:null;c.attachRef=null,c.route=o,c.resolver=v,c.outlet&&c.outlet.activateWith(o,v),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Ad{constructor(e,t){this.routes=e,this.module=t}}function Ba(n){return"function"==typeof n}function Ou(n){return n instanceof Se}const Ql=Symbol("INITIAL_VALUE");function ca(){return Fn(n=>function ea(...n){const e=(0,kn.yG)(n),t=(0,kn.jO)(n),{args:r,keys:o}=Mi(n);if(0===r.length)return(0,Pn.D)([],e);const u=new Xr.y(function gi(n,e,t=pi.y){return r=>{zs(e,()=>{const{length:o}=n,u=new Array(o);let c=o,g=o;for(let v=0;v<o;v++)zs(e,()=>{const I=(0,Pn.D)(n[v],e);let S=!1;I.subscribe((0,Gn.x)(r,x=>{u[v]=x,S||(S=!0,g--),g||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,o?c=>bo(o,c):pi.y));return t?u.pipe(fd(t)):u}(n.map(e=>e.pipe((0,ra.q)(1),Ri(Ql)))).pipe(Ar((e,t)=>{let r=!1;return t.reduce((o,u,c)=>o!==Ql?o:(u===Ql&&(r=!0),r||!1!==u&&c!==t.length-1&&!Ou(u)?o:u),e)},Ql),ps(e=>e!==Ql),(0,Vt.U)(e=>Ou(e)?e:!0===e),(0,ra.q)(1)))}class zy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Jl,this.attachRef=null}}class Jl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new zy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Xl=(()=>{class n{constructor(t,r,o,u,c){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=u||kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,v=new hf(t,g,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,v),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Jl),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class hf{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ua?this.route:e===Jl?this.childContexts:this.parent.get(e,t)}}let ff=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},directives:[Xl],encapsulation:2}),n})();function ec(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Sd(r,pf(e,r))}}function Sd(n,e){n.children&&ec(n.children,e)}function pf(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function gf(n){const e=n.children&&n.children.map(gf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=ff),t}function tn(n){return n.outlet||kt}function mf(n,e){const t=n.filter(r=>tn(r)===e);return t.push(...n.filter(r=>tn(r)!==e)),t}const Eg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Pu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Eg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Io)(t,n,e);if(!u)return Object.assign({},Eg);const c={};Qn(u.posParams,(v,I)=>{c[I]=v.path});const g=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:g,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function tc(n,e,t,r,o="corrected"){if(t.length>0&&function Ky(n,e,t){return t.some(r=>xd(n,e,r)&&tn(r)!==kt)}(n,t,r)){const c=new Me(e,function Md(n,e,t,r){const o={};o[kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&tn(u)!==kt){const c=new Me([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,o[tn(u)]=c}return o}(n,e,r,new Me(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function wg(n,e,t){return t.some(r=>xd(n,e,r))}(n,t,r)){const c=new Me(n.segments,function Wy(n,e,t,r,o,u){const c={};for(const g of r)if(xd(n,t,g)&&!o[tn(g)]){const v=new Me([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[tn(g)]=v}return Object.assign(Object.assign({},o),c)}(n,e,t,r,n.children,o));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Me(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function xd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Zy(n,e,t,r){return!!(tn(n)===r||r!==kt&&xd(e,t,n))&&("**"===n.path||Pu(e,n,t).matched)}function Yy(n,e,t){return 0===e.length&&!n.children[t]}class da{constructor(e){this.segmentGroup=e||null}}class Mr{constructor(e){this.urlTree=e}}function Mo(n){return zi(new da(n))}function nc(n){return zi(new Mr(n))}class _f{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(m.h0i)}apply(){const e=tc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Me(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,kt).pipe((0,Vt.U)(u=>this.createUrlTree($a(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ki(u=>{if(u instanceof Mr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof da?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,kt).pipe((0,Vt.U)(o=>this.createUrlTree($a(o),e.queryParams,e.fragment))).pipe(Ki(o=>{throw o instanceof da?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Me([],{[kt]:e}):e;return new Se(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Vt.U)(u=>new Me([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Pn.D)(o).pipe(Ks(u=>{const c=r.children[u],g=mf(t,u);return this.expandSegmentGroup(e,g,c,u).pipe((0,Vt.U)(v=>({segment:v,outlet:u})))}),Ar((u,c)=>(u[c.outlet]=c.segment,u),{}),function dg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ps((o,u)=>n(o,u,r)):pi.y,md(1),t?cg(e):Tn(()=>new Ws))}())}expandSegment(e,t,r,o,u,c){return(0,Pn.D)(r).pipe(Ks(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,c).pipe(Ki(I=>{if(I instanceof da)return yt(null);throw I}))),Zs(g=>!!g),Ki((g,v)=>{if(g instanceof Ws||"EmptyError"===g.name)return Yy(t,o,u)?yt(new Me([],{})):Mo(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,c,g){return Zy(o,t,u,c)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,c):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c):Mo(t):Mo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?nc(u):this.lineralizeSegments(r,u).pipe((0,Cn.z)(c=>{const g=new Me(c,{});return this.expandSegment(e,g,t,c,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){const{matched:g,consumedSegments:v,remainingSegments:I,positionalParamSegments:S}=Pu(t,o,u);if(!g)return Mo(t);const x=this.applyRedirectCommands(v,o.redirectTo,S);return o.redirectTo.startsWith("/")?nc(x):this.lineralizeSegments(o,x).pipe((0,Cn.z)(V=>this.expandSegment(e,t,r,V.concat(I),c,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?yt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Vt.U)(x=>(r._loadedConfig=x,new Me(o,{})))):yt(new Me(o,{}));const{matched:c,consumedSegments:g,remainingSegments:v}=Pu(t,r,o);return c?this.getChildConfig(e,r,o).pipe((0,Cn.z)(S=>{const x=S.module,V=S.routes,{segmentGroup:H,slicedSegments:z}=tc(t,g,v,V),ye=new Me(H.segments,H.children);if(0===z.length&&ye.hasChildren())return this.expandChildren(x,V,ye).pipe((0,Vt.U)(Ut=>new Me(g,Ut)));if(0===V.length&&0===z.length)return yt(new Me(g,{}));const Fe=tn(r)===u;return this.expandSegment(x,ye,V,z,Fe?kt:u,!0).pipe((0,Vt.U)(ze=>new Me(g.concat(ze.segments),ze.children)))})):Mo(t)}getChildConfig(e,t,r){return t.children?yt(new Ad(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?yt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Cn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Vt.U)(u=>(t._loadedConfig=u,u))):function Ur(n){return zi(Qs(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):yt(new Ad([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?yt(o.map(c=>{const g=e.get(c);let v;if(function lf(n){return n&&Ba(n.canLoad)}(g))v=g.canLoad(t,r);else{if(!Ba(g))throw new Error("Invalid CanLoad guard");v=g(t,r)}return yi(v)})).pipe(ca(),(0,ei.b)(c=>{if(!Ou(c))return;const g=Qs(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw g.url=c,g}),(0,Vt.U)(c=>!0===c)):yt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return yt(r);if(o.numberOfChildren>1||!o.children[kt])return zi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Se(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Qn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let c={};return Qn(t.children,(g,v)=>{c[v]=this.createSegmentGroup(e,g,r,o)}),new Me(u,c)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function $a(n){const e={};for(const r of Object.keys(n.children)){const u=$a(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Fi(n){if(1===n.numberOfChildren&&n.children[kt]){const e=n.children[kt];return new Me(n.segments.concat(e.segments),e.children)}return n}(new Me(n.segments,e))}class bg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ha{constructor(e,t){this.component=e,this.route=t}}function Ef(n,e,t){const r=n._root;return vi(r,e?e._root:null,t,[r.value])}function rc(n,e,t){const r=function Qy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function vi(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=So(e);return n.children.forEach(c=>{(function Dg(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const v=function Jy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Rt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rt(n.url,e.url)||!Yi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nf(n,e)||!Yi(n.queryParams,e.queryParams);default:return!nf(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new bg(r)):(u.data=c.data,u._resolvedData=c._resolvedData),vi(n,e,u.component?g?g.children:null:t,r,o),v&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new Ha(g.outlet.component,c))}else c&&Ga(e,g,o),o.canActivateChecks.push(new bg(r)),vi(n,null,u.component?g?g.children:null:t,r,o)})(c,u[c.value.outlet],t,r.concat([c.value]),o),delete u[c.value.outlet]}),Qn(u,(c,g)=>Ga(c,t.getContext(g),o)),o}function Ga(n,e,t){const r=So(n),o=n.value;Qn(r,(u,c)=>{Ga(u,o.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Ha(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class If{}function Df(n){return new Xr.y(e=>e.error(n))}class Cf{constructor(e,t,r,o,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=tc(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,kt);if(null===t)return null;const r=new xu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},kt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Ao(r,t),u=new tf(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Vy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],g=mf(e,u),v=this.processSegmentGroup(g,c,u);if(null===v)return null;r.push(...v)}const o=Tg(r);return function n_(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,o);if(null!==c)return c}return Yy(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Zy(e,t,r,o))return null;let u,c=[],g=[];if("**"===e.path){const H=r.length>0?_d(r).parameters:{};u=new xu(r,H,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),tn(e),e.component,e,h(t),p(t)+r.length,T(e))}else{const H=Pu(t,e,r);if(!H.matched)return null;c=H.consumedSegments,g=H.remainingSegments,u=new xu(c,H.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),tn(e),e.component,e,h(t),p(t)+c.length,T(e))}const v=function r_(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:I,slicedSegments:S}=tc(t,c,g,v.filter(H=>void 0===H.redirectTo),this.relativeLinkResolution);if(0===S.length&&I.hasChildren()){const H=this.processChildren(v,I);return null===H?null:[new Ao(u,H)]}if(0===v.length&&0===S.length)return[new Ao(u,[])];const x=tn(e)===o,V=this.processSegment(v,I,S,x?kt:o);return null===V?null:[new Ao(u,V)]}}function i_(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Tg(n){const e=[],t=new Set;for(const r of n){if(!i_(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Tg(r.children);e.push(new Ao(r.value,o))}return e.filter(r=>!t.has(r))}function h(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function p(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function E(n){return n.data||{}}function T(n){return n.resolve||{}}function Je(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function it(n){return Fn(e=>{const t=n(e);return t?(0,Pn.D)(t).pipe((0,Vt.U)(()=>e)):yt(e)})}class sc extends class Xi{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ku=new m.OlP("ROUTES");class Fu{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Vt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Ad(Qi(c.injector.get(ku,void 0,m.XFs.Self|m.XFs.Optional)).map(gf),c)}),Ki(u=>{throw t._loader$=void 0,u}));return t._loader$=new gd(o,()=>new mr.x).pipe(Ni()),t._loader$}loadModuleFactory(e){return yi(e()).pipe((0,Cn.z)(t=>t instanceof m.YKP?yt(t):(0,Pn.D)(this.compiler.compileModuleAsync(t))))}}class s_{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ha(n){throw n}function Nd(n,e,t){return e.parse("/")}function Rd(n,e){return yt(null)}const Af={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Od={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Li=(()=>{class n{constructor(t,r,o,u,c,g,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new mr.x,this.errorHandler=ha,this.malformedUriErrorHandler=Nd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Rd,afterPreactivation:Rd},this.urlHandlingStrategy=new s_,this.routeReuseStrategy=new sc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(m.h0i),this.console=c.get(m.c2e);const x=c.get(m.R0b);this.isNgZoneEnabled=x instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function ql(){return new Se(new Me([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Fu(c,g,V=>this.triggerEvent(new Bl(V)),V=>this.triggerEvent(new ms(V))),this.routerState=Ua(this.currentUrlTree,this.rootComponentType),this.transitions=new Jr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ps(o=>0!==o.id),(0,Vt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Fn(o=>{let u=!1,c=!1;return yt(o).pipe((0,ei.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Fn(g=>{const v=this.browserUrlTree.toString(),I=!this.navigated||g.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return Ag(g.source)&&(this.browserUrlTree=g.extractedUrl),yt(g).pipe(Fn(x=>{const V=this.transitions.getValue();return r.next(new gs(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),V!==this.transitions.getValue()?na.E:Promise.resolve(x)}),function vf(n,e,t,r){return Fn(o=>function ja(n,e,t,r,o){return new _f(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Vt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ei.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function R(n,e,t,r,o){return(0,Cn.z)(u=>function t_(n,e,t,r,o="emptyOnly",u="legacy"){try{const c=new Cf(n,e,t,r,o,u).recognize();return null===c?Df(new If):yt(c)}catch(c){return Df(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Vt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ei.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const H=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(H,x)}this.browserUrlTree=x.urlAfterRedirects}const V=new sa(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(V)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:H,source:z,restoredState:ye,extras:Fe}=g,pt=new gs(V,this.serializeUrl(H),z,ye);r.next(pt);const ze=Ua(H,this.rootComponentType).snapshot;return yt(Object.assign(Object.assign({},g),{targetSnapshot:ze,urlAfterRedirects:H,extras:Object.assign(Object.assign({},Fe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),na.E}),it(g=>{const{targetSnapshot:v,id:I,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:V,replaceUrl:H}}=g;return this.hooks.beforePreactivation(v,{navigationId:I,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!V,replaceUrl:!!H})}),(0,ei.b)(g=>{const v=new fg(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),(0,Vt.U)(g=>Object.assign(Object.assign({},g),{guards:Ef(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function Xy(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?yt(Object.assign(Object.assign({},t),{guardsResult:!0})):function Cg(n,e,t,r){return(0,Pn.D)(n).pipe((0,Cn.z)(o=>function ic(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?yt(u.map(g=>{const v=rc(g,e,o);let I;if(function e0(n){return n&&Ba(n.canDeactivate)}(v))I=yi(v.canDeactivate(n,e,t,r));else{if(!Ba(v))throw new Error("Invalid CanDeactivate guard");I=yi(v(n,e,t,r))}return I.pipe(Zs())})).pipe(ca()):yt(!0)}(o.component,o.route,t,e,r)),Zs(o=>!0!==o,!0))}(c,r,o,n).pipe((0,Cn.z)(g=>g&&function vg(n){return"boolean"==typeof n}(g)?function xr(n,e,t,r){return(0,Pn.D)(e).pipe(Ks(o=>pd(function bf(n,e){return null!==n&&e&&e(new Oi(n)),yt(!0)}(o.route.parent,r),function wf(n,e){return null!==n&&e&&e(new La(n)),yt(!0)}(o.route,r),function xo(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function Ig(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>xi(()=>yt(c.guards.map(v=>{const I=rc(v,c.node,t);let S;if(function df(n){return n&&Ba(n.canActivateChild)}(I))S=yi(I.canActivateChild(r,n));else{if(!Ba(I))throw new Error("Invalid CanActivateChild guard");S=yi(I(r,n))}return S.pipe(Zs())})).pipe(ca())));return yt(u).pipe(ca())}(n,o.path,t),function e_(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return yt(!0);const o=r.map(u=>xi(()=>{const c=rc(u,e,t);let g;if(function cf(n){return n&&Ba(n.canActivate)}(c))g=yi(c.canActivate(e,n));else{if(!Ba(c))throw new Error("Invalid CanActivate guard");g=yi(c(e,n))}return g.pipe(Zs())}));return yt(o).pipe(ca())}(n,o.route,t))),Zs(o=>!0!==o,!0))}(r,u,n,e):yt(g)),(0,Vt.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,ei.b)(g=>{if(Ou(g.guardsResult)){const I=Qs(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw I.url=g.guardsResult,I}const v=new Ul(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(v)}),ps(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),it(g=>{if(g.guards.canActivateChecks.length)return yt(g).pipe((0,ei.b)(v=>{const I=new Sr(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}),Fn(v=>{let I=!1;return yt(v).pipe(function q(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return yt(t);let u=0;return(0,Pn.D)(o).pipe(Ks(c=>function se(n,e,t,r){return function Be(n,e,t,r){const o=Je(n);if(0===o.length)return yt({});const u={};return(0,Pn.D)(o).pipe((0,Cn.z)(c=>function _t(n,e,t,r){const o=rc(n,e,r);return yi(o.resolve?o.resolve(e,t):o(e,t))}(n[c],e,t,r).pipe((0,ei.b)(g=>{u[c]=g}))),md(1),(0,Cn.z)(()=>Je(u).length===o.length?yt(u):na.E))}(n._resolve,n,e,r).pipe((0,Vt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Vy(n,t).resolve),null)))}(c.route,r,n,e)),(0,ei.b)(()=>u++),md(1),(0,Cn.z)(c=>u===o.length?yt(t):na.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ei.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(v),this.cancelNavigationTransition(v,"At least one route resolver didn't emit any value."))}}))}),(0,ei.b)(v=>{const I=new mi(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}))}),it(g=>{const{targetSnapshot:v,id:I,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:V,replaceUrl:H}}=g;return this.hooks.afterPreactivation(v,{navigationId:I,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!V,replaceUrl:!!H})}),(0,Vt.U)(g=>{const v=function Uy(n,e,t){const r=Zl(n,e._root,t?t._root:void 0);return new wd(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:v})}),(0,ei.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,Vt.U)(r=>(new _g(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,ei.b)({next(){u=!0},complete(){u=!0}}),function hg(n){return(0,Lr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var g;u||c||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===o.id&&(this.currentNavigation=null)}),Ki(g=>{if(c=!0,function yd(n){return n&&n[Gl]}(g)){const v=Ou(g.url);v||(this.navigated=!0,this.restoreHistory(o,!0));const I=new En(o.id,this.serializeUrl(o.extractedUrl),g.message);r.next(I),v?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),x={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ag(o.source)};this.scheduleNavigation(S,"imperative",null,x,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const v=new Vl(o.id,this.serializeUrl(o.extractedUrl),g);r.next(v);try{o.resolve(this.errorHandler(g))}catch(I){o.reject(I)}}return na.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},c=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(c){const v=Object.assign({},c);delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(u.state=v)}const g=this.parseUrl(t.url);this.scheduleNavigation(g,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ec(t),this.config=t.map(gf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:c,queryParamsHandling:g,preserveFragment:v}=r,I=o||this.routerState.root,S=v?this.currentUrlTree.fragment:c;let x=null;switch(g){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function Js(n,e,t,r,o){if(0===t.length)return mg(e.root,e.root,e.root,r,o);const u=function $y(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new jy(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Qn(u.outlets,(v,I)=>{g[I]="string"==typeof v?v.split("/"):v}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===c?(u.split("/").forEach((g,v)=>{0==v&&"."===g||(0==v&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new jy(t,e,r)}(t);if(u.toRoot())return mg(e.root,e.root,new Me([],{}),r,o);const c=function yg(n,e,t){if(n.isAbsolute)return new of(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new of(u,u===e.root,0)}const r=la(n.commands[0])?0:1;return function Hy(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new of(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),g=c.processChildren?Xs(c.segmentGroup,c.index,u.commands):qy(c.segmentGroup,c.index,u.commands);return mg(e.root,c.segmentGroup,g,r,o)}(I,this.currentUrlTree,t,x,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Ou(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Sf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Af):!1===r?Object.assign({},Od):r,Ou(t))return Mu(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Mu(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Tu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,c){var g,v;if(this.disposed)return Promise.resolve(!1);let I,S,x;c?(I=c.resolve,S=c.reject,x=c.promise):x=new Promise((z,ye)=>{I=z,S=ye});const V=++this.navigationId;let H;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),H=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(v=this.browserPageId)&&void 0!==v?v:0)+1):H=0,this.setTransition({id:V,targetPageId:H,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:I,reject:S,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(z=>Promise.reject(z))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new En(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Ag(n){return"imperative"!==n}let Pd=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new mr.x,this.subscription=t.events.subscribe(u=>{u instanceof Tu&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,c){if(0!==t||r||o||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const g={skipLocationChange:kd(this.skipLocationChange),replaceUrl:kd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,g),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:kd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Li),m.Y36(ua),m.Y36(fe))},n.\u0275dir=m.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&m.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&m.uIk("target",r.target)("href",r.href,m.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[m.TTD]}),n})();function kd(n){return""===n||!!n}class u_{}class n0{preload(e,t){return yt(null)}}let r0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new Fu(o,r,v=>t.triggerEvent(new Bl(v)),v=>t.triggerEvent(new ms(v)))}setUpPreloading(){this.subscription=this.router.events.pipe(ps(t=>t instanceof Tu),Ks(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(m.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;o.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,Pn.D)(o).pipe((0,Wi.J)(),(0,Vt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?yt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Cn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Li),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(u_))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Sg=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Tu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $l&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new $l(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const _s=new m.OlP("ROUTER_CONFIGURATION"),c_=new m.OlP("ROUTER_FORROOT_GUARD"),s0=[_e,{provide:qn,useClass:An},{provide:Li,useFactory:function h_(n,e,t,r,o,u,c={},g,v){const I=new Li(null,n,e,t,r,o,Qi(u));return g&&(I.urlHandlingStrategy=g),v&&(I.routeReuseStrategy=v),function u0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,I),c.enableTracing&&I.events.subscribe(S=>{var x,V;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(V=console.groupEnd)||void 0===V||V.call(console)}),I},deps:[qn,Jl,_e,m.zs3,m.Sil,ku,_s,[class Tf{},new m.FiY],[class Sn{},new m.FiY]]},Jl,{provide:ua,useFactory:function Mg(n){return n.routerState.root},deps:[Li]},r0,n0,class l_{preload(e,t){return t().pipe(Ki(()=>yt(null)))}},{provide:_s,useValue:{enableTracing:!1}}];function BI(){return new m.PXZ("Router",Li)}let qa=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[s0,d_(t),{provide:c_,useFactory:a0,deps:[[Li,new m.FiY,new m.tp0]]},{provide:_s,useValue:r||{}},{provide:fe,useFactory:o0,deps:[de,[new m.tBr(Xe),new m.FiY],_s]},{provide:Sg,useFactory:jI,deps:[Li,fu,_s]},{provide:u_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:n0},{provide:m.PXZ,multi:!0,useFactory:BI},[Fd,{provide:m.ip1,multi:!0,useFactory:l0,deps:[Fd]},{provide:p_,useFactory:f_,deps:[Fd]},{provide:m.tb,multi:!0,useExisting:p_}]]}}static forChild(t){return{ngModule:n,providers:[d_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(c_,8),m.LFG(Li,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function jI(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Sg(n,e,t)}function o0(n,e,t={}){return t.useHash?new De(n,e):new We(n,e)}function a0(n){return"guarded"}function d_(n){return[{provide:m.deG,multi:!0,useValue:n},{provide:ku,multi:!0,useValue:n}]}let Fd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new mr.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(g=>r=g),u=this.injector.get(Li),c=this.injector.get(_s);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?yt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(_s),o=this.injector.get(r0),u=this.injector.get(Sg),c=this.injector.get(Li),g=this.injector.get(m.z2F);t===g.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),o.setUpPreloading(),u.init(),c.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function l0(n){return n.appInitializer.bind(n)}function f_(n){return n.bootstrapListener.bind(n)}const p_=new m.OlP("Router Initializer");let m_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["lib-date"]],decls:5,vars:0,consts:[[1,"container","border-bottom"],[1,"d-inline","fs-3"],[1,"d-inline","fs-5"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"p",1),m._uU(2,"TODAY "),m.qZA(),m.TgZ(3,"p",2),m._uU(4,"Data"),m.qZA()())},encapsulation:2,changeDetection:0}),n})();const y_=new m.OlP("GETS_ALL_TASK_DTO");function $I(n,e){if(1&n&&(m.TgZ(0,"li"),m._uU(1),m.qZA()),2&n){const t=e.$implicit;m.xp6(1),m.Oqu(t.task)}}let c0=(()=>{class n{constructor(t){this._getsAllTaskDto=t,this.tasksList$=this._getsAllTaskDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(y_))},n.\u0275cmp=m.Xpm({type:n,selectors:[["lib-tasks-list-view"]],decls:4,vars:3,consts:[[1,"container","pt-5","pb-5","border-bottom"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"ul"),m.YNc(2,$I,2,1,"li",1),m.ALo(3,"async"),m.qZA()()),2&t&&(m.xp6(2),m.Q6J("ngForOf",m.lcZ(3,1,r.tasksList$)))},directives:[fr],pipes:[yl],encapsulation:2,changeDetection:0}),n})(),Ng=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["lib-photos-list"]],decls:8,vars:0,consts:[[1,"container","text-center","p-5","fs-3"],[1,"row"],[1,"col"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2),m._uU(3," ZDJ\u0118CIE 1 "),m.qZA(),m.TgZ(4,"div",2),m._uU(5," ZDJ\u0118CIE 2 "),m.qZA(),m.TgZ(6,"div",2),m._uU(7," ZDJ\u0118CIE 3 "),m.qZA()()())},encapsulation:2,changeDetection:0}),n})(),__=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-my-list-page"]],decls:6,vars:0,consts:[[1,"container"],["routerLink","/add-task","role","button",1,"btn","text-white","mt-5"]],template:function(t,r){1&t&&(m._UZ(0,"lib-date")(1,"lib-tasks-list-view"),m.TgZ(2,"div",0)(3,"a",1),m._uU(4,"Add task"),m.qZA()(),m._UZ(5,"lib-photos-list"))},directives:[m_,c0,Pd,Ng],encapsulation:2,changeDetection:0}),n})(),Rg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Kr]]}),n})(),d0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Kr]]}),n})(),f0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n}),n})(),Lu=(()=>{class n extends f0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();const fa=new m.OlP("NgValueAccessor"),GI={provide:fa,useExisting:(0,m.Gpc)(()=>Og),multi:!0},qI=new m.OlP("CompositionEventMode");let Og=(()=>{class n extends f0{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function p0(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(qI,8))},n.\u0275dir=m.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&m.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[m._Bn([GI]),m.qOj]}),n})();function Vu(n){return null==n||0===n.length}function g0(n){return null!=n&&"number"==typeof n.length}const ti=new m.OlP("NgValidators"),Uu=new m.OlP("NgAsyncValidators"),zI=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class WI{static min(e){return function Mt(n){return e=>{if(Vu(e.value)||Vu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function v_(n){return e=>{if(Vu(e.value)||Vu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function E_(n){return Vu(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function w_(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Mf(n){return Vu(n.value)||zI.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function to(n){return e=>Vu(e.value)||!g0(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function b_(n){return e=>g0(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function m0(n){if(!n)return Ld;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Vu(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return KI(e)}static composeAsync(e){return xf(e)}}function Ld(n){return null}function pa(n){return null!=n}function Pg(n){const e=(0,m.QGY)(n)?(0,Pn.D)(n):n;return(0,m.CqO)(e),e}function I_(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function kg(n,e){return e.map(t=>t(n))}function D_(n){return n.map(e=>function gS(n){return!n.validate}(e)?e:t=>e.validate(t))}function KI(n){if(!n)return null;const e=n.filter(pa);return 0==e.length?null:function(t){return I_(kg(t,e))}}function Vd(n){return null!=n?KI(D_(n)):null}function xf(n){if(!n)return null;const e=n.filter(pa);return 0==e.length?null:function(t){return function h0(...n){const e=(0,kn.jO)(n),{args:t,keys:r}=Mi(n),o=new Xr.y(u=>{const{length:c}=t;if(!c)return void u.complete();const g=new Array(c);let v=c,I=c;for(let S=0;S<c;S++){let x=!1;(0,ta.Xf)(t[S]).subscribe((0,Gn.x)(u,V=>{x||(x=!0,I--),g[S]=V},()=>v--,void 0,()=>{(!v||!x)&&(I||u.next(r?bo(r,g):g),u.complete())}))}});return e?o.pipe(fd(e)):o}(kg(t,e).map(Pg)).pipe((0,Vt.U)(I_))}}function Nf(n){return null!=n?xf(D_(n)):null}function Fg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Lg(n){return n._rawValidators}function ZI(n){return n._rawAsyncValidators}function C_(n){return n?Array.isArray(n)?n:[n]:[]}function Vg(n,e){return Array.isArray(n)?n.includes(e):n===e}function y0(n,e){const t=C_(e);return C_(n).forEach(o=>{Vg(t,o)||t.push(o)}),t}function _0(n,e){return C_(e).filter(t=>!Vg(n,t))}class T_{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Vd(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Nf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class oc extends T_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Vi extends T_{get formDirective(){return null}get path(){return null}}class YI{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let v0=(()=>{class n extends YI{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(oc,2))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[m.qOj]}),n})(),Ug=(()=>{class n extends YI{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Vi,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[m.qOj]}),n})();function Rf(n,e){Pf(n,e),e.valueAccessor.writeValue(n.value),function C0(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&T0(n,e)})}(n,e),function kf(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function eD(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&T0(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function XI(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function No(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Bg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Of(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Pf(n,e){const t=Lg(n);null!==e.validator?n.setValidators(Fg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=ZI(n);null!==e.asyncValidator?n.setAsyncValidators(Fg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Of(e._rawValidators,o),Of(e._rawAsyncValidators,o)}function Bg(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Lg(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(c=>c!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=ZI(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(c=>c!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Of(e._rawValidators,r),Of(e._rawAsyncValidators,r),t}function T0(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Hg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Bd="VALID",O_="INVALID",cc="PENDING",jd="DISABLED";function Gg(n){return(qg(n)?n.validators:n)||null}function S0(n){return Array.isArray(n)?Vd(n):n||null}function P_(n,e){return(qg(e)?e.asyncValidators:n)||null}function es(n){return Array.isArray(n)?Nf(n):n||null}function qg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const M0=n=>n instanceof zg,x0=n=>n instanceof Wg;function k_(n){return M0(n)?n.value:n.getRawValue()}function nD(n,e){const t=x0(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new m.vHH(1e3,"");if(!r[e])throw new m.vHH(1001,"")}function N0(n,e){x0(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new m.vHH(1002,"")})}class Uf{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=S0(this._rawValidators),this._composedAsyncValidatorFn=es(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Bd}get invalid(){return this.status===O_}get pending(){return this.status==cc}get disabled(){return this.status===jd}get enabled(){return this.status!==jd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=S0(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=es(e)}addValidators(e){this.setValidators(y0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(y0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_0(e,this._rawAsyncValidators))}hasValidator(e){return Vg(this._rawValidators,e)}hasAsyncValidator(e){return Vg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=cc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=jd,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Bd,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bd||this.status===cc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jd:Bd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=cc,this._hasOwnPendingAsyncValidator=!0;const t=Pg(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function tD(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=x0(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof rD)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?jd:this.errors?O_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cc)?cc:this._anyControlsHaveStatus(O_)?O_:Bd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class zg extends Uf{constructor(e=null,t,r){super(Gg(t),P_(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qg(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Hg(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Hg(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Wg extends Uf{constructor(e,t,r){super(Gg(t),P_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){N0(this,e),Object.keys(e).forEach(r=>{nD(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=k_(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class rD extends Uf{constructor(e,t,r){super(Gg(t),P_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){N0(this,e),e.forEach((r,o)=>{nD(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>k_(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let uD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Kg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const U_=new m.OlP("NgModelWithFormControlWarning"),L0={provide:Vi,useExisting:(0,m.Gpc)(()=>Jg)};let Jg=(()=>{class n extends Vi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new m.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Bg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Rf(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){No(t.control||null,t,!1),Hg(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function $g(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(No(r||null,t),M0(o)&&(Rf(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function uc(n,e){Pf(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function x_(n,e){return Bg(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Pf(this.form,this),this._oldForm&&Bg(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ti,10),m.Y36(Uu,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&m.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([L0]),m.qOj,m.TTD]}),n})();const V0={provide:oc,useExisting:(0,m.Gpc)(()=>Xg)};let Xg=(()=>{class n extends oc{constructor(t,r,o,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new m.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Vf(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Og?t=u:function A0(n){return Object.getPrototypeOf(n.constructor)===Lu}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function jg(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Ud(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(m.Y36(Vi,13),m.Y36(ti,10),m.Y36(Uu,10),m.Y36(fa,10),m.Y36(U_,8))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[m._Bn([V0]),m.qOj,m.TTD]}),n})(),Z0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[Kg]]}),n})(),ID=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:U_,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[Z0]}),n})(),Y0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Kr,qa,ID]]}),n})();var AS=k(4986),Br=k(5813);function Z_(){return(0,Lr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Gn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function SS(n,e){return n===e}var et,ga=k(2011),CD=(k(4087),k(3942)),ve=k(5861),$u=k(9681),Y_=k(4859),jr=k(1877),Kt=k(2090),MS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ma={},em=em||{},xt=MS||self;function Q_(){}function tm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function dc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Hf="closure_uid_"+(1e9*Math.random()>>>0),AD=0;function SD(n,e,t){return n.call.apply(n.bind,arguments)}function MD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function ni(n,e,t){return(ni=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?SD:MD).apply(null,arguments)}function nm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ri(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var c=Array(arguments.length-2),g=2;g<arguments.length;g++)c[g-2]=arguments[g];return e.prototype[o].apply(r,c)}}function Oo(){this.s=this.s,this.o=this.o}var xD={};Oo.prototype.s=!1,Oo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function TD(n){return Object.prototype.hasOwnProperty.call(n,Hf)&&n[Hf]||(n[Hf]=++AD)}(this);delete xD[n]}},Oo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const zd=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},J0=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function rm(n){return Array.prototype.concat.apply([],arguments)}function ro(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Hu(n){return/^[\s\xa0]*$/.test(n)}var wn,ii=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function rr(n,e){return-1!=n.indexOf(e)}function Wd(n,e){return n<e?-1:n>e?1:0}e:{var im=xt.navigator;if(im){var hc=im.userAgent;if(hc){wn=hc;break e}}wn=""}function Gu(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function fc(n){const e={};for(const t in n)e[t]=n[t];return e}var pc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gc(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<pc.length;u++)t=pc[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function qu(n){return qu[" "](n),n}qu[" "]=Q_;var Gf,n,Zd=rr(wn,"Opera"),Po=rr(wn,"Trident")||rr(wn,"MSIE"),J_=rr(wn,"Edge"),sm=J_||Po,X_=rr(wn,"Gecko")&&!(rr(wn.toLowerCase(),"webkit")&&!rr(wn,"Edge"))&&!(rr(wn,"Trident")||rr(wn,"MSIE"))&&!rr(wn,"Edge"),X0=rr(wn.toLowerCase(),"webkit")&&!rr(wn,"Edge");function ev(){var n=xt.document;return n?n.documentMode:void 0}e:{var om="",am=(n=wn,X_?/rv:([^\);]+)(\)|;)/.exec(n):J_?/Edge\/([\d\.]+)/.exec(n):Po?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):X0?/WebKit\/(\S+)/.exec(n):Zd?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(am&&(om=am?am[1]:""),Po){var um=ev();if(null!=um&&um>parseFloat(om)){Gf=String(um);break e}}Gf=om}var RD={};var nw=xt.document&&Po&&(ev()||parseInt(Gf,10))||void 0,OD=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{xt.addEventListener("test",Q_,e),xt.removeEventListener("test",Q_,e)}catch(t){}return n}();function Ei(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Yd(n,e){if(Ei.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(X_){e:{try{qu(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:PD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Yd.Z.h.call(this)}}Ei.prototype.h=function(){this.defaultPrevented=!0},ri(Yd,Ei);var PD={2:"touch",3:"pen",4:"mouse"};Yd.prototype.h=function(){Yd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Qd="closure_listenable_"+(1e6*Math.random()|0),kD=0;function FD(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++kD,this.ca=this.fa=!1}function nv(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function lm(n){this.src=n,this.g={},this.h=0}function qf(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=zd(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(nv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function zf(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}lm.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=zf(n,e,r,o);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new FD(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var rv="closure_lm_"+(1e6*Math.random()|0),rw={};function LD(n,e,t,r,o){if(r&&r.once)return iv(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)LD(n,e[u],t,r,o);return null}return t=dm(t),n&&n[Qd]?n.N(e,t,dc(r)?!!r.capture:!!r,o):VD(n,e,t,!1,r,o)}function VD(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var c=dc(o)?!!o.capture:!!o,g=cm(n);if(g||(n[rv]=g=new lm(n)),(t=g.add(e,t,r,c,u)).proxy)return t;if(r=function UD(){var e=jD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)OD||(o=c),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(mc(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function iv(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)iv(n,e[u],t,r,o);return null}return t=dm(t),n&&n[Qd]?n.O(e,t,dc(r)?!!r.capture:!!r,o):VD(n,e,t,!0,r,o)}function BD(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)BD(n,e[u],t,r,o);else r=dc(r)?!!r.capture:!!r,t=dm(t),n&&n[Qd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=zf(u=n.g[e],t,r,o))&&(nv(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=cm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=zf(e,t,r,o)),(t=-1<n?e[n]:null)&&sv(t))}function sv(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Qd])qf(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(mc(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=cm(e))?(qf(t,n),0==t.h&&(t.src=null,e[rv]=null)):nv(n)}}}function mc(n){return n in rw?rw[n]:rw[n]="on"+n}function jD(n,e){if(n.ca)n=!0;else{e=new Yd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&sv(n),n=t.call(r,e)}return n}function cm(n){return(n=n[rv])instanceof lm?n:null}var ov="__closure_events_fn_"+(1e9*Math.random()>>>0);function dm(n){return"function"==typeof n?n:(n[ov]||(n[ov]=function(e){return n.handleEvent(e)}),n[ov])}function ir(){Oo.call(this),this.i=new lm(this),this.P=this,this.I=null}function si(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ei(e,n);else if(e instanceof Ei)e.target=e.target||n;else{var o=e;gc(e=new Ei(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];o=Wf(c,r,!0,e)&&o}if(o=Wf(c=e.g=n,r,!0,e)&&o,o=Wf(c,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Wf(c=e.g=t[u],r,!1,e)&&o}function Wf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var g=c.listener,v=c.ia||c.src;c.fa&&qf(n.i,c),o=!1!==g.call(v,r)&&o}}return o&&!r.defaultPrevented}ri(ir,Oo),ir.prototype[Qd]=!0,ir.prototype.removeEventListener=function(n,e,t,r){BD(this,n,e,t,r)},ir.prototype.M=function(){if(ir.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)nv(t[r]);delete n.g[e],n.h--}}this.I=null},ir.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ir.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var av=xt.JSON.stringify;function $D(){var n=qD;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var hm,iw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new GD,n=>n.reset());class GD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function sw(n){xt.setTimeout(()=>{throw n},0)}function uv(n,e){hm||function ow(){var n=xt.Promise.resolve(void 0);hm=function(){n.then(lv)}}(),Kf||(hm(),Kf=!0),qD.add(n,e)}var Kf=!1,qD=new class HD{constructor(){this.h=this.g=null}add(e,t){const r=iw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function lv(){for(var n;n=$D();){try{n.h.call(n.g)}catch(t){sw(t)}var e=iw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Kf=!1}function fm(n,e){ir.call(this),this.h=n||1,this.g=e||xt,this.j=ni(this.kb,this),this.l=Date.now()}function aw(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function yc(n,e,t){if("function"==typeof n)t&&(n=ni(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ni(n.handleEvent,n)}return 2147483647<Number(e)?-1:xt.setTimeout(n,e||0)}function cv(n){n.g=yc(()=>{n.g=null,n.i&&(n.i=!1,cv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ri(fm,ir),(et=fm.prototype).da=!1,et.S=null,et.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),si(this,"tick"),this.da&&(aw(this),this.start()))}},et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.M=function(){fm.Z.M.call(this),aw(this),delete this.g};class dv extends Oo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cv(this)}M(){super.M(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _c(n){Oo.call(this),this.h=n,this.g={}}ri(_c,Oo);var uw=[];function Zf(n,e,t,r){Array.isArray(t)||(t&&(uw[0]=t.toString()),t=uw);for(var o=0;o<t.length;o++){var u=LD(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Yf(n){Gu(n.g,function(e,t){this.g.hasOwnProperty(t)&&sv(e)},n),n.g={}}function Jd(){this.g=!0}function zu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function lw(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<o.length;c++)o[c]=""}}}return av(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}_c.prototype.M=function(){_c.Z.M.call(this),Yf(this)},_c.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jd.prototype.Aa=function(){this.g=!1},Jd.prototype.info=function(){};var vc={},pm=null;function Qf(){return pm=pm||new ir}function fv(n){Ei.call(this,vc.Ma,n)}function Ec(n){const e=Qf();si(e,new fv(e,n))}function pv(n,e){Ei.call(this,vc.STAT_EVENT,n),this.stat=e}function Ui(n){const e=Qf();si(e,new pv(e,n))}function gv(n,e){Ei.call(this,vc.Na,n),this.size=e}function Xd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){n()},e)}vc.Ma="serverreachability",ri(fv,Ei),vc.STAT_EVENT="statevent",ri(pv,Ei),vc.Na="timingevent",ri(gv,Ei);var eh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},cw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function mv(){}function hw(){}mv.prototype.h=null;var mm,th={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Jf(){Ei.call(this,"d")}function gm(){Ei.call(this,"c")}function Xf(){}function nh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new _c(this),this.P=fw,this.W=new fm(n=sm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new yv}function yv(){this.i=null,this.g="",this.h=!1}ri(Jf,Ei),ri(gm,Ei),ri(Xf,mv),Xf.prototype.g=function(){return new XMLHttpRequest},Xf.prototype.i=function(){return{}},mm=new Xf;var fw=45e3,ym={},ep={};function pw(n,e,t){n.K=1,n.v=Es(Zu(e)),n.s=t,n.U=!0,gw(n,null)}function gw(n,e){n.F=Date.now(),zn(n),n.A=Zu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Cv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new yv,n.g=dp(n.l,t?e:null,!n.s),0<n.O&&(n.L=new dv(ni(n.Ia,n,n.g),n.O)),Zf(n.V,n.g,"readystatechange",n.gb),e=n.H?fc(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Ec(1),function xS(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var c="",g=u.split("&"),v=0;v<g.length;v++){var I=g[v].split("=");if(1<I.length){var S=I[0];I=I[1];var x=S.split("_");c=2<=x.length&&"type"==x[1]?c+(S+"=")+I+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function mw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function _v(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=WD(n,t),o==ep){4==e&&(n.o=4,Ui(14),r=!1),zu(n.j,n.m,null,"[Incomplete Response]");break}if(o==ym){n.o=4,Ui(15),zu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}zu(n.j,n.m,o,null),Ev(n,o)}mw(n)&&o!=ep&&o!=ym&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ui(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Rm(e),e.L=!0,Ui(11))):(zu(n.j,n.m,t,"[Invalid Chunked Response]"),Wu(n),tp(n))}function WD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ep:(t=Number(e.substring(t,r)),isNaN(t)?ym:(r+=1)+t>e.length?ep:(e=e.substr(r,t),n.C=r+t,e))}function zn(n){n.Y=Date.now()+n.P,vv(n,n.P)}function vv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Xd(ni(n.eb,n),e)}function _m(n){n.B&&(xt.clearTimeout(n.B),n.B=null)}function tp(n){0==n.l.G||n.I||xw(n.l,n)}function Wu(n){_m(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,aw(n.W),Yf(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ev(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||wm(t.i,n)))if(t.I=n.N,!n.J&&wm(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(I){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Xd(ni(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;ft(t),lp(t)}Nm(t),Ui(18)}if(1>=Sv(t.i)&&t.ka){try{t.ka()}catch(I){}t.ka=void 0}}else Ic(t,11)}else if((n.J||t.g==n)&&ft(t),!Hu(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let I=o[e];if(t.U=I[0],I=I[1],2==t.G)if("c"==I[0]){t.J=I[1],t.la=I[2];const S=I[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const x=I[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const V=I[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const H=n.g;if(H){const z=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var u=r.i;!u.g&&(rr(z,"spdy")||rr(z,"quic")||rr(z,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(bm(u,u.h),u.h=null))}if(r.D){const ye=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;ye&&(r.sa=ye,Ln(r.F,r.D,ye))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Rw(r,r.H?r.la:null,r.W),c.J){Mv(r.i,c);var g=c,v=r.K;v&&g.setTimeout(v),g.B&&(_m(g),zn(g)),r.g=c}else oC(r);0<t.l.length&&Sm(t)}else"stop"!=I[0]&&"close"!=I[0]||Ic(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?Ic(t,7):Am(t):"noop"!=I[0]&&t.j&&t.j.wa(I),t.A=0)}Ec(4)}catch(I){}}function vm(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(tm(n)||"string"==typeof n)J0(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(tm(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function yw(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(tm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function ko(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof ko)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function wv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];wc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)wc(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function wc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(et=nh.prototype).setTimeout=function(n){this.P=n},et.gb=function(n){n=n.target;const e=this.L;e&&3==ya(n)?e.l():this.Ia(n)},et.Ia=function(n){try{if(n==this.g)e:{const S=ya(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>S)&&(3!=S||sm||this.g&&(this.h.h||this.g.ga()||Ov(this.g)))){this.I||4!=S||7==e||Ec(8==e||0>=x?3:2),_m(this);var t=this.g.ba();this.N=t;t:if(mw(this)){var r=Ov(this.g);n="";var o=r.length,u=4==ya(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Wu(this),tp(this);var c="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function zD(n,e,t,r,o,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,v=this.g;if((g=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hu(g)){var I=g;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,Ui(12),Wu(this),tp(this);break e}zu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ev(this,t)}this.U?(_v(this,S,c),sm&&this.i&&3==S&&(Zf(this.V,this.W,"tick",this.fb),this.W.start())):(zu(this.j,this.m,c,null),Ev(this,c)),4==S&&Wu(this),this.i&&!this.I&&(4==S?xw(this.l,this):(this.i=!1,zn(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ui(12)):(this.o=0,Ui(13)),Wu(this),tp(this)}}}catch(S){}},et.fb=function(){if(this.g){var n=ya(this.g),e=this.g.ga();this.C<e.length&&(_m(this),_v(this,n,e),this.i&&4!=n&&zn(this))}},et.cancel=function(){this.I=!0,Wu(this)},et.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function hv(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ec(3),Ui(17)),Wu(this),this.o=2,tp(this)):vv(this,this.Y-n)},(et=ko.prototype).R=function(){wv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},et.T=function(){return wv(this),this.g.concat()},et.get=function(n,e){return wc(this.h,n)?this.h[n]:e},et.set=function(n,e){wc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},et.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var bv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ku(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ku){this.g=void 0!==e?e:n.g,np(this,n.j),this.s=n.s,rh(this,n.i),vs(this,n.m),this.l=n.l,e=n.h;var t=new ip;t.i=e.i,e.g&&(t.g=new ko(e.g),t.h=e.h),_w(this,t),this.o=n.o}else n&&(t=String(n).match(bv))?(this.g=!!e,np(this,t[1]||"",!0),this.s=ih(t[2]||""),rh(this,t[3]||"",!0),vs(this,t[4]),this.l=ih(t[5]||"",!0),_w(this,t[6]||"",!0),this.o=ih(t[7]||"")):(this.g=!!e,this.h=new ip(null,this.g))}function Zu(n){return new Ku(n)}function np(n,e,t){n.j=t?ih(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function rh(n,e,t){n.i=t?ih(e,!0):e}function vs(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function _w(n,e,t){e instanceof ip?(n.h=e,function JD(n,e){e&&!n.j&&(Wa(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Ew(this,r),Cv(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=sh(e,Iv)),n.h=new ip(e,n.g))}function Ln(n,e,t){n.h.set(e,t)}function Es(n){return Ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ih(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function sh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ZD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ZD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ku.prototype.toString=function(){var n=[],e=this.j;e&&n.push(sh(e,vw,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(sh(e,vw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(sh(t,"/"==t.charAt(0)?QD:YD,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",sh(t,rp)),n.join("")};var vw=/[#\/\?@]/g,YD=/[#\?:]/g,QD=/[#\?]/g,Iv=/[#\?@]/g,rp=/#/g;function ip(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Wa(n){n.g||(n.g=new ko,n.h=0,n.i&&function KD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ew(n,e){Wa(n),e=Ka(n,e),wc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,wc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&wv(n)))}function Dv(n,e){return Wa(n),e=Ka(n,e),wc(n.g.h,e)}function Cv(n,e,t){Ew(n,e),0<t.length&&(n.i=null,n.g.set(Ka(n,e),ro(t)),n.h+=t.length)}function Ka(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Tv(n){this.l=n||Av,n=xt.PerformanceNavigationTiming?0<(n=xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(xt.g&&xt.g.Ea&&xt.g.Ea()&&xt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=ip.prototype).add=function(n,e){Wa(this),this.i=null,n=Ka(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){Wa(this),this.g.forEach(function(t,r){J0(t,function(o){n.call(e,o,r,this)},this)},this)},et.T=function(){Wa(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},et.R=function(n){Wa(this);var e=[];if("string"==typeof n)Dv(this,n)&&(e=rm(e,this.g.get(Ka(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=rm(e,n[t])}return e},et.set=function(n,e){return Wa(this),this.i=null,Dv(this,n=Ka(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=o;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var Av=10;function Em(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Sv(n){return n.h?1:n.g?n.g.size:0}function wm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function bm(n,e){n.g?n.g.add(e):n.h=e}function Mv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function xv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ro(n.i)}function Im(){}function bw(){this.g=new Im}function Iw(n,e,t){const r=t||"";try{vm(n,function(o,u){let c=o;dc(o)&&(c=av(o)),e.push(r+u+"="+encodeURIComponent(c))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Dm(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function sp(n){this.l=n.$b||null,this.j=n.ib||!1}function Cm(n,e){ir.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Nv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tv.prototype.cancel=function(){if(this.i=xv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Im.prototype.stringify=function(n){return xt.JSON.stringify(n,void 0)},Im.prototype.parse=function(n){return xt.JSON.parse(n,void 0)},ri(sp,mv),sp.prototype.g=function(){return new Cm(this.l,this.j)},sp.prototype.i=function(n){return function(){return n}}({}),ri(Cm,ir);var Nv=0;function Dw(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function op(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ap(n)}function ap(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=Cm.prototype).open=function(n,e){if(this.readyState!=Nv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ap(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||xt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,op(this)),this.readyState=Nv},et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ap(this)),this.g&&(this.readyState=3,ap(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==xt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Dw(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?op(this):ap(this),3==this.readyState&&Dw(this)}},et.Ua=function(n){this.g&&(this.response=this.responseText=n,op(this))},et.Ta=function(n){this.g&&(this.response=n,op(this))},et.ha=function(){this.g&&op(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Cm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var eC=xt.JSON.parse;function yr(n){ir.call(this),this.headers=new ko,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Cw,this.K=this.L=!1}ri(yr,ir);var Cw="",tC=/^https?$/i,nC=["POST","PUT"];function iC(n){return"content-type"==n.toLowerCase()}function Tw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Aw(n),up(n)}function Aw(n){n.D||(n.D=!0,si(n,"complete"),si(n,"error"))}function Sw(n){if(n.h&&void 0!==em&&(!n.C[1]||4!=ya(n)||2!=n.ba()))if(n.v&&4==ya(n))yc(n.Fa,0,n);else if(si(n,"readystatechange"),4==ya(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(bv)[1]||null;if(!o&&xt.self&&xt.self.location){var u=xt.self.location.protocol;o=u.substr(0,u.length-1)}r=!tC.test(o?o.toLowerCase():"")}t=r}if(t)si(n,"complete"),si(n,"success");else{n.m=6;try{var c=2<ya(n)?n.g.statusText:""}catch(v){c=""}n.j=c+" ["+n.ba()+"]",Aw(n)}}finally{up(n)}}}function up(n,e){if(n.g){Rv(n);const t=n.g,r=n.C[0]?Q_:null;n.g=null,n.C=null,e||si(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Rv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(xt.clearTimeout(n.A),n.A=null)}function ya(n){return n.g?n.g.readyState:0}function Ov(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Cw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Tm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Mw(n){let e="";return Gu(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ln(n,e,t))}function oh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Pv(n){this.za=0,this.l=[],this.h=new Jd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=oh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=oh("baseRetryDelayMs",5e3,n),this.$a=oh("retryDelaySeedMs",1e4,n),this.Ya=oh("forwardChannelMaxRetries",2,n),this.ra=oh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Tv(n&&n.concurrentRequestLimit),this.Ca=new bw,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Am(n){if(kv(n),3==n.G){var e=n.V++,t=Zu(n.F);Ln(t,"SID",n.J),Ln(t,"RID",e),Ln(t,"TYPE","terminate"),Mm(n,t),(e=new nh(n,n.h,e,void 0)).K=2,e.v=Es(Zu(t)),t=!1,xt.navigator&&xt.navigator.sendBeacon&&(t=xt.navigator.sendBeacon(e.v.toString(),"")),!t&&xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=dp(e.l,null),e.g.ea(e.v)),e.F=Date.now(),zn(e)}cp(n)}function lp(n){n.g&&(Rm(n),n.g.cancel(),n.g=null)}function kv(n){lp(n),n.u&&(xt.clearTimeout(n.u),n.u=null),ft(n),n.i.cancel(),n.m&&("number"==typeof n.m&&xt.clearTimeout(n.m),n.m=null)}function Za(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Sm(n)}function Sm(n){Em(n.i)||n.m||(n.m=!0,uv(n.Ha,n),n.C=0)}function bc(n,e){var t;t=e?e.m:n.V++;const r=Zu(n.F);Ln(r,"SID",n.J),Ln(r,"RID",t),Ln(r,"AID",n.U),Mm(n,r),n.o&&n.s&&Tm(r,n.o,n.s),t=new nh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=xm(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),bm(n.i,t),pw(t,r,e)}function Mm(n,e){n.j&&vm({},function(t,r){Ln(e,r,t)})}function xm(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ni(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=o[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let g=!0;for(let v=0;v<t;v++){let I=o[v].h;const S=o[v].g;if(I-=u,0>I)u=Math.max(0,o[v].h-100),g=!1;else try{Iw(S,c,"req"+I+"_")}catch(x){r&&r(S)}}if(g){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function oC(n){n.g||n.u||(n.Y=1,uv(n.Ga,n),n.A=0)}function Nm(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Xd(ni(n.Ga,n),Nw(n,n.A)),n.A++,0))}function Rm(n){null!=n.B&&(xt.clearTimeout(n.B),n.B=null)}function aC(n){n.g=new nh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Zu(n.oa);Ln(e,"RID","rpc"),Ln(e,"SID",n.J),Ln(e,"CI",n.N?"0":"1"),Ln(e,"AID",n.U),Mm(n,e),Ln(e,"TYPE","xmlhttp"),n.o&&n.s&&Tm(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Es(Zu(e)),t.s=null,t.U=!0,gw(t,n)}function ft(n){null!=n.v&&(xt.clearTimeout(n.v),n.v=null)}function xw(n,e){var t=null;if(n.g==e){ft(n),Rm(n),n.g=null;var r=2}else{if(!wm(n.i,e))return;t=e.D,Mv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;si(r=Qf(),new gv(r,t,e,o)),Sm(n)}else oC(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function sC(n,e){return!(Sv(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Xd(ni(n.Ha,n,e),Nw(n,n.C)),n.C++,0)))}(n,e)||2==r&&Nm(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Ic(n,5);break;case 4:Ic(n,10);break;case 3:Ic(n,6);break;default:Ic(n,2)}}function Nw(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ic(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ni(n.jb,n);t||(t=new Ku("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||np(t,"https"),Es(t)),function XD(n,e){const t=new Jd;if(xt.Image){const r=new Image;r.onload=nm(Dm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=nm(Dm,t,r,"TestLoadImage: error",!1,e),r.onabort=nm(Dm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=nm(Dm,t,r,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ui(2);n.G=0,n.j&&n.j.va(e),cp(n),kv(n)}function cp(n){n.G=0,n.I=-1,n.j&&((0!=xv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,ro(n.l),n.l.length=0),n.j.ua())}function Rw(n,e,t){let r=function Fo(n){return n instanceof Ku?Zu(n):new Ku(n,void 0)}(t);if(""!=r.i)e&&rh(r,e+"."+r.i),vs(r,r.m);else{const o=xt.location;r=function Lo(n,e,t,r){var o=new Ku(null,void 0);return n&&np(o,n),e&&rh(o,e),t&&vs(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Gu(n.aa,function(o,u){Ln(r,u,o)}),t=n.sa,(e=n.D)&&t&&Ln(r,e,t),Ln(r,"VER",n.ma),Mm(n,r),r}function dp(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new yr(t&&n.Ba&&!n.qa?new sp({ib:!0}):n.qa)).L=n.H,e}function hp(){}function Mn(){if(Po&&!(10<=Number(nw)))throw Error("Environmental error: no available transport.")}function io(n,e){ir.call(this),this.g=new Pv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Hu(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hu(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ah(this)}function Fv(n){Jf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Ow(){gm.call(this),this.status=1}function ah(n){this.g=n}(et=yr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():mm.g(),this.C=function dw(n){return n.h||(n.h=n.i())}(this.u?this.u:mm),this.g.onreadystatechange=ni(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Tw(this,u)}n=t||"";const o=new ko(this.headers);r&&vm(r,function(u,c){o.set(c,u)}),r=function ND(n){e:{var e=iC;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=xt.FormData&&n instanceof xt.FormData,!(0<=zd(nC,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Rv(this),0<this.B&&((this.K=function rC(n){return Po&&function ew(){return function Kd(n){var e=RD;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ii(String(Gf)).split("."),t=ii("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var o=e[c]||"",u=t[c]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Wd(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Wd(0==o[2].length,0==u[2].length)||Wd(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ni(this.pa,this)):this.A=yc(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Tw(this,u)}},et.pa=function(){void 0!==em&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,si(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,si(this,"complete"),si(this,"abort"),up(this))},et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),up(this,!0)),yr.Z.M.call(this)},et.Fa=function(){this.s||(this.F||this.v||this.l?Sw(this):this.cb())},et.cb=function(){Sw(this)},et.ba=function(){try{return 2<ya(this)?this.g.status:-1}catch(n){return-1}},et.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},et.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),eC(e)}},et.Da=function(){return this.m},et.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=Pv.prototype).ma=8,et.G=1,et.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},et.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new nh(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=fc(u),gc(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=xm(this,o,e),Ln(t=Zu(this.F),"RID",n),Ln(t,"CVER",22),this.D&&Ln(t,"X-HTTP-Session-Id",this.D),Mm(this,t),this.o&&u&&Tm(t,this.o,u),bm(this.i,o),this.Ra&&Ln(t,"TYPE","init"),this.ja?(Ln(t,"$req",e),Ln(t,"SID","null"),o.$=!0,pw(o,t,null)):pw(o,t,e),this.G=2}}else 3==this.G&&(n?bc(this,n):0==this.l.length||Em(this.i)||bc(this))},et.Ga=function(){if(this.u=null,aC(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Xd(ni(this.bb,this),n)}},et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ui(10),lp(this),aC(this))},et.ab=function(){null!=this.v&&(this.v=null,lp(this),Nm(this),Ui(19))},et.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ui(2)):(this.h.info("Failed to ping google.com"),Ui(1))},(et=hp.prototype).xa=function(){},et.wa=function(){},et.va=function(){},et.ua=function(){},et.Oa=function(){},Mn.prototype.g=function(n,e){return new io(n,e)},ri(io,ir),io.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),uv(ni(n.hb,n,e))),Ui(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Rw(n,null,n.W),Sm(n)},io.prototype.close=function(){Am(this.g)},io.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Za(this.g,e)}else this.v?((e={}).__data__=av(n),Za(this.g,e)):Za(this.g,n)},io.prototype.M=function(){this.g.j=null,delete this.j,Am(this.g),delete this.g,io.Z.M.call(this)},ri(Fv,Jf),ri(Ow,gm),ri(ah,hp),ah.prototype.xa=function(){si(this.g,"a")},ah.prototype.wa=function(n){si(this.g,new Fv(n))},ah.prototype.va=function(n){si(this.g,new Ow(n))},ah.prototype.ua=function(){si(this.g,"b")},Mn.prototype.createWebChannel=Mn.prototype.g,io.prototype.send=io.prototype.u,io.prototype.open=io.prototype.m,io.prototype.close=io.prototype.close,eh.NO_ERROR=0,eh.TIMEOUT=8,eh.HTTP_ERROR=6,cw.COMPLETE="complete",hw.EventType=th,th.OPEN="a",th.CLOSE="b",th.ERROR="c",th.MESSAGE="d",ir.prototype.listen=ir.prototype.N,yr.prototype.listenOnce=yr.prototype.O,yr.prototype.getLastError=yr.prototype.La,yr.prototype.getLastErrorCode=yr.prototype.Da,yr.prototype.getStatus=yr.prototype.ba,yr.prototype.getResponseJson=yr.prototype.Qa,yr.prototype.getResponseText=yr.prototype.ga,yr.prototype.send=yr.prototype.ea;var Pw=ma.createWebChannelTransport=function(){return new Mn},kw=ma.getStatEventTarget=function(){return Qf()},Om=ma.ErrorCode=eh,Fw=ma.EventType=cw,uC=ma.Event=vc,Lw=ma.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},lC=ma.FetchXmlHttpFactory=sp,Yu=ma.WebChannel=hw,cC=ma.XhrIo=yr;const Vw="@firebase/firestore";class oi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");let Ya="9.6.10";const Qa=new jr.Yd("@firebase/firestore");function Pm(){return Qa.logLevel}function ke(n,...e){if(Qa.logLevel<=jr.in.DEBUG){const t=e.map(Lv);Qa.debug(`Firestore (${Ya}): ${n}`,...t)}}function Vn(n,...e){if(Qa.logLevel<=jr.in.ERROR){const t=e.map(Lv);Qa.error(`Firestore (${Ya}): ${n}`,...t)}}function Ja(n,...e){if(Qa.logLevel<=jr.in.WARN){const t=e.map(Lv);Qa.warn(`Firestore (${Ya}): ${n}`,...t)}}function Lv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${Ya}) INTERNAL ASSERTION FAILED: `+n;throw Vn(e),new Error(e)}function Tt(n,e){n||tt()}function Ge(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Kt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Nr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class jw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(oi.UNAUTHENTICATED))}shutdown(){}}class NS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class RS{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=I=>this.i!==o?(o=this.i,t(I)):Promise.resolve();let c=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Nr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const I=c;e.enqueueRetryable((0,ve.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},v=I=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(I=>v(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?v(I):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Nr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new jw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new oi(e)}}class OS{constructor(e,t,r){this.type="FirstParty",this.user=oi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class PS{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new OS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class km{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.p=t.token,new Vv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ws{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function $w(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ws.A=-1;class uh{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=$w(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Wt(n,e){return n<e?-1:n>e?1:0}function lh(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Hw(n){return n+"\0"}class sr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return sr.fromMillis(Date.now())}static fromDate(e){return sr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new sr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new sr(0,0))}static max(){return new bt(new sr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Uv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Dc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Gw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class _a{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===_a.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _a?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),c=t.get(o);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xt extends _a{construct(e,t,r){return new Xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Xt(t)}static emptyPath(){return new Xt([])}}const qw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $r extends _a{construct(e,t,r){return new $r(e,t,r)}static isValidIdentifier(e){return qw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$r.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $r(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new xe(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new xe(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===g?(c=!c,o++):"."!==g||c?(r+=g,o++):(u(),o++)}if(u(),c)throw new xe(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $r(t)}static emptyPath(){return new $r([])}}class Cc{constructor(e){this.fields=e,e.sort($r.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _r(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const fC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function va(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=fC.exec(n);if(Tt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Jn(n.seconds),nanos:Jn(n.nanos)}}function Jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Qu(n){return"string"==typeof n?_r.fromBase64String(n):_r.fromUint8Array(n)}function Fm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function zw(n){const e=n.mapValue.fields.__previous_value__;return Fm(e)?zw(e):e}function fp(n){const e=va(n.mapValue.fields.__local_write_time__.timestampValue);return new sr(e.seconds,e.nanos)}class pC{constructor(e,t,r,o,u,c,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=g,this.useFetchStreams=v}}class Vo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Vo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Vo&&e.projectId===this.projectId&&e.database===this.database}}function Tc(n){return null==n}function ch(n){return 0===n&&1/n==-1/0}function Ww(n){return"number"==typeof n&&Number.isInteger(n)&&!ch(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class je{constructor(e){this.path=e}static fromPath(e){return new je(Xt.fromString(e))}static fromName(e){return new je(Xt.fromString(e).popFirst(5))}static empty(){return new je(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Xt(e.slice()))}}const Kw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Zw={nullValue:"NULL_VALUE"};function Ac(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fm(n)?4:$v(n)?9:10:tt()}function Ea(n,e){if(n===e)return!0;const t=Ac(n);if(t!==Ac(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fp(n).isEqual(fp(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=va(r.timestampValue),c=va(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Qu(n.bytesValue).isEqual(Qu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Jn(r.geoPointValue.latitude)===Jn(o.geoPointValue.latitude)&&Jn(r.geoPointValue.longitude)===Jn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Jn(r.integerValue)===Jn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Jn(r.doubleValue),c=Jn(o.doubleValue);return u===c?ch(u)===ch(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return lh(n.arrayValue.values||[],e.arrayValue.values||[],Ea);case 10:return function(r,o){const u=r.mapValue.fields||{},c=o.mapValue.fields||{};if(Uv(u)!==Uv(c))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===c[g]||!Ea(u[g],c[g])))return!1;return!0}(n,e);default:return tt()}var o}function pp(n,e){return void 0!==(n.values||[]).find(t=>Ea(t,e))}function Ju(n,e){if(n===e)return 0;const t=Ac(n),r=Ac(e);if(t!==r)return Wt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const c=Jn(o.integerValue||o.doubleValue),g=Jn(u.integerValue||u.doubleValue);return c<g?-1:c>g?1:c===g?0:isNaN(c)?isNaN(g)?0:-1:1}(n,e);case 3:return Bv(n.timestampValue,e.timestampValue);case 4:return Bv(fp(n),fp(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(o,u){const c=Qu(o),g=Qu(u);return c.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),g=u.split("/");for(let v=0;v<c.length&&v<g.length;v++){const I=Wt(c[v],g[v]);if(0!==I)return I}return Wt(c.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const c=Wt(Jn(o.latitude),Jn(u.latitude));return 0!==c?c:Wt(Jn(o.longitude),Jn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const c=o.values||[],g=u.values||[];for(let v=0;v<c.length&&v<g.length;++v){const I=Ju(c[v],g[v]);if(I)return I}return Wt(c.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const c=o.fields||{},g=Object.keys(c),v=u.fields||{},I=Object.keys(v);g.sort(),I.sort();for(let S=0;S<g.length&&S<I.length;++S){const x=Wt(g[S],I[S]);if(0!==x)return x;const V=Ju(c[g[S]],v[I[S]]);if(0!==V)return V}return Wt(g.length,I.length)}(n.mapValue,e.mapValue);default:throw tt()}}function Bv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=va(n),r=va(e),o=Wt(t.seconds,r.seconds);return 0!==o?o:Wt(t.nanos,r.nanos)}function Sc(n){return jv(n)}function jv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=va(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Qu(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const c of r.values||[])u?u=!1:o+=",",o+=jv(c);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const g of o)c?c=!1:u+=",",u+=`${g}:${jv(r.fields[g])}`;return u+"}"}(n.mapValue):tt();var e}function dh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Lm(n){return!!n&&"integerValue"in n}function gp(n){return!!n&&"arrayValue"in n}function Yw(n){return!!n&&"nullValue"in n}function Qw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hh(n){return!!n&&"mapValue"in n}function Mc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Dc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Mc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $v(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Vm(n,e){return void 0===n?e:void 0===e||Ju(n,e)>0?n:e}function Jw(n,e){return void 0===n?e:void 0===e||Ju(n,e)<0?n:e}class wi{constructor(e){this.value=e}static empty(){return new wi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mc(t)}setAll(e){let t=$r.emptyPath(),r={},o=[];e.forEach((c,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=g.popLast()}c?r[g.lastSegment()]=Mc(c):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());hh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ea(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];hh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Dc(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new wi(Mc(this.value))}}function Um(n){const e=[];return Dc(n.fields,(t,r)=>{const o=new $r([t]);if(hh(r)){const u=Um(r.mapValue).fields;if(0===u.length)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)}),new Cc(e)}class xn{constructor(e,t,r,o,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new xn(e,0,bt.min(),bt.min(),wi.empty(),0)}static newFoundDocument(e,t,r){return new xn(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new xn(e,2,t,bt.min(),wi.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,bt.min(),wi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mp{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Hv(n){return n.fields.find(e=>2===e.kind)}function xc(n){return n.fields.filter(e=>2!==e.kind)}mp.UNKNOWN_ID=-1;class Bm{constructor(e,t){this.fieldPath=e,this.kind=t}}class fh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fh(0,so.min())}}function gC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=bt.fromTimestamp(1e9===r?new sr(t+1,0):new sr(t,r));return new so(o,je.empty(),e)}function mC(n){return new so(n.readTime,n.key,-1)}class so{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new so(bt.min(),je.empty(),-1)}static max(){return new so(bt.max(),je.empty(),-1)}}function yC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:Wt(n.largestBatchId,e.largestBatchId))}class ph{constructor(e,t=null,r=[],o=[],u=null,c=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=g,this.P=null}}function gh(n,e=null,t=[],r=[],o=null,u=null,c=null){return new ph(n,e,t,r,o,u,c)}function Nc(n){const e=Ge(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Sc(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Tc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Sc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Sc(r)).join(",")),e.P=t}return e.P}function mh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!EC(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Ea(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nb(n.startAt,e.startAt)&&nb(n.endAt,e.endAt)}function jm(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function $m(n,e){return n.filters.filter(t=>t instanceof ai&&t.field.isEqual(e))}class ai extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new _C(e,t,r):"array-contains"===t?new Gm(e,r):"in"===t?new yp(e,r):"not-in"===t?new vC(e,r):"array-contains-any"===t?new tb(e,r):new ai(e,t,r)}static V(e,t,r){return"in"===t?new Xw(e,r):new eb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ju(t,this.value)):null!==t&&Ac(this.value)===Ac(t)&&this.v(Ju(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class _C extends ai{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.v(t)}}class Xw extends ai{constructor(e,t){super(e,"in",t),this.keys=Hm(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class eb extends ai{constructor(e,t){super(e,"not-in",t),this.keys=Hm(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Hm(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class Gm extends ai{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gp(t)&&pp(t.arrayValue,this.value)}}class yp extends ai{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pp(this.value.arrayValue,t)}}class vC extends ai{constructor(e,t){super(e,"not-in",t)}matches(e){if(pp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pp(this.value.arrayValue,t)}}class tb extends ai{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pp(this.value.arrayValue,r))}}class Xa{constructor(e,t){this.position=e,this.inclusive=t}}class yh{constructor(e,t="asc"){this.field=e,this.dir=t}}function EC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function qm(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],c=n.position[o];if(r=u.field.isKeyField()?je.comparator(je.fromName(c.referenceValue),t.key):Ju(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function nb(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ea(n.position[t],e.position[t]))return!1;return!0}class Xu{constructor(e,t=null,r=[],o=[],u=null,c="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=g,this.endAt=v,this.D=null,this.C=null}}function rb(n,e,t,r,o,u,c,g){return new Xu(n,e,t,r,o,u,c,g)}function _h(n){return new Xu(n)}function eu(n){return!Tc(n.limit)&&"F"===n.limitType}function _p(n){return!Tc(n.limit)&&"L"===n.limitType}function el(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ib(n){for(const e of n.filters)if(e.S())return e.field;return null}function zm(n){return null!==n.collectionGroup}function vh(n){const e=Ge(n);if(null===e.D){e.D=[];const t=ib(e),r=el(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new yh(t)),e.D.push(new yh($r.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new yh($r.keyField(),u))}}}return e.D}function Uo(n){const e=Ge(n);if(!e.C)if("F"===e.limitType)e.C=gh(e.path,e.collectionGroup,vh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of vh(e))t.push(new yh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Xa(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Xa(e.startAt.position,!e.startAt.inclusive):null;e.C=gh(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function Gv(n,e,t){return new Xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wm(n,e){return mh(Uo(n),Uo(e))&&n.limitType===e.limitType}function qv(n){return`${Nc(Uo(n))}|lt:${n.limitType}`}function vp(n){return`Query(target=${function FS(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Sc(r.value)}`;var r}).join(", ")}]`),Tc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Sc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Sc(t)).join(",")),`Target(${e})`}(Uo(n))}; limitType=${n.limitType})`}function zv(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):je.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,c){const g=qm(o,u,c);return o.inclusive?g<=0:g<0}(t.startAt,vh(t),r)||t.endAt&&!function(o,u,c){const g=qm(o,u,c);return o.inclusive?g>=0:g>0}(t.endAt,vh(t),r)));var t,r}function sb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ob(n){return(e,t)=>{let r=!1;for(const o of vh(n)){const u=wC(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function wC(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(o,u,c){const g=u.data.field(o),v=c.data.field(o);return null!==g&&null!==v?Ju(g,v):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function ab(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ch(e)?"-0":e}}function ub(n){return{integerValue:""+n}}function lb(n,e){return Ww(e)?ub(e):ab(n,e)}class Km{constructor(){this._=void 0}}function bC(n,e,t){return n instanceof Rc?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof tl?Wv(n,e):n instanceof nl?Kv(n,e):function(r,o){const u=Eh(r,o),c=cb(u)+cb(r.k);return Lm(u)&&Lm(r.k)?ub(c):ab(r.M,c)}(n,e)}function IC(n,e,t){return n instanceof tl?Wv(n,e):n instanceof nl?Kv(n,e):t}function Eh(n,e){return n instanceof Oc?Lm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Rc extends Km{}class tl extends Km{constructor(e){super(),this.elements=e}}function Wv(n,e){const t=Zv(e);for(const r of n.elements)t.some(o=>Ea(o,r))||t.push(r);return{arrayValue:{values:t}}}class nl extends Km{constructor(e){super(),this.elements=e}}function Kv(n,e){let t=Zv(e);for(const r of n.elements)t=t.filter(o=>!Ea(o,r));return{arrayValue:{values:t}}}class Oc extends Km{constructor(e,t){super(),this.M=e,this.k=t}}function cb(n){return Jn(n.integerValue||n.doubleValue)}function Zv(n){return gp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ep{constructor(e,t){this.field=e,this.transform=t}}class CC{constructor(e,t){this.version=e,this.transformResults=t}}class vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rl(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Zm{}function Yv(n,e,t){n instanceof wp?function(r,o,u){const c=r.value.clone(),g=bp(r.fieldTransforms,o,u.transformResults);c.setAll(g),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Pc?function(r,o,u){if(!rl(r.precondition,o))return void o.convertToUnknownDocument(u.version);const c=bp(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(db(r)),g.setAll(c),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function oo(n,e,t){var o;n instanceof wp?function(r,o,u){if(!rl(r.precondition,o))return;const c=r.value.clone(),g=Ip(r.fieldTransforms,u,o);c.setAll(g),o.convertToFoundDocument(wh(o),c).setHasLocalMutations()}(n,e,t):n instanceof Pc?function(r,o,u){if(!rl(r.precondition,o))return;const c=Ip(r.fieldTransforms,u,o),g=o.data;g.setAll(db(r)),g.setAll(c),o.convertToFoundDocument(wh(o),g).setHasLocalMutations()}(n,e,t):rl(n.precondition,o=e)&&o.convertToNoDocument(bt.min())}function TC(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Eh(r.transform,o||null);null!=u&&(null==t&&(t=wi.empty()),t.set(r.field,u))}return t||null}function Ym(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&lh(t,r,(o,u)=>function DC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof tl&&r instanceof tl||t instanceof nl&&r instanceof nl?lh(t.elements,r.elements,Ea):t instanceof Oc&&r instanceof Oc?Ea(t.k,r.k):t instanceof Rc&&r instanceof Rc);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function wh(n){return n.isFoundDocument()?n.version:bt.min()}class wp extends Zm{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Pc extends Zm{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function db(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function bp(n,e,t){const r=new Map;Tt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],c=u.transform,g=e.data.field(u.field);r.set(u.field,IC(c,g,t[o]))}return r}function Ip(n,e,t){const r=new Map;for(const o of n){const u=o.transform,c=t.data.field(o.field);r.set(o.field,bC(u,c,e))}return r}class Dp extends Zm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Qv extends Zm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class hb{constructor(e){this.count=e}}var or,Yt;function Jv(n){switch(n){default:return tt();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function fb(n){if(void 0===n)return Vn("GRPC error has no .code"),ue.UNKNOWN;switch(n){case or.OK:return ue.OK;case or.CANCELLED:return ue.CANCELLED;case or.UNKNOWN:return ue.UNKNOWN;case or.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case or.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case or.INTERNAL:return ue.INTERNAL;case or.UNAVAILABLE:return ue.UNAVAILABLE;case or.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case or.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case or.NOT_FOUND:return ue.NOT_FOUND;case or.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case or.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case or.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case or.ABORTED:return ue.ABORTED;case or.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case or.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case or.DATA_LOSS:return ue.DATA_LOSS;default:return tt()}}(Yt=or||(or={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";class il{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Dc(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Gw(this.inner)}size(){return this.innerSize}}class Er{constructor(e,t){this.comparator=e,this.root=t||Rr.EMPTY}insert(e,t){return new Er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(e){return new Er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bh(this.root,e,this.comparator,!0)}}class bh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Rr.RED,this.left=null!=o?o:Rr.EMPTY,this.right=null!=u?u:Rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Rr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Rr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1,Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Rr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bn{constructor(e){this.comparator=e,this.data=new Er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qm(this.data.getIterator())}getIteratorFrom(e){return new Qm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bn(this.comparator);return t.data=e,t}}class Qm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sl(n){return n.hasNext()?n.getNext():void 0}const AC=new Er(je.comparator);function ao(){return AC}const SC=new Er(je.comparator);function Xv(){return SC}function Ih(){return new il(n=>n.toString(),(n,e)=>n.isEqual(e))}const eE=new Er(je.comparator),pb=new bn(je.comparator);function gn(...n){let e=pb;for(const t of n)e=e.add(t);return e}const gb=new bn(Wt);function Cp(){return gb}class Tp{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Dh.createSynthesizedTargetChangeForCurrentChange(e,t)),new Tp(bt.min(),r,Cp(),ao(),gn())}}class Dh{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Dh(_r.EMPTY_BYTE_STRING,t,gn(),gn(),gn())}}class Ap{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class mb{constructor(e,t){this.targetId=e,this.$=t}}class tE{constructor(e,t,r=_r.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class yb{constructor(){this.B=0,this.L=_b(),this.U=_r.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=gn(),t=gn(),r=gn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new Dh(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=_b()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class Bi{constructor(e){this.nt=e,this.st=new Map,this.it=ao(),this.rt=kc(),this.ot=new bn(Wt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(jm(u))if(0===r){const c=new je(u.path);this.ct(t,c,xn.newNoDocument(c,bt.min()))}else Tt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const g=this.wt(c);if(g){if(u.current&&jm(g.target)){const v=new je(g.target.path);null!==this.it.get(v)||this.It(c,v)||this.ct(c,v,xn.newNoDocument(v,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=gn();this.rt.forEach((u,c)=>{let g=!0;c.forEachWhile(v=>{const I=this.wt(v);return!I||2===I.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const o=new Tp(e,t,this.ot,this.it,r);return this.it=ao(),this.rt=kc(),this.ot=new bn(Wt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new yb,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new bn(Wt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new yb),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function kc(){return new Er(je.comparator)}function _b(){return new Er(je.comparator)}const MC={asc:"ASCENDING",desc:"DESCENDING"},LS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Sp{constructor(e,t){this.databaseId=e,this.N=t}}function Mp(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jm(n,e){return n.N?e.toBase64():e.toUint8Array()}function xC(n,e){return Mp(n,e.toTimestamp())}function Or(n){return Tt(!!n),bt.fromTimestamp(function(e){const t=va(e);return new sr(t.seconds,t.nanos)}(n))}function nE(n,e){return(t=n,new Xt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function vb(n){const e=Xt.fromString(n);return Tt(Cb(e)),e}function Fc(n,e){return nE(n.databaseId,e.path)}function Bo(n,e){const t=vb(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(NC(t))}function Xm(n,e){return nE(n.databaseId,e)}function xp(n){const e=vb(n);return 4===e.length?Xt.emptyPath():NC(e)}function Lc(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function NC(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function rE(n,e,t){return{name:Fc(n,e),fields:t.value.mapValue.fields}}function Eb(n,e,t){const r=Bo(n,e.name),o=Or(e.updateTime),u=new wi({mapValue:{fields:e.fields}}),c=xn.newFoundDocument(r,o,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Ch(n,e){let t;if(e instanceof wp)t={update:rE(n,e.key,e.value)};else if(e instanceof Dp)t={delete:Fc(n,e.key)};else if(e instanceof Pc)t={update:rE(n,e.key,e.data),updateMask:Db(e.fieldMask)};else{if(!(e instanceof Qv))return tt();t={verify:Fc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof Rc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof tl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof nl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Oc)return{fieldPath:u.field.canonicalString(),increment:c.k};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:xC(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function iE(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?vr.updateTime(Or(o.updateTime)):void 0!==o.exists?vr.exists(o.exists):vr.none():vr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,c){let g=null;"setToServerValue"in c?(Tt("REQUEST_TIME"===c.setToServerValue),g=new Rc):"appendMissingElements"in c?g=new tl(c.appendMissingElements.values||[]):"removeAllFromArray"in c?g=new nl(c.removeAllFromArray.values||[]):"increment"in c?g=new Oc(u,c.increment):tt();const v=$r.fromServerFormat(c.fieldPath);return new Ep(v,g)}(n,o)):[];var o;if(e.update){const o=Bo(n,e.update.name),u=new wi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Cc((e.updateMask.fieldPaths||[]).map(I=>$r.fromServerFormat(I)));return new Pc(o,u,c,t,r)}return new wp(o,u,t,r)}if(e.delete){const o=Bo(n,e.delete);return new Dp(o,t)}if(e.verify){const o=Bo(n,e.verify);return new Qv(o,t)}return tt()}function ty(n,e){return{documents:[Xm(n,e.path)]}}function RC(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Xm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Xm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(v){if(0===v.length)return;const I=v.map(S=>function(x){if("=="===x.op){if(Qw(x.value))return{unaryFilter:{field:Vc(x.field),op:"IS_NAN"}};if(Yw(x.value))return{unaryFilter:{field:Vc(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(Qw(x.value))return{unaryFilter:{field:Vc(x.field),op:"IS_NOT_NAN"}};if(Yw(x.value))return{unaryFilter:{field:Vc(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vc(x.field),op:PC(x.op),value:x.value}}}(S));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(v){if(0!==v.length)return v.map(I=>{return{field:Vc((S=I).field),direction:Ib(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(I=e.limit,n.N||Tc(I)?I:{value:I});var I,g,v;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function bb(n){let e=xp(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Tt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=oE(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new yh(Uc((x=S).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let g=null;t.limit&&(g=function(S){let x;return x="object"==typeof S?S.value:S,Tc(x)?null:x}(t.limit));let v=null;var S;t.startAt&&(v=new Xa((S=t.startAt).values||[],!!S.before));let I=null;return t.endAt&&(I=function(S){return new Xa(S.values||[],!S.before)}(t.endAt)),rb(e,o,c,u,g,"F",v,I)}function oE(n){return n?void 0!==n.unaryFilter?[FC(n)]:void 0!==n.fieldFilter?[kC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>oE(e)).reduce((e,t)=>e.concat(t)):tt():[]}function Ib(n){return MC[n]}function PC(n){return LS[n]}function Vc(n){return{fieldPath:n.canonicalString()}}function Uc(n){return $r.fromServerFormat(n.fieldPath)}function kC(n){return ai.create(Uc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function FC(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Uc(n.unaryFilter.field);return ai.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Uc(n.unaryFilter.field);return ai.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Uc(n.unaryFilter.field);return ai.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Uc(n.unaryFilter.field);return ai.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function Db(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Cb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Pr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aE(e)),e=Tb(n.get(t),e);return aE(e)}function Tb(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function aE(n){return n+"\x01\x01"}function uo(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Xt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&tt(),n.charAt(c+1)){case"\x01":const g=n.substring(u,c);let v;0===o.length?v=g:(o+=g,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(u,c),o+="\0";break;case"\x11":o+=n.substring(u,c+1);break;default:tt()}u=c+2}return new Xt(r)}const Ab=["userId","batchId"];function ny(n,e){return[n,Pr(e)]}function LC(n,e,t){return[n,Pr(e),t]}const Sb={},VS=["prefixPath","collectionGroup","readTime","documentId"],US=["prefixPath","collectionGroup","documentId"],BS=["collectionGroup","readTime","prefixPath","documentId"],jS=["canonicalId","targetId"],$S=["targetId","path"],HS=["path","targetId"],GS=["collectionId","parent"],qS=["indexId","uid"],ry=["uid","sequenceNumber"],zS=["indexId","uid","arrayValue","directionalValue","documentKey"],Mb=["indexId","uid","documentKey"],uE=["userId","collectionPath","documentId"],xb=["userId","collectionPath","largestBatchId"],Nb=["userId","collectionGroup","largestBatchId"],VC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],lE=[...VC,"documentOverlays"],cE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Rb=[...cE,"indexConfiguration","indexState","indexEntries"],dE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let o=0,u=0,c=!1;e.forEach(g=>{++o,g.next(()=>{++u,c&&u===o&&t()},v=>r(v))}),c=!0,u===o&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(o=>o?he.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class iy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Nr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new sy(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=hE(r.target.error);this.At.reject(new sy(e,o))}}static open(e,t,r,o){try{return new iy(t,e.transaction(o,r))}catch(u){throw new sy(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new WS(t)}}class bs{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===bs.Vt((0,Kt.z$)())&&Vn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Bc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Kt.hl)())return!1;if(bs.St())return!0;const e=(0,Kt.z$)(),t=bs.Vt(e),r=0<t&&t<10,o=bs.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ve.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{o(new sy(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const g=c.target.error;o("VersionError"===g.name?new xe(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new xe(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new sy(e,g))},u.onupgradeneeded=c=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ve.Z)(function*(){const c="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.Nt(e);const v=iy.open(u.db,e,c?"readonly":"readwrite",r),I=o(v).next(S=>(v.bt(),S)).catch(S=>(v.abort(S),he.reject(S))).toPromise();return I.catch(()=>{}),yield v.Rt,I}catch(v){const I="FirebaseError"!==v.name&&g<3;if(ke("SimpleDb","Transaction failed with error:",v.message,"Retrying:",I),u.close(),!I)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class BC{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Bc(this.Ft.delete())}}class sy extends xe{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Th(n){return"IndexedDbTransactionError"===n.name}class WS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bc(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Bc(this.store.add(e))}get(e){return Bc(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Bc(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Bc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Gt(o,(c,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new he((u,c)=>{o.onerror=g=>{c(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Gt(o,(u,c,g)=>g.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Gt(o,t)}zt(e){const t=this.cursor({});return new he((r,o)=>{t.onerror=u=>{const c=hE(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(g=>{g?c.continue():r()}):r()}})}Gt(e,t){const r=[];return new he((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const g=c.target.result;if(!g)return void o();const v=new BC(g),I=t(g.primaryKey,g.value,v);if(I instanceof he){const S=I.catch(x=>(v.done(),he.reject(x)));r.push(S)}v.isDone?o():null===v.Lt?g.continue():g.continue(v.Lt)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bc(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=hE(r.target.error);t(o)}})}let Ob=!1;function hE(n){const e=bs.Vt((0,Kt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ob||(Ob=!0,setTimeout(()=>{throw r},0)),r}}return n}class jC extends UC{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Hr(n,e){const t=Ge(n);return bs.xt(t.Ht,e)}class Np{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Yv(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&oo(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&oo(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(bt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gn())}isEqual(e){return this.batchId===e.batchId&&lh(this.mutations,e.mutations,(t,r)=>Ym(t,r))&&lh(this.baseMutations,e.baseMutations,(t,r)=>Ym(t,r))}}class fE{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Tt(e.mutations.length===r.length);let o=eE;const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new fE(e,t,r,o)}}class Is{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ol{constructor(e,t,r,o,u=bt.min(),c=bt.min(),g=_r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=g}withSequenceNumber(e){return new ol(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ol(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ol(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class oy{constructor(e){this.Jt=e}}function Pb(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ah(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Fc(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Mp(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:al(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:al(e.version)}}var o,u;return r}function Ah(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function al(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ul(n){const e=new sr(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function Sh(n,e){const t=(e.baseMutations||[]).map(u=>iE(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>iE(n.Jt,u)),o=sr.fromMillis(e.localWriteTimeMs);return new Np(e.batchId,o,t,r)}function Mh(n){const e=ul(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ul(n.lastLimboFreeSnapshotVersion):bt.min();let r;var o;return void 0!==n.query.documents?(Tt(1===(o=n.query).documents.length),r=Uo(_h(xp(o.documents[0])))):r=Uo(bb(n.query)),new ol(r,n.targetId,0,n.lastListenSequenceNumber,e,t,_r.fromBase64String(n.resumeToken))}function pE(n,e){const t=al(e.snapshotVersion),r=al(e.lastLimboFreeSnapshotVersion);let o;o=jm(e.target)?ty(n.Jt,e.target):RC(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Nc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function gE(n){const e=bb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Gv(e,e.limit,"L"):e}function mE(n,e){return new Is(e.largestBatchId,iE(n.Jt,e.overlayMutation))}function ay(n,e){const t=e.path.lastSegment();return[n,Pr(e.path.popLast()),t]}class jo{getBundleMetadata(e,t){return kb(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:ul(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return kb(e).put({bundleId:(r=t).id,createTime:al(Or(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return HC(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:gE(o.bundledQuery),readTime:ul(o.readTime)};var o})}saveNamedQuery(e,t){return HC(e).put({name:(r=t).name,readTime:al(Or(r.readTime)),bundledQuery:r.bundledQuery});var r}}function kb(n){return Hr(n,"bundles")}function HC(n){return Hr(n,"namedQueries")}class yE{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new yE(e,t.uid||"")}getOverlay(e,t){return xh(e).get(ay(this.userId,t)).next(r=>r?mE(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,c)=>{const g=new Is(t,c);o.push(this.Xt(e,g))}),he.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(Pr(c.getCollectionPath())));const u=[];return o.forEach(c=>{const g=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(xh(e).Qt("collectionPathOverlayIndex",g))}),he.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Ih(),u=Pr(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return xh(e).qt("collectionPathOverlayIndex",c).next(g=>{for(const v of g){const I=mE(this.M,v);o.set(I.getKey(),I)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Ih();let c;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xh(e).Wt({index:"collectionGroupOverlayIndex",range:g},(v,I,S)=>{const x=mE(this.M,I);u.size()<o||x.largestBatchId===c?(u.set(x.getKey(),x),c=x.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return xh(e).put(function(r,o,u){const[c,g,v]=ay(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ch(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function xh(n){return Hr(n,"documentOverlays")}class Nh{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Jn(e.integerValue));else if("doubleValue"in e){const r=Jn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),ch(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Qu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?$v(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):tt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function GC(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function _E(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=GC(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Nh.fe=new Nh;class qC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=_E(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=_E(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class KS{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Fb{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Rp{constructor(){this.De=new qC,this.Ce=new KS(this.De),this.xe=new Fb(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ll{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ll(this.indexId,this.documentKey,this.arrayValue,r)}}function jc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=vE(n.arrayValue,e.arrayValue),0!==t?t:(t=vE(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function vE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class EE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Hv(e);if(void 0!==t&&!this.Be(t))return!1;const r=xc(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const c=r[o];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++o}for(;o<r.length;++o){const c=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class wE{constructor(){this.qe=new uy}addToCollectionParentIndex(e,t){return this.qe.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getFieldIndex(e,t){return he.resolve(null)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class uy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new bn(Xt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new bn(Xt.comparator)).toArray()}}const ly=new Uint8Array(0);class Lb{constructor(e){this.user=e,this.Ge=new uy,this.Ke=new il(t=>Nc(t),(t,r)=>mh(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const u={collectionId:r,parent:Pr(o)};return bE(e).put(u)}return he.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Hw(t),""],!1,!0);return bE(e).qt(o).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(uo(c.parent))}return r})}addFieldIndex(e,t){const r=cy(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=cy(e),o=IE(e),u=Op(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Op(e);let o=!0;const u=new Map;return he.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(g=>{o&&(o=!!g),u.set(c,g)})).next(()=>{if(o){let c=gn();return he.forEach(u,(g,v)=>{var I;ke("IndexedDbIndexManager",`Using index ${I=g,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(ze=>`${ze.fieldPath}:${ze.kind}`).join(",")}`} to execute ${Nc(t)}`);const S=function(ze,Ut){const nt=Hv(Ut);if(void 0===nt)return null;for(const Ot of $m(ze,nt.fieldPath))switch(Ot.op){case"array-contains-any":return Ot.value.arrayValue.values||[];case"array-contains":return[Ot.value]}return null}(v,g),x=function(ze,Ut){const nt=new Map;for(const Ot of xc(Ut))for(const Ct of $m(ze,Ot.fieldPath))switch(Ct.op){case"==":case"in":nt.set(Ot.fieldPath.canonicalString(),Ct.value);break;case"not-in":case"!=":return nt.set(Ot.fieldPath.canonicalString(),Ct.value),Array.from(nt.values())}return null}(v,g),V=function(ze,Ut){const nt=[];let Ot=!0;for(const Un of xc(Ut)){let ar,$i=!0;for(const vn of $m(ze,Un.fieldPath)){let Bn,Da=!0;switch(vn.op){case"<":case"<=":Bn="nullValue"in(Ct=vn.value)?Zw:"booleanValue"in Ct?{booleanValue:!1}:"integerValue"in Ct||"doubleValue"in Ct?{doubleValue:NaN}:"timestampValue"in Ct?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Ct?{stringValue:""}:"bytesValue"in Ct?{bytesValue:""}:"referenceValue"in Ct?dh(Vo.empty(),je.empty()):"geoPointValue"in Ct?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Ct?{arrayValue:{}}:"mapValue"in Ct?{mapValue:{}}:tt();break;case"==":case"in":case">=":Bn=vn.value;break;case">":Bn=vn.value,Da=!1;break;case"!=":case"not-in":Bn=Zw}Vm(ar,Bn)===Bn&&(ar=Bn,$i=Da)}if(null!==ze.startAt)for(let vn=0;vn<ze.orderBy.length;++vn)if(ze.orderBy[vn].field.isEqual(Un.fieldPath)){const Bn=ze.startAt.position[vn];Vm(ar,Bn)===Bn&&(ar=Bn,$i=ze.startAt.inclusive);break}if(void 0===ar)return null;nt.push(ar),Ot&&(Ot=$i)}var Ct;return new Xa(nt,Ot)}(v,g),H=function(ze,Ut){const nt=[];let Ot=!0;for(const Un of xc(Ut)){let ar,$i=!0;for(const vn of $m(ze,Un.fieldPath)){let Bn,Da=!0;switch(vn.op){case">=":case">":Bn="nullValue"in(Ct=vn.value)?{booleanValue:!1}:"booleanValue"in Ct?{doubleValue:NaN}:"integerValue"in Ct||"doubleValue"in Ct?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Ct?{stringValue:""}:"stringValue"in Ct?{bytesValue:""}:"bytesValue"in Ct?dh(Vo.empty(),je.empty()):"referenceValue"in Ct?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Ct?{arrayValue:{}}:"arrayValue"in Ct?{mapValue:{}}:"mapValue"in Ct?Kw:tt(),Da=!1;break;case"==":case"in":case"<=":Bn=vn.value;break;case"<":Bn=vn.value,Da=!1;break;case"!=":case"not-in":Bn=Kw}Jw(ar,Bn)===Bn&&(ar=Bn,$i=Da)}if(null!==ze.endAt)for(let vn=0;vn<ze.orderBy.length;++vn)if(ze.orderBy[vn].field.isEqual(Un.fieldPath)){const Bn=ze.endAt.position[vn];Jw(ar,Bn)===Bn&&(ar=Bn,$i=ze.endAt.inclusive);break}if(void 0===ar)return null;nt.push(ar),Ot&&(Ot=$i)}var Ct;return new Xa(nt,Ot)}(v,g),z=this.je(g,v,V),ye=this.je(g,v,H),Fe=this.We(g,v,x),pt=this.ze(g.indexId,S,z,!!V&&V.inclusive,ye,!!H&&H.inclusive,Fe);return he.forEach(pt,ze=>r.Kt(ze,t.limit).next(Ut=>{Ut.forEach(nt=>{c=c.add(new je(uo(nt.documentKey)))})}))}).next(()=>c)}return he.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,o,u,c,g){const v=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),I=v/(null!=t?t.length:1),S=[];for(let x=0;x<v;++x){const V=t?this.He(t[x/I]):ly,H=r?this.Je(e,V,r[x%I],o):this.Ye(e),z=u?this.Xe(e,V,u[x%I],c):this.Ye(e+1);S.push(...this.createRange(H,z,g.map(ye=>this.Je(e,V,ye,!0))))}return S}Je(e,t,r,o){const u=new ll(e,je.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new ll(e,je.empty(),t,r);return o?u.ke():u}Ye(e){return new ll(e,je.empty(),ly,ly)}getFieldIndex(e,t){const r=new EE(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const c=u.filter(g=>r.$e(g));return c.sort((g,v)=>v.fields.length-g.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new Rp;for(const o of xc(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const c=r.Ne(o.kind);Nh.fe.Zt(u,c)}return r.Se()}He(e){const t=new Rp;return Nh.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new Rp);let u=0;for(const c of xc(e)){const g=r[u++];for(const v of o)if(this.tn(t,c.fieldPath)&&gp(g))o=this.en(o,c,g);else{const I=v.Ne(c.kind);Nh.fe.Zt(g,I)}}return this.nn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const g of o){const v=new Rp;v.seed(g.Se()),Nh.fe.Zt(c,v.Ne(t.kind)),u.push(v)}return u}tn(e,t){return!!e.filters.find(r=>r instanceof ai&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=cy(e),o=IE(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return he.forEach(u,g=>o.get([g.indexId,this.uid]).next(v=>{c.push(function(I,S){const x=S?new fh(S.sequenceNumber,new so(ul(S.readTime),new je(uo(S.documentKey)),S.largestBatchId)):fh.empty(),V=I.fields.map(([H,z])=>new Bm($r.fromServerFormat(H),z));return new mp(I.indexId,I.collectionGroup,V,x)}(g,v))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Wt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=cy(e),u=IE(e);return this.sn(e).next(c=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>he.forEach(g,v=>{return u.put({indexId:v.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:al((V=r).readTime),documentKey:Pr(V.documentKey.path),largestBatchId:V.largestBatchId});var V})))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(o,u)=>{const c=r.get(o.collectionGroup);return(c?he.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),he.forEach(g,v=>this.rn(e,o,v).next(I=>{const S=this.on(u,v);return I.isEqual(S)?he.resolve():this.un(e,u,I,S)}))))})}an(e,t,r){return Op(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Pr(t.key.path)})}cn(e,t,r){return Op(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Pr(t.key.path)])}rn(e,t,r){const o=Op(e);let u=new bn(jc);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Pr(t.path)])},(c,g)=>{u=u.add(new ll(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}on(e,t){let r=new bn(jc);const o=this.Ze(t,e);if(null==o)return r;const u=Hv(t);if(null!=u){const c=e.data.field(u.fieldPath);if(gp(c))for(const g of c.arrayValue.values||[])r=r.add(new ll(t.indexId,e.key,this.He(g),o))}else r=r.add(new ll(t.indexId,e.key,ly,o));return r}un(e,t,r,o){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(c,g,v,I,S){const x=c.getIterator(),V=g.getIterator();let H=sl(x),z=sl(V);for(;H||z;){let ye=!1,Fe=!1;if(H&&z){const pt=v(H,z);pt<0?Fe=!0:pt>0&&(ye=!0)}else null!=H?Fe=!0:ye=!0;ye?(I(z),z=sl(V)):Fe?(S(H),H=sl(x)):(H=sl(x),z=sl(V))}}(r,o,jc,c=>{u.push(this.an(e,t,c))},c=>{u.push(this.cn(e,t,c))}),he.waitFor(u)}sn(e){let t=1;return IE(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,g)=>jc(c,g)).filter((c,g,v)=>!g||0!==jc(c,v[g-1]));const o=[];o.push(e);for(const c of r){const g=jc(c,e),v=jc(c,t);if(0===g)o[0]=e.ke();else if(g>0&&v<0)o.push(c),o.push(c.ke());else if(v>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2)u.push(IDBKeyRange.bound([o[c].indexId,this.uid,o[c].arrayValue,o[c].directionalValue,""],[o[c+1].indexId,this.uid,o[c+1].arrayValue,o[c+1].directionalValue,""]));return u}}function bE(n){return Hr(n,"collectionParents")}function Op(n){return Hr(n,"indexEntries")}function cy(n){return Hr(n,"indexConfiguration")}function IE(n){return Hr(n,"indexState")}const zC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ji{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ji(e,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Vb(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let g=0;const v=r.Wt({range:c},(S,x,V)=>(g++,V.delete()));u.push(v.next(()=>{Tt(1===g)}));const I=[];for(const S of t.mutations){const x=LC(e,S.key.path,t.batchId);u.push(o.delete(x)),I.push(S.key)}return he.waitFor(u).next(()=>I)}function dy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}ji.DEFAULT_COLLECTION_PERCENTILE=10,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ji.DEFAULT=new ji(41943040,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ji.DISABLED=new ji(-1,0,0);class DE{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.hn={}}static Yt(e,t,r,o){Tt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new DE(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $c(e).Wt({index:"userMutationsIndex",range:r},(o,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Pp(e),c=$c(e);return c.add({}).next(g=>{Tt("number"==typeof g);const v=new Np(g,t,r,o),I=function(V,H,z){const ye=z.baseMutations.map(pt=>Ch(V.Jt,pt)),Fe=z.mutations.map(pt=>Ch(V.Jt,pt));return{userId:H,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:ye,mutations:Fe}}(this.M,this.userId,v),S=[];let x=new bn((V,H)=>Wt(V.canonicalString(),H.canonicalString()));for(const V of o){const H=LC(this.userId,V.key.path,g);x=x.add(V.key.path.popLast()),S.push(c.put(I)),S.push(u.put(H,Sb))}return x.forEach(V=>{S.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.hn[g]=v.keys()}),he.waitFor(S).next(()=>v)})}lookupMutationBatch(e,t){return $c(e).get(t).next(r=>r?(Tt(r.userId===this.userId),Sh(this.M,r)):null)}ln(e,t){return this.hn[t]?he.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.hn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return $c(e).Wt({index:"userMutationsIndex",range:o},(c,g,v)=>{g.userId===this.userId&&(Tt(g.batchId>=r),u=Sh(this.M,g)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $c(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $c(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Sh(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ny(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Pp(e).Wt({range:o},(c,g,v)=>{const[I,S,x]=c,V=uo(S);if(I===this.userId&&t.path.isEqual(V))return $c(e).get(x).next(H=>{if(!H)throw tt();Tt(H.userId===this.userId),u.push(Sh(this.M,H))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bn(Wt);const o=[];return t.forEach(u=>{const c=ny(this.userId,u.path),g=IDBKeyRange.lowerBound(c),v=Pp(e).Wt({range:g},(I,S,x)=>{const[V,H,z]=I,ye=uo(H);V===this.userId&&u.path.isEqual(ye)?r=r.add(z):x.done()});o.push(v)}),he.waitFor(o).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=ny(this.userId,r),c=IDBKeyRange.lowerBound(u);let g=new bn(Wt);return Pp(e).Wt({range:c},(v,I,S)=>{const[x,V,H]=v,z=uo(V);x===this.userId&&r.isPrefixOf(z)?z.length===o&&(g=g.add(H)):S.done()}).next(()=>this.fn(e,g))}fn(e,t){const r=[],o=[];return t.forEach(u=>{o.push($c(e).get(u).next(c=>{if(null===c)throw tt();Tt(c.userId===this.userId),r.push(Sh(this.M,c))}))}),he.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Vb(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),he.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Pp(e).Wt({range:r},(u,c,g)=>{if(u[0]===this.userId){const v=uo(u[1]);o.push(v)}else g.done()}).next(()=>{Tt(0===o.length)})})}containsKey(e,t){return WC(e,this.userId,t)}_n(e){return KC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function WC(n,e,t){const r=ny(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Pp(n).Wt({range:u,jt:!0},(g,v,I)=>{const[S,x,V]=g;S===e&&x===o&&(c=!0),I.done()}).next(()=>c)}function $c(n){return Hr(n,"mutations")}function Pp(n){return Hr(n,"documentMutations")}function KC(n){return Hr(n,"mutationQueues")}class Rh{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new Rh(0)}static gn(){return new Rh(-1)}}class ZC{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new Rh(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>bt.fromTimestamp(new sr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.pn(e,o)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>tu(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return tu(e).Wt((c,g)=>{const v=Mh(g);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,u.push(this.removeTargetData(e,v)))}).next(()=>he.waitFor(u)).next(()=>o)}forEachTarget(e,t){return tu(e).Wt((r,o)=>{const u=Mh(o);t(u)})}yn(e){return Ub(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}pn(e,t){return Ub(e).put("targetGlobalKey",t)}In(e,t){return tu(e).put(pE(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Nc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return tu(e).Wt({range:o,index:"queryTargetsIndex"},(c,g,v)=>{const I=Mh(g);mh(t,I.target)&&(u=I,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=cl(e);return t.forEach(c=>{const g=Pr(c.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,c))}),he.waitFor(o)}removeMatchingKeys(e,t,r){const o=cl(e);return he.forEach(t,u=>{const c=Pr(u.path);return he.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=cl(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=cl(e);let u=gn();return o.Wt({range:r,jt:!0},(c,g,v)=>{const I=uo(c[1]),S=new je(I);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Pr(t.path),o=IDBKeyRange.bound([r],[Hw(r)],!1,!0);let u=0;return cl(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([c,g],v,I)=>{0!==c&&(u++,I.done())}).next(()=>u>0)}Et(e,t){return tu(e).get(t).next(r=>r?Mh(r):null)}}function tu(n){return Hr(n,"targets")}function Ub(n){return Hr(n,"targetGlobal")}function cl(n){return Hr(n,"targetDocuments")}function dl(n){return nu.apply(this,arguments)}function nu(){return nu=(0,ve.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==dE)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),nu.apply(this,arguments)}function CE([n,e],[t,r]){const o=Wt(n,t);return 0===o?Wt(e,r):o}class TE{constructor(e){this.En=e,this.buffer=new bn(CE),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();CE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AE{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Th(o)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield dl(o)}yield t.vn(e)}))}}class YC{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(ws.A);const r=new TE(t);return this.Sn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Sn.Cn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(zC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zC):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,o,u,c,g,v,I;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,c=Date.now(),this.nthSequenceNumber(e,o))).next(x=>(r=x,g=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(I=Date.now(),Pm()<=jr.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${o} in `+(g-c)+`ms\n\tRemoved ${u} targets in `+(v-g)+`ms\n\tRemoved ${x} documents in `+(I-v)+`ms\nTotal Duration: ${I-S}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x})))}}class SE{constructor(e,t){this.db=e,this.garbageCollector=new YC(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,o)=>t(o))}addReference(e,t,r){return Oh(e,r)}removeReference(e,t,r){return Oh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Oh(e,t)}Mn(e,t){return function(r,o){let u=!1;return KC(r).zt(c=>WC(r,c,o).next(g=>(g&&(u=!0),he.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.kn(e,(c,g)=>{if(g<=t){const v=this.Mn(e,c).next(I=>{if(!I)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,bt.min()),cl(e).delete([0,Pr(c.path)])))});o.push(v)}}).next(()=>he.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Oh(e,t)}kn(e,t){const r=cl(e);let o,u=ws.A;return r.Wt({index:"documentTargetsIndex"},([c,g],{path:v,sequenceNumber:I})=>{0===c?(u!==ws.A&&t(new je(uo(o)),u),u=I,o=v):u=ws.A}).next(()=>{u!==ws.A&&t(new je(uo(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Oh(n,e){return cl(n).put((r=n.currentSequenceNumber,{targetId:0,path:Pr(e.path),sequenceNumber:r}));var r}class kp{constructor(){this.changes=new il(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ZS{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ph(e).put(r)}removeEntry(e,t,r){return Ph(e).delete(function(o,u){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Ah(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=xn.newInvalidDocument(t);return Ph(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(kh(t))},(o,u)=>{r=this.Fn(t,u)}).next(()=>r)}$n(e,t){let r={size:0,document:xn.newInvalidDocument(t)};return Ph(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(kh(t))},(o,u)=>{r={document:this.Fn(t,u),size:dy(u)}}).next(()=>r)}getEntries(e,t){let r=ao();return this.Bn(e,t,(o,u)=>{const c=this.Fn(o,u);r=r.insert(o,c)}).next(()=>r)}Ln(e,t){let r=ao(),o=new Er(je.comparator);return this.Bn(e,t,(u,c)=>{const g=this.Fn(u,c);r=r.insert(u,g),o=o.insert(u,dy(c))}).next(()=>({documents:r,Un:o}))}Bn(e,t,r){if(t.isEmpty())return he.resolve();let o=new bn(jb);t.forEach(v=>o=o.add(v));const u=IDBKeyRange.bound(kh(o.first()),kh(o.last())),c=o.getIterator();let g=c.getNext();return Ph(e).Wt({index:"documentKeyIndex",range:u},(v,I,S)=>{const x=je.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;g&&jb(g,x)<0;)r(g,null),g=c.getNext();g&&g.isEqual(x)&&(r(g,I),g=c.hasNext()?c.getNext():null),g?S.Ut(kh(g)):S.done()}).next(()=>{for(;g;)r(g,null),g=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Ah(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ph(e).qt(IDBKeyRange.bound(o,u,!0)).next(c=>{let g=ao();for(const v of c){const I=this.Fn(je.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);g=g.insert(I.key,I)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=ao();const c=Bb(t,r),g=Bb(t,so.max());return Ph(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,g,!0)},(v,I,S)=>{const x=this.Fn(je.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(x.key,x),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new YS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return QC(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}On(e,t){return QC(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function $C(n,e){let t;if(e.document)t=Eb(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),o=ul(e.noDocument.readTime);t=xn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=je.fromSegments(e.unknownDocument.path),o=ul(e.unknownDocument.version);t=xn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new sr(r[0],r[1]);return bt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return xn.newInvalidDocument(e)}}class YS extends kp{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new il(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new bn((u,c)=>Wt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const g=this.Gn.get(u);if(t.push(this.qn.removeEntry(e,u,g.readTime)),c.isValidDocument()){const v=Pb(this.qn.M,c);o=o.add(u.path.popLast()),r+=dy(v)-g.size,t.push(this.qn.addEntry(e,u,v))}else if(r-=g.size,this.trackRemovals){const v=Pb(this.qn.M,c.convertToNoDocument(bt.min()));t.push(this.qn.addEntry(e,u,v))}}),o.forEach(u=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.qn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:o})=>(o.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function QC(n){return Hr(n,"remoteDocumentGlobal")}function Ph(n){return Hr(n,"remoteDocumentsV14")}function kh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Bb(n,e){const t=e.documentKey.path.toArray();return[n,Ah(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function jb(n,e){const t=n.path.length-e.path.length;return 0!==t?t:je.comparator(n,e)}class JC{constructor(e){this.M=e}kt(e,t,r,o){const u=new iy("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ab,{unique:!0}),g.createObjectStore("documentMutations"),$b(e),function(g){g.createObjectStore("remoteDocuments")}(e));let c=he.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),$b(e)),c=c.next(()=>function(g){const v=g.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",I)}(u))),r<4&&o>=4&&(0!==r&&(c=c.next(()=>function(g,v){return v.store("mutations").qt().next(I=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ab,{unique:!0});const S=v.store("mutations"),x=I.map(V=>S.put(V));return he.waitFor(x)})}(e,u))),c=c.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(c=c.next(()=>this.Kn(u))),r<6&&o>=6&&(c=c.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(u)))),r<7&&o>=7&&(c=c.next(()=>this.jn(u))),r<8&&o>=8&&(c=c.next(()=>this.Wn(e,u))),r<9&&o>=9&&(c=c.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(c=c.next(()=>this.zn(u))),r<11&&o>=11&&(c=c.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(c=c.next(()=>{!function(g){const v=g.createObjectStore("documentOverlays",{keyPath:uE});v.createIndex("collectionPathOverlayIndex",xb,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",Nb,{unique:!1})}(e)})),r<13&&o>=13&&(c=c.next(()=>function(g){const v=g.createObjectStore("remoteDocumentsV14",{keyPath:VS});v.createIndex("documentKeyIndex",US),v.createIndex("collectionGroupIndex",BS)}(e)).next(()=>this.Hn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(c=c.next(()=>{!function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:qS}).createIndex("sequenceNumberIndex",ry,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:zS}).createIndex("documentKeyIndex",Mb,{unique:!1})}(e)})),c}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=dy(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>he.forEach(o,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(g=>he.forEach(g,v=>{Tt(v.userId===u.userId);const I=Sh(this.M,v);return Vb(e,u.userId,I).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((c,g)=>{const v=new Xt(c),I=[0,Pr(v)];u.push(t.get(I).next(S=>S?he.resolve():t.put({targetId:0,path:Pr(v),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>he.waitFor(u))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:GS});const r=t.store("collectionParents"),o=new uy,u=c=>{if(o.add(c)){const g=c.lastSegment(),v=c.popLast();return r.put({collectionId:g,parent:Pr(v)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,g)=>{const v=new Xt(c);return u(v.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,g,v],I)=>{const S=uo(g);return u(S.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Mh(o),c=pE(this.M,u);return t.put(c)})}Hn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,c)=>{const g=t.store("remoteDocumentsV14"),v=(I=c,I.document?new je(Xt.fromString(I.document.name).popFirst(5)):I.noDocument?je.fromSegments(I.noDocument.path):I.unknownDocument?je.fromSegments(I.unknownDocument.path):tt()).path.toArray();var I;const S={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(g.put(S))}).next(()=>he.waitFor(o))}}function $b(n){n.createObjectStore("targetDocuments",{keyPath:$S}).createIndex("documentTargetsIndex",HS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",jS,{unique:!0}),n.createObjectStore("targetGlobal")}const hy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fy{constructor(e,t,r,o,u,c,g,v,I,S,x=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=u,this.window=c,this.document=g,this.Yn=I,this.Xn=S,this.Zn=x,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=V=>Promise.resolve(),!fy.vt())throw new xe(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new SE(this,o),this.cs=t+"main",this.M=new oy(v),this.hs=new bs(this.cs,this.Zn,new JC(this.M)),this.ls=new ZC(this.referenceDelegate,this.M),this.fs=new ZS(this.M),this.ds=new jo,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===S&&Vn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ue.FAILED_PRECONDITION,hy);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new ws(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ve.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>py(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Th(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return Fh(e).get("owner").next(t=>he.resolve(this.bs(t)))}Ps(e){return py(e).delete(this.clientId)}Vs(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Hr(r,"clientMetadata");return o.qt().next(u=>{const c=e.Ss(u,18e5),g=u.filter(v=>-1===c.indexOf(v));return he.forEach(g,v=>o.delete(v.clientId)).next(()=>g)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?he.resolve(!0):Fh(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new xe(ue.FAILED_PRECONDITION,hy);return!1}}return!(!this.networkEnabled||!this.inForeground)||py(e).qt().next(r=>void 0===this.Ss(r,5e3).find(o=>{if(this.clientId!==o.clientId){const c=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||c&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new jC(t,ws.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>py(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return DE.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new Lb(e)}getDocumentOverlayCache(e){return yE.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(c=this.Zn)?Rb:13===c?cE:12===c?lE:11===c?VC:void tt();var c;let g;return this.hs.runTransaction(e,o,u,v=>(g=new jC(v,this.ts?this.ts.next():ws.A),"readwrite-primary"===t?this.Ts(g).next(I=>!!I||this.Es(g)).next(I=>{if(!I)throw Vn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new xe(ue.FAILED_PRECONDITION,dE);return r(g)}).next(I=>this.Rs(g).next(()=>I)):this.Fs(g).next(()=>r(g)))).then(v=>(g.raiseOnCommittedEvent(),v))}Fs(e){return Fh(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ue.FAILED_PRECONDITION,hy)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fh(e).put("owner",t)}static vt(){return bs.vt()}As(e){const t=Fh(e);return t.get("owner").next(r=>this.bs(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(Vn(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,Kt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Vn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){Vn("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fh(n){return Hr(n,"owner")}function py(n){return Hr(n,"clientMetadata")}function ME(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Hb{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}Us(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return je.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Qs(e,t.path):zm(t)?this.js(e,t,r):this.Ws(e,t,r);var o}Qs(e,t){return this.Bs(e,new je(t)).next(r=>{let o=Xv();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}js(e,t,r){const o=t.collectionGroup;let u=Xv();return this.indexManager.getCollectionParents(e,o).next(c=>he.forEach(c,g=>{const v=(I=t,S=g.child(o),new Xu(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,S;return this.Ws(e,v,r).next(I=>{I.forEach((S,x)=>{u=u.insert(S,x)})})}).next(()=>u))}Ws(e,t,r){let o;return this.fs.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const g of c.mutations){const v=g.key;let I=o.get(v);null==I&&(I=xn.newInvalidDocument(v),o=o.insert(v,I)),oo(g,I,c.localWriteTime),I.isFoundDocument()||(o=o.remove(v))}}).next(()=>(o.forEach((u,c)=>{zv(t,c)||(o=o.remove(u))}),o))}}class Fp{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=o}static Js(e,t){let r=gn(),o=gn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Fp(e,t.fromCache,r,o)}}class XC{Ys(e){this.Xs=e}Ks(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(bt.min())?this.Zs(e,t):this.Xs.qs(e,o).next(u=>{const c=this.ti(t,u);return(eu(t)||_p(t))&&this.ei(t.limitType,c,o,r)?this.Zs(e,t):(Pm()<=jr.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vp(t)),this.Xs.Ks(e,t,gC(r,-1)).next(g=>(c.forEach(v=>{g=g.insert(v.key,v)}),g)))});var u}ti(e,t){let r=new bn(ob(e));return t.forEach((o,u)=>{zv(e,u)&&(r=r.add(u))}),r}ei(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Zs(e,t){return Pm()<=jr.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",vp(t)),this.Xs.Ks(e,t,so.min())}}class Gb{constructor(e,t,r,o){this.persistence=e,this.ni=t,this.M=o,this.si=new Er(Wt),this.ii=new il(u=>Nc(u),mh),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new Hb(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function gy(n,e,t,r){return new Gb(n,e,t,r)}function qb(n,e){return xE.apply(this,arguments)}function xE(){return xE=(0,ve.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.$s.getAllMutationBatches(r).next(u=>(o=u,t.ui(e),t.$s.getAllMutationBatches(r))).next(u=>{const c=[],g=[];let v=gn();for(const I of o){c.push(I.batchId);for(const S of I.mutations)v=v.add(S.key)}for(const I of u){g.push(I.batchId);for(const S of I.mutations)v=v.add(S.key)}return t.ai.qs(r,v).next(I=>({ci:I,removedBatchIds:c,addedBatchIds:g}))})})}),xE.apply(this,arguments)}function QS(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.oi.newChangeBuffer({trackRemovals:!0});return function(c,g,v,I){const S=v.batch,x=S.keys();let V=he.resolve();return x.forEach(H=>{V=V.next(()=>I.getEntry(g,H)).next(z=>{const ye=v.docVersions.get(H);Tt(null!==ye),z.version.compareTo(ye)<0&&(S.applyToRemoteDocument(z,v),z.isValidDocument()&&(z.setReadTime(v.commitVersion),I.addEntry(z)))})}),V.next(()=>c.$s.removeMutationBatch(g,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,o))})}function eT(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function JS(n,e){const t=Ge(n),r=e.snapshotVersion;let o=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.oi.newChangeBuffer({trackRemovals:!0});o=t.si;const g=[];e.targetChanges.forEach((I,S)=>{const x=o.get(S);if(!x)return;g.push(t.ls.removeMatchingKeys(u,I.removedDocuments,S).next(()=>t.ls.addMatchingKeys(u,I.addedDocuments,S)));let V=x.withSequenceNumber(u.currentSequenceNumber);var H,z,ye;e.targetMismatches.has(S)?V=V.withResumeToken(_r.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):I.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(I.resumeToken,r)),o=o.insert(S,V),z=V,ye=I,(0===(H=x).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&g.push(t.ls.updateTargetData(u,V))});let v=ao();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,I))}),g.push(zb(u,c,e.documentUpdates).next(I=>{v=I})),!r.isEqual(bt.min())){const I=t.ls.getLastRemoteSnapshotVersion(u).next(S=>t.ls.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(I)}return he.waitFor(g).next(()=>c.apply(u)).next(()=>t.ai.Gs(u,v)).next(()=>v)}).then(u=>(t.si=o,u))}function zb(n,e,t){let r=gn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=ao();return t.forEach((c,g)=>{const v=o.get(c);g.isNoDocument()&&g.version.isEqual(bt.min())?(e.removeEntry(c,g.readTime),u=u.insert(c,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),u=u.insert(c,g)):ke("LocalStore","Ignoring outdated watch update for ",c,". Current version:",v.version," Watch version:",g.version)}),u})}function tT(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function Lp(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.ls.getTargetData(r,e).next(u=>u?(o=u,he.resolve(o)):t.ls.allocateTargetId(r).next(c=>(o=new ol(e,c,0,r.currentSequenceNumber),t.ls.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.si.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function Vp(n,e,t){return Wb.apply(this,arguments)}function Wb(){return Wb=(0,ve.Z)(function*(n,e,t){const r=Ge(n),o=r.si.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Th(c))throw c;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.si=r.si.remove(e),r.ii.delete(o.target)}),Wb.apply(this,arguments)}function NE(n,e,t){const r=Ge(n);let o=bt.min(),u=gn();return r.persistence.runTransaction("Execute query","readonly",c=>function(g,v,I){const S=Ge(g),x=S.ii.get(I);return void 0!==x?he.resolve(S.si.get(x)):S.ls.getTargetData(v,I)}(r,c,Uo(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(c,g.targetId).next(v=>{u=v})}).next(()=>r.ni.Ks(c,e,t?o:bt.min(),t?u:gn())).next(g=>(rT(r,sb(e),g),{documents:g,hi:u})))}function nT(n,e){const t=Ge(n),r=Ge(t.ls),o=t.si.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function Kb(n,e){const t=Ge(n),r=t.ri.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.oi.getAllFromCollectionGroup(o,e,gC(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(rT(t,e,o),o))}function rT(n,e,t){let r=bt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ri.set(e,r)}function Zb(){return Zb=(0,ve.Z)(function*(n,e,t,r){const o=Ge(n);let u=gn(),c=ao();for(const I of t){const S=e.li(I.metadata.name);I.document&&(u=u.add(S));const x=e.fi(I);x.setReadTime(e.di(I.metadata.readTime)),c=c.insert(S,x)}const g=o.oi.newChangeBuffer({trackRemovals:!0}),v=yield Lp(o,(I=r,Uo(_h(Xt.fromString(`__bundle__/docs/${I}`)))));var I;return o.persistence.runTransaction("Apply bundle documents","readwrite",I=>zb(I,g,c).next(S=>(g.apply(I),S)).next(S=>o.ls.removeMatchingKeysForTargetId(I,v.targetId).next(()=>o.ls.addMatchingKeys(I,u,v.targetId)).next(()=>o.ai.Gs(I,S)).next(()=>S)))}),Zb.apply(this,arguments)}function eM(n,e){return i.apply(this,arguments)}function i(){return i=(0,ve.Z)(function*(n,e,t=gn()){const r=yield Lp(n,Uo(gE(e.bundledQuery))),o=Ge(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const c=Or(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o.ds.saveNamedQuery(u,e);const g=r.withResumeToken(_r.EMPTY_BYTE_STRING,c);return o.si=o.si.insert(g.targetId,g),o.ls.updateTargetData(u,g).next(()=>o.ls.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.ls.addMatchingKeys(u,t,r.targetId)).next(()=>o.ds.saveNamedQuery(u,e))})}),i.apply(this,arguments)}class s{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return he.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Or(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:gE(r.bundledQuery),readTime:Or(r.readTime)}),he.resolve();var r}}class a{constructor(){this.overlays=new Er(je.comparator),this.mi=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.mi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.mi.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const o=Ih(),u=t.length+1,c=new je(t.child("")),g=this.overlays.getIteratorFrom(c);for(;g.hasNext();){const v=g.getNext().value,I=v.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&v.largestBatchId>r&&o.set(v.getKey(),v)}return he.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Er((I,S)=>I-S);const c=this.overlays.getIterator();for(;c.hasNext();){const I=c.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let S=u.get(I.largestBatchId);null===S&&(S=Ih(),u=u.insert(I.largestBatchId,S)),S.set(I.getKey(),I)}}const g=Ih(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((I,S)=>g.set(I,S)),!(g.size()>=o)););return he.resolve(g)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const c=this.mi.get(o.largestBatchId).delete(r.key);this.mi.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Is(t,r));let u=this.mi.get(t);void 0===u&&(u=gn(),this.mi.set(t,u)),this.mi.set(t,u.add(r.key))}}class l{constructor(){this.gi=new bn(d.yi),this.pi=new bn(d.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new d(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new d(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new je(new Xt([])),r=new d(t,e),o=new d(t,e+1),u=[];return this.pi.forEachInRange([r,o],c=>{this.Ei(c),u.push(c.key)}),u}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new je(new Xt([])),r=new d(t,e),o=new d(t,e+1);let u=gn();return this.pi.forEachInRange([r,o],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new d(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class d{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return je.comparator(e.key,t.key)||Wt(e.Vi,t.Vi)}static Ii(e,t){return Wt(e.Vi,t.Vi)||je.comparator(e.key,t.key)}}class f{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new bn(d.yi)}checkEmpty(e){return he.resolve(0===this.$s.length)}addMutationBatch(e,t,r,o){const u=this.vi;this.vi++;const c=new Np(u,t,r,o);this.$s.push(c);for(const g of o)this.Si=this.Si.add(new d(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Ci(t+1),u=o<0?0:o;return he.resolve(this.$s.length>u?this.$s[u]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return he.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new d(t,0),o=new d(t,Number.POSITIVE_INFINITY),u=[];return this.Si.forEachInRange([r,o],c=>{const g=this.Di(c.Vi);u.push(g)}),he.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bn(Wt);return t.forEach(o=>{const u=new d(o,0),c=new d(o,Number.POSITIVE_INFINITY);this.Si.forEachInRange([u,c],g=>{r=r.add(g.Vi)})}),he.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;je.isDocumentKey(u)||(u=u.child(""));const c=new d(new je(u),0);let g=new bn(Wt);return this.Si.forEachWhile(v=>{const I=v.key.path;return!!r.isPrefixOf(I)&&(I.length===o&&(g=g.add(v.Vi)),!0)},c),he.resolve(this.xi(g))}xi(e){const t=[];return e.forEach(r=>{const o=this.Di(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Tt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return he.forEach(t.mutations,o=>{const u=new d(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new d(t,0),o=this.Si.firstAfterOrEqual(r);return he.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return he.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class _{constructor(e){this.ki=e,this.docs=new Er(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let r=ao();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():xn.newInvalidDocument(o))}),he.resolve(r)}getAllFromCollection(e,t,r){let o=ao();const u=new je(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:g,value:{document:v}}=c.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||yC(mC(v),r)<=0||(o=o.insert(v.key,v.mutableCopy()))}return he.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}Mi(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new w(this)}getSize(e){return he.resolve(this.size)}}class w extends kp{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.qn.addEntry(e,o)):this.qn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class b{constructor(e){this.persistence=e,this.Oi=new il(t=>Nc(t),mh),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Fi=0,this.$i=new l,this.targetCount=0,this.Bi=Rh.mn()}forEachTarget(e,t){return this.Oi.forEach((r,o)=>t(o)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),he.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new Rh(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.In(t),he.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Oi.forEach((c,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Oi.delete(c),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),he.waitFor(u).next(()=>o)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(c=>{u.push(o.markPotentiallyOrphaned(e,c))}),he.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.$i.containsKey(t))}}class A{constructor(e,t){this.Li={},this.overlays={},this.ts=new ws(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new b(this),this.indexManager=new wE,this.fs=new _(r=>this.referenceDelegate.Ui(r)),this.M=new oy(t),this.ds=new s(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new a,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new f(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const o=new M(this.ts.next());return this.referenceDelegate.qi(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ki(e,t){return he.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class M extends UC{constructor(e){super(),this.currentSequenceNumber=e}}class P{constructor(e){this.persistence=e,this.Qi=new l,this.ji=null}static Wi(e){return new P(e)}get zi(){if(this.ji)return this.ji;throw tt()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(o=>this.zi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.zi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.zi,r=>{const o=je.fromPath(r);return this.Hi(e,o).next(u=>{u||t.removeEntry(o,bt.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return he.or([()=>he.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function U(n,e){return`firestore_clients_${n}_${e}`}function Z(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function me(n,e){return`firestore_targets_${n}_${e}`}class Pe{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let u,c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new xe(o.error.code,o.error.message))),c?new Pe(e,t,o.state,u):(Vn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ve{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new Ve(e,r.state,o):(Vn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ye{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Cp();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=Ww(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new Ye(e,u):(Vn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ie{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ie(t.clientId,t.onlineState):(Vn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lt{constructor(){this.activeTargetIds=Cp()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ht{constructor(e,t,r,o,u){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Er(Wt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=U(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new lt),this.ar=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Os();for(const o of t){if(o===e.tr)continue;const u=e.getItem(U(e.persistenceKey,o));if(u){const c=Ye.Ji(o,u);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(me(this.persistenceKey,e));if(r){const o=Ve.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(me(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Vn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const o=t.Vr(r.key,r.newValue);if(o)return t.vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(u){let c=ws.A;if(null!=u)try{const g=JSON.parse(u);Tt("number"==typeof g),c=g}catch(g){Vn("SharedClientState","Failed to read sequence number from WebStorage",g)}return c}(r.newValue);o!==ws.A&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new Pe(this.currentUser,e,t,r),u=Z(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Yi())}pr(e){const t=Z(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=me(this.persistenceKey,e),u=new Ve(e,t,r);this.setItem(o,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Ye.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),o=Number(r[1]);return Pe.Ji(new oi(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return Ve.Ji(o,t)}wr(e){return Ie.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),u=this.gr(r),c=[],g=[];return u.forEach(v=>{o.has(v)||c.push(v)}),o.forEach(v=>{u.has(v)||g.push(v)}),this.syncEngine.Or(c,g).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Cp();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class cn{constructor(){this.Fr=new lt,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new lt,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ds{Br(e){}shutdown(){}}class hl{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const RE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class OE{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class PE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,u){const c=this.oo(e,t);ke("RestConnection","Sending: ",c,r);const g={};return this.uo(g,o,u),this.ao(e,c,g,r).then(v=>(ke("RestConnection","Received: ",v),v),v=>{throw Ja("RestConnection",`${e} failed with error: `,v,"url: ",c,"request:",r),v})}co(e,t,r,o,u){return this.ro(e,t,r,o,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ya,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}oo(e,t){return`${this.so}/v1/${t}:${RE[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,o){return new Promise((u,c)=>{const g=new cC;g.listenOnce(Fw.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Om.NO_ERROR:const I=g.getResponseJson();ke("Connection","XHR received:",JSON.stringify(I)),u(I);break;case Om.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),c(new xe(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Om.HTTP_ERROR:const S=g.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',S,"response text:",g.getResponseText()),S>0){const x=g.getResponseJson().error;if(x&&x.status&&x.message){const V=function(H){const z=H.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(z)>=0?z:ue.UNKNOWN}(x.status);c(new xe(V,x.message))}else c(new xe(ue.UNKNOWN,"Server responded with status "+g.getStatus()))}else c(new xe(ue.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(o);g.send(t,"POST",v,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Pw(),c=kw(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new lC({})),this.uo(g.initMessageHeaders,t,r),(0,Kt.uI)()||(0,Kt.b$)()||(0,Kt.d)()||(0,Kt.w1)()||(0,Kt.Mn)()||(0,Kt.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const v=o.join("");ke("Connection","Creating WebChannel: "+v,g);const I=u.createWebChannel(v,g);let S=!1,x=!1;const V=new OE({jr:z=>{x?ke("Connection","Not sending because WebChannel is closed:",z):(S||(ke("Connection","Opening WebChannel transport."),I.open(),S=!0),ke("Connection","WebChannel sending:",z),I.send(z))},Wr:()=>I.close()}),H=(z,ye,Fe)=>{z.listen(ye,pt=>{try{Fe(pt)}catch(ze){setTimeout(()=>{throw ze},0)}})};return H(I,Yu.EventType.OPEN,()=>{x||ke("Connection","WebChannel transport opened.")}),H(I,Yu.EventType.CLOSE,()=>{x||(x=!0,ke("Connection","WebChannel transport closed"),V.eo())}),H(I,Yu.EventType.ERROR,z=>{x||(x=!0,Ja("Connection","WebChannel transport errored:",z),V.eo(new xe(ue.UNAVAILABLE,"The operation could not be completed")))}),H(I,Yu.EventType.MESSAGE,z=>{var ye;if(!x){const Fe=z.data[0];Tt(!!Fe);const pt=Fe,ze=pt.error||(null===(ye=pt[0])||void 0===ye?void 0:ye.error);if(ze){ke("Connection","WebChannel received error:",ze);const Ut=ze.status;let nt=function(Ct){const Un=or[Ct];if(void 0!==Un)return fb(Un)}(Ut),Ot=ze.message;void 0===nt&&(nt=ue.INTERNAL,Ot="Unknown error status: "+Ut+" with message "+ze.message),x=!0,V.eo(new xe(nt,Ot)),I.close()}else ke("Connection","WebChannel received:",Fe),V.no(Fe)}}),H(c,uC.STAT_EVENT,z=>{z.stat===Lw.PROXY?ke("Connection","Detected buffering proxy"):z.stat===Lw.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.Zr()},0),V}}function my(){return"undefined"!=typeof window?window:null}function Lh(){return"undefined"!=typeof document?document:null}function Hc(n){return new Sp(n,!0)}class Up{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=o,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class yy{constructor(e,t,r,o,u,c,g,v){this.Jn=e,this.Ao=r,this.Ro=o,this.bo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Up(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ve.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ve.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Vn(t.toString()),Vn("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new xe(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,ve.Z)(function*(){e.state=0,e.start()}))}qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kE extends yy{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.M=u}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function ey(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:tt(),o=e.targetChange.targetIds||[],u=function(v,I){return v.N?(Tt(void 0===I||"string"==typeof I),_r.fromBase64String(I||"")):(Tt(void 0===I||I instanceof Uint8Array),_r.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,g=c&&function(v){const I=void 0===v.code?ue.UNKNOWN:fb(v.code);return new xe(I,v.message||"")}(c);t=new tE(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=Bo(n,r.document.name),u=Or(r.document.updateTime),c=new wi({mapValue:{fields:r.document.fields}}),g=xn.newFoundDocument(o,u,c);t=new Ap(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=Bo(n,r.document),u=r.readTime?Or(r.readTime):bt.min(),c=xn.newNoDocument(o,u);t=new Ap([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,o=Bo(n,r.document);t=new Ap([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new hb(r.count||0);t=new mb(r.targetId,u)}}var v;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return bt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?bt.min():u.readTime?Or(u.readTime):bt.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=Lc(this.M),t.addTarget=function(o,u){let c;const g=u.target;return c=jm(g)?{documents:ty(o,g)}:{query:RC(o,g)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=Jm(o,u.resumeToken):u.snapshotVersion.compareTo(bt.min())>0&&(c.readTime=Mp(o,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function OC(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=Lc(this.M),t.removeTarget=e,this.Oo(t)}}class nR extends yy{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.M=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function sE(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,o){let u=Or(r.updateTime?r.updateTime:o);return u.isEqual(bt.min())&&(u=Or(o)),new CC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Or(e.commitTime);return this.listener.Jo(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Lc(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ch(this.M,r))};this.Oo(t)}}class rR extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.Zo=!1}tu(){if(this.Zo)throw new xe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ro(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ue.UNKNOWN,o.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ue.UNKNOWN,o.toString())})}terminate(){this.Zo=!0}}class iR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Vn(t),this.su=!1):ke("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class sR{constructor(e,t,r,o,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(g=>{r.enqueueAndForget((0,ve.Z)(function*(){var v;Vh(c)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,ve.Z)(function*(I){const S=Ge(I);S.lu.add(4),yield _y(S),S._u.set("Unknown"),S.lu.delete(4),yield FE(S)}),function(I){return v.apply(this,arguments)})(c))}))}),this._u=new iR(r,o)}}function FE(n){return iT.apply(this,arguments)}function iT(){return iT=(0,ve.Z)(function*(n){if(Vh(n))for(const e of n.fu)yield e(!0)}),iT.apply(this,arguments)}function _y(n){return sT.apply(this,arguments)}function sT(){return sT=(0,ve.Z)(function*(n){for(const e of n.fu)yield e(!1)}),sT.apply(this,arguments)}function Yb(n,e){const t=Ge(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),uT(t)?aT(t):Ey(t).Co()&&oT(t,e))}function LE(n,e){const t=Ge(n),r=Ey(t);t.hu.delete(e),r.Co()&&tM(t,e),0===t.hu.size&&(r.Co()?r.ko():Vh(t)&&t._u.set("Unknown"))}function oT(n,e){n.wu.Z(e.targetId),Ey(n).Qo(e)}function tM(n,e){n.wu.Z(e),Ey(n).jo(e)}function aT(n){n.wu=new Bi({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),Ey(n).start(),n._u.iu()}function uT(n){return Vh(n)&&!Ey(n).Do()&&n.hu.size>0}function Vh(n){return 0===Ge(n).lu.size}function nM(n){n.wu=void 0}function oR(n){return lT.apply(this,arguments)}function lT(){return lT=(0,ve.Z)(function*(n){n.hu.forEach((e,t)=>{oT(n,e)})}),lT.apply(this,arguments)}function aR(n,e){return cT.apply(this,arguments)}function cT(){return cT=(0,ve.Z)(function*(n,e){nM(n),uT(n)?(n._u.uu(e),aT(n)):n._u.set("Unknown")}),cT.apply(this,arguments)}function uR(n,e,t){return dT.apply(this,arguments)}function dT(){return dT=(0,ve.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof tE&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(o,u){const c=u.cause;for(const g of u.targetIds)o.hu.has(g)&&(yield o.remoteSyncer.rejectListen(g,c),o.hu.delete(g),o.wu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Qb(n,r)}else if(e instanceof Ap?n.wu.ut(e):e instanceof mb?n.wu._t(e):n.wu.ht(e),!t.isEqual(bt.min()))try{const r=yield eT(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const c=o.wu.yt(u);return c.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const I=o.hu.get(v);I&&o.hu.set(v,I.withResumeToken(g.resumeToken,u))}}),c.targetMismatches.forEach(g=>{const v=o.hu.get(g);if(!v)return;o.hu.set(g,v.withResumeToken(_r.EMPTY_BYTE_STRING,v.snapshotVersion)),tM(o,g);const I=new ol(v.target,g,1,v.sequenceNumber);oT(o,I)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield Qb(n,r)}var r}),dT.apply(this,arguments)}function Qb(n,e,t){return hT.apply(this,arguments)}function hT(){return hT=(0,ve.Z)(function*(n,e,t){if(!Th(e))throw e;n.lu.add(1),yield _y(n),n._u.set("Offline"),t||(t=()=>eT(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield FE(n)}))}),hT.apply(this,arguments)}function rM(n,e){return e().catch(t=>Qb(n,t,e))}function vy(n){return fT.apply(this,arguments)}function fT(){return fT=(0,ve.Z)(function*(n){const e=Ge(n),t=Uh(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;lR(e);)try{const o=yield tT(e.localStore,r);if(null===o){0===e.cu.length&&t.ko();break}r=o.batchId,cR(e,o)}catch(o){yield Qb(e,o)}iM(e)&&sM(e)}),fT.apply(this,arguments)}function lR(n){return Vh(n)&&n.cu.length<10}function cR(n,e){n.cu.push(e);const t=Uh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function iM(n){return Vh(n)&&!Uh(n).Do()&&n.cu.length>0}function sM(n){Uh(n).start()}function dR(n){return pT.apply(this,arguments)}function pT(){return pT=(0,ve.Z)(function*(n){Uh(n).Xo()}),pT.apply(this,arguments)}function hR(n){return gT.apply(this,arguments)}function gT(){return gT=(0,ve.Z)(function*(n){const e=Uh(n);for(const t of n.cu)e.Ho(t.mutations)}),gT.apply(this,arguments)}function fR(n,e,t){return mT.apply(this,arguments)}function mT(){return mT=(0,ve.Z)(function*(n,e,t){const r=n.cu.shift(),o=fE.from(r,e,t);yield rM(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield vy(n)}),mT.apply(this,arguments)}function pR(n,e){return yT.apply(this,arguments)}function yT(){return yT=(0,ve.Z)(function*(n,e){var t;e&&Uh(n).zo&&(yield(t=(0,ve.Z)(function*(r,o){if(Jv(u=o.code)&&u!==ue.ABORTED){const c=r.cu.shift();Uh(r).No(),yield rM(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),yield vy(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),iM(n)&&sM(n)}),yT.apply(this,arguments)}function oM(n,e){return _T.apply(this,arguments)}function _T(){return _T=(0,ve.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Vh(t);t.lu.add(3),yield _y(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield FE(t)}),_T.apply(this,arguments)}function vT(n,e){return ET.apply(this,arguments)}function ET(){return ET=(0,ve.Z)(function*(n,e){const t=Ge(n);e?(t.lu.delete(2),yield FE(t)):e||(t.lu.add(2),yield _y(t),t._u.set("Unknown"))}),ET.apply(this,arguments)}function Ey(n){return n.mu||(n.mu=function(e,t,r){const o=Ge(e);return o.tu(),new kE(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:oR.bind(null,n),Jr:aR.bind(null,n),Ko:uR.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.mu.No(),uT(n)?aT(n):n._u.set("Unknown")):(yield n.mu.stop(),nM(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Uh(n){return n.gu||(n.gu=function(e,t,r){const o=Ge(e);return o.tu(),new nR(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:dR.bind(null,n),Jr:pR.bind(null,n),Yo:hR.bind(null,n),Jo:fR.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.gu.No(),yield vy(n)):(yield n.gu.stop(),n.cu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class wT{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,g=new wT(e,t,c,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wy(n,e){if(Vn("AsyncQueue",`${e}: ${n}`),Th(n))return new xe(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class by{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=Xv(),this.sortedSet=new Er(this.comparator)}static emptySet(e){return new by(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof by)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new by;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class aM{constructor(){this.yu=new Er(je.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):tt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Iy{constructor(e,t,r,o,u,c,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=g,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Iy(e,t,by.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class gR{constructor(){this.Iu=void 0,this.listeners=[]}}class mR{constructor(){this.queries=new il(e=>qv(e),Wm),this.onlineState="Unknown",this.Tu=new Set}}function bT(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,ve.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new gR),o)try{u.Iu=yield t.onListen(r)}catch(c){const g=wy(c,`Initialization of query '${vp(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&TT(t)}),IT.apply(this,arguments)}function DT(n,e){return CT.apply(this,arguments)}function CT(){return CT=(0,ve.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),CT.apply(this,arguments)}function yR(n,e){const t=Ge(n);let r=!1;for(const o of e){const c=t.queries.get(o.query);if(c){for(const g of c.listeners)g.Au(o)&&(r=!0);c.Iu=o}}r&&TT(t)}function _R(n,e,t){const r=Ge(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function TT(n){n.Tu.forEach(e=>{e.next()})}class AT{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Iy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Iy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class vR{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class uM{constructor(e){this.M=e}li(e){return Bo(this.M,e)}fi(e){return e.metadata.exists?Eb(this.M,e.document,!1):xn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Or(e)}}class ER{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=lM(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Xt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new uM(this.M);for(const o of e)if(o.metadata.queries){const u=r.li(o.metadata.name);for(const c of o.metadata.queries){const g=(t.get(c)||gn()).add(u);t.set(c,g)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function XS(n,e,t,r){return Zb.apply(this,arguments)}(e.localStore,new uM(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield eM(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function lM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class cM{constructor(e){this.key=e}}class dM{constructor(e){this.key=e}}class hM{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=gn(),this.mutatedKeys=gn(),this.Lu=ob(e),this.Uu=new by(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new aM,o=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,g=!1;const v=eu(this.query)&&o.size===this.query.limit?o.last():null,I=_p(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,x)=>{const V=o.get(S),H=zv(this.query,x)?x:null,z=!!V&&this.mutatedKeys.has(V.key),ye=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let Fe=!1;V&&H?V.data.isEqual(H.data)?z!==ye&&(r.track({type:3,doc:H}),Fe=!0):this.Qu(V,H)||(r.track({type:2,doc:H}),Fe=!0,(v&&this.Lu(H,v)>0||I&&this.Lu(H,I)<0)&&(g=!0)):!V&&H?(r.track({type:0,doc:H}),Fe=!0):V&&!H&&(r.track({type:1,doc:V}),Fe=!0,(v||I)&&(g=!0)),Fe&&(H?(c=c.add(H),u=ye?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),eu(this.query)||_p(this.query))for(;c.size>this.query.limit;){const S=eu(this.query)?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Uu:c,Ku:r,ei:g,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Ku.pu();u.sort((I,S)=>function(x,V){const H=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return H(x)-H(V)}(I.type,S.type)||this.Lu(I.doc,S.doc)),this.ju(r);const c=t?this.Wu():[],g=0===this.Bu.size&&this.current?1:0,v=g!==this.$u;return this.$u=g,0!==u.length||v?{snapshot:new Iy(this.query,e.Uu,o,u,e.mutatedKeys,0===g,v,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new aM,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=gn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new dM(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new cM(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=gn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Iy.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class wR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class bR{constructor(e){this.key=e,this.Xu=!1}}class IR{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Zu={},this.ta=new il(g=>qv(g),Wm),this.ea=new Map,this.na=new Set,this.sa=new Er(je.comparator),this.ia=new Map,this.ra=new l,this.oa={},this.ua=new Map,this.aa=Rh.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function DR(n,e){return ST.apply(this,arguments)}function ST(){return ST=(0,ve.Z)(function*(n,e){const t=QT(n);let r,o;const u=t.ta.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Yu();else{const c=yield Lp(t.localStore,Uo(e));t.isPrimaryClient&&Yb(t.remoteStore,c);const g=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,o=yield MT(t,e,r,"current"===g)}return o}),ST.apply(this,arguments)}function MT(n,e,t,r){return xT.apply(this,arguments)}function xT(){return xT=(0,ve.Z)(function*(n,e,t,r){n.ha=(S,x,V)=>{return(H=(0,ve.Z)(function*(z,ye,Fe,pt){let ze=ye.view.Gu(Fe);ze.ei&&(ze=yield NE(z.localStore,ye.query,!1).then(({documents:Ot})=>ye.view.Gu(Ot,ze)));const Ut=pt&&pt.targetChanges.get(ye.targetId),nt=ye.view.applyChanges(ze,z.isPrimaryClient,Ut);return BT(z,ye.targetId,nt.zu),nt.snapshot}),function(z,ye,Fe,pt){return H.apply(this,arguments)})(n,S,x,V);var H};const o=yield NE(n.localStore,e,!0),u=new hM(e,o.hi),c=u.Gu(o.documents),g=Dh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=u.applyChanges(c,n.isPrimaryClient,g);BT(n,t,v.zu);const I=new wR(e,t,u);return n.ta.set(e,I),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),v.snapshot}),xT.apply(this,arguments)}function CR(n,e){return NT.apply(this,arguments)}function NT(){return NT=(0,ve.Z)(function*(n,e){const t=Ge(n),r=t.ta.get(e),o=t.ea.get(r.targetId);if(o.length>1)return t.ea.set(r.targetId,o.filter(u=>!Wm(u,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Vp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),LE(t.remoteStore,r.targetId),Dy(t,r.targetId)}).catch(dl))):(Dy(t,r.targetId),yield Vp(t.localStore,r.targetId,!0))}),NT.apply(this,arguments)}function RT(){return RT=(0,ve.Z)(function*(n,e,t){const r=JT(n);try{const o=yield function(u,c){const g=Ge(u),v=sr.now(),I=c.reduce((x,V)=>x.add(V.key),gn());let S;return g.persistence.runTransaction("Locally write mutations","readwrite",x=>g.ai.qs(x,I).next(V=>{S=V;const H=[];for(const z of c){const ye=TC(z,S.get(z.key));null!=ye&&H.push(new Pc(z.key,ye,Um(ye.value.mapValue),vr.exists(!0)))}return g.$s.addMutationBatch(x,v,H,c)})).then(x=>(x.applyToLocalDocumentSet(S),{batchId:x.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,c,g){let v=u.oa[u.currentUser.toKey()];v||(v=new Er(Wt)),v=v.insert(c,g),u.oa[u.currentUser.toKey()]=v}(r,o.batchId,t),yield Gc(r,o.changes),yield vy(r.remoteStore)}catch(o){const u=wy(o,"Failed to persist write");t.reject(u)}}),RT.apply(this,arguments)}function fM(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,ve.Z)(function*(n,e){const t=Ge(n);try{const r=yield JS(t.localStore,e);e.targetChanges.forEach((o,u)=>{const c=t.ia.get(u);c&&(Tt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Xu=!0:o.modifiedDocuments.size>0?Tt(c.Xu):o.removedDocuments.size>0&&(Tt(c.Xu),c.Xu=!1))}),yield Gc(t,r,e)}catch(r){yield dl(r)}}),OT.apply(this,arguments)}function pM(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ta.forEach((u,c)=>{const g=c.view.Eu(e);g.snapshot&&o.push(g.snapshot)}),function(u,c){const g=Ge(u);g.onlineState=c;let v=!1;g.queries.forEach((I,S)=>{for(const x of S.listeners)x.Eu(c)&&(v=!0)}),v&&TT(g)}(r.eventManager,e),o.length&&r.Zu.Ko(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function AR(n,e,t){return PT.apply(this,arguments)}function PT(){return PT=(0,ve.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ia.get(e),u=o&&o.key;if(u){let c=new Er(je.comparator);c=c.insert(u,xn.newNoDocument(u,bt.min()));const g=gn().add(u),v=new Tp(bt.min(),new Map,new bn(Wt),c,g);yield fM(r,v),r.sa=r.sa.remove(u),r.ia.delete(e),jT(r)}else yield Vp(r.localStore,e,!1).then(()=>Dy(r,e,t)).catch(dl)}),PT.apply(this,arguments)}function SR(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,ve.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const o=yield QS(t.localStore,e);UT(t,r,null),VT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Gc(t,o)}catch(o){yield dl(o)}}),kT.apply(this,arguments)}function MR(n,e,t){return FT.apply(this,arguments)}function FT(){return FT=(0,ve.Z)(function*(n,e,t){const r=Ge(n);try{const o=yield function(u,c){const g=Ge(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let I;return g.$s.lookupMutationBatch(v,c).next(S=>(Tt(null!==S),I=S.keys(),g.$s.removeMutationBatch(v,S))).next(()=>g.$s.performConsistencyCheck(v)).next(()=>g.ai.qs(v,I))})}(r.localStore,e);UT(r,e,t),VT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Gc(r,o)}catch(o){yield dl(o)}}),FT.apply(this,arguments)}function LT(){return LT=(0,ve.Z)(function*(n,e){const t=Ge(n);Vh(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ge(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>c.$s.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.ua.get(r)||[];o.push(e),t.ua.set(r,o)}catch(r){const o=wy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),LT.apply(this,arguments)}function VT(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function UT(n,e,t){const r=Ge(n);let o=r.oa[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.oa[r.currentUser.toKey()]=o}}function Dy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||gM(n,r)})}function gM(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(LE(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),jT(n))}function BT(n,e,t){for(const r of t)r instanceof cM?(n.ra.addReference(r.key,e),NR(n,r)):r instanceof dM?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||gM(n,r.key)):tt()}function NR(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.na.add(r),jT(n))}function jT(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new je(Xt.fromString(e)),r=n.aa.next();n.ia.set(r,new bR(t)),n.sa=n.sa.insert(t,r),Yb(n.remoteStore,new ol(Uo(_h(t.path)),r,2,ws.A))}}function Gc(n,e,t){return $T.apply(this,arguments)}function $T(){return $T=(0,ve.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[],c=[];var g;r.ta.isEmpty()||(r.ta.forEach((g,v)=>{c.push(r.ha(v,e,t).then(I=>{if(I){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,I.fromCache?"not-current":"current"),o.push(I);const S=Fp.Js(v.targetId,I);u.push(S)}}))}),yield Promise.all(c),r.Zu.Ko(o),yield(g=(0,ve.Z)(function*(v,I){const S=Ge(v);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>he.forEach(I,V=>he.forEach(V.zs,H=>S.persistence.referenceDelegate.addReference(x,V.targetId,H)).next(()=>he.forEach(V.Hs,H=>S.persistence.referenceDelegate.removeReference(x,V.targetId,H)))))}catch(x){if(!Th(x))throw x;ke("LocalStore","Failed to update sequence numbers: "+x)}for(const x of I){const V=x.targetId;if(!x.fromCache){const H=S.si.get(V),ye=H.withLastLimboFreeSnapshotVersion(H.snapshotVersion);S.si=S.si.insert(V,ye)}}}),function(v,I){return g.apply(this,arguments)})(r.localStore,u))}),$T.apply(this,arguments)}function RR(n,e){return HT.apply(this,arguments)}function HT(){return HT=(0,ve.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield qb(t.localStore,e);t.currentUser=e,(o=t).ua.forEach(c=>{c.forEach(g=>{g.reject(new xe(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Gc(t,r.ci)}var o}),HT.apply(this,arguments)}function OR(n,e){const t=Ge(n),r=t.ia.get(e);if(r&&r.Xu)return gn().add(r.key);{let o=gn();const u=t.ea.get(e);if(!u)return o;for(const c of u){const g=t.ta.get(c);o=o.unionWith(g.view.qu)}return o}}function PR(n,e){return GT.apply(this,arguments)}function GT(){return GT=(0,ve.Z)(function*(n,e){const t=Ge(n),r=yield NE(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&BT(t,e.targetId,o.zu),o}),GT.apply(this,arguments)}function kR(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,ve.Z)(function*(n,e){const t=Ge(n);return Kb(t.localStore,e).then(r=>Gc(t,r))}),qT.apply(this,arguments)}function FR(n,e,t,r){return zT.apply(this,arguments)}function zT(){return zT=(0,ve.Z)(function*(n,e,t,r){const o=Ge(n),u=yield function(c,g){const v=Ge(c),I=Ge(v.$s);return v.persistence.runTransaction("Lookup mutation documents","readonly",S=>I.ln(S,g).next(x=>x?v.ai.qs(S,x):he.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield vy(o.remoteStore):"acknowledged"===t||"rejected"===t?(UT(o,e,r||null),VT(o,e),g=e,Ge(Ge(o.localStore).$s).dn(g)):tt(),yield Gc(o,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),zT.apply(this,arguments)}function WT(){return WT=(0,ve.Z)(function*(n,e){const t=Ge(n);if(QT(t),JT(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield mM(t,r.toArray());t.ca=!0,yield vT(t.remoteStore,!0);for(const u of o)Yb(t.remoteStore,u)}else if(!1===e&&!1!==t.ca){const r=[];let o=Promise.resolve();t.ea.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(Dy(t,c),Vp(t.localStore,c,!0))),LE(t.remoteStore,c)}),yield o,yield mM(t,r),function(u){const c=Ge(u);c.ia.forEach((g,v)=>{LE(c.remoteStore,v)}),c.ra.bi(),c.ia=new Map,c.sa=new Er(je.comparator)}(t),t.ca=!1,yield vT(t.remoteStore,!1)}}),WT.apply(this,arguments)}function mM(n,e,t){return KT.apply(this,arguments)}function KT(){return KT=(0,ve.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[];for(const c of e){let g;const v=r.ea.get(c);if(v&&0!==v.length){g=yield Lp(r.localStore,Uo(v[0]));for(const I of v){const S=r.ta.get(I),x=yield PR(r,S);x.snapshot&&u.push(x.snapshot)}}else{const I=yield nT(r.localStore,c);g=yield Lp(r.localStore,I),yield MT(r,yM(I),c,!1)}o.push(g)}return r.Zu.Ko(u),o}),KT.apply(this,arguments)}function yM(n){return rb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function VR(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).Os()}function UR(n,e,t,r){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,ve.Z)(function*(n,e,t,r){const o=Ge(n);if(o.ca)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=o.ea.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield Kb(o.localStore,sb(u[0])),g=Tp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Gc(o,c,g);break}case"rejected":yield Vp(o.localStore,e,!0),Dy(o,e,r);break;default:tt()}}),ZT.apply(this,arguments)}function BR(n,e,t){return YT.apply(this,arguments)}function YT(){return YT=(0,ve.Z)(function*(n,e,t){const r=QT(n);if(r.ca){for(const o of e){if(r.ea.has(o)){ke("SyncEngine","Adding an already active target "+o);continue}const u=yield nT(r.localStore,o),c=yield Lp(r.localStore,u);yield MT(r,yM(u),c.targetId,!1),Yb(r.remoteStore,c)}for(const o of t)r.ea.has(o)&&(yield Vp(r.localStore,o,!1).then(()=>{LE(r.remoteStore,o),Dy(r,o)}).catch(dl))}}),YT.apply(this,arguments)}function QT(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AR.bind(null,e),e.Zu.Ko=yR.bind(null,e.eventManager),e.Zu.la=_R.bind(null,e.eventManager),e}function JT(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MR.bind(null,e),e}class _M{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.M=Hc(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return gy(this.persistence,new XC,e.initialUser,this.M)}_a(e){return new A(P.Wi,this.M)}da(e){return new cn}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class vM extends _M{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield JT(r.ga.syncEngine),yield vy(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return gy(this.persistence,new XC,e.initialUser,this.M)}wa(e){return new AE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=ME(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ji.withCacheSize(this.cacheSizeBytes):ji.DEFAULT;return new fy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,my(),Lh(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new cn}}class $R extends vM{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const o=r.ga.syncEngine;r.sharedClientState instanceof Ht&&(r.sharedClientState.syncEngine={kr:FR.bind(null,o),Mr:UR.bind(null,o),Or:BR.bind(null,o),Os:VR.bind(null,o),Nr:kR.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var u=(0,ve.Z)(function*(c){yield function LR(n,e){return WT.apply(this,arguments)}(r.ga.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}da(e){const t=my();if(!Ht.vt(t))throw new xe(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ME(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ht(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class XT{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>pM(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=RR.bind(null,r.syncEngine),yield vT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new mR}createDatastore(e){const t=Hc(e.databaseInfo.databaseId),r=new PE(e.databaseInfo);return new rR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>pM(this.syncEngine,g,0),c=hl.vt()?new hl:new Ds,new sR(t,r,o,u,c);var t,r,o,u,c}createSyncEngine(e,t){return function(r,o,u,c,g,v,I){const S=new IR(r,o,u,c,g,v);return I&&(S.ca=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=Ge(t);ke("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield _y(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function EM(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Jb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class HR{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Nr,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),o=Number(r);isNaN(o)&&e.Ra(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new vR(JSON.parse(u),t.length+o)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ve.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class GR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ve.Z)(function*(u,c){const g=Ge(u),v=Lc(g.M)+"/documents",I={documents:c.map(H=>Fc(g.M,H))},S=yield g.co("BatchGetDocuments",v,I),x=new Map;S.forEach(H=>{const z=function wb(n,e){return"found"in e?function(t,r){Tt(!!r.found);const o=Bo(t,r.found.name),u=Or(r.found.updateTime),c=new wi({mapValue:{fields:r.found.fields}});return xn.newFoundDocument(o,u,c)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const o=Bo(t,r.missing),u=Or(r.readTime);return xn.newNoDocument(o,u)}(n,e):tt()}(g.M,H);x.set(z.key.toString(),z)});const V=[];return c.forEach(H=>{const z=x.get(H.toString());Tt(!!z),V.push(z)}),V}),function(u,c){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=je.fromPath(o);e.mutations.push(new Qv(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(o,u){const c=Ge(o),g=Lc(c.M)+"/documents",v={writes:u.map(I=>Ch(c.M,I))};yield c.ro("Commit",g,v)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?vr.updateTime(t):vr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new xe(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vr.updateTime(t)}return vr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qR{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.va=5,this.So=new Up(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ve.Z)(function*(){const t=new GR(e.datastore),r=e.Da(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ca(u)}))}).catch(o=>{e.Ca(o)})}))}Da(e){try{const t=this.updateFunction(e);return!Tc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Jv(t)}return!1}}class zR{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=oi.UNAUTHENTICATED,this.clientId=uh.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ve.Z)(function*(g){ke("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ke("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=wy(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function wM(n,e){return eA.apply(this,arguments)}function eA(){return eA=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ve.Z)(function*(u){r.isEqual(u)||(yield qb(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),eA.apply(this,arguments)}function bM(n,e){return tA.apply(this,arguments)}function tA(){return tA=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield nA(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>oM(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>oM(e.remoteStore,u)),n.onlineComponents=e}),tA.apply(this,arguments)}function nA(n){return rA.apply(this,arguments)}function rA(){return rA=(0,ve.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield wM(n,new _M)),n.offlineComponents}),rA.apply(this,arguments)}function Xb(n){return iA.apply(this,arguments)}function iA(){return iA=(0,ve.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield bM(n,new XT)),n.onlineComponents}),iA.apply(this,arguments)}function IM(n){return nA(n).then(e=>e.persistence)}function sA(n){return nA(n).then(e=>e.localStore)}function DM(n){return Xb(n).then(e=>e.remoteStore)}function oA(n){return Xb(n).then(e=>e.syncEngine)}function Cy(n){return aA.apply(this,arguments)}function aA(){return aA=(0,ve.Z)(function*(n){const e=yield Xb(n),t=e.eventManager;return t.onListen=DR.bind(null,e.syncEngine),t.onUnlisten=CR.bind(null,e.syncEngine),t}),aA.apply(this,arguments)}function CM(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,c,g,v){const I=new Jb({next:x=>{u.enqueueAndForget(()=>DT(o,S));const V=x.docs.has(c);!V&&x.fromCache?v.reject(new xe(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&x.fromCache&&g&&"server"===g.source?v.reject(new xe(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(x)},error:x=>v.reject(x)}),S=new AT(_h(c.path),I,{includeMetadataChanges:!0,Du:!0});return bT(o,S)}(yield Cy(n),n.asyncQueue,e,t,r)})),r.promise}function TM(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,c,g,v){const I=new Jb({next:x=>{u.enqueueAndForget(()=>DT(o,S)),x.fromCache&&"server"===g.source?v.reject(new xe(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(x)},error:x=>v.reject(x)}),S=new AT(c,I,{includeMetadataChanges:!0,Du:!0});return bT(o,S)}(yield Cy(n),n.asyncQueue,e,t,r)})),r.promise}const AM=new Map;function uA(n,e,t){if(!t)throw new xe(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function SM(n,e,t,r){if(!0===e&&!0===r)throw new xe(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MM(n){if(!je.isDocumentKey(n))throw new xe(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xM(n){if(je.isDocumentKey(n))throw new xe(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eI(n);throw new xe(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function NM(n,e){if(e<=0)throw new xe(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class RM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,SM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class VE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RM({}),this._settingsFrozen=!1,e instanceof Vo?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new xe(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vo(o.options.projectId)}(e))}get app(){if(!this._app)throw new xe(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new dC;switch(t.type){case"gapi":const r=t.client;return Tt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new PS(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=AM.get(e);t&&(ke("ComponentProvider","Removing Datastore"),AM.delete(e),t.terminate())}(this),Promise.resolve()}}class Wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class ts{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class fl extends ts{constructor(e,t,r){super(e,t,_h(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new je(e))}withConverter(e){return new fl(this.firestore,e,this._path)}}function OM(n,e,...t){if(n=(0,Kt.m9)(n),uA("collection","path",e),n instanceof VE){const r=Xt.fromString(e,...t);return xM(r),new fl(n,null,r)}{if(!(n instanceof Wn||n instanceof fl))throw new xe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return xM(r),new fl(n.firestore,null,r)}}function tI(n,e,...t){if(n=(0,Kt.m9)(n),1===arguments.length&&(e=uh.R()),uA("doc","path",e),n instanceof VE){const r=Xt.fromString(e,...t);return MM(r),new Wn(n,null,new je(r))}{if(!(n instanceof Wn||n instanceof fl))throw new xe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return MM(r),new Wn(n.firestore,n instanceof fl?n.converter:null,new je(r))}}function PM(n,e){return n=(0,Kt.m9)(n),e=(0,Kt.m9)(e),(n instanceof Wn||n instanceof fl)&&(e instanceof Wn||e instanceof fl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function kM(n,e){return n=(0,Kt.m9)(n),e=(0,Kt.m9)(e),n instanceof ts&&e instanceof ts&&n.firestore===e.firestore&&Wm(n._query,e._query)&&n.converter===e.converter}class rO{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Up(this,"async_queue_retry"),this.Ua=()=>{const t=Lh();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Lh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=Lh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Nr;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ve.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Th(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,Vn("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const o=wT.createAndSchedule(this,e,t,r,u=>this.Qa(u));return this.Oa.push(o),o}qa(){this.Fa&&tt()}verifyOperationInProgress(){}ja(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function lA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class iO{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xn extends VE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new rO,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||FM(this),this._firestoreClient.terminate()}}function Gr(n){return n._firestoreClient||FM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function FM(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new pC(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new zR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function LM(n,e,t){const r=new Nr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield wM(n,t),yield bM(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ue.FAILED_PRECONDITION||u.code===ue.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function VM(n){if(n._initialized||n._terminated)throw new xe(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class qc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $r(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pl(_r.fromBase64String(e))}catch(t){throw new xe(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pl(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bp{constructor(e){this._methodName=e}}class nI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const pO=/^__.*__$/;class gO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Pc(e,this.data,this.fieldMask,t,this.fieldTransforms):new wp(e,this.data,t,this.fieldTransforms)}}class UM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function BM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class rI{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ja(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new rI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.ec(e),o}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.Ja(),o}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return oI(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(BM(this.Ya)&&pO.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class mO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Hc(e)}uc(e,t,r,o=!1){return new rI({Ya:e,methodName:t,oc:r,path:$r.emptyPath(),tc:!1,rc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function jp(n){const e=n._freezeSettings(),t=Hc(n._databaseId);return new mO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function iI(n,e,t,r,o,u={}){const c=n.uc(u.merge||u.mergeFields?2:0,e,t,o);fA("Data must be an object, but it was:",c,r);const g=HM(r,c);let v,I;if(u.merge)v=new Cc(c.fieldMask),I=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const x of u.mergeFields){const V=pA(e,x,t);if(!c.contains(V))throw new xe(ue.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);qM(S,V)||S.push(V)}v=new Cc(S),I=c.fieldTransforms.filter(x=>v.covers(x.field))}else v=null,I=c.fieldTransforms;return new gO(new wi(g),v,I)}class UE extends Bp{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof UE}}function jM(n,e,t){return new rI({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class cA extends Bp{_toFieldTransform(e){return new Ep(e.path,new Rc)}isEqual(e){return e instanceof cA}}class yO extends Bp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=jM(this,e,!0),r=this.ac.map(u=>$p(u,t)),o=new tl(r);return new Ep(e.path,o)}isEqual(e){return this===e}}class _O extends Bp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=jM(this,e,!0),r=this.ac.map(u=>$p(u,t)),o=new nl(r);return new Ep(e.path,o)}isEqual(e){return this===e}}class vO extends Bp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Oc(e.M,lb(e.M,this.cc));return new Ep(e.path,t)}isEqual(e){return this===e}}function dA(n,e,t,r){const o=n.uc(1,e,t);fA("Data must be an object, but it was:",o,r);const u=[],c=wi.empty();Dc(r,(v,I)=>{const S=sI(e,v,t);I=(0,Kt.m9)(I);const x=o.nc(S);if(I instanceof UE)u.push(S);else{const V=$p(I,x);null!=V&&(u.push(S),c.set(S,V))}});const g=new Cc(u);return new UM(c,g,o.fieldTransforms)}function hA(n,e,t,r,o,u){const c=n.uc(1,e,t),g=[pA(e,r,t)],v=[o];if(u.length%2!=0)throw new xe(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)g.push(pA(e,u[V])),v.push(u[V+1]);const I=[],S=wi.empty();for(let V=g.length-1;V>=0;--V)if(!qM(I,g[V])){const H=g[V];let z=v[V];z=(0,Kt.m9)(z);const ye=c.nc(H);if(z instanceof UE)I.push(H);else{const Fe=$p(z,ye);null!=Fe&&(I.push(H),S.set(H,Fe))}}const x=new Cc(I);return new UM(S,x,c.fieldTransforms)}function $M(n,e,t,r=!1){return $p(t,n.uc(r?4:3,e))}function $p(n,e){if(GM(n=(0,Kt.m9)(n)))return fA("Unsupported field value:",e,n),HM(n,e);if(n instanceof Bp)return function(t,r){if(!BM(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const c of t){let g=$p(c,r.sc(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Kt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return lb(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=sr.fromDate(t);return{timestampValue:Mp(r.M,o)}}if(t instanceof sr){const o=new sr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Mp(r.M,o)}}if(t instanceof nI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pl)return{bytesValue:Jm(r.M,t._byteString)};if(t instanceof Wn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ic(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:nE(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${eI(t)}`)}(n,e)}function HM(n,e){const t={};return Gw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dc(n,(r,o)=>{const u=$p(o,e.Za(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function GM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof sr||n instanceof nI||n instanceof pl||n instanceof Wn||n instanceof Bp)}function fA(n,e,t){if(!GM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=eI(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function pA(n,e,t){if((e=(0,Kt.m9)(e))instanceof qc)return e._internalPath;if("string"==typeof e)return sI(n,e);throw oI("Field path arguments must be of type string or ",n,!1,void 0,t)}const EO=new RegExp("[~\\*/\\[\\]]");function sI(n,e,t){if(e.search(EO)>=0)throw oI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qc(...e.split("."))._internalPath}catch(r){throw oI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function oI(n,e,t,r,o){const u=r&&!r.isEmpty(),c=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||c)&&(v+=" (found",u&&(v+=` in field ${r}`),c&&(v+=` in document ${o}`),v+=")"),new xe(ue.INVALID_ARGUMENT,g+n+v)}function qM(n,e){return n.some(t=>t.isEqual(e))}class BE{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new wO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(aI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class wO extends BE{data(){return super.data()}}function aI(n,e){return"string"==typeof e?sI(n,e):e instanceof qc?e._internalPath:e._delegate._internalPath}class Hp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zc extends BE{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(aI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class jE extends zc{data(e={}){return super.data(e)}}class Bh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Hp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new jE(this._firestore,this._userDataWriter,r.key,r,new Hp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new jE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Hp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||3!==c.type).map(c=>{const g=new jE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Hp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,I=-1;return 0!==c.type&&(v=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),I=u.indexOf(c.doc.key)),{type:bO(c.type),doc:g,oldIndex:v,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function bO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function zM(n,e){return n instanceof zc&&e instanceof zc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Bh&&e instanceof Bh&&n._firestore===e._firestore&&kM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function WM(n){if(_p(n)&&0===n.explicitOrderBy.length)throw new xe(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $E{}function jh(n,...e){for(const t of e)n=t._apply(n);return n}class IO extends $E{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=jp(e.firestore),r=function(o,u,c,g,v,I,S){let x;if(v.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new xe(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){XM(S,I);const H=[];for(const z of S)H.push(JM(g,o,z));x={arrayValue:{values:H}}}else x=JM(g,o,S)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||XM(S,I),x=$M(c,"where",S,"in"===I||"not-in"===I);const V=ai.create(v,I,x);return function(H,z){if(z.S()){const Fe=ib(H);if(null!==Fe&&!Fe.isEqual(z.field))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Fe.toString()}' and '${z.field.toString()}'`);const pt=el(H);null!==pt&&ex(0,z.field,pt)}const ye=function(Fe,pt){for(const ze of Fe.filters)if(pt.indexOf(ze.op)>=0)return ze.op;return null}(H,function(Fe){switch(Fe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==ye)throw new xe(ue.INVALID_ARGUMENT,ye===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${ye.toString()}' filters.`)}(o,V),V}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new ts(e.firestore,e.converter,function(o,u){const c=o.filters.concat([u]);return new Xu(o.path,o.collectionGroup,o.explicitOrderBy.slice(),c,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class CO extends $E{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new yh(o,u);return function(g,v){if(null===el(g)){const I=ib(g);null!==I&&ex(0,I,v.field)}}(r,c),c}(e._query,this.hc,this.dc);return new ts(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Xu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class KM extends $E{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new ts(e.firestore,e.converter,Gv(e._query,this._c,this.wc))}}class ZM extends $E{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=QM(e,this.type,this.mc,this.gc);return new ts(e.firestore,e.converter,(o=t,new Xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class YM extends $E{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=QM(e,this.type,this.mc,this.gc);return new ts(e.firestore,e.converter,(o=t,new Xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function QM(n,e,t,r){if(t[0]=(0,Kt.m9)(t[0]),t[0]instanceof BE)return function(o,u,c,g,v){if(!g)throw new xe(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const I=[];for(const S of vh(o))if(S.field.isKeyField())I.push(dh(u,g.key));else{const x=g.data.field(S.field);if(Fm(x))throw new xe(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const V=S.field.canonicalString();throw new xe(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}I.push(x)}return new Xa(I,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=jp(n.firestore);return function(u,c,g,v,I,S){const x=u.explicitOrderBy;if(I.length>x.length)throw new xe(ue.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let H=0;H<I.length;H++){const z=I[H];if(x[H].field.isKeyField()){if("string"!=typeof z)throw new xe(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof z}`);if(!zm(u)&&-1!==z.indexOf("/"))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${z}' contains a slash.`);const ye=u.path.child(Xt.fromString(z));if(!je.isDocumentKey(ye))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${ye}' is not because it contains an odd number of segments.`);const Fe=new je(ye);V.push(dh(c,Fe))}else{const ye=$M(g,v,z);V.push(ye)}}return new Xa(V,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function JM(n,e,t){if("string"==typeof(t=(0,Kt.m9)(t))){if(""===t)throw new xe(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zm(e)&&-1!==t.indexOf("/"))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xt.fromString(t));if(!je.isDocumentKey(r))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dh(n,new je(r))}if(t instanceof Wn)return dh(n,t._key);throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eI(t)}.`)}function XM(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ex(n,e,t){if(!t.isEqual(e))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class gA{convertValue(e,t="none"){switch(Ac(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return Dc(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new nI(Jn(e.latitude),Jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=zw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fp(e));default:return null}}convertTimestamp(e){const t=va(e);return new sr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xt.fromString(e);Tt(Cb(r));const o=new Vo(r.get(1),r.get(3)),u=new je(r.popFirst(5));return o.isEqual(t)||Vn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function uI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class OO extends gA{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class tx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=jp(e)}set(e,t,r){this._verifyNotCommitted();const o=$h(e,this._firestore),u=uI(o.converter,t,r),c=iI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(c.toMutation(o._key,vr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=$h(e,this._firestore);let c;return c="string"==typeof(t=(0,Kt.m9)(t))||t instanceof qc?hA(this._dataReader,"WriteBatch.update",u._key,t,r,o):dA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,vr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$h(e,this._firestore);return this._mutations=this._mutations.concat(new Dp(t._key,vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $h(n,e){if((n=(0,Kt.m9)(n)).firestore!==e)throw new xe(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Gp extends gA{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function nx(n,e,t){n=nn(n,Wn);const r=nn(n.firestore,Xn),o=uI(n.converter,e,t);return Ty(r,[iI(jp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,vr.none())])}function rx(n,e,t,...r){n=nn(n,Wn);const o=nn(n.firestore,Xn),u=jp(o);let c;return c="string"==typeof(e=(0,Kt.m9)(e))||e instanceof qc?hA(u,"updateDoc",n._key,e,t,r):dA(u,"updateDoc",n._key,e),Ty(o,[c.toMutation(n._key,vr.exists(!0))])}function ix(n,...e){var t,r,o;n=(0,Kt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||lA(e[c])||(u=e[c],c++);const g={includeMetadataChanges:u.includeMetadataChanges};if(lA(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(o=x.complete)||void 0===o?void 0:o.bind(x)}let v,I,S;if(n instanceof Wn)I=nn(n.firestore,Xn),S=_h(n._key.path),v={next:x=>{e[c]&&e[c](mA(I,n,x))},error:e[c+1],complete:e[c+2]};else{const x=nn(n,ts);I=nn(x.firestore,Xn),S=x._query;const V=new Gp(I);v={next:H=>{e[c]&&e[c](new Bh(I,V,x,H))},error:e[c+1],complete:e[c+2]},WM(n._query)}return function(x,V,H,z){const ye=new Jb(z),Fe=new AT(V,ye,H);return x.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return bT(yield Cy(x),Fe)})),()=>{ye.pa(),x.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return DT(yield Cy(x),Fe)}))}}(Gr(I),S,g,v)}function Ty(n,e){return function(t,r){const o=new Nr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function TR(n,e,t){return RT.apply(this,arguments)}(yield oA(t),r,o)})),o.promise}(Gr(n),e)}function mA(n,e,t){const r=t.docs.get(e._key),o=new Gp(n);return new zc(n,o,e._key,r,new Hp(t.hasPendingWrites,t.fromCache),e.converter)}class HO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=jp(e)}get(e){const t=$h(e,this._firestore),r=new OO(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new BE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new BE(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=$h(e,this._firestore),u=uI(o.converter,t,r),c=iI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,c),this}update(e,t,r,...o){const u=$h(e,this._firestore);let c;return c="string"==typeof(t=(0,Kt.m9)(t))||t instanceof qc?hA(this._dataReader,"Transaction.update",u._key,t,r,o):dA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=$h(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=$h(e,this._firestore),r=new Gp(this._firestore);return super.get(e).then(o=>new zc(this._firestore,r,t._key,o._document,new Hp(!1,!1),t.converter))}}function yA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ox(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function ax(){if(!function hC(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ya=$u.SDK_VERSION,(0,$u._registerComponent)(new Y_.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Xn(o,new RS(t.getProvider("auth-internal")),new km(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,$u.registerVersion)(Vw,"3.4.7",n),(0,$u.registerVersion)(Vw,"3.4.7","esm2017")}();class HE{constructor(e){this._delegate=e}static fromBase64String(e){return ax(),new HE(pl.fromBase64String(e))}static fromUint8Array(e){return ox(),new HE(pl.fromUint8Array(e))}toBase64(){return ax(),this._delegate.toBase64()}toUint8Array(){return ox(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _A(n){return function JO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class XO{enableIndexedDbPersistence(e,t){return function oO(n,e){VM(n=nn(n,Xn));const t=Gr(n),r=n._freezeSettings(),o=new XT;return LM(t,o,new vM(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function aO(n){VM(n=nn(n,Xn));const e=Gr(n),t=n._freezeSettings(),r=new XT;return LM(e,r,new $R(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function uO(n){if(n._initialized&&!n._terminated)throw new xe(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Nr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!bs.vt())return Promise.resolve();const o=r+"main";yield bs.delete(o)}),function(r){return t.apply(this,arguments)})(ME(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ux{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Vo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ja("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function tO(n,e,t,r={}){var o;const u=(n=nn(n,VE))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Ja("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,g;if("string"==typeof r.mockUserToken)c=r.mockUserToken,g=oi.MOCK_USER;else{c=(0,Kt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new xe(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new oi(v)}n._authCredentials=new NS(new jw(c,g))}}(this._delegate,e,t,r)}enableNetwork(){return function cO(n){return function WR(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield IM(n),t=yield DM(n);return e.setNetworkEnabled(!0),function(r){const o=Ge(r);return o.lu.delete(0),FE(o)}(t)}))}(Gr(n=nn(n,Xn)))}(this._delegate)}disableNetwork(){return function dO(n){return function KR(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield IM(n),t=yield DM(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(o){const u=Ge(o);u.lu.add(0),yield _y(u),u._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Gr(n=nn(n,Xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,SM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function lO(n){return function(e){const t=new Nr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function xR(n,e){return LT.apply(this,arguments)}(yield oA(e),t)})),t.promise}(Gr(n=nn(n,Xn)))}(this._delegate)}onSnapshotsInSync(e){return function $O(n,e){return function QR(n,e){const t=new Jb(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Cy(n),o=t,Ge(r).Tu.add(o),void o.next();var r,o})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Cy(n),o=t,void Ge(r).Tu.delete(o);var r,o}))}}(Gr(n=nn(n,Xn)),lA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ay(this,OM(this._delegate,e))}catch(t){throw Cs(t,"collection()","Firestore.collection()")}}doc(e){try{return new wa(this,tI(this._delegate,e))}catch(t){throw Cs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ts(this,function nO(n,e){if(n=nn(n,VE),uA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ts(n,null,(t=e,new Xu(Xt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Cs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function GO(n,e){return function JR(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const r=yield(o=n,Xb(o).then(u=>u.datastore));var o;new qR(n.asyncQueue,r,e,t).run()})),t.promise}(Gr(n=nn(n,Xn)),t=>e(new HO(n,t)))}(this._delegate,t=>e(new lx(this,t)))}batch(){return Gr(this._delegate),new cx(new tx(this._delegate,e=>Ty(this._delegate,e)))}loadBundle(e){return function hO(n,e){const t=Gr(n=nn(n,Xn)),r=new iO;return function XR(n,e,t,r){const o=function(u,c){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,I){if(v instanceof Uint8Array)return EM(v,I);if(v instanceof ArrayBuffer)return EM(new Uint8Array(v),I);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new HR(v,c);var v}(t,Hc(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function jR(n,e,t){const r=Ge(n);var o;(o=(0,ve.Z)(function*(u,c,g){try{const v=yield c.getMetadata();if(yield function(V,H){const z=Ge(V),ye=Or(H.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",Fe=>z.ds.getBundleMetadata(Fe,H.id)).then(Fe=>!!Fe&&Fe.createTime.compareTo(ye)>=0)}(u.localStore,v))return yield c.close(),g._completeWith({taskState:"Success",documentsLoaded:(V=v).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);g._updateProgress(lM(v));const I=new ER(v,u.localStore,c.M);let S=yield c.fa();for(;S;){const V=yield I.Nu(S);V&&g._updateProgress(V),S=yield c.fa()}const x=yield I.complete();return yield Gc(u,x.Ou,void 0),yield function(V,H){const z=Ge(V);return z.persistence.runTransaction("Save bundle","readwrite",ye=>z.ds.saveBundleMetadata(ye,H))}(u.localStore,v),g._completeWith(x.progress),Promise.resolve(x.Mu)}catch(v){return Ja("SyncEngine",`Loading bundle failed with ${v}`),g._failWith(v),Promise.resolve(new Set)}var V}),function(u,c,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield oA(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function fO(n,e){return function eO(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const o=Ge(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.ds.getNamedQuery(u,r))}(yield sA(n),e)}))}(Gr(n=nn(n,Xn)),e).then(t=>t?new ts(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ts(this,t):null)}}class lI extends gA{constructor(e){super(),this.firestore=e}convertBytes(e){return new HE(new pl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return wa.forKey(t,this.firestore,null)}}class lx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new lI(e)}get(e){const t=zp(e);return this._delegate.get(t).then(r=>new GE(this._firestore,new zc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=zp(e);return r?(yA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=zp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=zp(e);return this._delegate.delete(t),this}}class cx{constructor(e){this._delegate=e}set(e,t,r){const o=zp(e);return r?(yA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=zp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=zp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class qp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new jE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new qE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=qp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new qp(e,new lI(e),t),o.set(t,u)),u}}qp.INSTANCES=new WeakMap;class wa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wa(t,new Wn(t._delegate,r,new je(e)))}static forKey(e,t,r){return new wa(t,new Wn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ay(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ay(this.firestore,OM(this._delegate,e))}catch(t){throw Cs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Kt.m9)(e))instanceof Wn&&PM(this._delegate,e)}set(e,t){t=yA("DocumentReference.set",t);try{return t?nx(this._delegate,e,t):nx(this._delegate,e)}catch(r){throw Cs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?rx(this._delegate,e):rx(this._delegate,e,t,...r)}catch(o){throw Cs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function BO(n){return Ty(nn(n.firestore,Xn),[new Dp(n._key,vr.none())])}(this._delegate)}onSnapshot(...e){const t=dx(e),r=hx(e,o=>new GE(this.firestore,new zc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return ix(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function kO(n){n=nn(n,Wn);const e=nn(n.firestore,Xn),t=Gr(e),r=new Gp(e);return function ZR(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,c){try{const g=yield function(v,I){const S=Ge(v);return S.persistence.runTransaction("read document","readonly",x=>S.ai.Bs(x,I))}(o,u);g.isFoundDocument()?c.resolve(g):g.isNoDocument()?c.resolve(null):c.reject(new xe(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const v=wy(g,`Failed to get document '${u} from cache`);c.reject(v)}}),function(o,u,c){return r.apply(this,arguments)})(yield sA(n),e,t);var r})),t.promise}(t,n._key).then(o=>new zc(e,r,n._key,o,new Hp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function FO(n){n=nn(n,Wn);const e=nn(n.firestore,Xn);return CM(Gr(e),n._key,{source:"server"}).then(t=>mA(e,n,t))}(this._delegate):function PO(n){n=nn(n,Wn);const e=nn(n.firestore,Xn);return CM(Gr(e),n._key).then(t=>mA(e,n,t))}(this._delegate),t.then(r=>new GE(this.firestore,new zc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new wa(this.firestore,this._delegate.withConverter(e?qp.getInstance(this.firestore,e):null))}}function Cs(n,e,t){return n.message=n.message.replace(e,t),n}function dx(n){for(const e of n)if("object"==typeof e&&!_A(e))return e;return{}}function hx(n,e){var t,r;let o;return o=_A(n[0])?n[0]:_A(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class GE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new wa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zM(this._delegate,e._delegate)}}class qE extends GE{data(e){const t=this._delegate.data(e);return function Bw(n,e){n||tt()}(void 0!==t),t}}class Ts{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lI(e)}where(e,t,r){try{return new Ts(this.firestore,jh(this._delegate,function DO(n,e,t){const r=e,o=aI("where",n);return new IO(o,r,t)}(e,t,r)))}catch(o){throw Cs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ts(this.firestore,jh(this._delegate,function TO(n,e="asc"){const t=e,r=aI("orderBy",n);return new CO(r,t)}(e,t)))}catch(r){throw Cs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ts(this.firestore,jh(this._delegate,function AO(n){return NM("limit",n),new KM("limit",n,"F")}(e)))}catch(t){throw Cs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ts(this.firestore,jh(this._delegate,function SO(n){return NM("limitToLast",n),new KM("limitToLast",n,"L")}(e)))}catch(t){throw Cs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ts(this.firestore,jh(this._delegate,function MO(...n){return new ZM("startAt",n,!0)}(...e)))}catch(t){throw Cs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ts(this.firestore,jh(this._delegate,function xO(...n){return new ZM("startAfter",n,!1)}(...e)))}catch(t){throw Cs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ts(this.firestore,jh(this._delegate,function NO(...n){return new YM("endBefore",n,!1)}(...e)))}catch(t){throw Cs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ts(this.firestore,jh(this._delegate,function RO(...n){return new YM("endAt",n,!0)}(...e)))}catch(t){throw Cs(t,"endAt()","Query.endAt()")}}isEqual(e){return kM(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function VO(n){n=nn(n,ts);const e=nn(n.firestore,Xn),t=Gr(e),r=new Gp(e);return function YR(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,c){try{const g=yield NE(o,u,!0),v=new hM(u,g.hi),I=v.Gu(g.documents),S=v.applyChanges(I,!1);c.resolve(S.snapshot)}catch(g){const v=wy(g,`Failed to execute query '${u} against cache`);c.reject(v)}}),function(o,u,c){return r.apply(this,arguments)})(yield sA(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Bh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function UO(n){n=nn(n,ts);const e=nn(n.firestore,Xn),t=Gr(e),r=new Gp(e);return TM(t,n._query,{source:"server"}).then(o=>new Bh(e,r,n,o))}(this._delegate):function LO(n){n=nn(n,ts);const e=nn(n.firestore,Xn),t=Gr(e),r=new Gp(e);return WM(n._query),TM(t,n._query).then(o=>new Bh(e,r,n,o))}(this._delegate),t.then(r=>new vA(this.firestore,new Bh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=dx(e),r=hx(e,o=>new vA(this.firestore,new Bh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return ix(this._delegate,t,r)}withConverter(e){return new Ts(this.firestore,this._delegate.withConverter(e?qp.getInstance(this.firestore,e):null))}}class tP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new qE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ts(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new qE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new tP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new qE(this._firestore,r))})}isEqual(e){return zM(this._delegate,e._delegate)}}class Ay extends Ts{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wa(this.firestore,e):null}doc(e){try{return new wa(this.firestore,void 0===e?tI(this._delegate):tI(this._delegate,e))}catch(t){throw Cs(t,"doc()","CollectionReference.doc()")}}add(e){return function jO(n,e){const t=nn(n.firestore,Xn),r=tI(n),o=uI(n.converter,e);return Ty(t,[iI(jp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,vr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new wa(this.firestore,t))}isEqual(e){return PM(this._delegate,e._delegate)}withConverter(e){return new Ay(this.firestore,this._delegate.withConverter(e?qp.getInstance(this.firestore,e):null))}}function zp(n){return nn(n,Wn)}class EA{constructor(...e){this._delegate=new qc(...e)}static documentId(){return new EA($r.keyField().canonicalString())}isEqual(e){return(e=(0,Kt.m9)(e))instanceof qc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Wp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function zO(){return new cA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Wp(e)}static delete(){const e=function qO(){return new UE("deleteField")}();return e._methodName="FieldValue.delete",new Wp(e)}static arrayUnion(...e){const t=function WO(...n){return new yO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Wp(t)}static arrayRemove(...e){const t=function KO(...n){return new _O("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Wp(t)}static increment(e){const t=function ZO(n){return new vO("increment",n)}(e);return t._methodName="FieldValue.increment",new Wp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const nP={Firestore:ux,GeoPoint:nI,Timestamp:sr,Blob:HE,Transaction:lx,WriteBatch:cx,DocumentReference:wa,DocumentSnapshot:GE,Query:Ts,QueryDocumentSnapshot:qE,QuerySnapshot:vA,CollectionReference:Ay,FieldPath:EA,FieldValue:Wp,setLogLevel:function eP(n){!function Uw(n){Qa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function iP(n){(function rP(n,e){n.INTERNAL.registerComponent(new Y_.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},nP)))})(n,(e,t)=>new ux(e,t,new XO)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(CD.Z);var sP=k(6451),cI=k(5363),oP=k(6063);class aP extends mr.x{constructor(e=1/0,t=1/0,r=oP.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!o&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const c=t.now();let g=0;for(let v=1;v<r.length&&r[v]<=c;v+=2)g=v;g&&r.splice(0,g+1)}}}var uP=k(3099);function fx(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,uP.B)({connector:()=>new aP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function px(n,e){return(0,ka.m)(e)?Fn(()=>n,e):Fn(()=>n)}var wA=k(9468);k(5867);const mx=new Map,fP={activated:!1,tokenObservers:[]},pP={initialized:!1,enabled:!1};function bi(n){return mx.get(n)||fP}function ru(n,e){mx.set(n,e)}function hI(){return pP}class vP{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new Kt.BH,yield function EP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Kt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const As=new Kt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function _x(n){if(!bi(n).activated)throw As.create("use-before-activation",{appName:n.name})}function CA(n,e){return TA.apply(this,arguments)}function TA(){return TA=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const x=yield o.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,g;try{c=yield fetch(n,u)}catch(x){throw As.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==c.status)throw As.create("fetch-status-error",{httpStatus:c.status});try{g=yield c.json()}catch(x){throw As.create("fetch-parse-error",{originalErrorMessage:x.message})}const v=g.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw As.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const I=1e3*Number(v[1]),S=Date.now();return{token:g.attestationToken,expireTimeMillis:S+I,issuedAtTimeMillis:S}}),TA.apply(this,arguments)}function CP(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const zE="firebase-app-check-store";let gI=null;function Ex(){return gI||(gI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(As.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(zE,{keyPath:"compositeKey"})}}catch(t){e(As.create("storage-open",{originalErrorMessage:t.message}))}}),gI)}function AA(){return AA=(0,ve.Z)(function*(n,e){const r=(yield Ex()).transaction(zE,"readwrite"),u=r.objectStore(zE).put({compositeKey:n,value:e});return new Promise((c,g)=>{u.onsuccess=v=>{c()},r.onerror=v=>{var I;g(As.create("storage-set",{originalErrorMessage:null===(I=v.target.error)||void 0===I?void 0:I.message}))}})}),AA.apply(this,arguments)}const WE=new jr.Yd("@firebase/app-check");function Dx(n,e){return(0,Kt.hl)()?function MP(n,e){return function wx(n,e){return AA.apply(this,arguments)}(function Ix(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{WE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Cx(){return hI().enabled}function Tx(){return NA.apply(this,arguments)}function NA(){return NA=(0,ve.Z)(function*(){const n=hI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),NA.apply(this,arguments)}const kP={error:"UNKNOWN_ERROR"};function FP(n){return Kt.US.encodeString(JSON.stringify(n),!1)}function mI(n){return RA.apply(this,arguments)}function RA(){return RA=(0,ve.Z)(function*(n,e=!1){const t=n.app;_x(t);const r=bi(t);let u,o=r.token;if(!o){const v=yield r.cachedTokenPromise;v&&yI(v)&&(o=v)}if(!e&&o&&yI(o))return{token:o.token};let g,c=!1;if(Cx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=CA(CP(t,yield Tx()),n.heartbeatServiceProvider).then(I=>(r.exchangeTokenPromise=void 0,I)),c=!0);const v=yield r.exchangeTokenPromise;return yield Dx(t,v),ru(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),c=!0),o=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?WE.warn(v.message):WE.error(v),u=v}return o?(g={token:o.token},ru(t,Object.assign(Object.assign({},r),{token:o})),yield Dx(t,o)):g=VP(u),c&&Sx(t,g),g}),RA.apply(this,arguments)}function PA(n,e){const t=bi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ru(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Ax(n){const{app:e}=n,t=bi(e);let r=t.tokenRefresher;r||(r=function LP(n){const{app:e}=n;return new vP((0,ve.Z)(function*(){let r;if(r=bi(e).token?yield mI(n,!0):yield mI(n),r.error)throw r.error}),()=>!0,()=>{const t=bi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ru(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Sx(n,e){const t=bi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function yI(n){return n.expireTimeMillis-Date.now()>0}function VP(n){return{token:FP(kP),error:n}}class UP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=bi(this.app);for(const t of e)PA(this.app,t.next);return Promise.resolve()}}const Fx="app-check-internal";!function XP(){(0,$u._registerComponent)(new Y_.wA("app-check",n=>function BP(n,e){return new UP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Fx).initialize()})),(0,$u._registerComponent)(new Y_.wA(Fx,n=>function jP(n){return{getToken:e=>mI(n,e),addTokenListener:e=>function OA(n,e,t,r){const{app:o}=n,u=bi(o),c={next:t,error:r,type:e};if(ru(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&yI(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),Ax(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Ax(n))}(n,"INTERNAL",e),removeTokenListener:e=>PA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,$u.registerVersion)("@firebase/app-check","0.5.5")}();class VA{constructor(){return(0,Br.vb)("app-check")}}"undefined"!=typeof window&&window;var ik=k(127);const Vx=new m.OlP("angularfire2.auth.use-emulator"),Ux=new m.OlP("angularfire2.auth.settings"),Bx=new m.OlP("angularfire2.auth.tenant-id"),jx=new m.OlP("angularfire2.auth.langugage-code"),$x=new m.OlP("angularfire2.auth.use-device-language"),Hx=new m.OlP("angularfire.auth.persistence"),Gx=(n,e,t,r,o,u,c,g)=>(0,ga.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,u&&v.useDeviceLanguage(),c)for(const[I,S]of Object.entries(c))v.settings[I]=S;return g&&v.setPersistence(g),v},[t,r,o,u,c,g]);let qx=(()=>{class n{constructor(t,r,o,u,c,g,v,I,S,x,V,H){const z=new mr.x,ye=yt(void 0).pipe((0,cI.Q)(c.outsideAngular),Fn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,4087)))),(0,Vt.U)(()=>(0,ga.on)(t,u,r)),(0,Vt.U)(Fe=>Gx(Fe,u,g,I,S,x,v,V)),fx({bufferSize:1,refCount:!1}));if(pr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=yt(null);else{ye.pipe(Zs()).subscribe();const pt=ye.pipe(Fn(nt=>nt.getRedirectResult().then(Ot=>Ot,()=>null)),Br.iC,fx({bufferSize:1,refCount:!1})),ze=ye.pipe(Fn(nt=>new Xr.y(Ot=>({unsubscribe:u.runOutsideAngular(()=>nt.onAuthStateChanged(Ct=>Ot.next(Ct),Ct=>Ot.error(Ct),()=>Ot.complete()))})))),Ut=ye.pipe(Fn(nt=>new Xr.y(Ot=>({unsubscribe:u.runOutsideAngular(()=>nt.onIdTokenChanged(Ct=>Ot.next(Ct),Ct=>Ot.error(Ct),()=>Ot.complete()))}))));this.authState=pt.pipe(px(ze),(0,wA.R)(c.outsideAngular),(0,cI.Q)(c.insideAngular)),this.user=pt.pipe(px(Ut),(0,wA.R)(c.outsideAngular),(0,cI.Q)(c.insideAngular)),this.idToken=this.user.pipe(Fn(nt=>nt?(0,Pn.D)(nt.getIdToken()):yt(null))),this.idTokenResult=this.user.pipe(Fn(nt=>nt?(0,Pn.D)(nt.getIdTokenResult()):yt(null))),this.credential=(0,sP.T)(pt,z,this.authState.pipe(ps(nt=>!nt))).pipe((0,Vt.U)(nt=>(null==nt?void 0:nt.user)?nt:null),(0,wA.R)(c.outsideAngular),(0,cI.Q)(c.insideAngular))}return(0,ga.pX)(this,ye,u,{spy:{apply:(Fe,pt,ze)=>{(Fe.startsWith("signIn")||Fe.startsWith("createUser"))&&ze.then(Ut=>z.next(Ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ga.Dh),m.LFG(ga.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Br.HU),m.LFG(Vx,8),m.LFG(Ux,8),m.LFG(Bx,8),m.LFG(jx,8),m.LFG($x,8),m.LFG(Hx,8),m.LFG(VA,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function zx(n,e){return function ok(n,e=AS.z){return new Xr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function BA(n,e){return zx(n,e).pipe((0,Vt.U)(t=>({payload:t,type:"query"})))}function vI(n,e){return BA(n,e).pipe(Ri(void 0),Z_(),(0,Vt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,g)=>{const v=o.find(S=>S.doc.ref.isEqual(c.ref)),I=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(c.metadata)||!v&&I&&JSON.stringify(I.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:c}})}),u}))}function Wx(n,e,t){return vI(n,t).pipe(Ar((r,o)=>function uk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function lk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function DD(n,e=pi.y){return n=null!=n?n:SS,(0,Lr.e)((t,r)=>{let o,u=!0;t.subscribe((0,Gn.x)(r,c=>{const g=e(c);(u||!n(o,g))&&(u=!1,o=g,r.next(c))}))})}(),(0,Vt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function jA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function Kx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Zx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Vt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Ri(void 0),Z_(),ps(([r,o])=>o.length>0||!r),(0,Vt.U)(([r,o])=>o),Br.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ar((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Kx(e);return Wx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Br.iC)}valueChanges(e={}){return BA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Br.iC)}get(e){return(0,Pn.D)(this.query.get(e)).pipe(Br.iC)}add(e){return this.ref.add(e)}doc(e){return new Yx(this.ref.doc(e),this.afs)}}class Yx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=Xx(r,t);return new Zx(o,u,this.afs)}snapshotChanges(){return function ak(n,e){return zx(n,e).pipe(Ri(void 0),Z_(),(0,Vt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Br.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Pn.D)(this.ref.get(e)).pipe(Br.iC)}}class ck{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ps(t=>t.length>0),Br.iC):vI(this.query,this.afs.schedulers.outsideAngular).pipe(Br.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ar((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Kx(e);return Wx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Br.iC)}valueChanges(e={}){return BA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Vt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Br.iC)}get(e){return(0,Pn.D)(this.query.get(e)).pipe(Br.iC)}}const Qx=new m.OlP("angularfire2.enableFirestorePersistence"),Jx=new m.OlP("angularfire2.firestore.persistenceSettings"),dk=new m.OlP("angularfire2.firestore.settings"),hk=new m.OlP("angularfire2.firestore.use-emulator");function Xx(n,e=(t=>t)){return{query:e(n),ref:n}}let eN=(()=>{class n{constructor(t,r,o,u,c,g,v,I,S,x,V,H,z,ye,Fe,pt,ze){this.schedulers=v;const Ut=(0,ga.on)(t,g,r),nt=S;x&&Gx(Ut,g,V,z,ye,Fe,H,pt),[this.firestore,this.persistenceEnabled$]=(0,ga.cc)(`${Ut.name}.firestore`,"AngularFirestore",Ut.name,()=>{const Ot=g.runOutsideAngular(()=>Ut.firestore());if(u&&Ot.settings(u),nt&&Ot.useEmulator(...nt),o&&!pr(c)){const Ct=()=>{try{return(0,Pn.D)(Ot.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(Un){return"undefined"!=typeof console&&console.warn(Un),yt(!1)}};return[Ot,g.runOutsideAngular(Ct)]}return[Ot,yt(!1)]},[u,nt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=Xx(o,r),g=this.schedulers.ngZone.run(()=>u);return new Zx(g,c,this)}collectionGroup(t,r){const o=r||(c=>c),u=this.firestore.collectionGroup(t);return new ck(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Yx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ga.Dh),m.LFG(ga.xv,8),m.LFG(Qx,8),m.LFG(dk,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Br.HU),m.LFG(Jx,8),m.LFG(hk,8),m.LFG(qx,8),m.LFG(Vx,8),m.LFG(Ux,8),m.LFG(Bx,8),m.LFG(jx,8),m.LFG($x,8),m.LFG(Hx,8),m.LFG(VA,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fk=(()=>{class n{constructor(){ik.Z.registerVersion("angularfire",Br.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Qx,useValue:!0},{provide:Jx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[eN]}),n})(),$A=(()=>{class n{constructor(t){this._client=t}add(t){this._client.collection("tasks").add(t)}getAll(t){return this._client.collection("tasks").valueChanges({idField:"id"}).pipe((0,Vt.U)(r=>((n,e)=>{if(void 0===e)return n;const t=Object.keys(e);return n.filter(o=>((o,u,c)=>void 0===o.find(g=>u[g]!==c[g]))(t,o,e))})(r,t)))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(eN))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const tN=new m.OlP("ADDS_TASK_DTO");let nN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[$A,{provide:tN,useExisting:$A},{provide:y_,useExisting:$A}],imports:[[fk]]}),n})(),rN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Kr]]}),n})(),gk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Kr,qa.forChild([{path:"",component:__}]),Rg,d0,nN,rN]]}),n})(),mk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-home-page"]],decls:9,vars:0,consts:[["id","welcome-text",1,"container-flex","text-center"],["routerLink","/add-task","role","button",1,"btn","text-white"]],template:function(t,r){1&t&&(m._UZ(0,"lib-date"),m.TgZ(1,"div",0)(2,"h1"),m._uU(3,"Get a clear view of the day ahead"),m.qZA(),m.TgZ(4,"p"),m._uU(5,"All your tasks that are due today will show up here"),m.qZA(),m.TgZ(6,"a",1),m._uU(7,"Add task"),m.qZA()(),m._UZ(8,"lib-photos-list"))},directives:[m_,Pd,Ng],encapsulation:2,changeDetection:0}),n})(),yk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Kr,qa.forChild([{path:"",component:mk}]),Rg,d0]]}),n})(),_k=(()=>{class n{constructor(t){this._addsTaskDto=t,this.createTask=new Wg({task:new zg("",[WI.required])})}onCreateTaskSubmited(t){var r;t.invalid||(this._addsTaskDto.add({task:null===(r=null==t?void 0:t.get("task"))||void 0===r?void 0:r.value}),this.createTask.reset())}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(tN))},n.\u0275cmp=m.Xpm({type:n,selectors:[["lib-add-task"]],decls:8,vars:2,consts:[[1,"container","mt-5"],[1,"form-floating",3,"formGroup","ngSubmit"],["type","text","formControlName","task","placeholder","Leave a comment here","id","floatingTextarea2",1,"form-control","w-50",2,"height","100px"],["for","floatingTextarea2"],["type","submit","value","Add task",1,"btn","text-white","mt-2",3,"disabled"],["routerLink","/my-list","role","button",1,"btn","text-dark","bg-white","border-dark","mt-2"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"form",1),m.NdJ("ngSubmit",function(){return r.onCreateTaskSubmited(r.createTask)}),m._UZ(2,"input",2),m.TgZ(3,"label",3),m._uU(4,"Write a task here"),m.qZA(),m._UZ(5,"input",4),m.TgZ(6,"a",5),m._uU(7,"Cancel"),m.qZA()()()),2&t&&(m.xp6(1),m.Q6J("formGroup",r.createTask),m.xp6(4),m.Q6J("disabled",r.createTask.invalid))},directives:[uD,Ug,Jg,Og,v0,Xg,Pd],encapsulation:2,changeDetection:0}),n})(),vk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-add-task-page"]],decls:4,vars:0,template:function(t,r){1&t&&m._UZ(0,"lib-date")(1,"lib-tasks-list-view")(2,"lib-add-task")(3,"lib-photos-list")},directives:[m_,c0,_k,Ng],encapsulation:2,changeDetection:0}),n})(),Ek=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Kr,qa.forChild([{path:"",component:vk}]),Rg,d0,rN,nN,Y0]]}),n})();const wk=[{path:"my-list",loadChildren:()=>gk},{path:"",loadChildren:()=>yk},{path:"add-task",loadChildren:()=>Ek}];let bk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[qa.forRoot(wk)],qa]}),n})(),Ik=(()=>{class n{constructor(){this.title="ToDoApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"container-flex","fs-5","text-white"],[1,"header"],[1,"container-flex"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"p",1),m._uU(2,"AWESOME TODO APP"),m.qZA()(),m.TgZ(3,"div",2),m._UZ(4,"router-outlet"),m.qZA())},directives:[Xl],styles:[".header[_ngcontent-%COMP%]{background-color:#7749f8}"]}),n})();class iN{}const Wc="*";function sN(n,e=null){return{type:2,steps:n,options:e}}function oN(n){return{type:6,styles:n,offset:null}}function aN(n){Promise.resolve(null).then(n)}class KE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){aN(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class uN{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,o=0;const u=this.players.length;0==u?aN(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++o==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,g)=>Math.max(c,g.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const o=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(o)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const en=!1;function lN(n){return new m.vHH(3e3,en)}function i1(){return"undefined"!=typeof window&&void 0!==window.document}function GA(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Hh(n){switch(n.length){case 0:return new KE;case 1:return n[0];default:return new uN(n)}}function cN(n,e,t,r,o={},u={}){const c=[],g=[];let v=-1,I=null;if(r.forEach(S=>{const x=S.offset,V=x==v,H=V&&I||{};Object.keys(S).forEach(z=>{let ye=z,Fe=S[z];if("offset"!==z)switch(ye=e.normalizePropertyName(ye,c),Fe){case"!":Fe=o[z];break;case Wc:Fe=u[z];break;default:Fe=e.normalizeStyleValue(z,ye,Fe,c)}H[ye]=Fe}),V||g.push(H),I=H,v=x}),c.length)throw function Wk(n){return new m.vHH(3502,en)}();return g}function qA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&zA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&zA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&zA(t,"destroy",n)))}}function zA(n,e,t){const r=t.totalTime,u=WA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function WA(n,e,t,r,o="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:o,totalTime:u,disabled:!!c}}function $o(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function dN(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let KA=(n,e)=>!1,hN=(n,e,t)=>[],fN=null;function ZA(n){const e=n.parentNode||n.host;return e===fN?null:e}(GA()||"undefined"!=typeof Element)&&(i1()?(fN=(()=>document.documentElement)(),KA=(n,e)=>{for(;e;){if(e===n)return!0;e=ZA(e)}return!1}):KA=(n,e)=>n.contains(e),hN=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Kp=null,pN=!1;function gN(n){Kp||(Kp=function o1(){return"undefined"!=typeof document?document.body:null}()||{},pN=!!Kp.style&&"WebkitAppearance"in Kp.style);let e=!0;return Kp.style&&!function s1(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Kp.style,!e&&pN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Kp.style)),e}const mN=KA,yN=hN;let _N=(()=>{class n{validateStyleProperty(t){return gN(t)}matchesElement(t,r){return!1}containsElement(t,r){return mN(t,r)}getParentElement(t){return ZA(t)}query(t,r,o){return yN(t,r,o)}computeStyle(t,r,o){return o||""}animate(t,r,o,u,c,g=[],v){return new KE(o,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),YA=(()=>{class n{}return n.NOOP=new _N,n})();const QA="ng-enter",wI="ng-leave",bI="ng-trigger",II=".ng-trigger",EN="ng-animating",JA=".ng-animating";function Zp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:XA(parseFloat(e[1]),e[2])}function XA(n,e){return"s"===e?1e3*n:n}function DI(n,e,t){return n.hasOwnProperty("duration")?n:function l1(n,e,t){let o,u=0,c="";if("string"==typeof n){const g=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===g)return e.push(lN()),{duration:0,delay:0,easing:""};o=XA(parseFloat(g[1]),g[2]);const v=g[3];null!=v&&(u=XA(parseFloat(v),g[4]));const I=g[5];I&&(c=I)}else o=n;if(!t){let g=!1,v=e.length;o<0&&(e.push(function Ck(){return new m.vHH(3100,en)}()),g=!0),u<0&&(e.push(function Tk(){return new m.vHH(3101,en)}()),g=!0),g&&e.splice(v,0,lN())}return{duration:o,delay:u,easing:c}}(n,e,t)}function Sy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Gh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Sy(n,t);return t}function bN(n,e,t){return t?e+":"+t+";":""}function IN(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=bN(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=bN(0,h1(t),n.style[t]));n.setAttribute("style",e)}function gl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const o=tS(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[o]),n.style[o]=e[r]}),GA()&&IN(n))}function Yp(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=tS(t);n.style[r]=""}),GA()&&IN(n))}function ZE(n){return Array.isArray(n)?1==n.length?n[0]:sN(n):n}const eS=new RegExp("{{\\s*(.+?)\\s*}}","g");function DN(n){let e=[];if("string"==typeof n){let t;for(;t=eS.exec(n);)e.push(t[1]);eS.lastIndex=0}return e}function CI(n,e,t){const r=n.toString(),o=r.replace(eS,(u,c)=>{let g=e[c];return e.hasOwnProperty(c)||(t.push(function Sk(n){return new m.vHH(3003,en)}()),g=""),g.toString()});return o==r?n:o}function TI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const d1=/-+([a-z0-9])/g;function tS(n){return n.replace(d1,(...e)=>e[1].toUpperCase())}function h1(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ho(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Mk(n){return new m.vHH(3004,en)}()}}function CN(n,e){return window.getComputedStyle(n)[e]}function _1(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function v1(n,e,t){if(":"==n[0]){const v=function E1(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Hk(n){return new m.vHH(3016,en)}()),"* => *"}}(n,t);if("function"==typeof v)return void e.push(v);n=v}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function $k(n){return new m.vHH(3015,en)}()),e;const o=r[1],u=r[2],c=r[3];e.push(TN(o,c));"<"==u[0]&&!("*"==o&&"*"==c)&&e.push(TN(c,o))}(r,t,e)):t.push(n),t}const xI=new Set(["true","1"]),NI=new Set(["false","0"]);function TN(n,e){const t=xI.has(n)||NI.has(n),r=xI.has(e)||NI.has(e);return(o,u)=>{let c="*"==n||n==o,g="*"==e||e==u;return!c&&t&&"boolean"==typeof o&&(c=o?xI.has(n):NI.has(n)),!g&&r&&"boolean"==typeof u&&(g=u?xI.has(e):NI.has(e)),c&&g}}const w1=new RegExp("s*:selfs*,?","g");function nS(n,e,t,r){return new b1(n).build(e,t,r)}class b1{constructor(e){this._driver=e}build(e,t,r){const o=new C1(t);this._resetContextStyleTimingState(o);const u=Ho(this,ZE(e),o);return o.unsupportedCSSPropertiesFound.size&&o.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,o=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function Nk(){return new m.vHH(3006,en)}()),e.definitions.forEach(g=>{if(this._resetContextStyleTimingState(t),0==g.type){const v=g,I=v.name;I.toString().split(/\s*,\s*/).forEach(S=>{v.name=S,u.push(this.visitState(v,t))}),v.name=I}else if(1==g.type){const v=this.visitTransition(g,t);r+=v.queryCount,o+=v.depCount,c.push(v)}else t.errors.push(function Rk(){return new m.vHH(3007,en)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:o,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),o=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=o||{};r.styles.forEach(g=>{if(RI(g)){const v=g;Object.keys(v).forEach(I=>{DN(v[I]).forEach(S=>{c.hasOwnProperty(S)||u.add(S)})})}}),u.size&&(TI(u.values()),t.errors.push(function Ok(n,e){return new m.vHH(3008,en)}()))}return{type:0,name:e.name,style:r,options:o?{params:o}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ho(this,ZE(e.animation),t);return{type:1,matchers:_1(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Qp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ho(this,r,t)),options:Qp(e.options)}}visitGroup(e,t){const r=t.currentTime;let o=0;const u=e.steps.map(c=>{t.currentTime=r;const g=Ho(this,c,t);return o=Math.max(o,t.currentTime),g});return t.currentTime=o,{type:3,steps:u,options:Qp(e.options)}}visitAnimate(e,t){const r=function A1(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return rS(DI(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=rS(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||DI(r,e),rS(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let o,u=e.styles?e.styles:oN({});if(5==u.type)o=this.visitKeyframes(u,t);else{let c=e.styles,g=!1;if(!c){g=!0;const I={};r.easing&&(I.easing=r.easing),c=oN(I)}t.currentTime+=r.duration+r.delay;const v=this.visitStyle(c,t);v.isEmptyStep=g,o=v}return t.currentAnimateTimings=null,{type:4,timings:r,style:o,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==Wc?r.push(c):t.errors.push(function Pk(n){return new m.vHH(3002,en)}()):r.push(c)}):r.push(e.styles);let o=!1,u=null;return r.forEach(c=>{if(RI(c)){const g=c,v=g.easing;if(v&&(u=v,delete g.easing),!o)for(let I in g)if(g[I].toString().indexOf("{{")>=0){o=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let o=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(g=>{if(!this._driver.validateStyleProperty(g))return delete c[g],void t.unsupportedCSSPropertiesFound.add(g);const v=t.collectedStyles[t.currentQuerySelector],I=v[g];let S=!0;I&&(u!=o&&u>=I.startTime&&o<=I.endTime&&(t.errors.push(function kk(n,e,t,r,o){return new m.vHH(3010,en)}()),S=!1),u=I.startTime),S&&(v[g]={startTime:u,endTime:o}),t.options&&function c1(n,e,t){const r=e.params||{},o=DN(n);o.length&&o.forEach(u=>{r.hasOwnProperty(u)||t.push(function Ak(n){return new m.vHH(3001,en)}())})}(c[g],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Fk(){return new m.vHH(3011,en)}()),r;let u=0;const c=[];let g=!1,v=!1,I=0;const S=e.steps.map(pt=>{const ze=this._makeStyleAst(pt,t);let Ut=null!=ze.offset?ze.offset:function T1(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(RI(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(RI(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(ze.styles),nt=0;return null!=Ut&&(u++,nt=ze.offset=Ut),v=v||nt<0||nt>1,g=g||nt<I,I=nt,c.push(nt),ze});v&&t.errors.push(function Lk(){return new m.vHH(3012,en)}()),g&&t.errors.push(function Vk(){return new m.vHH(3200,en)}());const x=e.steps.length;let V=0;u>0&&u<x?t.errors.push(function Uk(){return new m.vHH(3202,en)}()):0==u&&(V=1/(x-1));const H=x-1,z=t.currentTime,ye=t.currentAnimateTimings,Fe=ye.duration;return S.forEach((pt,ze)=>{const Ut=V>0?ze==H?1:V*ze:c[ze],nt=Ut*Fe;t.currentTime=z+ye.delay+nt,ye.duration=nt,this._validateStyleAst(pt,t),pt.offset=Ut,r.styles.push(pt)}),r}visitReference(e,t){return{type:8,animation:Ho(this,ZE(e.animation),t),options:Qp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Qp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Qp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,o=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function I1(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(w1,"")),n=n.replace(/@\*/g,II).replace(/@\w+/g,t=>II+"-"+t.substr(1)).replace(/:animating/g,JA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,$o(t.collectedStyles,t.currentQuerySelector,{});const g=Ho(this,ZE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:o.limit||0,optional:!!o.optional,includeSelf:c,animation:g,originalSelector:e.selector,options:Qp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Bk(){return new m.vHH(3013,en)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:DI(e.timings,t.errors,!0);return{type:12,animation:Ho(this,ZE(e.animation),t),timings:r,options:null}}}class C1{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function RI(n){return!Array.isArray(n)&&"object"==typeof n}function Qp(n){return n?(n=Sy(n)).params&&(n.params=function D1(n){return n?Sy(n):null}(n.params)):n={},n}function rS(n,e,t){return{duration:n,delay:e,easing:t}}function iS(n,e,t,r,o,u,c=null,g=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:o,delay:u,totalTime:o+u,easing:c,subTimeline:g}}class OI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const x1=new RegExp(":enter","g"),R1=new RegExp(":leave","g");function sS(n,e,t,r,o,u={},c={},g,v,I=[]){return(new O1).buildKeyframes(n,e,t,r,o,u,c,g,v,I)}class O1{buildKeyframes(e,t,r,o,u,c,g,v,I,S=[]){I=I||new OI;const x=new oS(e,t,I,o,u,S,[]);x.options=v,x.currentTimeline.setStyles([c],null,x.errors,v),Ho(this,r,x);const V=x.timelines.filter(H=>H.containsAnimation());if(Object.keys(g).length){let H;for(let z=V.length-1;z>=0;z--){const ye=V[z];if(ye.element===t){H=ye;break}}H&&!H.allowOnlyTimelineStyles()&&H.setStyles([g],null,x.errors,v)}return V.length?V.map(H=>H.buildKeyframes()):[iS(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const o=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,o,o.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?Zp(r.duration):null,g=null!=r.delay?Zp(r.delay):null;return 0!==c&&e.forEach(v=>{const I=t.appendInstructionToTimeline(v,c,g);u=Math.max(u,I.duration+I.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Ho(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let o=t;const u=e.options;if(u&&(u.params||u.delay)&&(o=t.createSubContext(u),o.transformIntoNewTimeline(),null!=u.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=PI);const c=Zp(u.delay);o.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Ho(this,c,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>r&&o.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let o=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?Zp(e.options.delay):0;e.steps.forEach(c=>{const g=t.createSubContext(e.options);u&&g.delayNextStep(u),Ho(this,c,g),o=Math.max(o,g.currentTimeline.currentTime),r.push(g.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(o),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return DI(t.params?CI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),o=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),o.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),o.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,o=t.currentAnimateTimings;!o&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=o&&o.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,o=t.currentTimeline.duration,u=r.duration,g=t.createSubContext().currentTimeline;g.easing=r.easing,e.styles.forEach(v=>{g.forwardTime((v.offset||0)*u),g.setStyles(v.styles,v.easing,t.errors,t.options),g.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(g),t.transformIntoNewTimeline(o+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,o=e.options||{},u=o.delay?Zp(o.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=PI);let c=r;const g=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!o.optional,t.errors);t.currentQueryTotal=g.length;let v=null;g.forEach((I,S)=>{t.currentQueryIndex=S;const x=t.createSubContext(e.options,I);u&&x.delayNextStep(u),I===t.element&&(v=x.currentTimeline),Ho(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),v&&(t.currentTimeline.mergeTimelineCollectedStyles(v),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,o=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),g=c*(t.currentQueryTotal-1);let v=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":v=g-v;break;case"full":v=r.currentStaggerTime}const S=t.currentTimeline;v&&S.delayNextStep(v);const x=S.currentTime;Ho(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=o.currentTime-x+(o.startTime-r.currentTimeline.startTime)}}const PI={};class oS{constructor(e,t,r,o,u,c,g,v){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=o,this._leaveClassName=u,this.errors=c,this.timelines=g,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=PI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=v||new kI(this._driver,t,0),g.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let o=this.options;null!=r.duration&&(o.duration=Zp(r.duration)),null!=r.delay&&(o.delay=Zp(r.delay));const u=r.params;if(u){let c=o.params;c||(c=this.options.params={}),Object.keys(u).forEach(g=>{(!t||!c.hasOwnProperty(g))&&(c[g]=CI(u[g],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(o=>{r[o]=t[o]})}}return e}createSubContext(e=null,t,r){const o=t||this.element,u=new oS(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=PI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const o={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new P1(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,o,e.stretchStartingKeyframe);return this.timelines.push(u),o}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,o,u,c){let g=[];if(o&&g.push(this.element),e.length>0){e=(e=e.replace(x1,"."+this._enterClassName)).replace(R1,"."+this._leaveClassName);let I=this._driver.query(this.element,e,1!=r);0!==r&&(I=r<0?I.slice(I.length+r,I.length):I.slice(0,r)),g.push(...I)}return!u&&0==g.length&&c.push(function jk(n){return new m.vHH(3014,en)}()),g}}class kI{constructor(e,t,r,o){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=o,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new kI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Wc,this._currentKeyframe[t]=Wc}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,o){t&&(this._previousKeyframe.easing=t);const u=o&&o.params||{},c=function k1(n,e){const t={};let r;return n.forEach(o=>{"*"===o?(r=r||Object.keys(e),r.forEach(u=>{t[u]=Wc})):Gh(o,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(g=>{const v=CI(c[g],u,r);this._pendingStyles[g]=v,this._localTimelineStyles.hasOwnProperty(g)||(this._backFill[g]=this._globalTimelineStyles.hasOwnProperty(g)?this._globalTimelineStyles[g]:Wc),this._updateStyle(g,v)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],o=e._styleSummary[t];(!r||o.time>r.time)&&this._updateStyle(t,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((g,v)=>{const I=Gh(g,!0);Object.keys(I).forEach(S=>{const x=I[S];"!"==x?e.add(S):x==Wc&&t.add(S)}),r||(I.offset=v/this.duration),o.push(I)});const u=e.size?TI(e.values()):[],c=t.size?TI(t.values()):[];if(r){const g=o[0],v=Sy(g);g.offset=0,v.offset=1,o=[g,v]}return iS(this.element,o,u,c,this.duration,this.startTime,this.easing,!1)}}class P1 extends kI{constructor(e,t,r,o,u,c,g=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=o,this.postStyleProps=u,this._stretchStartingKeyframe=g,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:o}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,g=t/c,v=Gh(e[0],!1);v.offset=0,u.push(v);const I=Gh(e[0],!1);I.offset=MN(g),u.push(I);const S=e.length-1;for(let x=1;x<=S;x++){let V=Gh(e[x],!1);V.offset=MN((t+V.offset*r)/c),u.push(V)}r=c,t=0,o="",e=u}return iS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,o,!0)}}function MN(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class aS{}class F1 extends aS{normalizePropertyName(e,t){return tS(e)}normalizeStyleValue(e,t,r,o){let u="";const c=r.toString().trim();if(L1[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const g=r.match(/^[+-]?[\d\.]+([a-z]*)$/);g&&0==g[1].length&&o.push(function xk(n,e){return new m.vHH(3005,en)}())}return c+u}}const L1=(()=>function V1(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function xN(n,e,t,r,o,u,c,g,v,I,S,x,V){return{type:0,element:n,triggerName:e,isRemovalTransition:o,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:g,queriedElements:v,preStyleProps:I,postStyleProps:S,totalTime:x,errors:V}}const uS={};class NN{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,o){return function U1(n,e,t,r,o){return n.some(u=>u(e,t,r,o))}(this.ast.matchers,e,t,r,o)}buildStyles(e,t,r){const o=this._stateStyles["*"],u=this._stateStyles[e],c=o?o.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,o,u,c,g,v,I,S){const x=[],V=this.ast.options&&this.ast.options.params||uS,z=this.buildStyles(r,g&&g.params||uS,x),ye=v&&v.params||uS,Fe=this.buildStyles(o,ye,x),pt=new Set,ze=new Map,Ut=new Map,nt="void"===o,Ot={params:Object.assign(Object.assign({},V),ye)},Ct=S?[]:sS(e,t,this.ast.animation,u,c,z,Fe,Ot,I,x);let Un=0;if(Ct.forEach($i=>{Un=Math.max($i.duration+$i.delay,Un)}),x.length)return xN(t,this._triggerName,r,o,nt,z,Fe,[],[],ze,Ut,Un,x);Ct.forEach($i=>{const vn=$i.element,Bn=$o(ze,vn,{});$i.preStyleProps.forEach(Jp=>Bn[Jp]=!0);const Da=$o(Ut,vn,{});$i.postStyleProps.forEach(Jp=>Da[Jp]=!0),vn!==t&&pt.add(vn)});const ar=TI(pt.values());return xN(t,this._triggerName,r,o,nt,z,Fe,Ct,ar,ze,Ut,Un)}}class B1{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},o=Sy(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(o[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(g=>{let v=c[g];v.length>1&&(v=CI(v,o,t));const I=this.normalizer.normalizePropertyName(g,t);v=this.normalizer.normalizeStyleValue(g,I,v,t),r[I]=v})}}),r}}class $1{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(o=>{this.states[o.name]=new B1(o.style,o.options&&o.options.params||{},r)}),RN(this.states,"true","1"),RN(this.states,"false","0"),t.transitions.forEach(o=>{this.transitionFactories.push(new NN(e,o,this.states))}),this.fallbackTransition=function H1(n,e,t){return new NN(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,g)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,o){return this.transitionFactories.find(c=>c.match(e,t,r,o))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function RN(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const G1=new OI;class q1{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=nS(this._driver,t,r,[]);if(r.length)throw function Kk(n){return new m.vHH(3503,en)}();this._animations[e]=u}_buildPlayer(e,t,r){const o=e.element,u=cN(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(o,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const o=[],u=this._animations[e];let c;const g=new Map;if(u?(c=sS(this._driver,t,u,QA,wI,{},{},r,G1,o),c.forEach(S=>{const x=$o(g,S.element,{});S.postStyleProps.forEach(V=>x[V]=null)})):(o.push(function Zk(){return new m.vHH(3300,en)}()),c=[]),o.length)throw function Yk(n){return new m.vHH(3504,en)}();g.forEach((S,x)=>{Object.keys(S).forEach(V=>{S[V]=this._driver.computeStyle(x,V,Wc)})});const I=Hh(c.map(S=>{const x=g.get(S.element);return this._buildPlayer(S,{},x)}));return this._playersById[e]=I,I.onDestroy(()=>this.destroy(e)),this.players.push(I),I}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function Qk(n){return new m.vHH(3301,en)}();return t}listen(e,t,r,o){const u=WA(t,"","","");return qA(this._getPlayer(e),r,u,o),()=>{}}command(e,t,r,o){if("register"==r)return void this.register(e,o[0]);if("create"==r)return void this.create(e,t,o[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(e)}}}const ON="ng-animate-queued",lS="ng-animate-disabled",Y1=[],PN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Q1={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ba="__ng_removed";class cS{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function tF(n){return null!=n?n:null}(r?e.value:e),r){const u=Sy(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(o=>{null==r[o]&&(r[o]=t[o])})}}}const YE="void",dS=new cS(YE);class J1{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ia(t,this._hostClassName)}listen(e,t,r,o){if(!this._triggers.hasOwnProperty(t))throw function Jk(n,e){return new m.vHH(3302,en)}();if(null==r||0==r.length)throw function Xk(n){return new m.vHH(3303,en)}();if(!function nF(n){return"start"==n||"done"==n}(r))throw function e1(n,e){return new m.vHH(3400,en)}();const u=$o(this._elementListeners,e,[]),c={name:t,phase:r,callback:o};u.push(c);const g=$o(this._engine.statesByElement,e,{});return g.hasOwnProperty(t)||(Ia(e,bI),Ia(e,bI+"-"+t),g[t]=dS),()=>{this._engine.afterFlush(()=>{const v=u.indexOf(c);v>=0&&u.splice(v,1),this._triggers[t]||delete g[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function t1(n){return new m.vHH(3401,en)}();return t}trigger(e,t,r,o=!0){const u=this._getTrigger(t),c=new hS(this.id,t,e);let g=this._engine.statesByElement.get(e);g||(Ia(e,bI),Ia(e,bI+"-"+t),this._engine.statesByElement.set(e,g={}));let v=g[t];const I=new cS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&v&&I.absorbOptions(v.options),g[t]=I,v||(v=dS),I.value!==YE&&v.value===I.value){if(!function sF(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let o=0;o<t.length;o++){const u=t[o];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(v.params,I.params)){const ye=[],Fe=u.matchStyles(v.value,v.params,ye),pt=u.matchStyles(I.value,I.params,ye);ye.length?this._engine.reportError(ye):this._engine.afterFlush(()=>{Yp(e,Fe),gl(e,pt)})}return}const V=$o(this._engine.playersByElement,e,[]);V.forEach(ye=>{ye.namespaceId==this.id&&ye.triggerName==t&&ye.queued&&ye.destroy()});let H=u.matchTransition(v.value,I.value,e,I.params),z=!1;if(!H){if(!o)return;H=u.fallbackTransition,z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:H,fromState:v,toState:I,player:c,isFallbackTransition:z}),z||(Ia(e,ON),c.onStart(()=>{My(e,ON)})),c.onDone(()=>{let ye=this.players.indexOf(c);ye>=0&&this.players.splice(ye,1);const Fe=this._engine.playersByElement.get(e);if(Fe){let pt=Fe.indexOf(c);pt>=0&&Fe.splice(pt,1)}}),this.players.push(c),V.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(o=>o.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,II,!0);r.forEach(o=>{if(o[ba])return;const u=this._engine.fetchNamespacesByElement(o);u.size?u.forEach(c=>c.triggerLeaveAnimation(o,t,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(e,t,r,o){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const g=[];if(Object.keys(u).forEach(v=>{if(c.set(v,u[v].value),this._triggers[v]){const I=this.trigger(e,v,YE,o);I&&g.push(I)}}),g.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Hh(g).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const o=new Set;t.forEach(u=>{const c=u.name;if(o.has(c))return;o.add(c);const v=this._triggers[c].fallbackTransition,I=r[c]||dS,S=new cS(YE),x=new hS(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:v,fromState:I,toState:S,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let o=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)o=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(e),o)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[ba];(!u||u===PN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ia(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const o=r.player;if(o.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(g=>{if(g.name==r.triggerName){const v=WA(u,r.triggerName,r.fromState.value,r.toState.value);v._data=e,qA(r.player,g.phase,v,g.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):t.push(r)}),this._queue=[],t.sort((r,o)=>{const u=r.transition.ast.depCount,c=o.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,o.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class X1{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new J1(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,o=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let g=this.driver.getParentElement(t);for(;g;){const v=o.get(g);if(v){const I=r.indexOf(v);r.splice(I+1,0,e),c=!0;break}g=this.driver.getParentElement(g)}}else for(let g=u;g>=0;g--)if(this.driver.containsElement(r[g].hostElement,t)){r.splice(g+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return o.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let o=this._namespaceLookup[e];o&&o.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const o=this._namespaceList.indexOf(r);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const o=Object.keys(r);for(let u=0;u<o.length;u++){const c=r[o[u]].namespaceId;if(c){const g=this._fetchNamespace(c);g&&t.add(g)}}}return t}trigger(e,t,r,o){if(FI(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,o),!0}return!1}insertNode(e,t,r,o){if(!FI(t))return;const u=t[ba];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}o&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ia(e,lS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),My(e,lS))}removeNode(e,t,r,o){if(FI(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,o):this.markElementAsRemoved(e,t,!1,o),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,o)}}else this._onRemovalComplete(t,o)}markElementAsRemoved(e,t,r,o,u){this.collectedLeaveElements.push(t),t[ba]={namespaceId:e,setForRemoval:o,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,o,u){return FI(t)?this._fetchNamespace(e).listen(t,r,o,u):()=>{}}_buildInstruction(e,t,r,o,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,o,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,II,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,JA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Hh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[ba];if(r&&r.setForRemoval){if(e[ba]=PN,r.namespaceId){this.destroyInnerAnimations(e);const o=this._fetchNamespace(r.namespaceId);o&&o.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(lS))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(o=>{this.markElementAsDisabled(o,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,o)=>this._balanceNamespaceList(r,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ia(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let o=0;o<r.length;o++)r[o]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Hh(t).onDone(()=>{r.forEach(o=>o())}):r.forEach(o=>o())}}reportError(e){throw function n1(n){return new m.vHH(3402,en)}()}_flushAnimations(e,t){const r=new OI,o=[],u=new Map,c=[],g=new Map,v=new Map,I=new Map,S=new Set;this.disabledNodes.forEach(st=>{S.add(st);const Et=this.driver.query(st,".ng-animate-queued",!0);for(let At=0;At<Et.length;At++)S.add(Et[At])});const x=this.bodyNode,V=Array.from(this.statesByElement.keys()),H=LN(V,this.collectedEnterElements),z=new Map;let ye=0;H.forEach((st,Et)=>{const At=QA+ye++;z.set(Et,At),st.forEach(dn=>Ia(dn,At))});const Fe=[],pt=new Set,ze=new Set;for(let st=0;st<this.collectedLeaveElements.length;st++){const Et=this.collectedLeaveElements[st],At=Et[ba];At&&At.setForRemoval&&(Fe.push(Et),pt.add(Et),At.hasAnimation?this.driver.query(Et,".ng-star-inserted",!0).forEach(dn=>pt.add(dn)):ze.add(Et))}const Ut=new Map,nt=LN(V,Array.from(pt));nt.forEach((st,Et)=>{const At=wI+ye++;Ut.set(Et,At),st.forEach(dn=>Ia(dn,At))}),e.push(()=>{H.forEach((st,Et)=>{const At=z.get(Et);st.forEach(dn=>My(dn,At))}),nt.forEach((st,Et)=>{const At=Ut.get(Et);st.forEach(dn=>My(dn,At))}),Fe.forEach(st=>{this.processLeaveNode(st)})});const Ot=[],Ct=[];for(let st=this._namespaceList.length-1;st>=0;st--)this._namespaceList[st].drainQueuedTransitions(t).forEach(At=>{const dn=At.player,Ii=At.element;if(Ot.push(dn),this.collectedEnterElements.length){const Ss=Ii[ba];if(Ss&&Ss.setForMove){if(Ss.previousTriggersValues&&Ss.previousTriggersValues.has(At.triggerName)){const Xp=Ss.previousTriggersValues.get(At.triggerName),zh=this.statesByElement.get(At.element);zh&&zh[At.triggerName]&&(zh[At.triggerName].value=Xp)}return void dn.destroy()}}const ml=!x||!this.driver.containsElement(x,Ii),Go=Ut.get(Ii),qh=z.get(Ii),ur=this._buildInstruction(At,r,qh,Go,ml);if(ur.errors&&ur.errors.length)return void Ct.push(ur);if(ml)return dn.onStart(()=>Yp(Ii,ur.fromStyles)),dn.onDestroy(()=>gl(Ii,ur.toStyles)),void o.push(dn);if(At.isFallbackTransition)return dn.onStart(()=>Yp(Ii,ur.fromStyles)),dn.onDestroy(()=>gl(Ii,ur.toStyles)),void o.push(dn);const YN=[];ur.timelines.forEach(Ss=>{Ss.stretchStartingKeyframe=!0,this.disabledNodes.has(Ss.element)||YN.push(Ss)}),ur.timelines=YN,r.append(Ii,ur.timelines),c.push({instruction:ur,player:dn,element:Ii}),ur.queriedElements.forEach(Ss=>$o(g,Ss,[]).push(dn)),ur.preStyleProps.forEach((Ss,Xp)=>{const zh=Object.keys(Ss);if(zh.length){let eg=v.get(Xp);eg||v.set(Xp,eg=new Set),zh.forEach(pS=>eg.add(pS))}}),ur.postStyleProps.forEach((Ss,Xp)=>{const zh=Object.keys(Ss);let eg=I.get(Xp);eg||I.set(Xp,eg=new Set),zh.forEach(pS=>eg.add(pS))})});if(Ct.length){const st=[];Ct.forEach(Et=>{st.push(function r1(n,e){return new m.vHH(3505,en)}())}),Ot.forEach(Et=>Et.destroy()),this.reportError(st)}const Un=new Map,ar=new Map;c.forEach(st=>{const Et=st.element;r.has(Et)&&(ar.set(Et,Et),this._beforeAnimationBuild(st.player.namespaceId,st.instruction,Un))}),o.forEach(st=>{const Et=st.element;this._getPreviousPlayers(Et,!1,st.namespaceId,st.triggerName,null).forEach(dn=>{$o(Un,Et,[]).push(dn),dn.destroy()})});const $i=Fe.filter(st=>UN(st,v,I)),vn=new Map;FN(vn,this.driver,ze,I,Wc).forEach(st=>{UN(st,v,I)&&$i.push(st)});const Da=new Map;H.forEach((st,Et)=>{FN(Da,this.driver,new Set(st),v,"!")}),$i.forEach(st=>{const Et=vn.get(st),At=Da.get(st);vn.set(st,Object.assign(Object.assign({},Et),At))});const Jp=[],KN=[],ZN={};c.forEach(st=>{const{element:Et,player:At,instruction:dn}=st;if(r.has(Et)){if(S.has(Et))return At.onDestroy(()=>gl(Et,dn.toStyles)),At.disabled=!0,At.overrideTotalTime(dn.totalTime),void o.push(At);let Ii=ZN;if(ar.size>1){let Go=Et;const qh=[];for(;Go=Go.parentNode;){const ur=ar.get(Go);if(ur){Ii=ur;break}qh.push(Go)}qh.forEach(ur=>ar.set(ur,Ii))}const ml=this._buildAnimation(At.namespaceId,dn,Un,u,Da,vn);if(At.setRealPlayer(ml),Ii===ZN)Jp.push(At);else{const Go=this.playersByElement.get(Ii);Go&&Go.length&&(At.parentPlayer=Hh(Go)),o.push(At)}}else Yp(Et,dn.fromStyles),At.onDestroy(()=>gl(Et,dn.toStyles)),KN.push(At),S.has(Et)&&o.push(At)}),KN.forEach(st=>{const Et=u.get(st.element);if(Et&&Et.length){const At=Hh(Et);st.setRealPlayer(At)}}),o.forEach(st=>{st.parentPlayer?st.syncPlayerEvents(st.parentPlayer):st.destroy()});for(let st=0;st<Fe.length;st++){const Et=Fe[st],At=Et[ba];if(My(Et,wI),At&&At.hasAnimation)continue;let dn=[];if(g.size){let ml=g.get(Et);ml&&ml.length&&dn.push(...ml);let Go=this.driver.query(Et,JA,!0);for(let qh=0;qh<Go.length;qh++){let ur=g.get(Go[qh]);ur&&ur.length&&dn.push(...ur)}}const Ii=dn.filter(ml=>!ml.destroyed);Ii.length?rF(this,Et,Ii):this.processLeaveNode(Et)}return Fe.length=0,Jp.forEach(st=>{this.players.push(st),st.onDone(()=>{st.destroy();const Et=this.players.indexOf(st);this.players.splice(Et,1)}),st.play()}),Jp}elementContainsData(e,t){let r=!1;const o=t[ba];return o&&o.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,o,u){let c=[];if(t){const g=this.playersByQueriedElement.get(e);g&&(c=g)}else{const g=this.playersByElement.get(e);if(g){const v=!u||u==YE;g.forEach(I=>{I.queued||!v&&I.triggerName!=o||c.push(I)})}}return(r||o)&&(c=c.filter(g=>!(r&&r!=g.namespaceId||o&&o!=g.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,g=t.isRemovalTransition?void 0:t.triggerName;for(const v of t.timelines){const I=v.element,S=I!==u,x=$o(r,I,[]);this._getPreviousPlayers(I,S,c,g,t.toState).forEach(H=>{const z=H.getRealPlayer();z.beforeDestroy&&z.beforeDestroy(),H.destroy(),x.push(H)})}Yp(u,t.fromStyles)}_buildAnimation(e,t,r,o,u,c){const g=t.triggerName,v=t.element,I=[],S=new Set,x=new Set,V=t.timelines.map(z=>{const ye=z.element;S.add(ye);const Fe=ye[ba];if(Fe&&Fe.removedBeforeQueried)return new KE(z.duration,z.delay);const pt=ye!==v,ze=function iF(n){const e=[];return VN(n,e),e}((r.get(ye)||Y1).map(Un=>Un.getRealPlayer())).filter(Un=>!!Un.element&&Un.element===ye),Ut=u.get(ye),nt=c.get(ye),Ot=cN(0,this._normalizer,0,z.keyframes,Ut,nt),Ct=this._buildPlayer(z,Ot,ze);if(z.subTimeline&&o&&x.add(ye),pt){const Un=new hS(e,g,ye);Un.setRealPlayer(Ct),I.push(Un)}return Ct});I.forEach(z=>{$o(this.playersByQueriedElement,z.element,[]).push(z),z.onDone(()=>function eF(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const o=r.indexOf(t);r.splice(o,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const o=r.indexOf(t);r.splice(o,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,z.element,z))}),S.forEach(z=>Ia(z,EN));const H=Hh(V);return H.onDestroy(()=>{S.forEach(z=>My(z,EN)),gl(v,t.toStyles)}),x.forEach(z=>{$o(o,z,[]).push(H)}),H}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new KE(e.duration,e.delay)}}class hS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new KE,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>qA(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){$o(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function FI(n){return n&&1===n.nodeType}function kN(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function FN(n,e,t,r,o){const u=[];t.forEach(v=>u.push(kN(v)));const c=[];r.forEach((v,I)=>{const S={};v.forEach(x=>{const V=S[x]=e.computeStyle(I,x,o);(!V||0==V.length)&&(I[ba]=Q1,c.push(I))}),n.set(I,S)});let g=0;return t.forEach(v=>kN(v,u[g++])),c}function LN(n,e){const t=new Map;if(n.forEach(g=>t.set(g,[])),0==e.length)return t;const o=new Set(e),u=new Map;function c(g){if(!g)return 1;let v=u.get(g);if(v)return v;const I=g.parentNode;return v=t.has(I)?I:o.has(I)?1:c(I),u.set(g,v),v}return e.forEach(g=>{const v=c(g);1!==v&&t.get(v).push(g)}),t}function Ia(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function My(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function rF(n,e,t){Hh(t).onDone(()=>n.processLeaveNode(e))}function VN(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof uN?VN(r.players,e):e.push(r)}}function UN(n,e,t){const r=t.get(n);if(!r)return!1;let o=e.get(n);return o?r.forEach(u=>o.add(u)):e.set(n,r),t.delete(n),!0}class LI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(o,u)=>{},this._transitionEngine=new X1(e,t,r),this._timelineEngine=new q1(e,t,r),this._transitionEngine.onRemovalComplete=(o,u)=>this.onRemovalComplete(o,u)}registerTrigger(e,t,r,o,u){const c=e+"-"+o;let g=this._triggerCache[c];if(!g){const v=[],S=nS(this._driver,u,v,[]);if(v.length)throw function zk(n,e){return new m.vHH(3404,en)}();g=function j1(n,e,t){return new $1(n,e,t)}(o,S,this._normalizer),this._triggerCache[c]=g}this._transitionEngine.registerTrigger(t,o,g)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,o){this._transitionEngine.insertNode(e,t,r,o)}onRemove(e,t,r,o){this._transitionEngine.removeNode(e,t,o||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,o){if("@"==r.charAt(0)){const[u,c]=dN(r);this._timelineEngine.command(u,t,c,o)}else this._transitionEngine.trigger(e,t,r,o)}listen(e,t,r,o,u){if("@"==r.charAt(0)){const[c,g]=dN(r);return this._timelineEngine.listen(c,t,g,u)}return this._transitionEngine.listen(e,t,r,o,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let aF=(()=>{class n{constructor(t,r,o){this._element=t,this._startStyles=r,this._endStyles=o,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&gl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gl(this._element,this._initialStyles),this._endStyles&&(gl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Yp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Yp(this._element,this._endStyles),this._endStyles=null),gl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function fS(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const o=t[r];uF(o)&&(e=e||{},e[o]=n[o])}return e}function uF(n){return"display"===n||"position"===n}class BN{constructor(e,t,r,o){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:CN(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class lF{validateStyleProperty(e){return gN(e)}matchesElement(e,t){return!1}containsElement(e,t){return mN(e,t)}getParentElement(e){return ZA(e)}query(e,t,r){return yN(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,o,u,c=[]){const v={duration:r,delay:o,fill:0==o?"both":"forwards"};u&&(v.easing=u);const I={},S=c.filter(V=>V instanceof BN);(function f1(n,e){return 0===n||0===e})(r,o)&&S.forEach(V=>{let H=V.currentSnapshot;Object.keys(H).forEach(z=>I[z]=H[z])}),t=function p1(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(g=>{u.hasOwnProperty(g)||c.push(g),u[g]=t[g]}),c.length)for(var o=1;o<e.length;o++){let g=e[o];c.forEach(function(v){g[v]=CN(n,v)})}}return e}(e,t=t.map(V=>Gh(V,!1)),I);const x=function oF(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=fS(e[0]),e.length>1&&(r=fS(e[e.length-1]))):e&&(t=fS(e)),t||r?new aF(n,t,r):null}(e,t);return new BN(e,t,v,x)}}let cF=(()=>{class n extends iN{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:m.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(t)?sN(t):t;return jN(this._renderer,null,r,"register",[o]),new dF(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(re))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class dF extends class Dk{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new hF(this._id,e,t||{},this._renderer)}}class hF{constructor(e,t,r,o){this.id=e,this.element=t,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return jN(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function jN(n,e,t,r,o){return n.setProperty(e,`@@${t}:${r}`,o)}const $N="@.disabled";let fF=(()=>{class n{constructor(t,r,o){this.delegate=t,this.engine=r,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const g=null==c?void 0:c.parentNode(u);g&&c.removeChild(g,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new HN("",u,this.engine),this._rendererCache.set(u,S)),S}const c=r.id,g=r.id+"-"+this._currentId;this._currentId++,this.engine.register(g,t);const v=S=>{Array.isArray(S)?S.forEach(v):this.engine.registerTrigger(c,g,t,S.name,S)};return r.data.animation.forEach(v),new pF(this,g,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,o){t>=0&&t<this._microtaskId?this._zone.run(()=>r(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,g]=u;c(g)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(LI),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class HN{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,o=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,o)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,o){this.delegate.setAttribute(e,t,r,o)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,o){this.delegate.setStyle(e,t,r,o)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==$N?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class pF extends HN{constructor(e,t,r,o){super(t,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==$N?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const o=function gF(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function mF(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,o,u,c,g=>{this.factory.scheduleListenerCallback(g._data||-1,r,g)})}return this.delegate.listen(e,t,r)}}let yF=(()=>{class n extends LI{constructor(t,r,o){super(t.body,r,o)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(re),m.LFG(YA),m.LFG(aS))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const GN=new m.OlP("AnimationModuleType"),qN=[{provide:iN,useClass:cF},{provide:aS,useFactory:function _F(){return new F1}},{provide:LI,useClass:yF},{provide:m.FYo,useFactory:function vF(n,e,t){return new fF(n,e,t)},deps:[_n,LI,m.R0b]}],zN=[{provide:YA,useFactory:()=>new lF},{provide:GN,useValue:"BrowserAnimations"},...qN],EF=[{provide:YA,useClass:_N},{provide:GN,useValue:"NoopAnimations"},...qN];let wF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?EF:zN}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:zN,imports:[Qo]}),n})();const WN_firebase={projectId:"to-do-app-ramotka",appId:"1:983135561958:web:67b183d6d2c0dc9c03b327",storageBucket:"to-do-app-ramotka.appspot.com",locationId:"europe-west",apiKey:"AIzaSyCXW3VNnmmF07iVa23HJnznHoasoF7KRCI",authDomain:"to-do-app-ramotka.firebaseapp.com",messagingSenderId:"983135561958"};let bF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[Ik]}),n.\u0275inj=m.cJS({providers:[],imports:[[Qo,bk,wF,ga.hO.initializeApp(WN_firebase)]]}),n})();(0,m.G48)(),Al().bootstrapModule(bF).catch(n=>console.error(n))},5867:(ot,Te,k)=>{k.d(Te,{Mq:()=>m.getApp,C6:()=>m.getApps});var m=k(9681);(0,m.registerVersion)("firebase","9.6.10","app")},127:(ot,Te,k)=>{k.d(Te,{Z:()=>m.Z});var m=k(3942);m.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(ot,Te,k)=>{k.r(Te);var m=k(5861),Y=k(3942),O=k(2090),ae=k(9681),X=k(655),pe=k(1877),re=k(4859);const Re=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new pe.Yd("@firebase/auth");function We(y,...h){Xe.logLevel<=pe.in.ERROR&&Xe.error(`Auth (${ae.SDK_VERSION}): ${y}`,...h)}function De(y,...h){throw $e(y,...h)}function _e(y,...h){return $e(y,...h)}function Ee(y,h,p){const E=Object.assign(Object.assign({},Le()),{[h]:p});return new O.LL("auth","Firebase",E).create(h,{appName:y.name})}function He(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&De(y,"argument-error"),Ee(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(y,...h){if("string"!=typeof y){const p=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(p,...E)}return fe.create(y,...h)}function te(y,h,...p){if(!y)throw $e(h,...p)}function W(y){const h="INTERNAL ASSERTION FAILED: "+y;throw We(h),new Error(h)}function ne(y,h){y||W(h)}const ge=new Map;function ie(y){ne(y instanceof Function,"Expected a class definition");let h=ge.get(y);return h?(ne(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ge.set(y,h),h)}function It(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Qt(){return"http:"===Nn()||"https:"===Nn()}function Nn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class un{constructor(h,p){this.shortDelay=h,this.longDelay=p,ne(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function at(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Qt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ln(y,h){ne(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Di{static initialize(h,p,E){this.fetchImpl=h,p&&(this.headersImpl=p),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void W("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void W("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void W("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ns=new un(3e4,6e4);function Jt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Gt(y,h,p,E){return lr.apply(this,arguments)}function lr(){return(lr=(0,m.Z)(function*(y,h,p,E,T={}){return ui(y,T,(0,m.Z)(function*(){let R={},q={};E&&("GET"===h?q=E:R={body:JSON.stringify(E)});const se=(0,O.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Be=yield y._getAdditionalHeaders();return Be["Content-Type"]="application/json",y.languageCode&&(Be["X-Firebase-Locale"]=y.languageCode),Di.fetch()(Fr(y,y.config.apiHost,p,se),Object.assign({method:h,headers:Be,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ui(y,h,p){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,m.Z)(function*(y,h,p){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},rn),h);try{const T=new rs(y),R=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw is(y,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const se=R.ok?q.errorMessage:q.error.message,[Be,Je]=se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw is(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Be)throw is(y,"email-already-in-use",q);const _t=E[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw Ee(y,_t,Je);De(y,_t)}}catch(T){if(T instanceof O.ZR)throw T;De(y,"network-request-failed")}})).apply(this,arguments)}function kr(y,h,p,E){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,m.Z)(function*(y,h,p,E,T={}){const R=yield Gt(y,h,p,E,T);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Fr(y,h,p,E){const T=`${h}${p}?${E}`;return y.config.emulator?ln(y.config,T):`${y.config.apiScheme}://${T}`}class rs{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,E)=>{this.timer=setTimeout(()=>E(_e(this.auth,"network-request-failed")),ns.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function is(y,h,p){const E={appName:y.name};p.email&&(E.email=p.email),p.phoneNumber&&(E.phoneNumber=p.phoneNumber);const T=_e(y,h,E);return T.customData._tokenResponse=p,T}function qr(){return(qr=(0,m.Z)(function*(y,h){return Gt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function er(y,h){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,m.Z)(function*(y,h){return Gt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function li(y,h){return lo.apply(this,arguments)}function lo(){return(lo=(0,m.Z)(function*(y,h){return Gt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function yn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Ca(){return(Ca=(0,m.Z)(function*(y,h=!1){const p=(0,O.m9)(y),E=yield p.getIdToken(h),T=rt(E);te(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,q=null==R?void 0:R.sign_in_provider;return{claims:T,token:E,authTime:yn(qt(T.auth_time)),issuedAtTime:yn(qt(T.iat)),expirationTime:yn(qt(T.exp)),signInProvider:q||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function qt(y){return 1e3*Number(y)}function rt(y){const[h,p,E]=y.split(".");if(void 0===h||void 0===p||void 0===E)return We("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(p);return T?JSON.parse(T):(We("Failed to decode base64 JWT payload"),null)}catch(T){return We("Caught error parsing JWT payload as JSON",T),null}}function cr(y,h){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,m.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(E){throw E instanceof O.ZR&&$t(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function $t({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class co{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,m.Z)(function*(){yield p.iteration()}),E)}iteration(){var h=this;return(0,m.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class wr{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=yn(this.lastLoginAt),this.creationTime=yn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function dr(y){return ct.apply(this,arguments)}function ct(){return(ct=(0,m.Z)(function*(y){var h;const p=y.auth,E=yield y.getIdToken(),T=yield cr(y,li(p,{idToken:E}));te(null==T?void 0:T.users.length,p,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const q=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?Ce(R.providerUserInfo):[],se=Ke(y.providerData,q),_t=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==se?void 0:se.length)),it={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:se,metadata:new wr(R.createdAt,R.lastLoginAt),isAnonymous:_t};Object.assign(y,it)})).apply(this,arguments)}function Bt(){return(Bt=(0,m.Z)(function*(y){const h=(0,O.m9)(y);yield dr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ke(y,h){return[...y.filter(E=>!h.some(T=>T.providerId===E.providerId)),...h]}function Ce(y){return y.map(h=>{var{providerId:p}=h,E=(0,X._T)(h,["providerId"]);return{providerId:p,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function dt(){return(dt=(0,m.Z)(function*(y,h){const p=yield ui(y,{},(0,m.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,q=Fr(y,T,"/v1/token",`key=${R}`),se=yield y._getAdditionalHeaders();return se["Content-Type"]="application/x-www-form-urlencoded",Di.fetch()(q,{method:"POST",headers:se,body:E})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class jt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){te(h.idToken,"internal-error"),te(void 0!==h.idToken,"internal-error"),te(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function vt(y){const h=rt(y);return te(h,"internal-error"),te(void 0!==h.exp,"internal-error"),te(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var E=this;return(0,m.Z)(function*(){return te(!E.accessToken||E.refreshToken,h,"user-token-expired"),p||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var E=this;return(0,m.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:q}=yield function Qe(y,h){return dt.apply(this,arguments)}(h,p);E.updateTokensAndExpiration(T,R,Number(q))})()}updateTokensAndExpiration(h,p,E){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,p){const{refreshToken:E,accessToken:T,expirationTime:R}=p,q=new jt;return E&&(te("string"==typeof E,"internal-error",{appName:h}),q.refreshToken=E),T&&(te("string"==typeof T,"internal-error",{appName:h}),q.accessToken=T),R&&(te("number"==typeof R,"internal-error",{appName:h}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new jt,this.toJSON())}_performRefresh(){return W("not implemented")}}function Ft(y,h){te("string"==typeof y||void 0===y,"internal-error",{appName:h})}class B{constructor(h){var{uid:p,auth:E,stsTokenManager:T}=h,R=(0,X._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new co(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new wr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,m.Z)(function*(){const E=yield cr(p,p.stsTokenManager.getToken(p.auth,h));return te(E,p.auth,"internal-error"),p.accessToken!==E&&(p.accessToken=E,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),E})()}getIdTokenResult(h){return function xs(y){return Ca.apply(this,arguments)}(this,h)}reload(){return function br(y){return Bt.apply(this,arguments)}(this)}_assign(h){this!==h&&(te(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new B(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var E=this;return(0,m.Z)(function*(){let T=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield dr(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,m.Z)(function*(){const p=yield h.getIdToken();return yield cr(h,function ut(y,h){return qr.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var E,T,R,q,se,Be,Je,_t;const it=null!==(E=p.displayName)&&void 0!==E?E:void 0,Sn=null!==(T=p.email)&&void 0!==T?T:void 0,Xi=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,sc=null!==(q=p.photoURL)&&void 0!==q?q:void 0,ku=null!==(se=p.tenantId)&&void 0!==se?se:void 0,Fu=null!==(Be=p._redirectEventId)&&void 0!==Be?Be:void 0,Tf=null!==(Je=p.createdAt)&&void 0!==Je?Je:void 0,s_=null!==(_t=p.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:ha,emailVerified:Nd,isAnonymous:Rd,providerData:Af,stsTokenManager:Od}=p;te(ha&&Od,h,"internal-error");const Li=jt.fromJSON(this.name,Od);te("string"==typeof ha,h,"internal-error"),Ft(it,h.name),Ft(Sn,h.name),te("boolean"==typeof Nd,h,"internal-error"),te("boolean"==typeof Rd,h,"internal-error"),Ft(Xi,h.name),Ft(sc,h.name),Ft(ku,h.name),Ft(Fu,h.name),Ft(Tf,h.name),Ft(s_,h.name);const Sf=new B({uid:ha,auth:h,email:Sn,emailVerified:Nd,displayName:it,isAnonymous:Rd,photoURL:sc,phoneNumber:Xi,tenantId:ku,stsTokenManager:Li,createdAt:Tf,lastLoginAt:s_});return Af&&Array.isArray(Af)&&(Sf.providerData=Af.map(Ag=>Object.assign({},Ag))),Fu&&(Sf._redirectEventId=Fu),Sf}static _fromIdTokenResponse(h,p,E=!1){return(0,m.Z)(function*(){const T=new jt;T.updateFromServerResponse(p);const R=new B({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:E});return yield dr(R),R})()}}const G=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(p,E){var T=this;return(0,m.Z)(function*(){T.storage[p]=E})()}_get(p){var E=this;return(0,m.Z)(function*(){const T=E.storage[p];return void 0===T?null:T})()}_remove(p){var E=this;return(0,m.Z)(function*(){delete E.storage[p]})()}_addListener(p,E){}_removeListener(p,E){}}return y.type="NONE",y})();function ce(y,h,p){return`firebase:${y}:${h}:${p}`}class Q{constructor(h,p,E){this.persistence=h,this.auth=p,this.userKey=E;const{config:T,name:R}=this.auth;this.fullUserKey=ce(this.userKey,T.apiKey,R),this.fullPersistenceKey=ce("persistence",T.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,m.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?B._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,m.Z)(function*(){if(p.persistence===h)return;const E=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,E?p.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,E="authUser"){return(0,m.Z)(function*(){if(!p.length)return new Q(ie(G),h,E);const T=(yield Promise.all(p.map(function(){var Je=(0,m.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let R=T[0]||ie(G);const q=ce(E,h.config.apiKey,h.name);let se=null;for(const Je of p)try{const _t=yield Je._get(q);if(_t){const it=B._fromJSON(h,_t);Je!==R&&(se=it),R=Je;break}}catch(_t){}const Be=T.filter(Je=>Je._shouldAllowMigration);return R._shouldAllowMigration&&Be.length?(R=Be[0],se&&(yield R._set(q,se.toJSON())),yield Promise.all(p.map(function(){var Je=(0,m.Z)(function*(_t){if(_t!==R)try{yield _t._remove(q)}catch(it){}});return function(_t){return Je.apply(this,arguments)}}())),new Q(R,h,E)):new Q(R,h,E)})()}}function Ue(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(zt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(mt(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Nt(h))return"Blackberry";if(hn(h))return"Webos";if(Zt(h))return"Safari";if((h.includes("chrome/")||Ir(h))&&!h.includes("edge/"))return"Chrome";if(In(h))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function mt(y=(0,O.z$)()){return/firefox\//i.test(y)}function Zt(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ir(y=(0,O.z$)()){return/crios\//i.test(y)}function zt(y=(0,O.z$)()){return/iemobile/i.test(y)}function In(y=(0,O.z$)()){return/android/i.test(y)}function Nt(y=(0,O.z$)()){return/blackberry/i.test(y)}function hn(y=(0,O.z$)()){return/webos/i.test(y)}function nr(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function ss(y=(0,O.z$)()){return nr(y)||In(y)||hn(y)||Nt(y)||/windows phone/i.test(y)||zt(y)}function Aa(y,h=[]){let p;switch(y){case"Browser":p=Ue((0,O.z$)());break;case"Worker":p=`${Ue((0,O.z$)())}-${y}`;break;default:p=y}const E=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ae.SDK_VERSION}/${E}`}class ci{constructor(h,p,E){this.app=h,this.heartbeatServiceProvider=p,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pt(this),this.idTokenSubscription=new Pt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(h,p){var E=this;return p&&(this._popupRedirectResolver=ie(p)),this._initializationPromise=this.queue((0,m.Z)(function*(){var T,R;if(!E._deleted&&(E.persistenceManager=yield Q.create(E,h),!E._deleted)){if(null===(T=E._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(q){}yield E.initializeCurrentUser(p),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,m.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p)}})()}initializeCurrentUser(h){var p=this;return(0,m.Z)(function*(){var E;let T=yield p.assertedPersistence.getCurrentUser();if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const R=null===(E=p.redirectUser)||void 0===E?void 0:E._redirectEventId,q=null==T?void 0:T._redirectEventId,se=yield p.tryRedirectSignIn(h);(!R||R===q)&&(null==se?void 0:se.user)&&(T=se.user)}return T?T._redirectEventId?(te(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===T._redirectEventId?p.directlySetCurrentUser(T):p.reloadAndSetCurrentUserOrClear(T)):p.reloadAndSetCurrentUserOrClear(T):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var p=this;return(0,m.Z)(function*(){let E=null;try{E=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(T){yield p._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,m.Z)(function*(){try{yield dr(h)}catch(E){if("auth/network-request-failed"!==E.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function gt(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,m.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,m.Z)(function*(){const E=h?(0,O.m9)(h):null;return E&&te(E.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(E&&E._clone(p))})()}_updateCurrentUser(h){var p=this;return(0,m.Z)(function*(){if(!p._deleted)return h&&te(p.tenantId===h.tenantId,p,"tenant-id-mismatch"),p.queue((0,m.Z)(function*(){yield p.directlySetCurrentUser(h),p.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,m.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var p=this;return this.queue((0,m.Z)(function*(){yield p.assertedPersistence.setPersistence(ie(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,E){return this.registerStateListener(this.authStateSubscription,h,p,E)}onIdTokenChanged(h,p,E){return this.registerStateListener(this.idTokenSubscription,h,p,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var E=this;return(0,m.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,m.Z)(function*(){if(!p.redirectPersistenceManager){const E=h&&ie(h)||p._popupRedirectResolver;te(E,p,"argument-error"),p.redirectPersistenceManager=yield Q.create(p,[ie(E._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,m.Z)(function*(){var E,T;return p._isInitialized&&(yield p.queue((0,m.Z)(function*(){}))),(null===(E=p._currentUser)||void 0===E?void 0:E._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,m.Z)(function*(){if(h===p.currentUser)return p.queue((0,m.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,E,T){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),q=this._isInitialized?Promise.resolve():this._initializationPromise;return te(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,E,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,m.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Aa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,m.Z)(function*(){var p;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(E["X-Firebase-Client"]=T),E})()}}function Oe(y){return(0,O.m9)(y)}class Pt{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function hr(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function jn(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class sn{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return W("not implemented")}_getIdTokenResponse(h){return W("not implemented")}_linkToIdToken(h,p){return W("not implemented")}_getReauthenticationResolver(h){return W("not implemented")}}function Rn(y,h){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,m.Z)(function*(y,h){return Gt(y,"POST","/v1/accounts:resetPassword",Jt(y,h))})).apply(this,arguments)}function St(y,h){return qo.apply(this,arguments)}function qo(){return(qo=(0,m.Z)(function*(y,h){return Gt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function fo(y,h){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,m.Z)(function*(y,h){return Gt(y,"POST","/v1/accounts:update",Jt(y,h))})).apply(this,arguments)}function fr(){return(fr=(0,m.Z)(function*(y,h){return kr(y,"POST","/v1/accounts:signInWithPassword",Jt(y,h))})).apply(this,arguments)}function os(y,h){return as.apply(this,arguments)}function as(){return(as=(0,m.Z)(function*(y,h){return Gt(y,"POST","/v1/accounts:sendOobCode",Jt(y,h))})).apply(this,arguments)}function Ci(y,h){return on.apply(this,arguments)}function on(){return(on=(0,m.Z)(function*(y,h){return os(y,h)})).apply(this,arguments)}function su(y,h){return ou.apply(this,arguments)}function ou(){return(ou=(0,m.Z)(function*(y,h){return os(y,h)})).apply(this,arguments)}function Ti(y,h){return di.apply(this,arguments)}function di(){return(di=(0,m.Z)(function*(y,h){return os(y,h)})).apply(this,arguments)}function Kc(y,h){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,m.Z)(function*(y,h){return os(y,h)})).apply(this,arguments)}function zr(){return(zr=(0,m.Z)(function*(y,h){return kr(y,"POST","/v1/accounts:signInWithEmailLink",Jt(y,h))})).apply(this,arguments)}function Zc(){return(Zc=(0,m.Z)(function*(y,h){return kr(y,"POST","/v1/accounts:signInWithEmailLink",Jt(y,h))})).apply(this,arguments)}class uu extends sn{constructor(h,p,E,T=null){super("password",E),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new uu(h,p,"password")}static _fromEmailAndCode(h,p,E=null){return new uu(h,p,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,m.Z)(function*(){switch(p.signInMethod){case"password":return function Os(y,h){return fr.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function au(y,h){return zr.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:De(h,"internal-error")}})()}_linkToIdToken(h,p){var E=this;return(0,m.Z)(function*(){switch(E.signInMethod){case"password":return St(h,{idToken:p,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Wh(y,h){return Zc.apply(this,arguments)}(h,{idToken:p,email:E._email,oobCode:E._password});default:De(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function $n(y,h){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,m.Z)(function*(y,h){return kr(y,"POST","/v1/accounts:signInWithIdp",Jt(y,h))})).apply(this,arguments)}class us extends sn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new us(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):De("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T}=p,R=(0,X._T)(p,["providerId","signInMethod"]);if(!E||!T)return null;const q=new us(E,T);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(h){return $n(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,$n(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,$n(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function ng(y,h){return yl.apply(this,arguments)}function yl(){return(yl=(0,m.Z)(function*(y,h){return Gt(y,"POST","/v1/accounts:sendVerificationCode",Jt(y,h))})).apply(this,arguments)}function ks(){return(ks=(0,m.Z)(function*(y,h){return kr(y,"POST","/v1/accounts:signInWithPhoneNumber",Jt(y,h))})).apply(this,arguments)}function Qc(){return(Qc=(0,m.Z)(function*(y,h){const p=yield kr(y,"POST","/v1/accounts:signInWithPhoneNumber",Jt(y,h));if(p.temporaryProof)throw is(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const ig={USER_NOT_FOUND:"user-not-found"};function Jc(){return(Jc=(0,m.Z)(function*(y,h){return kr(y,"POST","/v1/accounts:signInWithPhoneNumber",Jt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),ig)})).apply(this,arguments)}class zo extends sn{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new zo({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new zo({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function _l(y,h){return ks.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function rg(y,h){return Qc.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function sg(y,h){return Jc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:E,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:E,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:E,phoneNumber:T,temporaryProof:R}=h;return E||p||T||R?new zo({verificationId:p,verificationCode:E,phoneNumber:T,temporaryProof:R}):null}}class po{constructor(h){var p,E,T,R,q,se;const Be=(0,O.zd)((0,O.pd)(h)),Je=null!==(p=Be.apiKey)&&void 0!==p?p:null,_t=null!==(E=Be.oobCode)&&void 0!==E?E:null,it=function xy(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Be.mode)&&void 0!==T?T:null);te(Je&&_t&&it,"argument-error"),this.apiKey=Je,this.operation=it,this.code=_t,this.continueUrl=null!==(R=Be.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=Be.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(se=Be.tenantId)&&void 0!==se?se:null}static parseLink(h){const p=function lu(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||p||h||y}(h);try{return new po(p)}catch(E){return null}}}let vl=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,E){return uu._fromEmailAndPassword(p,E)}static credentialWithLink(p,E){const T=po.parseLink(E);return te(T,"argument-error"),uu._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Fs{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Wr extends Fs{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Wo extends Wr{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return te("providerId"in p&&"signInMethod"in p,"argument-error"),us._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return te(h.idToken||h.accessToken,"argument-error"),us._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Wo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Wo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:R,nonce:q,providerId:se}=h;if(!E&&!T&&!p&&!R||!se)return null;try{return new Wo(se)._credential({idToken:p,accessToken:E,nonce:q,pendingToken:R})}catch(Be){return null}}}let go=(()=>{class y extends Wr{constructor(){super("facebook.com")}static credential(p){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ma=(()=>{class y extends Wr{constructor(){super("google.com"),this.addScope("profile")}static credential(p,E){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:E})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:E,oauthAccessToken:T}=p;if(!E&&!T)return null;try{return y.credential(E,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Xc=(()=>{class y extends Wr{constructor(){super("github.com")}static credential(p){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Kr extends sn{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return $n(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,$n(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,$n(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T,pendingToken:R}=p;return E&&T&&R&&E===T?new Kr(E,R):null}static _create(h,p){return new Kr(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class hi extends Fs{constructor(h){te(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return hi.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return hi.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Kr.fromJSON(h);return te(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:E}=h;if(!p||!E)return null;try{return Kr._create(E,p)}catch(T){return null}}}let cu=(()=>{class y extends Wr{constructor(){super("twitter.com")}static credential(p,E){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:E})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=p;if(!E||!T)return null;try{return y.credential(E,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function du(y,h){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,m.Z)(function*(y,h){return kr(y,"POST","/v1/accounts:signUp",Jt(y,h))})).apply(this,arguments)}class pr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,E,T=!1){return(0,m.Z)(function*(){const R=yield B._fromIdTokenResponse(h,E,T),q=Zh(E);return new pr({user:R,providerId:q,_tokenResponse:E,operationType:p})})()}static _forOperation(h,p,E){return(0,m.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const T=Zh(E);return new pr({user:h,providerId:T,_tokenResponse:E,operationType:p})})()}}function Zh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ed(){return(ed=(0,m.Z)(function*(y){var h;const p=Oe(y);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new pr({user:p.currentUser,providerId:null,operationType:"signIn"});const E=yield du(p,{returnSecureToken:!0}),T=yield pr._fromIdTokenResponse(p,"signIn",E,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class fu extends O.ZR{constructor(h,p,E,T){var R;super(p.code,p.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,fu.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,p,E,T){return new fu(h,p,E,T)}}function pu(y,h,p,E){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?fu._fromErrorAndOperation(y,R,h,E):R})}function ls(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function El(){return(El=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y);yield Vs(!0,p,h);const{providerUserInfo:E}=yield er(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=ls(E||[]);return p.providerData=p.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function mn(y,h){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,m.Z)(function*(y,h,p=!1){const E=yield cr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return pr._forOperation(y,"link",E)})).apply(this,arguments)}function Vs(y,h,p){return an.apply(this,arguments)}function an(){return(an=(0,m.Z)(function*(y,h,p){yield dr(h);const T=!1===y?"provider-already-linked":"no-such-provider";te(ls(h.providerData).has(p)===y,h.auth,T)})).apply(this,arguments)}function td(y,h){return mo.apply(this,arguments)}function mo(){return(mo=(0,m.Z)(function*(y,h,p=!1){const{auth:E}=y,T="reauthenticate";try{const R=yield cr(y,pu(E,T,h,y),p);te(R.idToken,E,"internal-error");const q=rt(R.idToken);te(q,E,"internal-error");const{sub:se}=q;return te(y.uid===se,E,"user-mismatch"),pr._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&De(E,"user-mismatch"),R}})).apply(this,arguments)}function yo(y,h){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,m.Z)(function*(y,h,p=!1){const E="signIn",T=yield pu(y,E,h),R=yield pr._fromIdTokenResponse(y,E,T);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function On(y,h){return Na.apply(this,arguments)}function Na(){return(Na=(0,m.Z)(function*(y,h){return yo(Oe(y),h)})).apply(this,arguments)}function Ai(y,h){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y);return yield Vs(!1,p,h.providerId),mn(p,h)})).apply(this,arguments)}function Us(y,h){return cs.apply(this,arguments)}function cs(){return(cs=(0,m.Z)(function*(y,h){return td((0,O.m9)(y),h)})).apply(this,arguments)}function gu(y,h){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,m.Z)(function*(y,h){return kr(y,"POST","/v1/accounts:signInWithCustomToken",Jt(y,h))})).apply(this,arguments)}function js(){return(js=(0,m.Z)(function*(y,h){const p=Oe(y),E=yield gu(p,{token:h,returnSecureToken:!0}),T=yield pr._fromIdTokenResponse(p,"signIn",E);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class ht{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?mu._fromServerResponse(h,p):De(h,"internal-error")}}class mu extends ht{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new mu(p)}}function Ra(y,h,p){var E;te((null===(E=p.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),te(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(te(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(te(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function _u(){return(_u=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:h};p&&Ra(E,T,p),yield su(E,T)})).apply(this,arguments)}function wl(){return(wl=(0,m.Z)(function*(y,h,p){yield Rn((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function be(){return(be=(0,m.Z)(function*(y,h){yield fo((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function Lt(y,h){return nd.apply(this,arguments)}function nd(){return(nd=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y),E=yield Rn(p,{oobCode:h}),T=E.requestType;switch(te(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(E.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(E.mfaInfo,p,"internal-error");default:te(E.email,p,"internal-error")}let R=null;return E.mfaInfo&&(R=ht._fromServerResponse(Oe(p),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function Zo(){return(Zo=(0,m.Z)(function*(y,h){const{data:p}=yield Lt((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function Qr(){return(Qr=(0,m.Z)(function*(y,h,p){const E=Oe(y),T=yield du(E,{returnSecureToken:!0,email:h,password:p}),R=yield pr._fromIdTokenResponse(E,"signIn",T);return yield E._updateCurrentUser(R.user),R})).apply(this,arguments)}function rd(){return(rd=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};te(p.handleCodeInApp,E,"argument-error"),p&&Ra(E,T,p),yield Ti(E,T)})).apply(this,arguments)}function $s(){return($s=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y),T=vl.credentialWithLink(h,p||It());return te(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),On(E,T)})).apply(this,arguments)}function gr(y,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,m.Z)(function*(y,h){return Gt(y,"POST","/v1/accounts:createAuthUri",Jt(y,h))})).apply(this,arguments)}function Hs(){return(Hs=(0,m.Z)(function*(y,h){const E={identifier:h,continueUri:Qt()?It():"http://localhost"},{signinMethods:T}=yield gr((0,O.m9)(y),E);return T||[]})).apply(this,arguments)}function Tl(){return(Tl=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Ra(p.auth,T,h);const{email:R}=yield Ci(p.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Iu(){return(Iu=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&Ra(E.auth,R,p);const{email:q}=yield Kc(E.auth,R);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function Al(y,h){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,m.Z)(function*(y,h){return Gt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Sl(){return(Sl=(0,m.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const E=(0,O.m9)(y),R={idToken:yield E.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},q=yield cr(E,Al(E.auth,R));E.displayName=q.displayName||null,E.photoURL=q.photoUrl||null;const se=E.providerData.find(({providerId:Be})=>"password"===Be);se&&(se.displayName=E.displayName,se.photoURL=E.photoURL),yield E._updateTokensIfNecessary(q)})).apply(this,arguments)}function xl(y,h,p){return _o.apply(this,arguments)}function _o(){return(_o=(0,m.Z)(function*(y,h,p){const{auth:E}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const q=yield cr(y,St(E,R));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class vo{constructor(h,p,E={}){this.isNewUser=h,this.providerId=p,this.profile=E}}class od extends vo{constructor(h,p,E,T){super(h,p,E),this.username=T}}class ad extends vo{constructor(h,p){super(h,"facebook.com",p)}}class Eo extends od{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Gs extends vo{constructor(h,p){super(h,"google.com",p)}}class Nl extends od{constructor(h,p,E){super(h,"twitter.com",p,E)}}function Tr(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function sd(y){var h,p;if(!y)return null;const{providerId:E}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const q=null===(p=null===(h=rt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(q)return new vo(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!E)return null;switch(E){case"facebook.com":return new ad(R,T);case"github.com":return new Eo(R,T);case"google.com":return new Gs(R,T);case"twitter.com":return new Nl(R,T,y.screenName||null);case"custom":case"anonymous":return new vo(R,null);default:return new vo(R,E,T)}}(p)}class ds{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new ds("enroll",h)}static _fromMfaPendingCredential(h){return new ds("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,E;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return ds._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return ds._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Pa{constructor(h,p,E){this.session=h,this.hints=p,this.signInResolver=E}static _fromError(h,p){const E=Oe(h),T=p.customData._serverResponse,R=(T.mfaInfo||[]).map(se=>ht._fromServerResponse(E,se));te(T.mfaPendingCredential,E,"internal-error");const q=ds._fromMfaPendingCredential(T.mfaPendingCredential);return new Pa(q,R,function(){var se=(0,m.Z)(function*(Be){const Je=yield Be._process(E,q);delete T.mfaInfo,delete T.mfaPendingCredential;const _t=Object.assign(Object.assign({},T),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(p.operationType){case"signIn":const it=yield pr._fromIdTokenResponse(E,p.operationType,_t);return yield E._updateCurrentUser(it.user),it;case"reauthenticate":return te(p.user,E,"internal-error"),pr._forOperation(p.user,p.operationType,_t);default:De(E,"internal-error")}});return function(Be){return se.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,m.Z)(function*(){return p.signInResolver(h)})()}}function Hn(y,h){return Gt(y,"POST","/v2/accounts/mfaEnrollment:start",Jt(y,h))}class hs{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(E=>ht._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new hs(h)}getSession(){var h=this;return(0,m.Z)(function*(){return ds._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var E=this;return(0,m.Z)(function*(){const T=h,R=yield E.getSession(),q=yield cr(E.user,T._process(E.user.auth,R,p));return yield E.user._updateTokensIfNecessary(q),E.user.reload()})()}unenroll(h){var p=this;return(0,m.Z)(function*(){const E="string"==typeof h?h:h.uid,T=yield p.user.getIdToken(),R=yield cr(p.user,function ag(y,h){return Gt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(y,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:E}));p.enrolledFactors=p.enrolledFactors.filter(({uid:q})=>q!==E),yield p.user._updateTokensIfNecessary(R);try{yield p.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const Jo=new WeakMap,Pl="__sak";class wo{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Pl,"1"),this.storage.removeItem(Pl),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const kn=(()=>{class y extends wo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,E)=>this.onStorageEvent(p,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function cd(){const y=(0,O.z$)();return Zt(y)||nr(y)}()&&function Zn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ss(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),R=this.localCache[E];T!==R&&p(E,R,T)}}onStorageEvent(p,E=!1){if(!p.key)return void this.forAllChangedKeys((se,Be,Je)=>{this.notifyListeners(se,Je)});const T=p.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const se=this.storage.getItem(T);if(p.newValue!==se)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!E)return}const R=()=>{const se=this.storage.getItem(T);!E&&this.localCache[T]===se||this.notifyListeners(T,se)},q=this.storage.getItem(T);!function Ta(){return(0,O.w1)()&&10===document.documentMode}()||q===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,E){this.localCache[p]=E;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,E){var T=()=>super._set,R=this;return(0,m.Z)(function*(){yield T().call(R,p,E),R.localCache[p]=JSON.stringify(E)})()}_get(p){var E=()=>super._get,T=this;return(0,m.Z)(function*(){const R=yield E().call(T,p);return T.localCache[p]=JSON.stringify(R),R})()}_remove(p){var E=()=>super._remove,T=this;return(0,m.Z)(function*(){yield E().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),mr=(()=>{class y extends wo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,E){}_removeListener(p,E){}}return y.type="SESSION",y})();let Xr=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const E=this.receivers.find(R=>R.isListeningto(p));if(E)return E;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var E=this;return(0,m.Z)(function*(){const T=p,{eventId:R,eventType:q,data:se}=T.data,Be=E.handlersMap[q];if(!(null==Be?void 0:Be.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const Je=Array.from(Be).map(function(){var it=(0,m.Z)(function*(Sn){return Sn(T.origin,se)});return function(Sn){return it.apply(this,arguments)}}()),_t=yield function Jr(y){return Promise.all(y.map(function(){var h=(0,m.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(E){return{fulfilled:!1,reason:E}}});return function(p){return h.apply(this,arguments)}}()))}(Je);T.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:_t})})()}_subscribe(p,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(E)}_unsubscribe(p,E){this.handlersMap[p]&&E&&this.handlersMap[p].delete(E),(!E||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Xo(y="",h=10){let p="";for(let E=0;E<h;E++)p+=Math.floor(10*Math.random());return y+p}class dd{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,E=50){var T=this;return(0,m.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,se;return new Promise((Be,Je)=>{const _t=Xo("",20);R.port1.start();const it=setTimeout(()=>{Je(new Error("unsupported_event"))},E);se={messageChannel:R,onMessage(Sn){const Xi=Sn;if(Xi.data.eventId===_t)switch(Xi.data.status){case"ack":clearTimeout(it),q=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Be(Xi.data.response);break;default:clearTimeout(it),clearTimeout(q),Je(new Error("invalid_response"))}}},T.handlers.add(se),R.port1.addEventListener("message",se.onMessage),T.target.postMessage({eventType:h,eventId:_t,data:p},[R.port2])}).finally(()=>{se&&T.removeMessageHandler(se)})})()}}function pn(){return window}function Mi(){return void 0!==pn().WorkerGlobalScope&&"function"==typeof pn().importScripts}function pi(){return(pi=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const kl="firebaseLocalStorageDb",bo="firebaseLocalStorage",Gn="fbase_key";class fs{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ea(y,h){return y.transaction([bo],h?"readwrite":"readonly").objectStore(bo)}function zs(){const y=indexedDB.open(kl,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(bo,{keyPath:Gn})}catch(T){p(T)}}),y.addEventListener("success",(0,m.Z)(function*(){const E=y.result;E.objectStoreNames.contains(bo)?h(E):(E.close(),yield function gi(){const y=indexedDB.deleteDatabase(kl);return new fs(y).toPromise()}(),h(yield zs()))}))})}function ka(y,h,p){return zi.apply(this,arguments)}function zi(){return(zi=(0,m.Z)(function*(y,h,p){const E=ea(y,!0).put({[Gn]:h,value:p});return new fs(E).toPromise()})).apply(this,arguments)}function Ws(){return(Ws=(0,m.Z)(function*(y,h){const p=ea(y,!1).get(h),E=yield new fs(p).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Wi(y,h){const p=ea(y,!0).delete(h);return new fs(p).toPromise()}const xi=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,m.Z)(function*(){return p.db||(p.db=yield zs()),p.db})()}_withRetries(p){var E=this;return(0,m.Z)(function*(){let T=0;for(;;)try{const R=yield E._openDb();return yield p(R)}catch(R){if(T++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,m.Z)(function*(){return Mi()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,m.Z)(function*(){p.receiver=Xr._getInstance(function hd(){return Mi()?self:null}()),p.receiver._subscribe("keyChanged",function(){var E=(0,m.Z)(function*(T,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(T,R){return E.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var E=(0,m.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return E.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,m.Z)(function*(){var E,T;if(p.activeServiceWorker=yield function Cu(){return pi.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new dd(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(E=R[0])||void 0===E?void 0:E.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var E=this;return(0,m.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Vt(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:p},E.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const p=yield zs();return yield ka(p,Pl,"1"),yield Wi(p,Pl),!0}catch(p){}return!1})()}_withPendingWrite(p){var E=this;return(0,m.Z)(function*(){E.pendingWrites++;try{yield p()}finally{E.pendingWrites--}})()}_set(p,E){var T=this;return(0,m.Z)(function*(){return T._withPendingWrite((0,m.Z)(function*(){return yield T._withRetries(R=>ka(R,p,E)),T.localCache[p]=E,T.notifyServiceWorker(p)}))})()}_get(p){var E=this;return(0,m.Z)(function*(){const T=yield E._withRetries(R=>function Fl(y,h){return Ws.apply(this,arguments)}(R,p));return E.localCache[p]=T,T})()}_remove(p){var E=this;return(0,m.Z)(function*(){return E._withPendingWrite((0,m.Z)(function*(){return yield E._withRetries(T=>Wi(T,p)),delete E.localCache[p],E.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,m.Z)(function*(){const E=yield p._withRetries(q=>{const se=ea(q,!1).getAll();return new fs(se).toPromise()});if(!E)return[];if(0!==p.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:q,value:se}of E)R.add(q),JSON.stringify(p.localCache[q])!==JSON.stringify(se)&&(p.notifyListeners(q,se),T.push(q));for(const q of Object.keys(p.localCache))p.localCache[q]&&!R.has(q)&&(p.notifyListeners(q,null),T.push(q));return T})()}notifyListeners(p,E){this.localCache[p]=E;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(E)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function na(y,h){return Gt(y,"POST","/v2/accounts/mfaSignIn:start",Jt(y,h))}function Ni(){return(Ni=(0,m.Z)(function*(y){return(yield Gt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fn(y){return new Promise((h,p)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=h,E.onerror=T=>{const R=_e("internal-error");R.customData=T,p(R)},E.type="text/javascript",E.charset="UTF-8",function gd(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(E)})}function ra(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ar=1e12;class ps{constructor(h){this.auth=h,this.counter=Ar,this._widgets=new Map}render(h,p){const E=this.counter;return this._widgets.set(E,new Ki(h,this.auth.name,p||{})),this.counter++,E}reset(h){var p;const E=h||Ar;null===(p=this._widgets.get(E))||void 0===p||p.delete(),this._widgets.delete(E)}getResponse(h){var p;return(null===(p=this._widgets.get(h||Ar))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,m.Z)(function*(){var E;return null===(E=p._widgets.get(h||Ar))||void 0===E||E.execute(),""})()}}class Ki{constructor(h,p,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;te(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Cn(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ks=ra("rcb"),md=new un(3e4,6e4);class lg{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!pn().grecaptcha}load(h,p=""){return te(function cg(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(pn().grecaptcha):new Promise((E,T)=>{const R=pn().setTimeout(()=>{T(_e(h,"network-request-failed"))},md.get());pn()[Ks]=()=>{pn().clearTimeout(R),delete pn()[Ks];const se=pn().grecaptcha;if(!se)return void T(_e(h,"internal-error"));const Be=se.render;se.render=(Je,_t)=>{const it=Be(Je,_t);return this.counter++,it},this.hostLanguage=p,E(se)},Fn(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Ks,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),T(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!pn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class dg{load(h){return(0,m.Z)(function*(){return new ps(h)})()}clearedOneInstance(){}}const Zs="recaptcha",ei={theme:"light",type:"image"};class hg{constructor(h,p=Object.assign({},ei),E){this.parameters=p,this.type=Zs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Oe(E),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;te(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dg:new lg,this.validateStartingState()}verify(){var h=this;return(0,m.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(p)||new Promise(R=>{const q=se=>{!se||(h.tokenChangeListeners.delete(q),R(se))};h.tokenChangeListeners.add(q),h.isInvisible&&E.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(E=>E(p)),"function"==typeof h)h(p);else if("string"==typeof h){const E=pn()[h];"function"==typeof E&&E(p)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,m.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const E=document.createElement("div");p.appendChild(E),p=E}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,m.Z)(function*(){te(Qt()&&!Mi(),h.auth,"internal-error"),yield function Ys(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Lr(y){return Ni.apply(this,arguments)}(h.auth);te(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class gs{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=zo._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function En(){return(En=(0,m.Z)(function*(y,h,p){const E=Oe(y),T=yield Sr(E,h,(0,O.m9)(p));return new gs(T,R=>On(E,R))})).apply(this,arguments)}function sa(){return(sa=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y);yield Vs(!1,E,"phone");const T=yield Sr(E.auth,h,(0,O.m9)(p));return new gs(T,R=>Ai(E,R))})).apply(this,arguments)}function Ul(){return(Ul=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y),T=yield Sr(E.auth,h,(0,O.m9)(p));return new gs(T,R=>Us(E,R))})).apply(this,arguments)}function Sr(y,h,p){return mi.apply(this,arguments)}function mi(){return(mi=(0,m.Z)(function*(y,h,p){var E;const T=yield p.verify();try{let R;if(te("string"==typeof T,y,"argument-error"),te(p.type===Zs,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const q=R.session;if("phoneNumber"in R)return te("enroll"===q.type,y,"internal-error"),(yield Hn(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{te("signin"===q.type,y,"internal-error");const se=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return te(se,y,"missing-multi-factor-info"),(yield na(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:se,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield ng(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return q}}finally{p._reset()}})).apply(this,arguments)}function ms(){return(ms=(0,m.Z)(function*(y,h){yield mn((0,O.m9)(y),h)})).apply(this,arguments)}let Oi=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=Oe(p)}verifyPhoneNumber(p,E){return Sr(this.auth,p,(0,O.m9)(E))}static credential(p,E){return zo._fromVerification(p,E)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:E,temporaryProof:T}=p;return E&&T?zo._fromTokenResponse(E,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Zi(y,h){return h?ie(h):(te(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class La extends sn{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return $n(h,this._buildIdpRequest())}_linkToIdToken(h,p){return $n(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return $n(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function jl(y){return yo(y.auth,new La(y),y.bypassAuthState)}function $l(y){const{auth:h,user:p}=y;return te(p,h,"internal-error"),td(p,new La(y),y.bypassAuthState)}function kt(y){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,m.Z)(function*(y){const{auth:h,user:p}=y;return te(p,h,"internal-error"),mn(p,new La(y),y.bypassAuthState)})).apply(this,arguments)}class Yn{constructor(h,p,E,T,R=!1){this.auth=h,this.resolver=E,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,m.Z)(function*(E,T){h.pendingPromise={resolve:E,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(E,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,m.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:R,tenantId:q,error:se,type:Be}=h;if(se)return void p.reject(se);const Je={auth:p.auth,requestUri:E,sessionId:T,tenantId:q||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Be)(Je))}catch(_t){p.reject(_t)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return jl;case"linkViaPopup":case"linkViaRedirect":return kt;case"reauthViaPopup":case"reauthViaRedirect":return $l;default:De(this.auth,"internal-error")}}resolve(h){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gl=new un(2e3,1e4);function yd(){return(yd=(0,m.Z)(function*(y,h,p){const E=Oe(y);He(y,h,Fs);const T=Zi(E,p);return new Qi(E,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function Au(){return(Au=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y);He(E.auth,h,Fs);const T=Zi(E.auth,p);return new Qi(E.auth,"reauthViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}function Su(){return(Su=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y);He(E.auth,h,Fs);const T=Zi(E.auth,p);return new Qi(E.auth,"linkViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}let Qi=(()=>{class y extends Yn{constructor(p,E,T,R,q){super(p,E,R,q),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,m.Z)(function*(){const E=yield p.execute();return te(E,p.auth,"internal-error"),E})()}onExecution(){var p=this;return(0,m.Z)(function*(){ne(1===p.filter.length,"Popup operations only handle one event");const E=Xo();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],E),p.authWindow.associatedEvent=E,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var E,T;this.pollId=(null===(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Gl.get())};p()}}return y.currentPopupAction=null,y})();const Ji=new Map;class Qn extends Yn{constructor(h,p,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,m.Z)(function*(){let E=Ji.get(p.auth._key());if(!E){try{const R=(yield function yi(y,h){return ql.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;E=()=>Promise.resolve(R)}catch(T){E=()=>Promise.reject(T)}Ji.set(p.auth._key(),E)}return p.bypassAuthState||Ji.set(p.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,E=this;return(0,m.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(E,h);if("unknown"!==h.type){if(h.eventId){const T=yield E.auth._redirectUserForId(h.eventId);if(T)return E.user=T,p().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function ql(){return(ql=(0,m.Z)(function*(y,h){const p=C(h),E=D(y);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(p));return yield E._remove(p),T})).apply(this,arguments)}function Do(y,h){return oa.apply(this,arguments)}function oa(){return(oa=(0,m.Z)(function*(y,h){return D(y)._set(C(h),"true")})).apply(this,arguments)}function D(y){return ie(y._redirectPersistence)}function C(y){return ce("pendingRedirect",y.config.apiKey,y.name)}function K(){return(K=(0,m.Z)(function*(y,h,p){const E=Oe(y);He(y,h,Fs);const T=Zi(E,p);return yield Do(T,E),T._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function Me(){return(Me=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y);He(E.auth,h,Fs);const T=Zi(E.auth,p);yield Do(T,E.auth);const R=yield Co(E);return T._openRedirect(E.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Rt(){return(Rt=(0,m.Z)(function*(y,h,p){const E=(0,O.m9)(y);He(E.auth,h,Fs);const T=Zi(E.auth,p);yield Vs(!1,E,h.providerId),yield Do(T,E.auth);const R=yield Co(E);return T._openRedirect(E.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function qn(){return(qn=(0,m.Z)(function*(y,h){return yield Oe(y)._initializationPromise,An(y,h,!1)})).apply(this,arguments)}function An(y,h){return aa.apply(this,arguments)}function aa(){return(aa=(0,m.Z)(function*(y,h,p=!1){const E=Oe(y),T=Zi(E,h),q=yield new Qn(E,T,p).execute();return q&&!p&&(delete q.user._redirectEventId,yield E._persistUserIfCurrent(q.user),yield E._setRedirectUser(null,h)),q})).apply(this,arguments)}function Co(y){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,m.Z)(function*(y){const h=Xo(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Pi{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(p=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function zl(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vd(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var E;if(h.error&&!vd(h)){const T=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const E=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(To(h))}saveEventToCache(h){this.cachedEventUids.add(To(h)),this.lastProcessedEventTime=Date.now()}}function To(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function vd({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Wl(y){return Va.apply(this,arguments)}function Va(){return(Va=(0,m.Z)(function*(y,h={}){return Gt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const pg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ry=/^https?/;function ys(){return(ys=(0,m.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Wl(y);for(const p of h)try{if(Kl(p))return}catch(E){}De(y,"unauthorized-domain")})).apply(this,arguments)}function Kl(y){const h=It(),{protocol:p,hostname:E}=new URL(h);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===E?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&q.hostname===E}if(!Ry.test(p))return!1;if(pg.test(y))return E===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const Py=new un(3e4,6e4);function ky(){const y=pn().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Ed=null;function Fy(y){return Ed=Ed||function gg(y){return new Promise((h,p)=>{var E,T,R;function q(){ky(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{ky(),p(_e(y,"network-request-failed"))},timeout:Py.get()})}if(null===(T=null===(E=pn().gapi)||void 0===E?void 0:E.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=pn().gapi)||void 0===R?void 0:R.load)){const se=ra("iframefcb");return pn()[se]=()=>{gapi.load?q():p(_e(y,"network-request-failed"))},Fn(`https://apis.google.com/js/api.js?onload=${se}`).catch(Be=>p(Be))}q()}}).catch(h=>{throw Ed=null,h})}(y),Ed}const Xh=new un(5e3,15e3),So={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ua(y){const h=y.config;te(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?ln(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:y.name,v:ae.SDK_VERSION},T=wd.get(y.config.apiHost);T&&(E.eid=T);const R=y._getFrameworks();return R.length&&(E.fw=R.join(",")),`${p}?${(0,O.xO)(E).slice(1)}`}function ua(){return ua=(0,m.Z)(function*(y){const h=yield Fy(y),p=pn().gapi;return te(p,y,"internal-error"),h.open({where:document.body,url:Ua(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:So,dontclear:!0},E=>new Promise(function(){var T=(0,m.Z)(function*(R,q){yield E.restyle({setHideOnLeave:!1});const se=_e(y,"network-request-failed"),Be=pn().setTimeout(()=>{q(se)},Xh.get());function Je(){pn().clearTimeout(Be),R(E)}E.ping(Je).then(Je,()=>{q(se)})});return function(R,q){return T.apply(this,arguments)}}()))}),ua.apply(this,arguments)}const Vy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Dd{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function rf(y,h,p,E,T,R){te(y.config.authDomain,y,"auth-domain-config-required"),te(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:E,v:ae.SDK_VERSION,eventId:T};if(h instanceof Fs){h.setDefaultLanguage(y.languageCode),q.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(q.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Be,Je]of Object.entries(R||{}))q[Be]=Je}if(h instanceof Wr){const Be=h.getScopes().filter(Je=>""!==Je);Be.length>0&&(q.scopes=Be.join(","))}y.tenantId&&(q.tid=y.tenantId);const se=q;for(const Be of Object.keys(se))void 0===se[Be]&&delete se[Be];return`${function By({config:y}){return y.emulator?ln(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(se).slice(1)}`}const Js="webStorageSupport";class sf extends class mg{constructor(h){this.factorId=h}_process(h,p,E){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,E);case"signin":return this._finalizeSignIn(h,p.credential);default:return W("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new sf(h)}_finalizeEnroll(h,p,E){return function ud(y,h){return Gt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(y,h))}(h,{idToken:p,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Fa(y,h){return Gt(y,"POST","/v2/accounts/mfaSignIn:finalize",Jt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let jy=(()=>{class y{constructor(){}static assertion(p){return sf._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var $y="@firebase/auth",of="0.19.11";class yg{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,m.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(E=>{var T;h((null===(T=E)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Xs(){return window}function Ru(){return(Ru=(0,m.Z)(function*(y,h,p){var E;const{BuildInfo:T}=Xs();ne(h.sessionId,"AuthEvent did not contain a session ID");const R=yield Ba(h.sessionId),q={};return nr()?q.ibi=T.packageName:In()?q.apn=T.packageName:De(y,"operation-not-supported-in-this-environment"),T.displayName&&(q.appDisplayName=T.displayName),q.sessionId=R,rf(y,p,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,q)})).apply(this,arguments)}function ki(){return(ki=(0,m.Z)(function*(y){const{BuildInfo:h}=Xs(),p={};nr()?p.iosBundleId=h.packageName:In()?p.androidPackageName=h.packageName:De(y,"operation-not-supported-in-this-environment"),yield Wl(y,p)})).apply(this,arguments)}function Td(){return(Td=(0,m.Z)(function*(y,h,p){const{cordova:E}=Xs();let T=()=>{};try{yield new Promise((R,q)=>{let se=null;function Be(){var it;R();const Sn=null===(it=E.plugins.browsertab)||void 0===it?void 0:it.close;"function"==typeof Sn&&Sn(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Je(){se||(se=window.setTimeout(()=>{q(_e(y,"redirect-cancelled-by-user"))},2e3))}function _t(){"visible"===(null==document?void 0:document.visibilityState)&&Je()}h.addPassiveListener(Be),document.addEventListener("resume",Je,!1),In()&&document.addEventListener("visibilitychange",_t,!1),T=()=>{h.removePassiveListener(Be),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",_t,!1),se&&window.clearTimeout(se)}})}finally{T()}})).apply(this,arguments)}function Ba(y){return vg.apply(this,arguments)}function vg(){return(vg=(0,m.Z)(function*(y){const h=Ou(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ou(y){if(ne(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let E=0;E<y.length;E++)p[E]=y.charCodeAt(E);return p}!function Gy(y){(0,ae._registerComponent)(new re.wA("auth",(h,{options:p})=>{const E=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:R,authDomain:q}=E.options;return((se,Be)=>{te(R&&!R.includes(":"),"invalid-api-key",{appName:se.name}),te(!(null==q?void 0:q.includes(":")),"argument-error",{appName:se.name});const Je={apiKey:R,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Aa(y)},_t=new ci(se,Be,Je);return function oe(y,h){const p=(null==h?void 0:h.persistence)||[],E=(Array.isArray(p)?p:[p]).map(ie);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(_t,p),_t})(E,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,E)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new re.wA("auth-internal",h=>{const p=Oe(h.getProvider("auth").getImmediate());return new yg(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)($y,of,function Hy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)($y,of,"esm2017")}("Browser");class cf extends Pi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,m.Z)(function*(){yield h.initPromise})()}}function Ql(y){return ca.apply(this,arguments)}function ca(){return(ca=(0,m.Z)(function*(y){const h=yield Xl()._get(hf(y));return h&&(yield Xl()._remove(hf(y))),h})).apply(this,arguments)}function Jl(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const E=Math.floor(Math.random()*h.length);y.push(h.charAt(E))}return y.join("")}function Xl(){return ie(kn)}function hf(y){return ce("authEvent",y.config.apiKey,y.name)}function Sd(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function mf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function Md(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function wg(y=(0,O.z$)()){return!("file:"!==Md()&&"ionic:"!==Md()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mr(){try{const y=self.localStorage,h=Xo();if(y)return y.setItem(h,"1"),y.removeItem(h),!function da(y=(0,O.z$)()){return function Zy(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Yy(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return Mo()&&(0,O.hl)()}return!1}function Mo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function nc(){return(function Ky(){return"http:"===Md()||"https:"===Md()}()||(0,O.ru)()||wg())&&!function xd(){return(0,O.b$)()||(0,O.UG)()}()&&Mr()&&!Mo()}function yf(){return wg()&&"undefined"!=typeof document}function ja(){return(ja=(0,m.Z)(function*(){return!!yf()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Fi={LOCAL:"local",NONE:"none",SESSION:"session"},$a=te,vf="persistence";function Ha(y){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,m.Z)(function*(y){yield y._initializationPromise;const h=rc(),p=ce(vf,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function rc(){var y;try{return(null===(y=function _f(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const Qy=te;class vi{constructor(){this.browserResolver=ie(class la{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mr,this._completeRedirectFn=An}_openPopup(h,p,E,T){var R=this;return(0,m.Z)(function*(){var q;ne(null===(q=R.eventManagers[h._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const se=rf(h,p,E,It(),T);return function Cd(y,h,p,E=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),q=Math.max((window.screen.availWidth-E)/2,0).toString();let se="";const Be=Object.assign(Object.assign({},Vy),{width:E.toString(),height:T.toString(),top:R,left:q}),Je=(0,O.z$)().toLowerCase();p&&(se=Ir(Je)?"_blank":p),mt(Je)&&(h=h||"http://localhost",Be.scrollbars="yes");const _t=Object.entries(Be).reduce((Sn,[Xi,sc])=>`${Sn}${Xi}=${sc},`,"");if(function iu(y=(0,O.z$)()){var h;return nr(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Je)&&"_self"!==se)return function nf(y,h){const p=document.createElement("a");p.href=y,p.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(E)}(h||"",se),new Dd(null);const it=window.open(h||"",se,_t);te(it,y,"popup-blocked");try{it.focus()}catch(Sn){}return new Dd(it)}(h,se,Xo())})()}_openRedirect(h,p,E,T){var R=this;return(0,m.Z)(function*(){return yield R._originValidation(h),function Jh(y){pn().location.href=y}(rf(h,p,E,It(),T)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:R}=this.eventManagers[p];return T?Promise.resolve(T):(ne(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(h);return this.eventManagers[p]={promise:E},E.catch(()=>{delete this.eventManagers[p]}),E}initAndGetManager(h){var p=this;return(0,m.Z)(function*(){const E=yield function Ly(y){return ua.apply(this,arguments)}(h),T=new Pi(h);return E.register("authEvent",R=>(te(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=E,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Js,{type:Js},T=>{var R;const q=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[Js];void 0!==q&&p(!!q),De(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Oy(y){return ys.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return ss()||Zt()||nr()}}),this.cordovaResolver=ie(class gf{constructor(){this._redirectPersistence=mr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=An}_initialize(h){var p=this;return(0,m.Z)(function*(){const E=h._key();let T=p.eventManagers.get(E);return T||(T=new cf(h),p.eventManagers.set(E,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){De(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,E,T){var R=this;return(0,m.Z)(function*(){!function Ad(y){var h,p,E,T,R,q,se,Be,Je,_t;const it=Xs();te("function"==typeof(null===(h=null==it?void 0:it.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(void 0!==(null===(p=null==it?void 0:it.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(R=null===(T=null===(E=null==it?void 0:it.cordova)||void 0===E?void 0:E.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(Be=null===(se=null===(q=null==it?void 0:it.cordova)||void 0===q?void 0:q.plugins)||void 0===se?void 0:se.browsertab)||void 0===Be?void 0:Be.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(_t=null===(Je=null==it?void 0:it.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===_t?void 0:_t.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const q=yield R._initialize(h);yield q.initialized(),q.resetRedirect(),function Mu(){Ji.clear()}(),yield R._originValidation(h);const se=function df(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Jl(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(h,E,T);yield function e0(y,h){return Xl()._set(hf(y),h)}(h,se);const Be=yield function af(y,h,p){return Ru.apply(this,arguments)}(h,se,p),Je=yield function Yl(y){const{cordova:h}=Xs();return new Promise(p=>{h.plugins.browsertab.isAvailable(E=>{let T=null;E?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function ho(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(Be);return function _g(y,h,p){return Td.apply(this,arguments)}(h,q,Je)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function uf(y){return ki.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:E,handleOpenURL:T,BuildInfo:R}=Xs(),q=setTimeout((0,m.Z)(function*(){yield Ql(h),p.onEvent(mf())}),500),se=function(){var _t=(0,m.Z)(function*(it){clearTimeout(q);const Sn=yield Ql(h);let Xi=null;Sn&&(null==it?void 0:it.url)&&(Xi=function zy(y,h){var p,E;const T=function ec(y){const h=Sd(y),p=h.link?decodeURIComponent(h.link):void 0,E=Sd(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Sd(T).link||T||E||p||y}(h);if(T.includes("/__/auth/callback")){const R=Sd(T),q=R.firebaseError?function ff(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,se=null===(E=null===(p=null==q?void 0:q.code)||void 0===p?void 0:p.split("auth/"))||void 0===E?void 0:E[1],Be=se?_e(se):null;return Be?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Sn,it.url)),p.onEvent(Xi||mf())});return function(Sn){return _t.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,se);const Be=T,Je=`${R.packageName.toLowerCase()}://`;Xs().handleOpenURL=function(){var _t=(0,m.Z)(function*(it){if(it.toLowerCase().startsWith(Je)&&se({url:it}),"function"==typeof Be)try{Be(it)}catch(Sn){console.error(Sn)}});return function(it){return _t.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=mr,this._completeRedirectFn=An}_initialize(h){var p=this;return(0,m.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,E,T){var R=this;return(0,m.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,E,T)})()}_openRedirect(h,p,E,T){var R=this;return(0,m.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,E,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return yf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Qy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,m.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Ur(){return ja.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Dg(y){return y.unwrap()}function Ga(y){return Cg(y)}function Cg(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Oi.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let E;switch(p){case"google.com":E=Ma;break;case"facebook.com":E=go;break;case"github.com":E=Xc;break;case"twitter.com":E=cu;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:se,nonce:Be}=h;return R||q||T||se?se?p.startsWith("saml.")?Kr._create(p,se):us._fromParams({providerId:p,signInMethod:p,pendingToken:se,idToken:T,accessToken:R}):new Wo(p).credential({idToken:T,accessToken:R,rawNonce:Be}):null}return y instanceof O.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function xr(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function Xy(y,h){var p;const E=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new e_(y,function Du(y,h){var p;const E=(0,O.m9)(y),T=h;return te(h.customData.operationType,E,"argument-error"),te(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,E,"argument-error"),Pa._fromError(E,T)}(y,h));else if(E){const T=Cg(h),R=h;T&&(R.credential=T,R.tenantId=E.tenantId||void 0,R.email=E.email||void 0,R.phoneNumber=E.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:Ga(p),additionalUserInfo:Tr(p),user:xo.getOrCreate(T)}})}function wf(y,h){return bf.apply(this,arguments)}function bf(){return(bf=(0,m.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:E=>xr(y,p.confirm(E))}})).apply(this,arguments)}class e_{constructor(h,p){this.resolver=p,this.auth=function Jy(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return xr(Dg(this.auth),this.resolver.resolveSignIn(h))}}class xo{constructor(h){this._delegate=h,this.multiFactor=function ld(y){const h=(0,O.m9)(y);return Jo.has(h)||Jo.set(h,hs._fromUser(h)),Jo.get(h)}(h)}static getOrCreate(h){return xo.USER_MAP.has(h)||xo.USER_MAP.set(h,new xo(h)),xo.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,m.Z)(function*(){return xr(p.auth,Ai(p._delegate,h))})()}linkWithPhoneNumber(h,p){var E=this;return(0,m.Z)(function*(){return wf(E.auth,function Vl(y,h,p){return sa.apply(this,arguments)}(E._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,m.Z)(function*(){return xr(p.auth,function Yi(y,h,p){return Su.apply(this,arguments)}(p._delegate,h,vi))})()}linkWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield Ha(Oe(p.auth)),function Ze(y,h,p){return function wt(y,h,p){return Rt.apply(this,arguments)}(y,h,p)}(p._delegate,h,vi)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,m.Z)(function*(){return xr(p.auth,Us(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return wf(this.auth,function fg(y,h,p){return Ul.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return xr(this.auth,function Io(y,h,p){return Au.apply(this,arguments)}(this._delegate,h,vi))}reauthenticateWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield Ha(Oe(p.auth)),function ee(y,h,p){return function Se(y,h,p){return Me.apply(this,arguments)}(y,h,p)}(p._delegate,h,vi)})()}sendEmailVerification(h){return function Si(y,h){return Tl.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,m.Z)(function*(){return yield function xa(y,h){return El.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Ml(y,h){return xl((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function id(y,h){return xl((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Bl(y,h){return ms.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Qo(y,h){return Sl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function bu(y,h,p){return Iu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}xo.USER_MAP=new WeakMap;const ic=te;let If=(()=>{class y{constructor(p,E){if(this.app=p,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;ic(T,"invalid-api-key",{appName:p.name}),ic(T,"invalid-api-key",{appName:p.name});const R="undefined"!=typeof window?vi:void 0;this._delegate=E.initialize({options:{persistence:t_(T,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Re),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?xo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,E){!function fn(y,h,p){const E=Oe(y);te(E._canInitEmulator,E,"emulator-config-failed"),te(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),R=hr(h),{host:q,port:se}=function Ns(y){const h=hr(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const E=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const R=T[1];return{host:R,port:jn(E.substr(R.length+1))}}{const[R,q]=E.split(":");return{host:R,port:jn(q)}}}(h);E.config.emulator={url:`${R}//${q}${null===se?"":`:${se}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:q,port:se,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function qi(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,E)}applyActionCode(p){return function bl(y,h){return be.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Lt(this._delegate,p)}confirmPasswordReset(p,E){return function vu(y,h,p){return wl.apply(this,arguments)}(this._delegate,p,E)}createUserWithEmailAndPassword(p,E){var T=this;return(0,m.Z)(function*(){return xr(T._delegate,function Yo(y,h,p){return Qr.apply(this,arguments)}(T._delegate,p,E))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function wu(y,h){return Hs.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Cl(y,h){const p=po.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,m.Z)(function*(){ic(nc(),p._delegate,"operation-not-supported-in-this-environment");const E=yield function Dt(y,h){return qn.apply(this,arguments)}(p._delegate,vi);return E?xr(p._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Eg(y,h){Oe(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,E,T){const{next:R,error:q,complete:se}=Df(p,E,T);return this._delegate.onAuthStateChanged(R,q,se)}onIdTokenChanged(p,E,T){const{next:R,error:q,complete:se}=Df(p,E,T);return this._delegate.onIdTokenChanged(R,q,se)}sendSignInLinkToEmail(p,E){return function Dl(y,h,p){return rd.apply(this,arguments)}(this._delegate,p,E)}sendPasswordResetEmail(p,E){return function yu(y,h,p){return _u.apply(this,arguments)}(this._delegate,p,E||void 0)}setPersistence(p){var E=this;return(0,m.Z)(function*(){let T;switch(function bg(y,h){$a(Object.values(Fi).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?$a(h!==Fi.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?$a(h===Fi.NONE,y,"unsupported-persistence-type"):Mo()?$a(h===Fi.NONE||h===Fi.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):$a(h===Fi.NONE||Mr(),y,"unsupported-persistence-type")}(E._delegate,p),p){case Fi.SESSION:T=mr;break;case Fi.LOCAL:T=(yield ie(xi)._isAvailable())?xi:kn;break;case Fi.NONE:T=G;break;default:return De("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return xr(this._delegate,function hu(y){return ed.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return xr(this._delegate,On(this._delegate,p))}signInWithCustomToken(p){return xr(this._delegate,function Bs(y,h){return js.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,E){return xr(this._delegate,function Il(y,h,p){return On((0,O.m9)(y),vl.credential(h,p))}(this._delegate,p,E))}signInWithEmailLink(p,E){return xr(this._delegate,function Eu(y,h,p){return $s.apply(this,arguments)}(this._delegate,p,E))}signInWithPhoneNumber(p,E){return wf(this._delegate,function Tu(y,h,p){return En.apply(this,arguments)}(this._delegate,p,E))}signInWithPopup(p){var E=this;return(0,m.Z)(function*(){return ic(nc(),E._delegate,"operation-not-supported-in-this-environment"),xr(E._delegate,function Qs(y,h,p){return yd.apply(this,arguments)}(E._delegate,p,vi))})()}signInWithRedirect(p){var E=this;return(0,m.Z)(function*(){return ic(nc(),E._delegate,"operation-not-supported-in-this-environment"),yield Ha(E._delegate),function N(y,h,p){return function F(y,h,p){return K.apply(this,arguments)}(y,h,p)}(E._delegate,p,vi)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function _n(y,h){return Zo.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Fi,y})();function Df(y,h,p){let E=y;"function"!=typeof y&&({next:E,error:h,complete:p}=y);const T=E;return{next:q=>T(q&&xo.getOrCreate(q)),error:h,complete:p}}function t_(y,h){const p=function Ig(y,h){const p=rc();if(!p)return[];const E=ce(vf,y,h);switch(p.getItem(E)){case Fi.NONE:return[G];case Fi.LOCAL:return[xi,mr];case Fi.SESSION:return[mr];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(xi)&&p.push(xi),"undefined"!=typeof window)for(const E of[kn,mr])p.includes(E)||p.push(E);return p.includes(G)||p.push(G),p}class Cf{constructor(){this.providerId="phone",this._delegate=new Oi(Dg(Y.Z.auth()))}static credential(h,p){return Oi.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Cf.PHONE_SIGN_IN_METHOD=Oi.PHONE_SIGN_IN_METHOD,Cf.PROVIDER_ID=Oi.PROVIDER_ID;const n_=te;class r_{constructor(h,p,E=Y.Z.app()){var T;n_(null===(T=E.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new hg(h,p,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Tg(y){y.INTERNAL.registerComponent(new re.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new If(p,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:vl,FacebookAuthProvider:go,GithubAuthProvider:Xc,GoogleAuthProvider:Ma,OAuthProvider:Wo,SAMLAuthProvider:hi,PhoneAuthProvider:Cf,PhoneMultiFactorGenerator:jy,RecaptchaVerifier:r_,TwitterAuthProvider:cu,Auth:If,AuthCredential:sn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(Y.Z)},8306:(ot,Te,k)=>{k.d(Te,{y:()=>j});var m=k(2961),Y=k(727),O=k(8822),ae=k(4671);var re=k(2416),de=k(576),le=k(2806);let j=(()=>{class Ae{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const fe=new Ae;return fe.source=this,fe.operator=Le,fe}subscribe(Le,fe,we){const Xe=function qe(Ae){return Ae&&Ae instanceof m.Lv||function J(Ae){return Ae&&(0,de.m)(Ae.next)&&(0,de.m)(Ae.error)&&(0,de.m)(Ae.complete)}(Ae)&&(0,Y.Nn)(Ae)}(Le)?Le:new m.Hp(Le,fe,we);return(0,le.x)(()=>{const{operator:We,source:De}=this;Xe.add(We?We.call(Xe,De):De?this._subscribe(Xe):this._trySubscribe(Xe))}),Xe}_trySubscribe(Le){try{return this._subscribe(Le)}catch(fe){Le.error(fe)}}forEach(Le,fe){return new(fe=$(fe))((we,Xe)=>{const We=new m.Hp({next:De=>{try{Le(De)}catch(_e){Xe(_e),We.unsubscribe()}},error:Xe,complete:we});this.subscribe(We)})}_subscribe(Le){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Le)}[O.L](){return this}pipe(...Le){return function pe(Ae){return 0===Ae.length?ae.y:1===Ae.length?Ae[0]:function(Le){return Ae.reduce((fe,we)=>we(fe),Le)}}(Le)(this)}toPromise(Le){return new(Le=$(Le))((fe,we)=>{let Xe;this.subscribe(We=>Xe=We,We=>we(We),()=>fe(Xe))})}}return Ae.create=Re=>new Ae(Re),Ae})();function $(Ae){var Re;return null!==(Re=null!=Ae?Ae:re.v.Promise)&&void 0!==Re?Re:Promise}},7579:(ot,Te,k)=>{k.d(Te,{x:()=>re});var m=k(8306),Y=k(727);const ae=(0,k(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=k(8737),pe=k(2806);let re=(()=>{class le extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const J=new de(this,this);return J.operator=$,J}_throwIfClosed(){if(this.closed)throw new ae}next($){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next($)}})}error($){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:J}=this;for(;J.length;)J.shift().error($)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:J,isStopped:qe,observers:Ae}=this;return J||qe?Y.Lc:(this.currentObservers=null,Ae.push($),new Y.w0(()=>{this.currentObservers=null,(0,X.P)(Ae,$)}))}_checkFinalizedStatuses($){const{hasError:J,thrownError:qe,isStopped:Ae}=this;J?$.error(qe):Ae&&$.complete()}asObservable(){const $=new m.y;return $.source=this,$}}return le.create=(j,$)=>new de(j,$),le})();class de extends re{constructor(j,$){super(),this.destination=j,this.source=$}next(j){var $,J;null===(J=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===J||J.call($,j)}error(j){var $,J;null===(J=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===J||J.call($,j)}complete(){var j,$;null===($=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===$||$.call(j)}_subscribe(j){var $,J;return null!==(J=null===($=this.source)||void 0===$?void 0:$.subscribe(j))&&void 0!==J?J:Y.Lc}}},2961:(ot,Te,k)=>{k.d(Te,{Hp:()=>Le,Lv:()=>J});var m=k(576),Y=k(727),O=k(2416),ae=k(7849);function X(){}const pe=le("C",void 0,void 0);function le(De,_e,Ee){return{kind:De,value:_e,error:Ee}}var j=k(3410),$=k(2806);class J extends Y.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Y.Nn)(_e)&&_e.add(this)):this.destination=We}static create(_e,Ee,He){return new Le(_e,Ee,He)}next(_e){this.isStopped?Xe(function de(De){return le("N",De,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Xe(function re(De){return le("E",void 0,De)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Xe(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Ae(De,_e){return qe.call(De,_e)}class Re{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(_e)}catch(He){fe(He)}}error(_e){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(_e)}catch(He){fe(He)}else fe(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ee){fe(Ee)}}}class Le extends J{constructor(_e,Ee,He){let $e;if(super(),(0,m.m)(_e)||!_e)$e={next:null!=_e?_e:void 0,error:null!=Ee?Ee:void 0,complete:null!=He?He:void 0};else{let te;this&&O.v.useDeprecatedNextContext?(te=Object.create(_e),te.unsubscribe=()=>this.unsubscribe(),$e={next:_e.next&&Ae(_e.next,te),error:_e.error&&Ae(_e.error,te),complete:_e.complete&&Ae(_e.complete,te)}):$e=_e}this.destination=new Re($e)}}function fe(De){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(De):(0,ae.h)(De)}function Xe(De,_e){const{onStoppedNotification:Ee}=O.v;Ee&&j.z.setTimeout(()=>Ee(De,_e))}const We={closed:!0,next:X,error:function we(De){throw De},complete:X}},727:(ot,Te,k)=>{k.d(Te,{Lc:()=>pe,w0:()=>X,Nn:()=>re});var m=k(576);const O=(0,k(3888).d)(le=>function($){le(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((J,qe)=>`${qe+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ae=k(8737);class X{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ae of $)Ae.remove(this);else $.remove(this);const{initialTeardown:J}=this;if((0,m.m)(J))try{J()}catch(Ae){j=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Ae of qe)try{de(Ae)}catch(Re){j=null!=j?j:[],Re instanceof O?j=[...j,...Re.errors]:j.push(Re)}}if(j)throw new O(j)}}add(j){var $;if(j&&j!==this)if(this.closed)de(j);else{if(j instanceof X){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(j)}}_hasParent(j){const{_parentage:$}=this;return $===j||Array.isArray($)&&$.includes(j)}_addParent(j){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(j),$):$?[$,j]:j}_removeParent(j){const{_parentage:$}=this;$===j?this._parentage=null:Array.isArray($)&&(0,ae.P)($,j)}remove(j){const{_finalizers:$}=this;$&&(0,ae.P)($,j),j instanceof X&&j._removeParent(this)}}X.EMPTY=(()=>{const le=new X;return le.closed=!0,le})();const pe=X.EMPTY;function re(le){return le instanceof X||le&&"closed"in le&&(0,m.m)(le.remove)&&(0,m.m)(le.add)&&(0,m.m)(le.unsubscribe)}function de(le){(0,m.m)(le)?le():le.unsubscribe()}},2416:(ot,Te,k)=>{k.d(Te,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,Te,k)=>{k.d(Te,{E:()=>Y});const Y=new(k(8306).y)(X=>X.complete())},8996:(ot,Te,k)=>{k.d(Te,{D:()=>_e});var m=k(8421),Y=k(5363),O=k(9468),pe=k(8306),de=k(2202),le=k(576),j=k(9672);function J(Ee,He){if(!Ee)throw new Error("Iterable cannot be null");return new pe.y($e=>{(0,j.f)($e,He,()=>{const te=Ee[Symbol.asyncIterator]();(0,j.f)($e,He,()=>{te.next().then(W=>{W.done?$e.complete():$e.next(W.value)})},0,!0)})})}var qe=k(3670),Ae=k(8239),Re=k(1144),Le=k(6495),fe=k(2206),we=k(4532),Xe=k(3260);function _e(Ee,He){return He?function De(Ee,He){if(null!=Ee){if((0,qe.c)(Ee))return function ae(Ee,He){return(0,m.Xf)(Ee).pipe((0,O.R)(He),(0,Y.Q)(He))}(Ee,He);if((0,Re.z)(Ee))return function re(Ee,He){return new pe.y($e=>{let te=0;return He.schedule(function(){te===Ee.length?$e.complete():($e.next(Ee[te++]),$e.closed||this.schedule())})})}(Ee,He);if((0,Ae.t)(Ee))return function X(Ee,He){return(0,m.Xf)(Ee).pipe((0,O.R)(He),(0,Y.Q)(He))}(Ee,He);if((0,fe.D)(Ee))return J(Ee,He);if((0,Le.T)(Ee))return function $(Ee,He){return new pe.y($e=>{let te;return(0,j.f)($e,He,()=>{te=Ee[de.h](),(0,j.f)($e,He,()=>{let W,ne;try{({value:W,done:ne}=te.next())}catch(ge){return void $e.error(ge)}ne?$e.complete():$e.next(W)},0,!0)}),()=>(0,le.m)(null==te?void 0:te.return)&&te.return()})}(Ee,He);if((0,Xe.L)(Ee))return function We(Ee,He){return J((0,Xe.Q)(Ee),He)}(Ee,He)}throw(0,we.z)(Ee)}(Ee,He):(0,m.Xf)(Ee)}},8421:(ot,Te,k)=>{k.d(Te,{Xf:()=>qe});var m=k(655),Y=k(1144),O=k(8239),ae=k(8306),X=k(3670),pe=k(2206),re=k(4532),de=k(6495),le=k(3260),j=k(576),$=k(7849),J=k(8822);function qe(De){if(De instanceof ae.y)return De;if(null!=De){if((0,X.c)(De))return function Ae(De){return new ae.y(_e=>{const Ee=De[J.L]();if((0,j.m)(Ee.subscribe))return Ee.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,Y.z)(De))return function Re(De){return new ae.y(_e=>{for(let Ee=0;Ee<De.length&&!_e.closed;Ee++)_e.next(De[Ee]);_e.complete()})}(De);if((0,O.t)(De))return function Le(De){return new ae.y(_e=>{De.then(Ee=>{_e.closed||(_e.next(Ee),_e.complete())},Ee=>_e.error(Ee)).then(null,$.h)})}(De);if((0,pe.D)(De))return we(De);if((0,de.T)(De))return function fe(De){return new ae.y(_e=>{for(const Ee of De)if(_e.next(Ee),_e.closed)return;_e.complete()})}(De);if((0,le.L)(De))return function Xe(De){return we((0,le.Q)(De))}(De)}throw(0,re.z)(De)}function we(De){return new ae.y(_e=>{(function We(De,_e){var Ee,He,$e,te;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,m.KL)(De);!(He=yield Ee.next()).done;)if(_e.next(He.value),_e.closed)return}catch(W){$e={error:W}}finally{try{He&&!He.done&&(te=Ee.return)&&(yield te.call(Ee))}finally{if($e)throw $e.error}}_e.complete()})})(De,_e).catch(Ee=>_e.error(Ee))})}},6451:(ot,Te,k)=>{k.d(Te,{T:()=>pe});var m=k(8189),Y=k(8421),O=k(515),ae=k(7669),X=k(8996);function pe(...re){const de=(0,ae.yG)(re),le=(0,ae._6)(re,1/0),j=re;return j.length?1===j.length?(0,Y.Xf)(j[0]):(0,m.J)(le)((0,X.D)(j,de)):O.E}},5403:(ot,Te,k)=>{k.d(Te,{x:()=>Y});var m=k(2961);function Y(ae,X,pe,re,de){return new O(ae,X,pe,re,de)}class O extends m.Lv{constructor(X,pe,re,de,le,j){super(X),this.onFinalize=le,this.shouldUnsubscribe=j,this._next=pe?function($){try{pe($)}catch(J){X.error(J)}}:super._next,this._error=de?function($){try{de($)}catch(J){X.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch($){X.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(ot,Te,k)=>{k.d(Te,{U:()=>O});var m=k(4482),Y=k(5403);function O(ae,X){return(0,m.e)((pe,re)=>{let de=0;pe.subscribe((0,Y.x)(re,le=>{re.next(ae.call(X,le,de++))}))})}},8189:(ot,Te,k)=>{k.d(Te,{J:()=>O});var m=k(5577),Y=k(4671);function O(ae=1/0){return(0,m.z)(Y.y,ae)}},5577:(ot,Te,k)=>{k.d(Te,{z:()=>de});var m=k(4004),Y=k(8421),O=k(4482),ae=k(9672),X=k(5403),re=k(576);function de(le,j,$=1/0){return(0,re.m)(j)?de((J,qe)=>(0,m.U)((Ae,Re)=>j(J,Ae,qe,Re))((0,Y.Xf)(le(J,qe))),$):("number"==typeof j&&($=j),(0,O.e)((J,qe)=>function pe(le,j,$,J,qe,Ae,Re,Le){const fe=[];let we=0,Xe=0,We=!1;const De=()=>{We&&!fe.length&&!we&&j.complete()},_e=He=>we<J?Ee(He):fe.push(He),Ee=He=>{Ae&&j.next(He),we++;let $e=!1;(0,Y.Xf)($(He,Xe++)).subscribe((0,X.x)(j,te=>{null==qe||qe(te),Ae?_e(te):j.next(te)},()=>{$e=!0},void 0,()=>{if($e)try{for(we--;fe.length&&we<J;){const te=fe.shift();Re?(0,ae.f)(j,Re,()=>Ee(te)):Ee(te)}De()}catch(te){j.error(te)}}))};return le.subscribe((0,X.x)(j,_e,()=>{We=!0,De()})),()=>{null==Le||Le()}}(J,qe,le,$)))}},5363:(ot,Te,k)=>{k.d(Te,{Q:()=>ae});var m=k(9672),Y=k(4482),O=k(5403);function ae(X,pe=0){return(0,Y.e)((re,de)=>{re.subscribe((0,O.x)(de,le=>(0,m.f)(de,X,()=>de.next(le),pe),()=>(0,m.f)(de,X,()=>de.complete(),pe),le=>(0,m.f)(de,X,()=>de.error(le),pe)))})}},3099:(ot,Te,k)=>{k.d(Te,{B:()=>pe});var m=k(8996),Y=k(5698),O=k(7579),ae=k(2961),X=k(4482);function pe(de={}){const{connector:le=(()=>new O.x),resetOnError:j=!0,resetOnComplete:$=!0,resetOnRefCountZero:J=!0}=de;return qe=>{let Ae=null,Re=null,Le=null,fe=0,we=!1,Xe=!1;const We=()=>{null==Re||Re.unsubscribe(),Re=null},De=()=>{We(),Ae=Le=null,we=Xe=!1},_e=()=>{const Ee=Ae;De(),null==Ee||Ee.unsubscribe()};return(0,X.e)((Ee,He)=>{fe++,!Xe&&!we&&We();const $e=Le=null!=Le?Le:le();He.add(()=>{fe--,0===fe&&!Xe&&!we&&(Re=re(_e,J))}),$e.subscribe(He),Ae||(Ae=new ae.Hp({next:te=>$e.next(te),error:te=>{Xe=!0,We(),Re=re(De,j,te),$e.error(te)},complete:()=>{we=!0,We(),Re=re(De,$),$e.complete()}}),(0,m.D)(Ee).subscribe(Ae))})(qe)}}function re(de,le,...j){return!0===le?(de(),null):!1===le?null:le(...j).pipe((0,Y.q)(1)).subscribe(()=>de())}},9468:(ot,Te,k)=>{k.d(Te,{R:()=>Y});var m=k(4482);function Y(O,ae=0){return(0,m.e)((X,pe)=>{pe.add(O.schedule(()=>X.subscribe(pe),ae))})}},5698:(ot,Te,k)=>{k.d(Te,{q:()=>ae});var m=k(515),Y=k(4482),O=k(5403);function ae(X){return X<=0?()=>m.E:(0,Y.e)((pe,re)=>{let de=0;pe.subscribe((0,O.x)(re,le=>{++de<=X&&(re.next(le),X<=de&&re.complete())}))})}},8505:(ot,Te,k)=>{k.d(Te,{b:()=>X});var m=k(576),Y=k(4482),O=k(5403),ae=k(4671);function X(pe,re,de){const le=(0,m.m)(pe)||re||de?{next:pe,error:re,complete:de}:pe;return le?(0,Y.e)((j,$)=>{var J;null===(J=le.subscribe)||void 0===J||J.call(le);let qe=!0;j.subscribe((0,O.x)($,Ae=>{var Re;null===(Re=le.next)||void 0===Re||Re.call(le,Ae),$.next(Ae)},()=>{var Ae;qe=!1,null===(Ae=le.complete)||void 0===Ae||Ae.call(le),$.complete()},Ae=>{var Re;qe=!1,null===(Re=le.error)||void 0===Re||Re.call(le,Ae),$.error(Ae)},()=>{var Ae,Re;qe&&(null===(Ae=le.unsubscribe)||void 0===Ae||Ae.call(le)),null===(Re=le.finalize)||void 0===Re||Re.call(le)}))}):ae.y}},4408:(ot,Te,k)=>{k.d(Te,{o:()=>X});var m=k(727);class Y extends m.w0{constructor(re,de){super()}schedule(re,de=0){return this}}const O={setInterval(pe,re,...de){const{delegate:le}=O;return(null==le?void 0:le.setInterval)?le.setInterval(pe,re,...de):setInterval(pe,re,...de)},clearInterval(pe){const{delegate:re}=O;return((null==re?void 0:re.clearInterval)||clearInterval)(pe)},delegate:void 0};var ae=k(8737);class X extends Y{constructor(re,de){super(re,de),this.scheduler=re,this.work=de,this.pending=!1}schedule(re,de=0){if(this.closed)return this;this.state=re;const le=this.id,j=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId(j,le,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(j,this.id,de),this}requestAsyncId(re,de,le=0){return O.setInterval(re.flush.bind(re,this),le)}recycleAsyncId(re,de,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return de;O.clearInterval(de)}execute(re,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(re,de);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,de){let j,le=!1;try{this.work(re)}catch($){le=!0,j=$||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:re,scheduler:de}=this,{actions:le}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(le,this),null!=re&&(this.id=this.recycleAsyncId(de,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,Te,k)=>{k.d(Te,{v:()=>O});var m=k(6063);class Y{constructor(X,pe=Y.now){this.schedulerActionCtor=X,this.now=pe}schedule(X,pe=0,re){return new this.schedulerActionCtor(this,X).schedule(re,pe)}}Y.now=m.l.now;class O extends Y{constructor(X,pe=Y.now){super(X,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:pe}=this;if(this._active)return void pe.push(X);let re;this._active=!0;do{if(re=X.execute(X.state,X.delay))break}while(X=pe.shift());if(this._active=!1,re){for(;X=pe.shift();)X.unsubscribe();throw re}}}},4986:(ot,Te,k)=>{k.d(Te,{z:()=>O});var m=k(4408);const O=new(k(7565).v)(m.o)},6063:(ot,Te,k)=>{k.d(Te,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(ot,Te,k)=>{k.d(Te,{z:()=>m});const m={setTimeout(Y,O,...ae){const{delegate:X}=m;return(null==X?void 0:X.setTimeout)?X.setTimeout(Y,O,...ae):setTimeout(Y,O,...ae)},clearTimeout(Y){const{delegate:O}=m;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(ot,Te,k)=>{k.d(Te,{h:()=>Y});const Y=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,Te,k)=>{k.d(Te,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,Te,k)=>{k.d(Te,{_6:()=>pe,jO:()=>ae,yG:()=>X});var m=k(576);function O(re){return re[re.length-1]}function ae(re){return(0,m.m)(O(re))?re.pop():void 0}function X(re){return function Y(re){return re&&(0,m.m)(re.schedule)}(O(re))?re.pop():void 0}function pe(re,de){return"number"==typeof O(re)?re.pop():de}},8737:(ot,Te,k)=>{function m(Y,O){if(Y){const ae=Y.indexOf(O);0<=ae&&Y.splice(ae,1)}}k.d(Te,{P:()=>m})},3888:(ot,Te,k)=>{function m(Y){const ae=Y(X=>{Error.call(X),X.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}k.d(Te,{d:()=>m})},2806:(ot,Te,k)=>{k.d(Te,{x:()=>O,O:()=>ae});var m=k(2416);let Y=null;function O(X){if(m.v.useDeprecatedSynchronousErrorHandling){const pe=!Y;if(pe&&(Y={errorThrown:!1,error:null}),X(),pe){const{errorThrown:re,error:de}=Y;if(Y=null,re)throw de}}else X()}function ae(X){m.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=X)}},9672:(ot,Te,k)=>{function m(Y,O,ae,X=0,pe=!1){const re=O.schedule(function(){ae(),pe?Y.add(this.schedule(null,X)):this.unsubscribe()},X);if(Y.add(re),!pe)return re}k.d(Te,{f:()=>m})},4671:(ot,Te,k)=>{function m(Y){return Y}k.d(Te,{y:()=>m})},1144:(ot,Te,k)=>{k.d(Te,{z:()=>m});const m=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(ot,Te,k)=>{k.d(Te,{D:()=>Y});var m=k(576);function Y(O){return Symbol.asyncIterator&&(0,m.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(ot,Te,k)=>{function m(Y){return"function"==typeof Y}k.d(Te,{m:()=>m})},3670:(ot,Te,k)=>{k.d(Te,{c:()=>O});var m=k(8822),Y=k(576);function O(ae){return(0,Y.m)(ae[m.L])}},6495:(ot,Te,k)=>{k.d(Te,{T:()=>O});var m=k(2202),Y=k(576);function O(ae){return(0,Y.m)(null==ae?void 0:ae[m.h])}},8239:(ot,Te,k)=>{k.d(Te,{t:()=>Y});var m=k(576);function Y(O){return(0,m.m)(null==O?void 0:O.then)}},3260:(ot,Te,k)=>{k.d(Te,{Q:()=>O,L:()=>ae});var m=k(655),Y=k(576);function O(X){return(0,m.FC)(this,arguments,function*(){const re=X.getReader();try{for(;;){const{value:de,done:le}=yield(0,m.qq)(re.read());if(le)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(de)}}finally{re.releaseLock()}})}function ae(X){return(0,Y.m)(null==X?void 0:X.getReader)}},4482:(ot,Te,k)=>{k.d(Te,{A:()=>Y,e:()=>O});var m=k(576);function Y(ae){return(0,m.m)(null==ae?void 0:ae.lift)}function O(ae){return X=>{if(Y(X))return X.lift(function(pe){try{return ae(pe,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ot,Te,k)=>{k.d(Te,{h:()=>O});var m=k(2416),Y=k(3410);function O(ae){Y.z.setTimeout(()=>{const{onUnhandledError:X}=m.v;if(!X)throw ae;X(ae)})}},4532:(ot,Te,k)=>{function m(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Te,{z:()=>m})},655:(ot,Te,k)=>{function ae(W,ne){var ge={};for(var ie in W)Object.prototype.hasOwnProperty.call(W,ie)&&ne.indexOf(ie)<0&&(ge[ie]=W[ie]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(ie=Object.getOwnPropertySymbols(W);Ne<ie.length;Ne++)ne.indexOf(ie[Ne])<0&&Object.prototype.propertyIsEnumerable.call(W,ie[Ne])&&(ge[ie[Ne]]=W[ie[Ne]])}return ge}function de(W,ne,ge,ie){return new(ge||(ge=Promise))(function(oe,It){function Qt(gt){try{at(ie.next(gt))}catch(un){It(un)}}function Nn(gt){try{at(ie.throw(gt))}catch(un){It(un)}}function at(gt){gt.done?oe(gt.value):function Ne(oe){return oe instanceof ge?oe:new ge(function(It){It(oe)})}(gt.value).then(Qt,Nn)}at((ie=ie.apply(W,ne||[])).next())})}function fe(W){return this instanceof fe?(this.v=W,this):new fe(W)}function we(W,ne,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,ie=ge.apply(W,ne||[]),oe=[];return Ne={},It("next"),It("throw"),It("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function It(ln){ie[ln]&&(Ne[ln]=function(Di){return new Promise(function(rn,ns){oe.push([ln,Di,rn,ns])>1||Qt(ln,Di)})})}function Qt(ln,Di){try{!function Nn(ln){ln.value instanceof fe?Promise.resolve(ln.value.v).then(at,gt):un(oe[0][2],ln)}(ie[ln](Di))}catch(rn){un(oe[0][3],rn)}}function at(ln){Qt("next",ln)}function gt(ln){Qt("throw",ln)}function un(ln,Di){ln(Di),oe.shift(),oe.length&&Qt(oe[0][0],oe[0][1])}}function We(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,ne=W[Symbol.asyncIterator];return ne?ne.call(W):(W=function J(W){var ne="function"==typeof Symbol&&Symbol.iterator,ge=ne&&W[ne],ie=0;if(ge)return ge.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&ie>=W.length&&(W=void 0),{value:W&&W[ie++],done:!W}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),ge={},ie("next"),ie("throw"),ie("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function ie(oe){ge[oe]=W[oe]&&function(It){return new Promise(function(Qt,Nn){!function Ne(oe,It,Qt,Nn){Promise.resolve(Nn).then(function(at){oe({value:at,done:Qt})},It)}(Qt,Nn,(It=W[oe](It)).done,It.value)})}}}k.d(Te,{_T:()=>ae,mG:()=>de,qq:()=>fe,FC:()=>we,KL:()=>We})},5e3:(ot,Te,k)=>{k.d(Te,{deG:()=>lg,tb:()=>dE,AFp:()=>xb,ip1:()=>Mb,CZH:()=>uE,hGG:()=>tT,z2F:()=>EE,sBO:()=>Vb,Sil:()=>Ob,_Vd:()=>so,EJc:()=>BC,SBq:()=>gh,qLn:()=>xr,vpe:()=>oo,tBr:()=>Vr,XFs:()=>ut,OlP:()=>Tn,zs3:()=>no,ZZ4:()=>Fp,aQg:()=>gy,soG:()=>bs,YKP:()=>_p,h0i:()=>eu,PXZ:()=>Nh,R0b:()=>Is,FiY:()=>_i,Lbi:()=>Rb,g9A:()=>cE,Qsj:()=>jm,FYo:()=>mh,JOm:()=>se,tp0:()=>To,Rgc:()=>wh,dDg:()=>Mh,q4F:()=>eb,GfV:()=>Xw,s_b:()=>Ip,ifc:()=>qt,eFA:()=>_E,G48:()=>cy,Gpc:()=>$,X6Q:()=>Op,_c5:()=>zb,VLi:()=>mE,c2e:()=>he,zSh:()=>jf,wAp:()=>ft,vHH:()=>Re,cg1:()=>xm,kL8:()=>Nm,dqk:()=>$t,sIi:()=>zd,CqO:()=>fv,QGY:()=>pm,F4k:()=>Qf,RDi:()=>ls,AaK:()=>de,qOj:()=>dc,TTD:()=>go,_Bn:()=>mp,xp6:()=>v_,uIk:()=>im,ekj:()=>rh,Suo:()=>gb,Xpm:()=>Ft,lG2:()=>Zt,Yz7:()=>rn,cJS:()=>Jt,oAB:()=>Q,Yjl:()=>Ir,Y36:()=>yc,_UZ:()=>Jd,qZA:()=>Yf,TgZ:()=>Zf,n5z:()=>gd,LFG:()=>Ze,$8M:()=>ra,$Z:()=>cv,NdJ:()=>Ec,CRH:()=>Cp,ALo:()=>Oc,lcZ:()=>Zv,Q6J:()=>dv,iGM:()=>pb,LSH:()=>Pu,YNc:()=>ew,_uU:()=>Tv,Oqu:()=>Av});var m=k(7579),Y=k(727),O=k(8306),ae=k(6451),X=k(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function re(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function le(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=pe({__forward_ref__:pe});function $(i){return i.__forward_ref__=$,i.toString=function(){return de(this())},i}function J(i){return qe(i)?i():i}function qe(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===$}class Re extends Error{constructor(s,a){super(function Le(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function we(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}function _e(i,s){const a=s?` in ${s}`:"";throw new Re(-201,`No provider for ${we(i)} found${a}`)}function at(i,s){null==i&&function gt(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function rn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Jt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Gt(i){return lr(i,Hi)||lr(i,rs)}function lr(i,s){return i.hasOwnProperty(s)?i[s]:null}function kr(i){return i&&(i.hasOwnProperty(Fr)||i.hasOwnProperty(is))?i[Fr]:null}const Hi=pe({\u0275prov:pe}),Fr=pe({\u0275inj:pe}),rs=pe({ngInjectableDef:pe}),is=pe({ngInjectorDef:pe});var ut=(()=>((ut=ut||{})[ut.Default=0]="Default",ut[ut.Host=1]="Host",ut[ut.Self=2]="Self",ut[ut.SkipSelf=4]="SkipSelf",ut[ut.Optional=8]="Optional",ut))();let qr;function Kn(i){const s=qr;return qr=i,s}function li(i,s,a){const l=Gt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ut.Optional?null:void 0!==s?s:void _e(de(i),"Injector")}function yn(i){return{toString:i}.toString()}var tr=(()=>((tr=tr||{})[tr.OnPush=0]="OnPush",tr[tr.Default=1]="Default",tr))(),qt=(()=>{return(i=qt||(qt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",qt;var i})();const rt="undefined"!=typeof globalThis&&globalThis,vt="undefined"!=typeof window&&window,cr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$t=rt||"undefined"!=typeof global&&global||vt||cr,dr={},ct=[],br=pe({\u0275cmp:pe}),Bt=pe({\u0275dir:pe}),Ke=pe({\u0275pipe:pe}),Ce=pe({\u0275mod:pe}),Qe=pe({\u0275fac:pe}),dt=pe({__NG_ELEMENT_ID__:pe});let jt=0;function Ft(i){return yn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===tr.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||ct,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||qt.Emulated,id:"c",styles:i.styles||ct,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,f=i.features,_=i.pipes;return l.id+=jt++,l.inputs=mt(i.inputs,a),l.outputs=mt(i.outputs),f&&f.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(L):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(G):null,l})}function L(i){return zt(i)||function In(i){return i[Bt]||null}(i)}function G(i){return function Nt(i){return i[Ke]||null}(i)}const ce={};function Q(i){return yn(()=>{const s={type:i.type,bootstrap:i.bootstrap||ct,declarations:i.declarations||ct,imports:i.imports||ct,exports:i.exports||ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(ce[i.id]=i.type),s})}function mt(i,s){if(null==i)return dr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,s&&(s[d]=f)}return a}const Zt=Ft;function Ir(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function zt(i){return i[br]||null}function hn(i,s){const a=i[Ce]||null;if(!a&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function Ti(i){return Array.isArray(i)&&"object"==typeof i[1]}function di(i){return Array.isArray(i)&&!0===i[1]}function Kc(i){return 0!=(8&i.flags)}function Ps(i){return 2==(2&i.flags)}function au(i){return 1==(1&i.flags)}function zr(i){return null!==i.template}function Wh(i){return 0!=(512&i[2])}function Wr(i,s){return i.hasOwnProperty(Qe)?i[Qe]:null}class Wo{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function go(){return Ma}function Ma(i){return i.type.prototype.ngOnChanges&&(i.setInput=og),Xc}function Xc(){const i=Ls(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===dr)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function og(i,s,a,l){const d=Ls(i)||function hi(i,s){return i[Kr]=s}(i,{previous:dr,current:null}),f=d.current||(d.current={}),_=d.previous,w=this.declaredInputs[a],b=_[w];f[w]=new Wo(b&&b.currentValue,s,_===dr),i[l]=s}go.ngInherit=!0;const Kr="__ngSimpleChanges__";function Ls(i){return i[Kr]||null}let pu;function ls(i){pu=i}function mn(i){return!!i.listen}const Ko={createRenderer:(i,s)=>function xa(){return void 0!==pu?pu:"undefined"!=typeof document?document:void 0}()};function an(i){for(;Array.isArray(i);)i=i[0];return i}function yo(i,s){return an(s[i])}function Dr(i,s){return an(s[i.index])}function Na(i,s){return i.data[s]}function Cr(i,s){const a=s[i];return Ti(a)?a:a[0]}function Us(i){return 4==(4&i[2])}function cs(i){return 128==(128&i[2])}function Yr(i,s){return null==s?null:i[s]}function Bs(i){i[18]=0}function js(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const ht={lFrame:vo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function vu(){return ht.bindingsEnabled}function be(){return ht.lFrame.lView}function Lt(){return ht.lFrame.tView}function _n(){let i=Zo();for(;null!==i&&64===i.type;)i=i.parent;return i}function Zo(){return ht.lFrame.currentTNode}function Qr(i,s){const a=ht.lFrame;a.currentTNode=i,a.isParent=s}function Il(){return ht.lFrame.isParent}function Eu(){return ht.isInCheckNoChangesMode}function $s(i){ht.isInCheckNoChangesMode=i}function Hs(){return ht.lFrame.bindingIndex++}function Iu(i,s){const a=ht.lFrame;a.bindingIndex=a.bindingRootIndex=i,Oa(s)}function Oa(i){ht.lFrame.currentDirectiveIndex=i}function Sl(){return ht.lFrame.currentQueryIndex}function Ml(i){ht.lFrame.currentQueryIndex=i}function id(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function xl(i,s,a){if(a&ut.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&ut.Host||(d=id(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;s=d,i=f}const l=ht.lFrame=sd();return l.currentTNode=s,l.lView=i,!0}function _o(i){const s=sd(),a=i[1];ht.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function sd(){const i=ht.lFrame,s=null===i?null:i.child;return null===s?vo(i):s}function vo(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function od(){const i=ht.lFrame;return ht.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ad=od;function Eo(){const i=od();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Tr(){return ht.lFrame.selectedIndex}function qs(i){ht.lFrame.selectedIndex=i}function Dn(){const i=ht.lFrame;return Na(i.tView,i.selectedIndex)}function ds(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:M}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Pa(i,s,a){ud(i,s,3,a)}function Du(i,s,a,l){(3&i[2])===a&&ud(i,s,a,l)}function Hn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function ud(i,s,a,l){const f=null!=l?l:-1,_=s.length-1;let w=0;for(let b=void 0!==l?65535&i[18]:0;b<_;b++)if("number"==typeof s[b+1]){if(w=s[b],null!=l&&w>=l)break}else s[b]<0&&(i[18]+=65536),(w<f||-1==f)&&(ag(i,a,s,b),i[18]=(4294901760&i[18])+b+2),b++}function ag(i,s,a,l){const d=a[l]<0,f=a[l+1],w=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class Jo{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function yt(i,s,a){const l=mn(i);let d=0;for(;d<a.length;){const f=a[d];if("number"==typeof f){if(0!==f)break;d++;const _=a[d++],w=a[d++],b=a[d++];l?i.setAttribute(s,w,b,_):s.setAttributeNS(_,w,b)}else{const _=f,w=a[++d];Jr(_)?l&&i.setProperty(s,_,w):l?i.setAttribute(s,_,w):s.setAttribute(_,w),d++}}return d}function mr(i){return 3===i||4===i||6===i}function Jr(i){return 64===i.charCodeAt(0)}function Xr(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||Xo(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function Xo(i,s,a,l,d){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}function dd(i){return-1!==i}function pn(i){return 32767&i}function Mi(i,s){let a=function Jh(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Cu=!0;function pi(i){const s=Cu;return Cu=i,s}let fd=0;function Gn(i,s){const a=ea(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,fs(l.data,i),fs(s,null),fs(l.blueprint,null));const d=gi(i,s),f=i.injectorIndex;if(dd(d)){const _=pn(d),w=Mi(d,s),b=w[1].data;for(let A=0;A<8;A++)s[f+A]=w[_+A]|b[_+A]}return s[f+8]=d,f}function fs(i,s){i.push(0,0,0,0,0,0,0,0,s)}function ea(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function gi(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){const f=d[1],_=f.type;if(l=2===_?f.declTNode:1===_?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function zs(i,s,a){!function bo(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(dt)&&(l=a[dt]),null==l&&(l=a[dt]=fd++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function zi(i,s,a){if(a&ut.Optional)return i;_e(s,"NodeInjector")}function Fl(i,s,a,l){if(a&ut.Optional&&void 0===l&&(l=null),0==(a&(ut.Self|ut.Host))){const d=i[9],f=Kn(void 0);try{return d?d.get(s,l,a&ut.Optional):li(s,l,a&ut.Optional)}finally{Kn(f)}}return zi(l,s,a)}function Ws(i,s,a,l=ut.Default,d){if(null!==i){const f=function na(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(dt)?i[dt]:void 0;return"number"==typeof s?s>=0?255&s:Ll:s}(a);if("function"==typeof f){if(!xl(s,i,l))return l&ut.Host?zi(d,a,l):Fl(s,a,l,d);try{const _=f(l);if(null!=_||l&ut.Optional)return _;_e(a)}finally{ad()}}else if("number"==typeof f){let _=null,w=ea(i,s),b=-1,A=l&ut.Host?s[16][6]:null;for((-1===w||l&ut.SkipSelf)&&(b=-1===w?gi(i,s):s[w+8],-1!==b&&Lr(l,!1)?(_=s[1],w=pn(b),s=Mi(b,s)):w=-1);-1!==w;){const M=s[1];if(Fa(f,w,M.data)){const P=pd(w,s,a,_,l,A);if(P!==Wi)return P}b=s[w+8],-1!==b&&Lr(l,s[1].data[w+8]===A)&&Fa(f,w,s)?(_=M,w=pn(b),s=Mi(b,s)):w=-1}}}return Fl(s,a,l,d)}const Wi={};function Ll(){return new Ni(_n(),be())}function pd(i,s,a,l,d,f){const _=s[1],w=_.data[i+8],M=ta(w,_,a,null==l?Ps(w)&&Cu:l!=_&&0!=(3&w.type),d&ut.Host&&f===w);return null!==M?xi(s,_,M,w):Wi}function ta(i,s,a,l,d){const f=i.providerIndexes,_=s.data,w=1048575&f,b=i.directiveStart,M=f>>20,U=d?w+M:i.directiveEnd;for(let Z=l?w:w+M;Z<U;Z++){const me=_[Z];if(Z<b&&a===me||Z>=b&&me.type===a)return Z}if(d){const Z=_[b];if(Z&&zr(Z)&&Z.type===a)return b}return null}function xi(i,s,a,l){let d=i[a];const f=s.data;if(function ld(i){return i instanceof Jo}(d)){const _=d;_.resolving&&function Xe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Re(-200,`Circular dependency in DI detected for ${i}${a}`)}(we(f[a]));const w=pi(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?Kn(_.injectImpl):null;xl(i,l,ut.Default);try{d=i[a]=_.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function Ol(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(l){const _=Ma(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==b&&Kn(b),pi(w),_.resolving=!1,ad()}}return d}function Fa(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Lr(i,s){return!(i&ut.Self||i&ut.Host&&s)}class Ni{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Ws(this._tNode,this._lView,s,l,a)}}function gd(i){return yn(()=>{const s=i.prototype.constructor,a=s[Qe]||Fn(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[Qe]||Fn(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Fn(i){return qe(i)?()=>{const s=Fn(J(i));return s&&s()}:Wr(i)}function ra(i){return function ka(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(mr(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(_n(),i)}const ia="__parameters__";function Cn(i,s,a){return yn(()=>{const l=function Ki(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...f){if(this instanceof d)return l.apply(this,f),this;const _=new d(...f);return w.annotation=_,w;function w(b,A,M){const P=b.hasOwnProperty(ia)?b[ia]:Object.defineProperty(b,ia,{value:[]})[ia];for(;P.length<=M;)P.push(null);return(P[M]=P[M]||[]).push(_),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Tn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=rn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const lg=new Tn("AnalyzeForEntryComponents");function Sr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Sr(l,s)):s!==i&&s.push(l)}return s}function mi(i,s){i.forEach(a=>Array.isArray(a)?mi(a,s):s(a))}function Bl(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function ms(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Yn(i,s,a){let l=Qs(i,s);return l>=0?i[1|l]=a:(l=~l,function jl(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Gl(i,s){const a=Qs(i,s);if(a>=0)return i[1|a]}function Qs(i,s){return function Io(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const f=l+(d-l>>1),_=i[f<<a];if(s===_)return f<<a;_>s?d=f:l=f+1}return~(d<<a)}(i,s,1)}const Do={},oa="__NG_DI_FLAG__",Mu="ngTempTokenPath",C=/\n/gm,F="__source",K=pe({provide:String,useValue:pe});let ee;function Se(i){const s=ee;return ee=i,s}function Me(i,s=ut.Default){if(void 0===ee)throw new Re(203,"");return null===ee?li(i,void 0,s):ee.get(i,s&ut.Optional?null:void 0,s)}function Ze(i,s=ut.Default){return(function er(){return qr}()||Me)(J(i),s)}const Rt=Ze;function Dt(i){const s=[];for(let a=0;a<i.length;a++){const l=J(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Re(900,"");let d,f=ut.Default;for(let _=0;_<l.length;_++){const w=l[_],b=An(w);"number"==typeof b?-1===b?d=w.token:f|=b:d=w}s.push(Ze(d,f))}else s.push(Ze(l))}return s}function qn(i,s){return i[oa]=s,i.prototype[oa]=s,i}function An(i){return i[oa]}const Vr=qn(Cn("Inject",i=>({token:i})),-1),_i=qn(Cn("Optional"),8),To=qn(Cn("SkipSelf"),4);class Cd{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Js(i){return i instanceof Cd?i.changingThisBreaksApplicationSecurity:i}const Xs=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,af=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var tn=(()=>((tn=tn||{})[tn.NONE=0]="NONE",tn[tn.HTML=1]="HTML",tn[tn.STYLE=2]="STYLE",tn[tn.SCRIPT=3]="SCRIPT",tn[tn.URL=4]="URL",tn[tn.RESOURCE_URL=5]="RESOURCE_URL",tn))();function Pu(i){const s=function da(){const i=be();return i&&i[12]}();return s?s.sanitize(tn.URL,i)||"":function la(i,s){const a=function Nu(i){return i instanceof Cd&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Js(i):function Ru(i){return(i=String(i)).match(Xs)||i.match(af)?i:"unsafe:"+i}(fe(i))}const yf="__ngContext__";function Ur(i,s){i[yf]=s}function _f(i){const s=function ja(i){return i[yf]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Ga(i){return i.ngOriginalError}function Cg(i,...s){i.error(...s)}class xr{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Xy(i){return i&&i.ngErrorLogger||Cg}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Ga(s);for(;a&&Ga(a);)a=Ga(a);return a||null}}const r_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($t))();function p(i){return i instanceof Function?i():i}var se=(()=>((se=se||{})[se.Important=1]="Important",se[se.DashCase=2]="DashCase",se))();function Je(i,s){return undefined(i,s)}function Sn(i){const s=i[3];return di(s)?s[3]:s}function ku(i){return Tf(i[13])}function Fu(i){return Tf(i[4])}function Tf(i){for(;null!==i&&!di(i);)i=i[4];return i}function ha(i,s,a,l,d){if(null!=l){let f,_=!1;di(l)?f=l:Ti(l)&&(_=!0,l=l[0]);const w=an(l);0===i&&null!==a?null==d?c_(s,a,w):_s(s,a,w,d||null,!0):1===i&&null!==a?_s(s,a,w,d||null,!0):2===i?function p_(i,s,a){const l=qa(i,s);l&&function BI(i,s,a,l){mn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=f&&function $I(i,s,a,l,d){const f=a[7];f!==an(a)&&ha(s,i,l,f,d);for(let w=10;w<a.length;w++){const b=a[w];xg(b[1],b,i,s,l,f)}}(s,i,f,a,d)}}function Od(i,s,a){if(mn(i))return i.createElement(s,a);{const l=null!==a?function fu(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function t0(i,s){const a=i[9],l=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,js(d,-1)),a.splice(l,1)}function a_(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&t0(d,l),s>0&&(i[a-1][4]=l[4]);const f=ms(i,10+s);!function Li(i,s){xg(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=f[19];null!==_&&_.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function u_(i,s){if(!(256&s[2])){const a=s[11];mn(a)&&a.destroyNode&&xg(i,s,a,3,null,null),function o_(i){let s=i[13];if(!s)return l_(i[1],i);for(;s;){let a=null;if(Ti(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Ti(s)&&l_(s[1],s),s=s[3];null===s&&(s=i),Ti(s)&&l_(s[1],s),a=s&&s[4]}s=a}}(s)}}function l_(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function r0(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof Jo)){const f=a[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const w=d[f[_]],b=f[_+1];try{b.call(w)}finally{}}else try{f.call(d)}finally{}}}}(i,s),function n0(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],w="function"==typeof _?_(s):an(s[_]),b=l[d=a[f+2]],A=a[f+3];"boolean"==typeof A?w.removeEventListener(a[f],b,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),f+=2}else{const _=l[d=a[f+1]];a[f].call(_)}if(null!==l){for(let f=d+1;f<l.length;f++)l[f]();s[7]=null}}(i,s),1===s[1].type&&mn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&di(s[3])){a!==s[3]&&t0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function Sg(i,s,a){return function UI(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===qt.None||d===qt.Emulated)return null}return Dr(l,a)}(i,s.parent,a)}function _s(i,s,a,l,d){mn(i)?i.insertBefore(s,a,l,d):s.insertBefore(a,l,d)}function c_(i,s,a){mn(i)?i.appendChild(s,a):s.appendChild(a)}function s0(i,s,a,l,d){null!==l?_s(i,s,a,l,d):c_(i,s,a)}function qa(i,s){return mn(i)?i.parentNode(s):s.parentNode}let d_=function a0(i,s,a){return 40&i.type?Dr(i,a):null};function Mg(i,s,a,l){const d=Sg(i,l,s),f=s[11],w=function o0(i,s,a){return d_(i,s,a)}(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)s0(f,d,a[b],w,!1);else s0(f,d,a,w,!1)}function Fd(i,s){if(null!==s){const a=s.type;if(3&a)return Dr(s,i);if(4&a)return f_(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return Fd(i,l);{const d=i[s.index];return di(d)?f_(-1,d):an(d)}}if(32&a)return Je(s,i)()||an(i[s.index]);{const l=l0(i,s);return null!==l?Array.isArray(l)?l[0]:Fd(Sn(i[16]),l):Fd(i,s.next)}}return null}function l0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function f_(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return Fd(l,d)}return s[7]}function g_(i,s,a,l,d,f,_){for(;null!=a;){const w=l[a.index],b=a.type;if(_&&0===s&&(w&&Ur(an(w),l),a.flags|=4),64!=(64&a.flags))if(8&b)g_(i,s,a.child,l,d,f,!1),ha(s,i,d,w,f);else if(32&b){const A=Je(a,l);let M;for(;M=A();)ha(s,i,d,M,f);ha(s,i,d,w,f)}else 16&b?y_(i,s,l,a,d,f):ha(s,i,d,w,f);a=_?a.projectionNext:a.next}}function xg(i,s,a,l,d,f){g_(a,l,i.firstChild,s,d,f,!1)}function y_(i,s,a,l,d,f){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)ha(s,i,d,b[A],f);else g_(i,s,b,_[3],d,f,!0)}function Ng(i,s,a){mn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function __(i,s,a){mn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function Rg(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}a=d+1}}const h0="ng-template";function f0(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==Rg(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function Lu(i){return 4===i.type&&i.value!==h0}function fa(i,s,a){return s===(4!==i.type||a?i.value:h0)}function HI(i,s,a){let l=4;const d=i.attrs||[],f=function Og(i){for(let s=0;s<i.length;s++)if(mr(i[s]))return s;return i.length}(d);let _=!1;for(let w=0;w<s.length;w++){const b=s[w];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!fa(i,b,a)||""===b&&1===s.length){if(eo(l))return!1;_=!0}}else{const A=8&l?b:s[++w];if(8&l&&null!==i.attrs){if(!f0(i.attrs,A,a)){if(eo(l))return!1;_=!0}continue}const P=GI(8&l?"class":b,d,Lu(i),a);if(-1===P){if(eo(l))return!1;_=!0;continue}if(""!==A){let U;U=P>f?"":d[P+1].toLowerCase();const Z=8&l?U:null;if(Z&&-1!==Rg(Z,A,0)||2&l&&A!==U){if(eo(l))return!1;_=!0}}}}else{if(!_&&!eo(l)&&!eo(b))return!1;if(_&&eo(b))continue;_=!1,l=b|1&l}}return eo(l)||_}function eo(i){return 0==(1&i)}function GI(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let f=!1;for(;d<s.length;){const _=s[d];if(_===i)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function Vu(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function p0(i,s,a=!1){for(let l=0;l<s.length;l++)if(HI(i,s[l],a))return!0;return!1}function ti(i,s){return i?":not("+s.trim()+")":s}function Uu(i){let s=i[0],a=1,l=2,d="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];d+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!eo(_)&&(s+=ti(f,d),d=""),l=_,f=f||!eo(l);a++}return""!==d&&(s+=ti(f,d)),s}const Mt={};function v_(i){E_(Lt(),be(),Tr()+i,Eu())}function E_(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Pa(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Du(s,f,0,a)}qs(a)}function Mf(i,s){return i<<17|s<<2}function to(i){return i>>17&32767}function Ld(i){return 2|i}function pa(i){return(131068&i)>>2}function Pg(i,s){return-131069&i|s<<2}function kg(i){return 1|i}function C0(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],f=a[l+1];if(-1!==f){const _=i.data[f];Ml(d),_.contentQueries(2,s[f],f)}}}function kf(i,s,a,l,d,f,_,w,b,A){const M=s.blueprint.slice();return M[0]=d,M[2]=140|l,Bs(M),M[3]=M[15]=i,M[8]=a,M[10]=_||i&&i[10],M[11]=w||i&&i[11],M[12]=b||i&&i[12]||null,M[9]=A||i&&i[9]||null,M[6]=f,M[16]=2==s.type?i[16]:M,M}function uc(i,s,a,l,d){let f=i.data[s];if(null===f)f=function x_(i,s,a,l,d){const f=Zo(),_=Il(),b=i.data[s]=function tD(i,s,a,l,d,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=b),null!==f&&(_?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b)),b}(i,s,a,l,d),function Tl(){return ht.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const _=function Yo(){const i=ht.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Qr(f,!0),f}function Ff(i,s,a,l){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function Lf(i,s,a){_o(s);try{const l=i.viewQuery;null!==l&&Bf(1,l,a);const d=i.template;null!==d&&jg(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&C0(i,s),i.staticViewQueries&&Bf(2,i.viewQuery,a);const f=i.components;null!==f&&function T0(i,s){for(let a=0;a<s.length;a++)cD(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Eo()}}function lc(i,s,a,l){const d=s[2];if(256==(256&d))return;_o(s);const f=Eu();try{Bs(s),function wu(i){return ht.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&jg(i,s,a,2,l);const _=3==(3&d);if(!f)if(_){const A=i.preOrderCheckHooks;null!==A&&Pa(s,A,null)}else{const A=i.preOrderHooks;null!==A&&Du(s,A,0,null),Hn(s,0)}if(function lD(i){for(let s=ku(i);null!==s;s=Fu(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],f=d[3];0==(1024&d[2])&&js(f,1),d[2]|=1024}}}(s),function k0(i){for(let s=ku(i);null!==s;s=Fu(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];cs(l)&&lc(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&C0(i,s),!f)if(_){const A=i.contentCheckHooks;null!==A&&Pa(s,A)}else{const A=i.contentHooks;null!==A&&Du(s,A,1),Hn(s,1)}!function Bg(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)qs(~d);else{const f=d,_=a[++l],w=a[++l];Iu(_,f),w(2,s[f])}}}finally{qs(-1)}}(i,s);const w=i.components;null!==w&&function eD(i,s){for(let a=0;a<s.length;a++)bS(i,s[a])}(s,w);const b=i.viewQuery;if(null!==b&&Bf(2,b,l),!f)if(_){const A=i.viewCheckHooks;null!==A&&Pa(s,A)}else{const A=i.viewHooks;null!==A&&Du(s,A,2),Hn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,js(s[3],-1))}finally{Eo()}}function _S(i,s,a,l){const d=s[10],f=!Eu(),_=Us(s);try{f&&!_&&d.begin&&d.begin(),_&&Lf(i,s,l),lc(i,s,a,l)}finally{f&&!_&&d.end&&d.end()}}function jg(i,s,a,l,d){const f=Tr(),_=2&l;try{qs(-1),_&&s.length>20&&E_(i,s,20,Eu()),a(l,d)}finally{qs(f)}}function $g(i,s,a){!vu()||(function rD(i,s,a,l){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Gn(a,s),Ur(l,s);const _=a.initialInputs;for(let w=d;w<f;w++){const b=i.data[w],A=zr(b);A&&aD(s,a,b);const M=xi(s,i,w,a);Ur(M,s),null!==_&&R0(0,w-d,M,b,0,_),A&&(Cr(a.index,s)[8]=M)}}(i,s,a,Dr(a,s)),128==(128&a.flags)&&function iD(i,s,a){const l=a.directiveStart,d=a.directiveEnd,_=a.index,w=function Al(){return ht.lFrame.currentDirectiveIndex}();try{qs(_);for(let b=l;b<d;b++){const A=i.data[b],M=s[b];Oa(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&$d(A,M)}}finally{qs(-1),Oa(w)}}(i,s,a))}function Vf(i,s,a=Dr){const l=s.localNames;if(null!==l){let d=s.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],w=-1===_?a(s,i):i[_];i[d++]=w}}}function Hg(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=N_(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function N_(i,s,a,l,d,f,_,w,b,A){const M=20+l,P=M+d,U=function R_(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Mt);return a}(M,P),Z="function"==typeof A?A():A;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:s,data:U.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:Z,incompleteFirstPass:!1}}function jd(i,s,a,l){const d=$_(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&V0(i).push(l,d.length-1))}function Gg(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function Uf(i,s,a,l){let d=!1;if(vu()){const f=function F_(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const _=l[f];p0(a,_.selectors,!1)&&(d||(d=[]),zs(Gn(a,s),i,_.type),zr(_)?(L_(i,a),d.unshift(_)):d.push(_))}return d}(i,s,a),_=null===l?null:{"":-1};if(null!==f){d=!0,sD(a,i.data.length,f.length);for(let M=0;M<f.length;M++){const P=f[M];P.providersResolver&&P.providersResolver(P)}let w=!1,b=!1,A=Ff(i,s,f.length,null);for(let M=0;M<f.length;M++){const P=f[M];a.mergedAttrs=Xr(a.mergedAttrs,P.hostAttrs),oD(i,a,s,A,P),wS(A,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const U=P.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!b&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),A++}!function S0(i,s){const l=s.directiveEnd,d=i.data,f=s.attrs,_=[];let w=null,b=null;for(let A=s.directiveStart;A<l;A++){const M=d[A],P=M.inputs,U=null===f||Lu(s)?null:O0(P,f);_.push(U),w=Gg(P,A,w),b=Gg(M.outputs,A,b)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=b}(i,a)}_&&function ES(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new Re(-301,!1);l.push(s[d],f)}}}(a,l,_)}return a.mergedAttrs=Xr(a.mergedAttrs,a.attrs),d}function zg(i,s,a,l,d,f){const _=f.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const b=~s.index;(function Wg(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=b&&w.push(b),w.push(l,d,_)}}function $d(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function L_(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function wS(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;zr(s)&&(a[""]=i)}}function sD(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function oD(i,s,a,l,d){i.data[l]=d;const f=d.factory||(d.factory=Wr(d.type)),_=new Jo(f,zr(d),null);i.blueprint[l]=_,a[l]=_,zg(i,s,0,l,Ff(i,a,d.hostVars,Mt),d)}function aD(i,s,a){const l=Dr(s,i),d=Hg(a),f=i[10],_=Zg(i,kf(i,d,null,a.onPush?64:16,l,s,f,f.createRenderer(l,a),null,null));i[s.index]=_}function Ro(i,s,a,l,d,f){const _=Dr(i,s);!function V_(i,s,a,l,d,f,_){if(null==f)mn(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const w=null==_?fe(f):_(f,l||"",d);mn(i)?i.setAttribute(s,d,w,a):a?s.setAttributeNS(a,d,w):s.setAttribute(d,w)}}(s[11],_,f,i.value,a,l,d)}function R0(i,s,a,l,d,f){const _=f[s];if(null!==_){const w=l.setInput;for(let b=0;b<_.length;){const A=_[b++],M=_[b++],P=_[b++];null!==w?l.setInput(a,P,A,M):a[M]=P}}}function O0(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function P0(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function bS(i,s){const a=Cr(s,i);if(cs(a)){const l=a[1];80&a[2]?lc(l,a,l.template,a[8]):a[5]>0&&Kg(a)}}function Kg(i){for(let l=ku(i);null!==l;l=Fu(l))for(let d=10;d<l.length;d++){const f=l[d];if(1024&f[2]){const _=f[1];lc(_,f,_.template,f[8])}else f[5]>0&&Kg(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Cr(a[l],i);cs(d)&&d[5]>0&&Kg(d)}}function cD(i,s){const a=Cr(s,i),l=a[1];(function F0(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Lf(l,a,a[8])}function Zg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Yg(i){for(;i;){i[2]|=64;const s=Sn(i);if(Wh(i)&&!s)return i;i=s}return null}function Qg(i,s,a){const l=s[10];l.begin&&l.begin();try{lc(i,s,i.template,a)}catch(d){throw U0(s,d),d}finally{l.end&&l.end()}}function L0(i){!function B_(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=_f(a),d=l[1];_S(d,l,d.template,a)}}(i[8])}function Bf(i,s,a){Ml(0),s(i,a)}const j_=(()=>Promise.resolve(null))();function $_(i){return i[7]||(i[7]=[])}function V0(i){return i.cleanup||(i.cleanup=[])}function U0(i,s){const a=i[9],l=a?a.get(xr,null):null;l&&l.handleError(s)}function H_(i,s,a,l,d){for(let f=0;f<a.length;){const _=a[f++],w=a[f++],b=s[_],A=i.data[_];null!==A.setInput?A.setInput(b,d,l,w):b[w]=d}}function za(i,s,a){const l=yo(s,i);!function Rd(i,s,a){mn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function Hd(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?f=w:1==f?d=le(d,w):2==f&&(l=le(l,w+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const G_=new Tn("INJECTOR",-1);class gD{get(s,a=Do){if(a===Do){const l=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw l.name="NullInjectorError",l}return a}}const jf=new Tn("Set Injector scope."),$f={},B0={};let q_;function z_(){return void 0===q_&&(q_=new gD),q_}function Bu(i,s=null,a=null,l){const d=j0(i,s,a,l);return d._resolveInjectorDefTypes(),d}function j0(i,s=null,a=null,l){return new $0(i,a,s||z_(),l)}class $0{constructor(s,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&mi(a,w=>this.processProvider(w,s,a)),mi([s],w=>this.processInjectorType(w,[],f)),this.records.set(G_,ju(void 0,this));const _=this.records.get(jf);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof s?null:de(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Do,l=ut.Default){this.assertNotDestroyed();const d=Se(this),f=Kn(void 0);try{if(!(l&ut.SkipSelf)){let w=this.records.get(s);if(void 0===w){const b=function vD(i){return"function"==typeof i||"object"==typeof i&&i instanceof Tn}(s)&&Gt(s);w=b&&this.injectableDefInScope(b)?ju(W_(s),$f):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&ut.Self?z_():this.parent).get(s,a=l&ut.Optional&&a===Do?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Mu]=_[Mu]||[]).unshift(de(s)),d)throw _;return function aa(i,s,a,l){const d=i[Mu];throw s[F]&&d.unshift(s[F]),i.message=function Co(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=de(s);if(Array.isArray(s))d=s.map(de).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];f.push(_+":"+("string"==typeof w?JSON.stringify(w):de(w)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(C,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Mu]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Kn(f),Se(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,d)=>s.push(de(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processInjectorType(s,a,l){if(!(s=J(s)))return!1;let d=kr(s);const f=null==d&&s.ngModule||void 0,_=void 0===f?s:f,w=-1!==l.indexOf(_);if(void 0!==f&&(d=kr(f)),null==d)return!1;if(null!=d.imports&&!w){let M;l.push(_);try{mi(d.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===M&&(M=[]),M.push(P))})}finally{}if(void 0!==M)for(let P=0;P<M.length;P++){const{ngModule:U,providers:Z}=M[P];mi(Z,me=>this.processProvider(me,U,Z||ct))}}this.injectorDefTypes.add(_);const b=Wr(_)||(()=>new _);this.records.set(_,ju(b,$f));const A=d.providers;if(null!=A&&!w){const M=s;mi(A,P=>this.processProvider(P,M,A))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,l){let d=Gd(s=J(s))?s:J(s&&s.provide);const f=function mD(i,s,a){return K_(i)?ju(void 0,i.useValue):ju(G0(i),$f)}(s);if(Gd(s)||!0!==s.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=ju(void 0,$f,!0),_.factory=()=>Dt(_.multi),this.records.set(d,_)),d=s,_.multi.push(s)}this.records.set(d,f)}hydrate(s,a){return a.value===$f&&(a.value=B0,a.value=a.factory()),"object"==typeof a.value&&a.value&&function W0(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=J(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function W_(i){const s=Gt(i),a=null!==s?s.factory:Wr(i);if(null!==a)return a;if(i instanceof Tn)throw new Re(204,!1);if(i instanceof Function)return function H0(i){const s=i.length;if(s>0)throw function Oi(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Re(204,!1);const a=function ui(i){const s=i&&(i[Hi]||i[rs]);if(s){const a=function Ms(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Re(204,!1)}function G0(i,s,a){let l;if(Gd(i)){const d=J(i);return Wr(d)||W_(d)}if(K_(i))l=()=>J(i.useValue);else if(function q0(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Dt(i.deps||[]));else if(function yD(i){return!(!i||!i.useExisting)}(i))l=()=>Ze(J(i.useExisting));else{const d=J(i&&(i.useClass||i.provide));if(!function _D(i){return!!i.deps}(i))return Wr(d)||W_(d);l=()=>new d(...Dt(i.deps))}return l}function ju(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function K_(i){return null!==i&&"object"==typeof i&&K in i}function Gd(i){return"function"==typeof i}let no=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return Bu({name:""},l,a,"");{const f=null!==(d=a.name)&&void 0!==d?d:"";return Bu({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=Do,i.NULL=new gD,i.\u0275prov=rn({token:i,providedIn:"any",factory:()=>Ze(G_)}),i.__NG_ELEMENT_ID__=-1,i})();function xt(i,s){ds(_f(i)[1],_n())}function dc(i){let s=function tm(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(zr(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Re(903,"");d=s.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=Hf(i.inputs),_.declaredInputs=Hf(i.declaredInputs),_.outputs=Hf(i.outputs);const w=d.hostBindings;w&&MD(i,w);const b=d.viewQuery,A=d.contentQueries;if(b&&AD(i,b),A&&SD(i,A),re(i.inputs,d.inputs),re(i.declaredInputs,d.declaredInputs),re(i.outputs,d.outputs),zr(d)&&d.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let _=0;_<f.length;_++){const w=f[_];w&&w.ngInherit&&w(i),w===dc&&(a=!1)}}s=Object.getPrototypeOf(s)}!function TD(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=Xr(d.hostAttrs,a=Xr(a,d.hostAttrs))}}(l)}function Hf(i){return i===dr?{}:i===ct?[]:i}function AD(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function SD(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,f)=>{s(l,d,f),a(l,d,f)}:s}function MD(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let Oo=null;function qd(){if(!Oo){const i=$t.Symbol;if(i&&i.iterator)Oo=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Oo=l)}}}return Oo}function zd(i){return!!rm(i)&&(Array.isArray(i)||!(i instanceof Map)&&qd()in i)}function rm(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ii(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function im(i,s,a,l){const d=be();return ii(d,Hs(),s)&&(Lt(),Ro(Dn(),d,i,s,a,l)),im}function ew(i,s,a,l,d,f,_,w){const b=be(),A=Lt(),M=i+20,P=A.firstCreatePass?function RD(i,s,a,l,d,f,_,w,b){const A=s.consts,M=uc(s,i,4,_||null,Yr(A,w));Uf(s,a,M,Yr(A,b)),ds(s,M);const P=M.tViews=N_(2,M,l,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,M),P.queries=s.queries.embeddedTView(M)),M}(M,A,b,s,a,l,d,f,_):A.data[M];Qr(P,!1);const U=b[11].createComment("");Mg(A,b,U,P),Ur(U,b),Zg(b,b[M]=P0(U,b,U,P)),au(P)&&$g(A,b,P),null!=_&&Vf(b,P,w)}function yc(i,s=ut.Default){const a=be();return null===a?Ze(i,s):Ws(_n(),a,J(i),s)}function cv(){throw new Error("invalid")}function dv(i,s,a){const l=be();return ii(l,Hs(),s)&&function es(i,s,a,l,d,f,_,w){const b=Dr(s,a);let M,A=s.inputs;!w&&null!=A&&(M=A[l])?(H_(i,a,M,l,d),Ps(s)&&function qg(i,s){const a=Cr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function P_(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,s.value||"",l):d,mn(f)?f.setProperty(b,l,d):Jr(l)||(b.setProperty?b.setProperty(l,d):b[l]=d))}(Lt(),Dn(),l,i,s,l[11],a,!1),dv}function _c(i,s,a,l,d){const _=d?"class":"style";H_(i,a,s.inputs[_],_,l)}function Zf(i,s,a,l){const d=be(),f=Lt(),_=20+i,w=d[11],b=d[_]=Od(w,s,function Ny(){return ht.lFrame.currentNamespace}()),A=f.firstCreatePass?function uw(i,s,a,l,d,f,_){const w=s.consts,A=uc(s,i,2,d,Yr(w,f));return Uf(s,a,A,Yr(w,_)),null!==A.attrs&&Hd(A,A.attrs,!1),null!==A.mergedAttrs&&Hd(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,f,d,0,s,a,l):f.data[_];Qr(A,!0);const M=A.mergedAttrs;null!==M&&yt(w,b,M);const P=A.classes;null!==P&&__(w,b,P);const U=A.styles;return null!==U&&Ng(w,b,U),64!=(64&A.flags)&&Mg(f,d,b,A),0===function Ra(){return ht.lFrame.elementDepthCount}()&&Ur(b,d),function yu(){ht.lFrame.elementDepthCount++}(),au(A)&&($g(f,d,A),function A0(i,s,a){if(Kc(s)){const d=s.directiveEnd;for(let f=s.directiveStart;f<d;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,A,d)),null!==l&&Vf(d,A),Zf}function Yf(){let i=_n();Il()?function Dl(){ht.lFrame.isParent=!1}():(i=i.parent,Qr(i,!1));const s=i;!function _u(){ht.lFrame.elementDepthCount--}();const a=Lt();return a.firstCreatePass&&(ds(a,i),Kc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Qh(i){return 0!=(16&i.flags)}(s)&&_c(a,s,be(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function ug(i){return 0!=(32&i.flags)}(s)&&_c(a,s,be(),s.stylesWithoutHost,!1),Yf}function Jd(i,s,a,l){return Zf(i,s,a,l),Yf(),Jd}function pm(i){return!!i&&"function"==typeof i.then}function Qf(i){return!!i&&"function"==typeof i.subscribe}const fv=Qf;function Ec(i,s,a,l){const d=be(),f=Lt(),_=_n();return function gv(i,s,a,l,d,f,_,w){const b=au(l),M=i.firstCreatePass&&V0(i),P=s[8],U=$_(s);let Z=!0;if(3&l.type||w){const Ve=Dr(l,s),Ye=w?w(Ve):Ve,Ie=U.length,lt=w?Ht=>w(an(Ht[l.index])):l.index;if(mn(a)){let Ht=null;if(!w&&b&&(Ht=function Ui(i,s,a,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===a&&d[f+1]===l){const w=s[7],b=d[f+2];return w.length>b?w[b]:null}"string"==typeof _&&(f+=2)}return null}(i,s,d,l.index)),null!==Ht)(Ht.__ngLastListenerFn__||Ht).__ngNextListenerFn__=f,Ht.__ngLastListenerFn__=f,Z=!1;else{f=eh(l,s,P,f,!1);const cn=a.listen(Ye,d,f);U.push(f,cn),M&&M.push(d,lt,Ie,Ie+1)}}else f=eh(l,s,P,f,!0),Ye.addEventListener(d,f,_),U.push(f),M&&M.push(d,lt,Ie,_)}else f=eh(l,s,P,f,!1);const me=l.outputs;let Pe;if(Z&&null!==me&&(Pe=me[d])){const Ve=Pe.length;if(Ve)for(let Ye=0;Ye<Ve;Ye+=2){const Ds=s[Pe[Ye]][Pe[Ye+1]].subscribe(f),hl=U.length;U.push(f,Ds),M&&M.push(d,l.index,hl,-(hl+1))}}}(f,d,d[11],_,i,s,!!a,l),Ec}function Xd(i,s,a,l){try{return!1!==a(l)}catch(d){return U0(i,d),!1}}function eh(i,s,a,l,d){return function f(_){if(_===Function)return l;const w=2&i.flags?Cr(i.index,s):s;0==(32&s[2])&&Yg(w);let b=Xd(s,0,l,_),A=f.__ngNextListenerFn__;for(;A;)b=Xd(s,0,A,_)&&b,A=A.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function _v(i,s,a,l,d){const f=i[a+1],_=null===s;let w=l?to(f):pa(f),b=!1;for(;0!==w&&(!1===b||_);){const M=i[w+1];WD(i[w],s)&&(b=!0,i[w+1]=l?kg(M):Ld(M)),w=l?to(M):pa(M)}b&&(i[a+1]=l?Ld(f):kg(f))}function WD(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Qs(i,s)>=0}function rh(i,s){return function Fo(i,s,a,l){const d=be(),f=Lt(),_=function Si(i){const s=ht.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function sh(i,s,a,l){const d=i.data;if(null===d[a+1]){const f=d[Tr()],_=function ih(i,s){return s>=i.expandoStartIndex}(i,a);(function ww(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!_&&(s=!1),s=function ZD(i,s,a,l){const d=function Qo(i){const s=ht.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=rp(a=Iv(null,i,s,a,l),s.attrs,l),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==d)if(a=Iv(d,i,s,a,l),null===f){let b=function vw(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==pa(l))return i[to(l)]}(i,s,l);void 0!==b&&Array.isArray(b)&&(b=Iv(null,i,s,b[1],l),b=rp(b,s.attrs,l),function YD(i,s,a,l){i[to(a?s.classBindings:s.styleBindings)]=l}(i,s,l,b))}else f=function QD(i,s,a){let l;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)l=rp(l,i[f].hostAttrs,a);return rp(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(d,f,s,l),function gw(i,s,a,l,d,f){let _=f?s.classBindings:s.styleBindings,w=to(_),b=pa(_);i[l]=a;let M,A=!1;if(Array.isArray(a)){const P=a;M=P[1],(null===M||Qs(P,M)>0)&&(A=!0)}else M=a;if(d)if(0!==b){const U=to(i[w+1]);i[l+1]=Mf(U,w),0!==U&&(i[U+1]=Pg(i[U+1],l)),i[w+1]=function m0(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=Mf(w,0),0!==w&&(i[w+1]=Pg(i[w+1],l)),w=l;else i[l+1]=Mf(b,0),0===w?w=l:i[b+1]=Pg(i[b+1],l),b=l;A&&(i[l+1]=Ld(i[l+1])),_v(i,M,l,!0),_v(i,M,l,!1),function mw(i,s,a,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Qs(f,s)>=0&&(a[l+1]=kg(a[l+1]))}(s,M,i,l,f),_=Mf(w,b),f?s.classBindings=_:s.styleBindings=_}(d,f,s,a,_,l)}}(f,i,_,l),s!==Mt&&ii(d,_,s)&&function Dv(i,s,a,l,d,f,_,w){if(!(3&s.type))return;const b=i.data,A=b[w+1];Ka(function I_(i){return 1==(1&i)}(A)?Cv(b,s,a,d,pa(A),_):void 0)||(Ka(f)||function b_(i){return 2==(2&i)}(A)&&(f=Cv(b,null,a,d,w,_)),function c0(i,s,a,l,d){const f=mn(i);if(s)d?f?i.addClass(a,l):a.classList.add(l):f?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:se.DashCase;if(null==d)f?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),_|=se.Important),f?i.setStyle(a,l,d,_):a.style.setProperty(l,d,w?"important":"")}}}(l,_,yo(Tr(),a),d,f))}(f,f.data[Tr()],d,d[11],i,d[_+1]=function JD(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=de(Js(i)))),i}(s,a),l,_)}(i,s,null,!0),rh}function Iv(i,s,a,l,d){let f=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(f=s[w],l=rp(l,f.hostAttrs,d),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function rp(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Yn(i,_,!!a||s[++f]))}return void 0===i?null:i}function Cv(i,s,a,l,d,f){const _=null===s;let w;for(;d>0;){const b=i[d],A=Array.isArray(b),M=A?b[1]:b,P=null===M;let U=a[d+1];U===Mt&&(U=P?ct:void 0);let Z=P?Gl(U,l):M===l?U:void 0;if(A&&!Ka(Z)&&(Z=Gl(b,l)),Ka(Z)&&(w=Z,_))return w;const me=i[d+1];d=_?to(me):pa(me)}if(null!==s){let b=f?s.residualClasses:s.residualStyles;null!=b&&(w=Gl(b,l))}return w}function Ka(i){return void 0!==i}function Tv(i,s=""){const a=be(),l=Lt(),d=i+20,f=l.firstCreatePass?uc(l,d,1,s,null):l.data[d],_=a[d]=function Nd(i,s){return mn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Mg(l,a,_,f),Qr(f,!1)}function Av(i){return Em("",i,""),Av}function Em(i,s,a){const l=be(),d=function Gu(i,s,a,l){return ii(i,Hs(),a)?s+fe(a)+l:Mt}(l,i,s,a);return d!==Mt&&za(l,Tr(),d),Em}const Za=void 0;var sC=["en",[["a","p"],["AM","PM"],Za],[["AM","PM"],Za,Za],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Za,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Za,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Za,"{1} 'at' {0}",Za],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Sm(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let bc={};function xm(i){const s=function xw(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Rm(s);if(a)return a;const l=s.split("-")[0];if(a=Rm(l),a)return a;if("en"===l)return sC;throw new Error(`Missing locale data for the locale "${i}".`)}function Nm(i){return xm(i)[ft.PluralCase]}function Rm(i){return i in bc||(bc[i]=$t.ng&&$t.ng.common&&$t.ng.common.locales&&$t.ng.common.locales[i]),bc[i]}var ft=(()=>((ft=ft||{})[ft.LocaleId=0]="LocaleId",ft[ft.DayPeriodsFormat=1]="DayPeriodsFormat",ft[ft.DayPeriodsStandalone=2]="DayPeriodsStandalone",ft[ft.DaysFormat=3]="DaysFormat",ft[ft.DaysStandalone=4]="DaysStandalone",ft[ft.MonthsFormat=5]="MonthsFormat",ft[ft.MonthsStandalone=6]="MonthsStandalone",ft[ft.Eras=7]="Eras",ft[ft.FirstDayOfWeek=8]="FirstDayOfWeek",ft[ft.WeekendRange=9]="WeekendRange",ft[ft.DateFormat=10]="DateFormat",ft[ft.TimeFormat=11]="TimeFormat",ft[ft.DateTimeFormat=12]="DateTimeFormat",ft[ft.NumberSymbols=13]="NumberSymbols",ft[ft.NumberFormats=14]="NumberFormats",ft[ft.CurrencyCode=15]="CurrencyCode",ft[ft.CurrencySymbol=16]="CurrencySymbol",ft[ft.CurrencyName=17]="CurrencyName",ft[ft.Currencies=18]="Currencies",ft[ft.Directionality=19]="Directionality",ft[ft.PluralCase=20]="PluralCase",ft[ft.ExtraData=21]="ExtraData",ft))();const cp="en-US";let Fv=cp;function hh(i,s,a,l,d){if(i=J(i),Array.isArray(i))for(let f=0;f<i.length;f++)hh(i[f],s,a,l,d);else{const f=Lt(),_=be();let w=Gd(i)?i:J(i.provide),b=G0(i);const A=_n(),M=1048575&A.providerIndexes,P=A.directiveStart,U=A.providerIndexes>>20;if(Gd(i)||!i.multi){const Z=new Jo(b,d,yc),me=Vm(w,s,d?M:M+U,P);-1===me?(zs(Gn(A,_),f,w),Mc(f,i,s.length),s.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(Z),_.push(Z)):(a[me]=Z,_[me]=Z)}else{const Z=Vm(w,s,M+U,P),me=Vm(w,s,M,M+U),Pe=Z>=0&&a[Z],Ve=me>=0&&a[me];if(d&&!Ve||!d&&!Pe){zs(Gn(A,_),f,w);const Ye=function xn(i,s,a,l,d){const f=new Jo(i,a,yc);return f.multi=[],f.index=s,f.componentProviders=0,$v(f,d,l&&!a),f}(d?wi:Jw,a.length,d,l,b);!d&&Ve&&(a[me].providerFactory=Ye),Mc(f,i,s.length,0),s.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(Ye),_.push(Ye)}else Mc(f,i,Z>-1?Z:me,$v(a[d?me:Z],b,!d&&l));!d&&l&&Ve&&a[me].componentProviders++}}}function Mc(i,s,a,l){const d=Gd(s),f=function z0(i){return!!i.useClass}(s);if(d||f){const b=(f?J(s.useClass):s).prototype.ngOnDestroy;if(b){const A=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const M=A.indexOf(a);-1===M?A.push(a,[l,b]):A[M+1].push(l,b)}else A.push(a,b)}}}function $v(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Vm(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function Jw(i,s,a,l){return Um(this.multi,[])}function wi(i,s,a,l){const d=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=xi(a,a[1],this.providerFactory.index,l);f=w.slice(0,_),Um(d,f);for(let b=_;b<w.length;b++)f.push(w[b])}else f=[],Um(d,f);return f}function Um(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function mp(i,s=[]){return a=>{a.providersResolver=(l,d)=>function Qw(i,s,a){const l=Lt();if(l.firstCreatePass){const d=zr(i);hh(a,l.data,l.blueprint,d,!0),hh(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class xc{}class mC{resolveComponentFactory(s){throw function Bm(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let so=(()=>{class i{}return i.NULL=new mC,i})();function yC(){return ph(_n(),be())}function ph(i,s){return new gh(Dr(i,s))}let gh=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=yC,i})();function Nc(i){return i instanceof gh?i.nativeElement:i}class mh{}let jm=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function ai(){const i=be(),a=Cr(_n().index,i);return function $m(i){return i[11]}(Ti(a)?a:i)}(),i})(),_C=(()=>{class i{}return i.\u0275prov=rn({token:i,providedIn:"root",factory:()=>null}),i})();class Xw{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const eb=new Xw("13.2.7"),Hm={};function Gm(i,s,a,l,d=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push(an(f)),di(f))for(let w=10;w<f.length;w++){const b=f[w],A=b[1].firstChild;null!==A&&Gm(b[1],b,A,l)}const _=a.type;if(8&_)Gm(i,s,a.child,l);else if(32&_){const w=Je(a,s);let b;for(;b=w();)l.push(b)}else if(16&_){const w=l0(s,a);if(Array.isArray(w))l.push(...w);else{const b=Sn(s[16]);Gm(b[1],b,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class yp{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Gm(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(di(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(a_(s,l),ms(a,l))}this._attachedToViewContainer=!1}u_(this._lView[1],this._lView)}onDestroy(s){jd(this._lView[1],this._lView,null,s)}markForCheck(){Yg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Qg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Jg(i,s,a){$s(!0);try{Qg(i,s,a)}finally{$s(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Re(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ag(i,s){xg(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Re(902,"");this._appRef=s}}class vC extends yp{constructor(s){super(s),this._view=s}detectChanges(){L0(this._view)}checkNoChanges(){!function dD(i){$s(!0);try{L0(i)}finally{$s(!1)}}(this._view)}get context(){return null}}class tb extends so{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=zt(s);return new qm(a,this.ngModule)}}function Xa(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class qm extends xc{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function zI(i){return i.map(Uu).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Xa(this.componentDef.inputs)}get outputs(){return Xa(this.componentDef.outputs)}create(s,a,l,d){const f=(d=d||this.ngModule)?function EC(i,s){return{get:(a,l,d)=>{const f=i.get(a,Hm,d);return f!==Hm||l===Hm?f:s.get(a,l,d)}}}(s,d.injector):s,_=f.get(mh,Ko),w=f.get(_C,null),b=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",M=l?function cc(i,s,a){if(mn(i))return i.selectRootElement(s,a===qt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(b,l,this.componentDef.encapsulation):Od(_.createRenderer(null,this.componentDef),A,function yh(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),P=this.componentDef.onPush?576:528,U=function em(i,s){return{components:[],scheduler:i||r_,clean:j_,playerHandler:s||null,flags:0}}(),Z=N_(0,null,null,1,0,null,null,null,null,null),me=kf(null,Z,U,P,null,null,_,b,w,f);let Pe,Ve;_o(me);try{const Ye=function ma(i,s,a,l,d,f){const _=a[1];a[20]=i;const b=uc(_,20,2,"#host",null),A=b.mergedAttrs=s.hostAttrs;null!==A&&(Hd(b,A,!0),null!==i&&(yt(d,i,A),null!==b.classes&&__(d,i,b.classes),null!==b.styles&&Ng(d,i,b.styles)));const M=l.createRenderer(i,s),P=kf(a,Hg(s),null,s.onPush?64:16,a[20],b,l,M,f||null,null);return _.firstCreatePass&&(zs(Gn(b,a),_,s.type),L_(_,b),sD(b,a.length,1)),Zg(a,P),a[20]=P}(M,this.componentDef,me,_,b);if(M)if(l)yt(b,M,["ng-version",eb.full]);else{const{attrs:Ie,classes:lt}=function WI(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++l]):8===d&&a.push(f);else{if(!eo(d))break;d=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&yt(b,M,Ie),lt&&lt.length>0&&__(b,M,lt.join(" "))}if(Ve=Na(Z,20),void 0!==a){const Ie=Ve.projection=[];for(let lt=0;lt<this.ngContentSelectors.length;lt++){const Ht=a[lt];Ie.push(null!=Ht?Array.from(Ht):null)}}Pe=function et(i,s,a,l,d){const f=a[1],_=function N0(i,s,a){const l=_n();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),oD(i,l,s,Ff(i,s,1,null),a));const d=xi(s,i,l.directiveStart,l);Ur(d,s);const f=Dr(l,s);return f&&Ur(f,s),d}(f,a,s);if(l.components.push(_),i[8]=_,d&&d.forEach(b=>b(_,s)),s.contentQueries){const b=_n();s.contentQueries(1,_,b.directiveStart)}const w=_n();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(qs(w.index),zg(a[1],w,0,w.directiveStart,w.directiveEnd,s),$d(s,_)),_}(Ye,this.componentDef,me,U,[xt]),Lf(Z,me,null)}finally{Eo()}return new rb(this.componentType,Pe,ph(Ve,me),me,Ve)}}class rb extends class Hv{}{constructor(s,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new vC(d),this.componentType=s}get injector(){return new Ni(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class eu{}class _p{}const el=new Map;class qv extends eu{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new tb(this);const l=hn(s);this._bootstrapComponents=p(l.bootstrap),this._r3Injector=j0(s,a,[{provide:eu,useValue:this},{provide:so,useValue:this.componentFactoryResolver}],de(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=no.THROW_IF_NOT_FOUND,l=ut.Default){return s===no||s===eu||s===G_?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class vp extends _p{constructor(s){super(),this.moduleType=s,null!==hn(s)&&function vh(i){const s=new Set;!function a(l){const d=hn(l,!0),f=d.id;null!==f&&(function zm(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${de(s)} vs ${de(s.name)}`)}(f,el.get(f),l),el.set(f,l));const _=p(d.imports);for(const w of _)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new qv(this.moduleType,s)}}function Rc(i,s,a,l,d,f){const _=s+a;return ii(i,_,d)?function ro(i,s,a){return i[s]=a}(i,_+1,f?l.call(f,d):l(d)):function Eh(i,s){const a=i[s];return a===Mt?void 0:a}(i,_+1)}function Oc(i,s){const a=Lt();let l;const d=i+20;a.firstCreatePass?(l=function cb(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const f=l.factory||(l.factory=Wr(l.type)),_=Kn(yc);try{const w=pi(!1),b=f();return pi(w),function tv(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,be(),d,b),b}finally{Kn(_)}}function Zv(i,s,a){const l=i+20,d=be(),f=function Ai(i,s){return i[s]}(d,l);return function rl(i,s){return i[1].data[s].pure}(d,l)?Rc(d,function gr(){const i=ht.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,f.transform,a,f):f.transform(a)}function Yv(i){return s=>{setTimeout(i,void 0,s)}}const oo=class Zm extends m.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var d,f,_;let w=s,b=a||(()=>null),A=l;if(s&&"object"==typeof s){const P=s;w=null===(d=P.next)||void 0===d?void 0:d.bind(P),b=null===(f=P.error)||void 0===f?void 0:f.bind(P),A=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(b=Yv(b),w&&(w=Yv(w)),A&&(A=Yv(A)));const M=super.subscribe({next:w,error:b,complete:A});return s instanceof Y.w0&&s.add(M),M}};function TC(){return this._results[qd()]()}class Ym{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=qd(),l=Ym.prototype;l[a]||(l[a]=TC)}get changes(){return this._changes||(this._changes=new oo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=Sr(s);(this._changesDetected=!function Ul(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=s[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let wh=(()=>{class i{}return i.__NG_ELEMENT_ID__=db,i})();const wp=wh,Pc=class extends wp{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=kf(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),Lf(a,l,s),new yp(l)}};function db(){return bp(_n(),be())}function bp(i,s){return 4&i.type?new Pc(s,i,ph(i,s)):null}let Ip=(()=>{class i{}return i.__NG_ELEMENT_ID__=Dp,i})();function Dp(){return Jv(_n(),be())}const Qv=Ip,hb=class extends Qv{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return ph(this._hostTNode,this._hostLView)}get injector(){return new Ni(this._hostTNode,this._hostLView)}get parentInjector(){const s=gi(this._hostTNode,this._hostLView);if(dd(s)){const a=Mi(s,this._hostLView),l=pn(s);return new Ni(a[1].data[l+8],a)}return new Ni(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=or(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const d=s.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(s,a,l,d,f){const _=s&&!function sa(i){return"function"==typeof i}(s);let w;if(_)w=a;else{const P=a||{};w=P.index,l=P.injector,d=P.projectableNodes,f=P.ngModuleRef}const b=_?s:new qm(zt(s)),A=l||this.parentInjector;if(!f&&null==b.ngModule){const U=(_?A:this.parentInjector).get(eu,null);U&&(f=U)}const M=b.create(A,d,void 0,f);return this.insert(M.hostView,w),M}insert(s,a){const l=s._lView,d=l[1];if(function gu(i){return di(i[3])}(l)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const P=l[3],U=new hb(P,P[6],P[3]);U.detach(U.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function Pd(i,s,a,l){const d=10+l,f=a.length;l>0&&(a[d-1][4]=s),l<f-10?(s[4]=a[d],Bl(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function kd(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(d,l,_,f);const w=f_(f,_),b=l[11],A=qa(b,_[7]);return null!==A&&function Sf(i,s,a,l,d,f){l[0]=d,l[6]=s,xg(i,l,a,1,d,f)}(d,_[6],b,l,A,w),s.attachToViewContainerRef(),Bl(Yt(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=or(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=a_(this._lContainer,a);l&&(ms(Yt(this._lContainer),a),u_(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=a_(this._lContainer,a);return l&&null!=ms(Yt(this._lContainer),a)?new yp(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function or(i){return i[8]}function Yt(i){return i[8]||(i[8]=[])}function Jv(i,s){let a;const l=s[i.index];if(di(l))a=l;else{let d;if(8&i.type)d=an(l);else{const f=s[11];d=f.createComment("");const _=Dr(i,s);_s(f,qa(f,_),d,function jI(i,s){return mn(i)?i.nextSibling(s):s.nextSibling}(f,_),!1)}s[i.index]=a=P0(l,s,d,i),Zg(s,a)}return new hb(a,i,s)}class bh{constructor(s){this.queryList=s,this.matches=null}clone(){return new bh(this.queryList)}setDirty(){this.queryList.setDirty()}}class Rr{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const _=a.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new Rr(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==tE(s,a).matches&&this.queries[a].setDirty()}}class bn{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Qm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new Qm(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class sl{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new sl(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(s,a,AC(a,f)),this.matchTNodeWithReadOption(s,a,ta(a,s,f,!1,!1))}else l===wh?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,ta(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===gh||d===Ip||d===wh&&4&a.type)this.addMatch(a.index,-2);else{const f=ta(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function AC(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function SC(i,s,a,l){return-1===a?function ao(i,s){return 11&i.type?ph(i,s):4&i.type?bp(i,s):null}(s,i):-2===a?function Xv(i,s,a){return a===gh?ph(s,i):a===wh?bp(s,i):a===Ip?Jv(s,i):void 0}(i,s,l):xi(i,i[1],a,s)}function Ih(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const f=i.data,_=a.matches,w=[];for(let b=0;b<_.length;b+=2){const A=_[b];w.push(A<0?null:SC(s,f[A],_[b+1],a.metadata.read))}d.matches=w}return d.matches}function eE(i,s,a,l){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const _=Ih(i,s,d,a);for(let w=0;w<f.length;w+=2){const b=f[w];if(b>0)l.push(_[w/2]);else{const A=f[w+1],M=s[-b];for(let P=10;P<M.length;P++){const U=M[P];U[17]===U[3]&&eE(U[1],U,A,l)}if(null!==M[9]){const P=M[9];for(let U=0;U<P.length;U++){const Z=P[U];eE(Z[1],Z,A,l)}}}}}return l}function pb(i){const s=be(),a=Lt(),l=Sl();Ml(l+1);const d=tE(a,l);if(i.dirty&&Us(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?eE(a,s,l,[]):Ih(a,s,d,l);i.reset(f,Nc),i.notifyOnChanges()}return!0}return!1}function gb(i,s,a,l){const d=Lt();if(d.firstCreatePass){const f=_n();(function Ap(i,s,a){null===i.queries&&(i.queries=new Qm),i.queries.track(new sl(s,a))})(d,new bn(s,a,l),f.index),function mb(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Dh(i,s,a){const l=new Ym(4==(4&a));jd(i,s,l,l.destroy),null===s[19]&&(s[19]=new Rr),s[19].queries.push(new bh(l))}(d,be(),a)}function Cp(){return function Tp(i,s){return i[19].queries[s].queryList}(be(),Sl())}function tE(i,s){return i.queries.getByIndex(s)}function ry(...i){}const Mb=new Tn("Application Initializer");let uE=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ry,this.reject=ry,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(pm(f))a.push(f);else if(fv(f)){const _=new Promise((w,b)=>{f.subscribe({complete:w,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ze(Mb,8))},i.\u0275prov=rn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const xb=new Tn("AppId",{providedIn:"root",factory:function Nb(){return`${lE()}${lE()}${lE()}`}});function lE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const cE=new Tn("Platform Initializer"),Rb=new Tn("Platform ID"),dE=new Tn("appBootstrapListener");let he=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();const bs=new Tn("LocaleId",{providedIn:"root",factory:()=>Rt(bs,ut.Optional|ut.SkipSelf)||function iy(){return"undefined"!=typeof $localize&&$localize.locale||cp}()}),BC=new Tn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Bc{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Ob=(()=>{class i{compileModuleSync(a){return new vp(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=p(hn(a).declarations).reduce((_,w)=>{const b=zt(w);return b&&_.push(new qm(b)),_},[]);return new Bc(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Hr=(()=>Promise.resolve(0))();function Np(i){"undefined"==typeof Zone?Hr.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Is{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new oo(!1),this.onMicrotaskEmpty=new oo(!1),this.onStable=new oo(!1),this.onError=new oo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function fE(){let i=$t.requestAnimationFrame,s=$t.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Pb(i){const s=()=>{!function $C(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call($t,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ah(i),i.isCheckStableRunning=!0,oy(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ah(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,_,w)=>{try{return al(i),a.invokeTask(d,f,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),ul(i)}},onInvoke:(a,l,d,f,_,w,b)=>{try{return al(i),a.invoke(d,f,_,w,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),ul(i)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Ah(i),oy(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Is.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Is.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,s,ol,ry,ry);try{return f.runTask(_,a,l)}finally{f.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const ol={};function oy(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ah(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function al(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function ul(i){i._nesting--,oy(i)}class Sh{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new oo,this.onMicrotaskEmpty=new oo,this.onStable=new oo,this.onError=new oo}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}let Mh=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Is.assertNotInAngularZone(),Np(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Np(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ze(Is))},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})(),pE=(()=>{class i{constructor(){this._applications=new Map,ay.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return ay.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();class gE{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function mE(i){ay=i}let jo,ay=new gE;const xh=new Tn("AllowMultipleToken");class Nh{constructor(s,a){this.name=s,this.token=a}}function _E(i,s,a=[]){const l=`Platform: ${s}`,d=new Tn(l);return(f=[])=>{let _=Fb();if(!_||_.injector.get(xh,!1))if(i)i(a.concat(f).concat({provide:d,useValue:!0}));else{const w=a.concat(f).concat({provide:d,useValue:!0},{provide:jf,useValue:"platform"});!function GC(i){if(jo&&!jo.destroyed&&!jo.injector.get(xh,!1))throw new Re(400,"");jo=i.get(Rp);const s=i.get(cE,null);s&&s.forEach(a=>a())}(no.create({providers:w,name:l}))}return function qC(i){const s=Fb();if(!s)throw new Re(401,"");return s}()}}function Fb(){return jo&&!jo.destroyed?jo:null}let Rp=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function ll(i,s){let a;return a="noop"===i?new Sh:("zone.js"===i?void 0:i)||new Is({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:Is,useValue:w}];return w.run(()=>{const A=no.create({providers:b,parent:this.injector,name:a.moduleType.name}),M=a.create(A),P=M.injector.get(xr,null);if(!P)throw new Re(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:Z=>{P.handleError(Z)}});M.onDestroy(()=>{wE(this._modules,M),U.unsubscribe()})}),function jc(i,s,a){try{const l=a();return pm(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(P,w,()=>{const U=M.injector.get(uE);return U.runInitializers(),U.donePromise.then(()=>(function Ow(i){at(i,"Expected localeId to be defined"),"string"==typeof i&&(Fv=i.toLowerCase().replace(/_/g,"-"))}(M.injector.get(bs,cp)||cp),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const d=vE({},l);return function kb(i,s,a){const l=new vp(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(EE);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Re(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ze(no))},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();function vE(i,s){return Array.isArray(s)?s.reduce(vE,i):Object.assign(Object.assign({},i),s)}let EE=(()=>{class i{constructor(a,l,d,f,_){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),b=new O.y(A=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{Is.assertNotInAngularZone(),Np(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{Is.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{M.unsubscribe(),P.unsubscribe()}});this.isStable=(0,ae.T)(w,b.pipe((0,X.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Re(405,"");let d;d=a instanceof xc?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const f=function yE(i){return i.isBoundToModule}(d)?void 0:this._injector.get(eu),w=d.create(no.NULL,[],l||d.selector,f),b=w.location.nativeElement,A=w.injector.get(Mh,null),M=A&&w.injector.get(pE);return A&&M&&M.registerApplication(b,A),w.onDestroy(()=>{this.detachView(w.hostView),wE(this.components,w),M&&M.unregisterApplication(b)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Re(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;wE(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(dE,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Ze(Is),Ze(no),Ze(xr),Ze(so),Ze(uE))},i.\u0275prov=rn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function wE(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Lb=!0,bE=!1;function Op(){return bE=!0,Lb}function cy(){if(bE)throw new Error("Cannot enable prod mode after platform setup.");Lb=!1}let Vb=(()=>{class i{}return i.__NG_ELEMENT_ID__=dy,i})();function dy(i){return function DE(i,s,a){if(Ps(i)&&!a){const l=Cr(i.index,s);return new yp(l,l)}return 47&i.type?new yp(s[16],s):null}(_n(),be(),16==(16&i))}class kh{constructor(){}supports(s){return zd(s)}create(s){return new jb(s)}}const Bb=(i,s)=>s;class jb{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Bb}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const _=!l||a&&a.currentIndex<fy(l,d,f)?a:l,w=fy(_,d,f),b=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{f||(f=[]);const A=w-d,M=b-d;if(A!=M){for(let U=0;U<A;U++){const Z=U<f.length?f[U]:f[U]=0,me=Z+U;M<=me&&me<A&&(f[U]=Z+1)}f[_.previousIndex]=M-A}}w!==b&&s(_,w,b)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!zd(s))throw new Re(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],_=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,f,_,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,w),l=!0),a=a._next}else d=0,function ND(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[qd()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{_=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new JC(a,l),f,d),s}_verifyReinsertion(s,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new hy),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hy),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class JC{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $b{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class hy{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new $b,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fy(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class Fh{constructor(){}supports(s){return s instanceof Map||rm(s)}create(){return new py}}class py{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||rm(s)))throw new Re(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const l=new ME(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class ME{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Hb(){return new Fp([new kh])}let Fp=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Hb()),deps:[[i,new To,new _i]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Re(901,"")}}return i.\u0275prov=rn({token:i,providedIn:"root",factory:Hb}),i})();function Gb(){return new gy([new Fh])}let gy=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Gb()),deps:[[i,new To,new _i]]}}find(a){const l=this.factories.find(f=>f.supports(a));if(l)return l;throw new Re(901,"")}}return i.\u0275prov=rn({token:i,providedIn:"root",factory:Gb}),i})();const zb=_E(null,"core",[{provide:Rb,useValue:"unknown"},{provide:Rp,deps:[no]},{provide:pE,deps:[]},{provide:he,deps:[]}]);let tT=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ze(EE))},i.\u0275mod=Q({type:i}),i.\u0275inj=Jt({}),i})()},3942:(ot,Te,k)=>{k.d(Te,{Z:()=>Re});var m=k(2090),Y=k(4859),O=k(9681),ae=k(1877);class X{constructor(fe,we){this._delegate=fe,this.firebase=we,(0,O._addComponent)(fe,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(fe,we=O._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(fe);return!We.isInitialized()&&"EXPLICIT"===(null===(Xe=We.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&We.initialize(),We.getImmediate({identifier:we})}_removeServiceInstance(fe,we=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(we)}_addComponent(fe){(0,O._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,O._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function le(){const Le=function de(Le){const fe={},we={__esModule:!0,initializeApp:function De($e,te={}){const W=O.initializeApp($e,te);if((0,m.r3)(fe,W.name))return fe[W.name];const ne=new Le(W,we);return fe[W.name]=ne,ne},app:We,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee($e){const te=$e.name,W=te.replace("-compat","");if(O._registerComponent($e)&&"PUBLIC"===$e.type){const ne=(ge=We())=>{if("function"!=typeof ge[W])throw re.create("invalid-app-argument",{appName:te});return ge[W]()};void 0!==$e.serviceProps&&(0,m.ZB)(ne,$e.serviceProps),we[W]=ne,Le.prototype[W]=function(...ge){return this._getService.bind(this,te).apply(this,$e.multipleInstances?ge:[])}}return"PUBLIC"===$e.type?we[W]:null},removeApp:function Xe($e){delete fe[$e]},useAsService:function He($e,te){return"serverAuth"===te?null:te},modularAPIs:O}};function We($e){if(!(0,m.r3)(fe,$e=$e||O._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:$e});return fe[$e]}return we.default=we,Object.defineProperty(we,"apps",{get:function _e(){return Object.keys(fe).map($e=>fe[$e])}}),We.App=Le,we}(X);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function fe(we){(0,m.ZB)(Le,we)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Le}(),$=new ae.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=j;!function Ae(Le){(0,O.registerVersion)("@firebase/app-compat","0.1.21",Le)}()},9681:(ot,Te,k)=>{k.r(Te),k.d(Te,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>kr,_DEFAULT_ENTRY_NAME:()=>Nn,_addComponent:()=>ln,_addOrOverwriteComponent:()=>Di,_apps:()=>gt,_clearComponents:()=>Gt,_components:()=>un,_getProvider:()=>ns,_registerComponent:()=>rn,_removeServiceInstance:()=>Jt,deleteApp:()=>is,getApp:()=>Fr,getApps:()=>rs,initializeApp:()=>Hi,onLog:()=>er,registerVersion:()=>qr,setLogLevel:()=>Kn});var m=k(5861),Y=k(4859),O=k(1877),ae=k(2090);class X{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(Qe=>{if(function pe(Ke){const Ce=Ke.getComponent();return"VERSION"===(null==Ce?void 0:Ce.type)}(Qe)){const dt=Qe.getImmediate();return`${dt.library}/${dt.version}`}return null}).filter(Qe=>Qe).join(" ")}}const re="@firebase/app",le=new O.Yd("@firebase/app"),Nn="[DEFAULT]",at={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},gt=new Map,un=new Map;function ln(Ke,Ce){try{Ke.container.addComponent(Ce)}catch(Qe){le.debug(`Component ${Ce.name} failed to register with FirebaseApp ${Ke.name}`,Qe)}}function Di(Ke,Ce){Ke.container.addOrOverwriteComponent(Ce)}function rn(Ke){const Ce=Ke.name;if(un.has(Ce))return le.debug(`There were multiple attempts to register component ${Ce}.`),!1;un.set(Ce,Ke);for(const Qe of gt.values())ln(Qe,Ke);return!0}function ns(Ke,Ce){const Qe=Ke.container.getProvider("heartbeat").getImmediate({optional:!0});return Qe&&Qe.triggerHeartbeat(),Ke.container.getProvider(Ce)}function Jt(Ke,Ce,Qe=Nn){ns(Ke,Ce).clearInstance(Qe)}function Gt(){un.clear()}const ui=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ms{constructor(Ce,Qe,dt){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},Qe),this._name=Qe.name,this._automaticDataCollectionEnabled=Qe.automaticDataCollectionEnabled,this._container=dt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}const kr="9.6.10";function Hi(Ke,Ce={}){"object"!=typeof Ce&&(Ce={name:Ce});const Qe=Object.assign({name:Nn,automaticDataCollectionEnabled:!1},Ce),dt=Qe.name;if("string"!=typeof dt||!dt)throw ui.create("bad-app-name",{appName:String(dt)});const jt=gt.get(dt);if(jt){if((0,ae.vZ)(Ke,jt.options)&&(0,ae.vZ)(Qe,jt.config))return jt;throw ui.create("duplicate-app",{appName:dt})}const Ft=new Y.H0(dt);for(const L of un.values())Ft.addComponent(L);const B=new Ms(Ke,Qe,Ft);return gt.set(dt,B),B}function Fr(Ke=Nn){const Ce=gt.get(Ke);if(!Ce)throw ui.create("no-app",{appName:Ke});return Ce}function rs(){return Array.from(gt.values())}function is(Ke){return ut.apply(this,arguments)}function ut(){return(ut=(0,m.Z)(function*(Ke){const Ce=Ke.name;gt.has(Ce)&&(gt.delete(Ce),yield Promise.all(Ke.container.getProviders().map(Qe=>Qe.delete())),Ke.isDeleted=!0)})).apply(this,arguments)}function qr(Ke,Ce,Qe){var dt;let jt=null!==(dt=at[Ke])&&void 0!==dt?dt:Ke;Qe&&(jt+=`-${Qe}`);const Ft=jt.match(/\s|\//),B=Ce.match(/\s|\//);if(Ft||B){const L=[`Unable to register library "${jt}" with version "${Ce}":`];return Ft&&L.push(`library name "${jt}" contains illegal characters (whitespace or "/")`),Ft&&B&&L.push("and"),B&&L.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void le.warn(L.join(" "))}rn(new Y.wA(`${jt}-version`,()=>({library:jt,version:Ce}),"VERSION"))}function er(Ke,Ce){if(null!==Ke&&"function"!=typeof Ke)throw ui.create("invalid-log-argument");(0,O.Am)(Ke,Ce)}function Kn(Ke){(0,O.Ub)(Ke)}const yn="firebase-heartbeat-store";let tr=null;function xs(){return tr||(tr=(0,ae.X3)("firebase-heartbeat-database",1,(Ke,Ce)=>{0===Ce&&Ke.createObjectStore(yn)}).catch(Ke=>{throw ui.create("storage-open",{originalErrorMessage:Ke.message})})),tr}function qt(){return(qt=(0,m.Z)(function*(Ke){try{return(yield xs()).transaction(yn).objectStore(yn).get(cr(Ke))}catch(Ce){throw ui.create("storage-get",{originalErrorMessage:Ce.message})}})).apply(this,arguments)}function rt(Ke,Ce){return vt.apply(this,arguments)}function vt(){return(vt=(0,m.Z)(function*(Ke,Ce){try{const dt=(yield xs()).transaction(yn,"readwrite");return yield dt.objectStore(yn).put(Ce,cr(Ke)),dt.complete}catch(Qe){throw ui.create("storage-set",{originalErrorMessage:Qe.message})}})).apply(this,arguments)}function cr(Ke){return`${Ke.name}!${Ke.options.appId}`}class co{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const Qe=this.container.getProvider("app").getImmediate();this._storage=new ct(Qe),this._heartbeatsCachePromise=this._storage.read().then(dt=>(this._heartbeatsCache=dt,dt))}triggerHeartbeat(){var Ce=this;return(0,m.Z)(function*(){const dt=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),jt=wr();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==jt&&!Ce._heartbeatsCache.heartbeats.some(Ft=>Ft.date===jt))return Ce._heartbeatsCache.heartbeats.push({date:jt,agent:dt}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(Ft=>{const B=new Date(Ft.date).valueOf();return Date.now()-B<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,m.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const Qe=wr(),{heartbeatsToSend:dt,unsentEntries:jt}=function dr(Ke,Ce=1024){const Qe=[];let dt=Ke.slice();for(const jt of Ke){const Ft=Qe.find(B=>B.agent===jt.agent);if(Ft){if(Ft.dates.push(jt.date),br(Qe)>Ce){Ft.dates.pop();break}}else if(Qe.push({agent:jt.agent,dates:[jt.date]}),br(Qe)>Ce){Qe.pop();break}dt=dt.slice(1)}return{heartbeatsToSend:Qe,unsentEntries:dt}}(Ce._heartbeatsCache.heartbeats),Ft=(0,ae.L)(JSON.stringify({version:2,heartbeats:dt}));return Ce._heartbeatsCache.lastSentHeartbeatDate=Qe,jt.length>0?(Ce._heartbeatsCache.heartbeats=jt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),Ft})()}}function wr(){return(new Date).toISOString().substring(0,10)}class ct{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,m.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function Ca(Ke){return qt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var Qe=this;return(0,m.Z)(function*(){var dt;if(yield Qe._canUseIndexedDBPromise){const Ft=yield Qe.read();return rt(Qe.app,{lastSentHeartbeatDate:null!==(dt=Ce.lastSentHeartbeatDate)&&void 0!==dt?dt:Ft.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var Qe=this;return(0,m.Z)(function*(){var dt;if(yield Qe._canUseIndexedDBPromise){const Ft=yield Qe.read();return rt(Qe.app,{lastSentHeartbeatDate:null!==(dt=Ce.lastSentHeartbeatDate)&&void 0!==dt?dt:Ft.lastSentHeartbeatDate,heartbeats:[...Ft.heartbeats,...Ce.heartbeats]})}})()}}function br(Ke){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Ke})).length}!function Bt(Ke){rn(new Y.wA("platform-logger",Ce=>new X(Ce),"PRIVATE")),rn(new Y.wA("heartbeat",Ce=>new co(Ce),"PRIVATE")),qr(re,"0.7.20",Ke),qr(re,"0.7.20","esm2017"),qr("fire-js","")}("")},4859:(ot,Te,k)=>{k.d(Te,{wA:()=>O,H0:()=>de});var m=k(5861),Y=k(2090);class O{constructor(j,$,J){this.name=j,this.instanceFactory=$,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const ae="[DEFAULT]";class X{constructor(j,$){this.name=j,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const $=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has($)){const J=new Y.BH;if(this.instancesDeferred.set($,J),this.isInitialized($)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:$});qe&&J.resolve(qe)}catch(qe){}}return this.instancesDeferred.get($).promise}getImmediate(j){var $;const J=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),qe=null!==($=null==j?void 0:j.optional)&&void 0!==$&&$;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Ae){if(qe)return null;throw Ae}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function re(le){return"EAGER"===le.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:ae})}catch($){}for(const[$,J]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier($);try{const Ae=this.getOrInitializeService({instanceIdentifier:qe});J.resolve(Ae)}catch(Ae){}}}}clearInstance(j=ae){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,m.Z)(function*(){const $=Array.from(j.instances.values());yield Promise.all([...$.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...$.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=ae){return this.instances.has(j)}getOptions(j=ae){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:$={}}=j,J=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:J,options:$});for(const[Ae,Re]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Ae)&&Re.resolve(qe);return qe}onInit(j,$){var J;const qe=this.normalizeInstanceIdentifier($),Ae=null!==(J=this.onInitCallbacks.get(qe))&&void 0!==J?J:new Set;Ae.add(j),this.onInitCallbacks.set(qe,Ae);const Re=this.instances.get(qe);return Re&&j(Re,qe),()=>{Ae.delete(j)}}invokeOnInitCallbacks(j,$){const J=this.onInitCallbacks.get($);if(J)for(const qe of J)try{qe(j,$)}catch(Ae){}}getOrInitializeService({instanceIdentifier:j,options:$={}}){let J=this.instances.get(j);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(le=j,le===ae?void 0:le),options:$}),this.instances.set(j,J),this.instancesOptions.set(j,$),this.invokeOnInitCallbacks(J,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,J)}catch(qe){}var le;return J||null}normalizeInstanceIdentifier(j=ae){return this.component?this.component.multipleInstances?j:ae:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const $=this.getProvider(j.name);if($.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);$.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const $=new X(j,this);return this.providers.set(j,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,Te,k)=>{k.d(Te,{in:()=>Y,Yd:()=>re,Ub:()=>de,Am:()=>le});const m=[];var Y=(()=>{return(j=Y||(Y={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Y;var j})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ae=Y.INFO,X={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},pe=(j,$,...J)=>{if($<j.logLevel)return;const qe=(new Date).toISOString(),Ae=X[$];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ae](`[${qe}]  ${j.name}:`,...J)};class re{constructor($){this.name=$,this._logLevel=ae,this._logHandler=pe,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Y))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...$),this._logHandler(this,Y.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...$),this._logHandler(this,Y.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...$),this._logHandler(this,Y.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...$),this._logHandler(this,Y.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...$),this._logHandler(this,Y.ERROR,...$)}}function de(j){m.forEach($=>{$.setLogLevel(j)})}function le(j,$){for(const J of m){let qe=null;$&&$.level&&(qe=O[$.level]),J.userLogHandler=null===j?null:(Ae,Re,...Le)=>{const fe=Le.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch(Xe){return null}}).filter(we=>we).join(" ");Re>=(null!=qe?qe:Ae.logLevel)&&j({level:Y[Re].toLowerCase(),message:fe,args:Le,type:Ae.name})}}}},5861:(ot,Te,k)=>{function m(O,ae,X,pe,re,de,le){try{var j=O[de](le),$=j.value}catch(J){return void X(J)}j.done?ae($):Promise.resolve($).then(pe,re)}function Y(O){return function(){var ae=this,X=arguments;return new Promise(function(pe,re){var de=O.apply(ae,X);function le($){m(de,pe,re,le,j,"next",$)}function j($){m(de,pe,re,le,j,"throw",$)}le(void 0)})}}k.d(Te,{Z:()=>Y})}},ot=>{ot(ot.s=4319)}]);