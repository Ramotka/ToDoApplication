"use strict";(self.webpackChunkToDoApp=self.webpackChunkToDoApp||[]).push([[179],{2011:(ut,Ae,P)=>{P.d(Ae,{hO:()=>We,xv:()=>ce,Dh:()=>fe,GT:()=>ge,cc:()=>Se,on:()=>$,pX:()=>X});var p=P(5e3),Y=P(127),O=P(5813);ut=P.hmd(ut);const le=["ngOnDestroy"],X=(be,tt,Ye,Ce={})=>new Proxy(be,{get:(_e,Ee)=>Ye.runOutsideAngular(()=>{var Ge;if(be[Ee])return(null===(Ge=null==Ce?void 0:Ce.spy)||void 0===Ge?void 0:Ge.get)&&Ce.spy.get(Ee,be[Ee]),be[Ee];if(le.indexOf(Ee)>-1)return()=>{};const $e=tt.toPromise().then(te=>{const W=te&&te[Ee];return"function"==typeof W?W.bind(te):W&&W.then?W.then(ie=>Ye.run(()=>ie)):Ye.run(()=>W)});return new Proxy(()=>{},{get:(te,W)=>$e[W],apply:(te,W,ie)=>$e.then(me=>{var oe;const Re=me&&me(...ie);return(null===(oe=null==Ce?void 0:Ce.spy)||void 0===oe?void 0:oe.apply)&&Ce.spy.apply(Ee,ie,Re),Re})})})}),ge=(be,tt)=>{tt.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Ce=>{Object.defineProperty(be.prototype,Ce,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Ce))})})};class se{constructor(tt){return tt}}const fe=new p.OlP("angularfire2.app.options"),ce=new p.OlP("angularfire2.app.name");function $(be,tt,Ye){const _e="object"==typeof Ye&&Ye||{};_e.name=_e.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const Ge=Y.Z.apps.filter($e=>$e&&$e.name===_e.name)[0]||tt.runOutsideAngular(()=>Y.Z.initializeApp(be,_e));try{JSON.stringify(be)!==JSON.stringify(Ge.options)&&H("error",`${Ge.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch($e){}return new se(Ge)}const H=(be,...tt)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[be](...tt)},J={provide:se,useFactory:$,deps:[fe,p.R0b,[new p.FiY,ce]]};let We=(()=>{class be{constructor(Ye){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",p.q4F.full,Ye.toString())}static initializeApp(Ye,Ce){return{ngModule:be,providers:[{provide:fe,useValue:Ye},{provide:ce,useValue:Ce}]}}}return be.\u0275fac=function(Ye){return new(Ye||be)(p.LFG(p.Lbi))},be.\u0275mod=p.oAB({type:be}),be.\u0275inj=p.cJS({providers:[J]}),be})();function Se(be,tt,Ye,Ce,_e){const[,Ee,Ge]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===be)||[];if(Ee)return function Oe(be,tt){try{return be.toString()===tt.toString()}catch(Ye){return be===tt}}(_e,Ge)||(pe("error",`${tt} was already initialized on the ${Ye} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:_e,was:Ge})),Ee;{const $e=Ce();return globalThis.\u0275AngularfireInstanceCache.push([be,$e,_e]),$e}}const Ve=!!ut.hot,pe=(be,...tt)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[be](...tt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,Ae,P)=>{P.d(Ae,{q4:()=>jl,iC:()=>zl,HU:()=>Fu,vb:()=>cd,JM:()=>so});var p=P(5e3),Y=P(5867),O=P(5861),le=P(9681),X=P(2090),ge=P(4859),se=P(1877);const fe="@firebase/installations",H="w:0.5.7",J="FIS_v2",be=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function tt(I){return I instanceof X.ZR&&I.code.includes("request-failed")}function Ye({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ce(I){return{token:I.token,requestStatus:2,expiresIn:ie(I.expiresIn),creationTime:Date.now()}}function _e(I,C){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,O.Z)(function*(I,C){const L=(yield C.json()).error;return be.create("request-failed",{requestName:I,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Ge({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function $e(I,{refreshToken:C}){const N=Ge(I);return N.append("Authorization",function me(I){return`${J} ${I}`}(C)),N}function te(I){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*(I){const C=yield I();return C.status>=500&&C.status<600?I():C})).apply(this,arguments)}function ie(I){return Number(I.replace("s","000"))}function oe(I,C){return Re.apply(this,arguments)}function Re(){return(Re=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:C},{fid:N}){const L=Ye(I),K=Ge(I),ee=C.getImmediate({optional:!0});if(ee){const Tt=yield ee.getHeartbeatsHeader();Tt&&K.append("x-firebase-client",Tt)}const xe={method:"POST",headers:K,body:JSON.stringify({fid:N,authVersion:J,appId:I.appId,sdkVersion:H})},Je=yield te(()=>fetch(L,xe));if(Je.ok){const Tt=yield Je.json();return{fid:Tt.fid||N,registrationStatus:2,refreshToken:Tt.refreshToken,authToken:Ce(Tt.authToken)}}throw yield _e("Create Installation",Je)})).apply(this,arguments)}function ue(I){return new Promise(C=>{setTimeout(C,I)})}const Xt=/^[cdef][\w-]{21}$/;function lt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const N=function vt(I){return function At(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Xt.test(N)?N:""}catch(I){return""}}function cn(I){return`${I.appName}!${I.appId}`}const dn=new Map;function xi(I,C){const N=cn(I);en(N,C),function Gt(I,C){const N=function ui(){return!gr&&"BroadcastChannel"in self&&(gr=new BroadcastChannel("[Firebase] FID Change"),gr.onmessage=I=>{en(I.data.key,I.data.fid)}),gr}();N&&N.postMessage({key:I,fid:C}),function Fs(){0===dn.size&&gr&&(gr.close(),gr=null)}()}(N,C)}function en(I,C){const N=dn.get(I);if(N)for(const L of N)L(C)}let gr=null;const Lr="firebase-installations-store";let hs=null;function fs(){return hs||(hs=(0,X.X3)("firebase-installations-database",1,(I,C)=>{0===C&&I.createObjectStore(Lr)})),hs}function dt(I,C){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,O.Z)(function*(I,C){const N=cn(I),K=(yield fs()).transaction(Lr,"readwrite"),ee=K.objectStore(Lr),Me=yield ee.get(N);return yield ee.put(C,N),yield K.complete,(!Me||Me.fid!==C.fid)&&xi(I,C.fid),C})).apply(this,arguments)}function sr(I){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,O.Z)(function*(I){const C=cn(I),L=(yield fs()).transaction(Lr,"readwrite");yield L.objectStore(Lr).delete(C),yield L.complete})).apply(this,arguments)}function li(I,C){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,O.Z)(function*(I,C){const N=cn(I),K=(yield fs()).transaction(Lr,"readwrite"),ee=K.objectStore(Lr),Me=yield ee.get(N),xe=C(Me);return void 0===xe?yield ee.delete(N):yield ee.put(xe,N),yield K.complete,xe&&(!Me||Me.fid!==xe.fid)&&xi(I,xe.fid),xe})).apply(this,arguments)}function wn(I){return or.apply(this,arguments)}function or(){return(or=(0,O.Z)(function*(I){let C;const N=yield li(I.appConfig,L=>{const K=Ls(L),ee=Na(I,K);return C=ee.registrationPromise,ee.installationEntry});return""===N.fid?{installationEntry:yield C}:{installationEntry:N,registrationPromise:C}})).apply(this,arguments)}function Ls(I){return $t(I||{fid:lt(),registrationStatus:0})}function Na(I,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(be.create("app-offline"))};const N={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},L=function qt(I,C){return ot.apply(this,arguments)}(I,N);return{installationEntry:N,registrationPromise:L}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:It(I)}:{installationEntry:C}}function ot(){return(ot=(0,O.Z)(function*(I,C){try{const N=yield oe(I,C);return dt(I.appConfig,N)}catch(N){throw tt(N)&&409===N.customData.serverCode?yield sr(I.appConfig):yield dt(I.appConfig,{fid:C.fid,registrationStatus:0}),N}})).apply(this,arguments)}function It(I){return mr.apply(this,arguments)}function mr(){return(mr=(0,O.Z)(function*(I){let C=yield Zi(I.appConfig);for(;1===C.registrationStatus;)yield ue(100),C=yield Zi(I.appConfig);if(0===C.registrationStatus){const{installationEntry:N,registrationPromise:L}=yield wn(I);return L||N}return C})).apply(this,arguments)}function Zi(I){return li(I,C=>{if(!C)throw be.create("installation-not-found");return $t(C)})}function $t(I){return function wo(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Ir(I,C){return yr.apply(this,arguments)}function yr(){return(yr=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:C},N){const L=ht(I,N),K=$e(I,N),ee=C.getImmediate({optional:!0});if(ee){const Tt=yield ee.getHeartbeatsHeader();Tt&&K.append("x-firebase-client",Tt)}const xe={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:H,appId:I.appId}})},Je=yield te(()=>fetch(L,xe));if(Je.ok)return Ce(yield Je.json());throw yield _e("Generate Auth Token",Je)})).apply(this,arguments)}function ht(I,{fid:C}){return`${Ye(I)}/${C}/authTokens:generate`}function Cr(I){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,O.Z)(function*(I,C=!1){let N;const L=yield li(I.appConfig,ee=>{if(!Vt(ee))throw be.create("not-registered");const Me=ee.authToken;if(!C&&j(Me))return ee;if(1===Me.requestStatus)return N=Qe(I,C),ee;{if(!navigator.onLine)throw be.create("app-offline");const xe=q(ee);return N=ft(I,xe),xe}});return N?yield N:L.authToken})).apply(this,arguments)}function Qe(I,C){return Te.apply(this,arguments)}function Te(){return(Te=(0,O.Z)(function*(I,C){let N=yield Xe(I.appConfig);for(;1===N.authToken.requestStatus;)yield ue(100),N=yield Xe(I.appConfig);const L=N.authToken;return 0===L.requestStatus?Cr(I,C):L})).apply(this,arguments)}function Xe(I){return li(I,C=>{if(!Vt(C))throw be.create("not-registered");return function de(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function ft(I,C){return jt.apply(this,arguments)}function jt(){return(jt=(0,O.Z)(function*(I,C){try{const N=yield Ir(I,C),L=Object.assign(Object.assign({},C),{authToken:N});return yield dt(I.appConfig,L),N}catch(N){if(!tt(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const L=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield dt(I.appConfig,L)}else yield sr(I.appConfig);throw N}})).apply(this,arguments)}function Vt(I){return void 0!==I&&2===I.registrationStatus}function j(I){return 2===I.requestStatus&&!function V(I){const C=Date.now();return C<I.creationTime||I.creationTime+I.expiresIn<C+36e5}(I)}function q(I){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:C})}function Ue(){return(Ue=(0,O.Z)(function*(I){const C=I,{installationEntry:N,registrationPromise:L}=yield wn(C);return L?L.catch(console.error):Cr(C).catch(console.error),N.fid})).apply(this,arguments)}function Yt(){return(Yt=(0,O.Z)(function*(I,C=!1){const N=I;return yield Tr(N),(yield Cr(N,C)).token})).apply(this,arguments)}function Tr(I){return zt.apply(this,arguments)}function zt(){return(zt=(0,O.Z)(function*(I){const{registrationPromise:C}=yield wn(I);C&&(yield C)})).apply(this,arguments)}function er(I){return be.create("missing-app-config-values",{valueName:I})}const Oa="installations",Pe=I=>{const C=I.getProvider("app").getImmediate(),N=function ps(I){if(!I||!I.options)throw er("App Configuration");if(!I.name)throw er("App Name");const C=["projectId","apiKey","appId"];for(const N of C)if(!I.options[N])throw er(N);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(C);return{app:C,appConfig:N,heartbeatServiceProvider:(0,le._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},kt=I=>{const C=I.getProvider("app").getImmediate(),N=(0,le._getProvider)(C,Oa).getImmediate();return{getId:()=>function Q(I){return Ue.apply(this,arguments)}(N),getToken:K=>function Et(I){return Yt.apply(this,arguments)}(N,K)}};(function pn(){(0,le._registerComponent)(new ge.wA(Oa,Pe,"PUBLIC")),(0,le._registerComponent)(new ge.wA("installations-internal",kt,"PRIVATE"))})(),(0,le.registerVersion)(fe,"0.5.7"),(0,le.registerVersion)(fe,"0.5.7","esm2017");const _r="@firebase/remote-config",Vn=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Lh{constructor(C,N,L,K){this.client=C,this.storage=N,this.storageCache=L,this.logger=K}isCachedDataFresh(C,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-N,K=L<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${K}.`),K}fetch(C){var N=this;return(0,O.Z)(function*(){const[L,K]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(K&&N.isCachedDataFresh(C.cacheMaxAgeMillis,L))return K;C.eTag=K&&K.eTag;const ee=yield N.client.fetch(C),Me=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Me.push(N.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Me),ee})()}}function Hc(I=navigator){return I.languages&&I.languages[0]||I.language}class mu{constructor(C,N,L,K,ee,Me){this.firebaseInstallations=C,this.sdkVersion=N,this.namespace=L,this.projectId=K,this.apiKey=ee,this.appId=Me}fetch(C){var N=this;return(0,O.Z)(function*(){const[L,K]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Je={sdk_version:N.sdkVersion,app_instance_id:L,app_instance_id_token:K,app_id:N.appId,language_code:Hc()},Tt={method:"POST",headers:xe,body:JSON.stringify(Je)},Pt=fetch(Me,Tt),Mt=new Promise((vi,Bi)=>{C.signal.addEventListener(()=>{const Fo=new Error("The operation was aborted.");Fo.name="AbortError",Bi(Fo)})});let Kn;try{yield Promise.race([Pt,Mt]),Kn=yield Pt}catch(vi){let Bi="fetch-client-network";throw"AbortError"===vi.name&&(Bi="fetch-timeout"),Vn.create(Bi,{originalErrorMessage:vi.message})}let Rn=Kn.status;const ca=Kn.headers.get("ETag")||void 0;let ko,jr;if(200===Kn.status){let vi;try{vi=yield Kn.json()}catch(Bi){throw Vn.create("fetch-client-parse",{originalErrorMessage:Bi.message})}ko=vi.entries,jr=vi.state}if("INSTANCE_STATE_UNSPECIFIED"===jr?Rn=500:"NO_CHANGE"===jr?Rn=304:("NO_TEMPLATE"===jr||"EMPTY_CONFIG"===jr)&&(ko={}),304!==Rn&&200!==Rn)throw Vn.create("fetch-status",{httpStatus:Rn});return{status:Rn,eTag:ca,config:ko}})()}}class Hp{constructor(C,N){this.client=C,this.storage=N}fetch(C){var N=this;return(0,O.Z)(function*(){const L=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(C,L)})()}attemptFetch(C,{throttleEndTimeMillis:N,backoffCount:L}){var K=this;return(0,O.Z)(function*(){yield function qn(I,C){return new Promise((N,L)=>{const K=Math.max(C-Date.now(),0),ee=setTimeout(N,K);I.addEventListener(()=>{clearTimeout(ee),L(Vn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,N);try{const ee=yield K.client.fetch(C);return yield K.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function Gc(I){if(!(I instanceof X.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ee))throw ee;const Me={throttleEndTimeMillis:Date.now()+(0,X.$s)(L),backoffCount:L+1};return yield K.storage.setThrottleMetadata(Me),K.attemptFetch(C,Me)}})()}}class ka{constructor(C,N,L,K,ee){this.app=C,this._client=N,this._storageCache=L,this._storage=K,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _l(I,C){const N=I.target.error||void 0;return Vn.create(C,{originalErrorMessage:N&&N.message})}const Hs="app_namespace_store";class Vh{constructor(C,N,L,K=function zp(){return new Promise((I,C)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=L=>{C(_l(L,"storage-open"))},N.onsuccess=L=>{I(L.target.result)},N.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(Hs,{keyPath:"compositeKey"})}}catch(N){C(Vn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=C,this.appName=N,this.namespace=L,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var N=this;return(0,O.Z)(function*(){const L=yield N.openDbPromise;return new Promise((K,ee)=>{const xe=L.transaction([Hs],"readonly").objectStore(Hs),Je=N.createCompositeKey(C);try{const Tt=xe.get(Je);Tt.onerror=Pt=>{ee(_l(Pt,"storage-get"))},Tt.onsuccess=Pt=>{const Mt=Pt.target.result;K(Mt?Mt.value:void 0)}}catch(Tt){ee(Vn.create("storage-get",{originalErrorMessage:Tt&&Tt.message}))}})})()}set(C,N){var L=this;return(0,O.Z)(function*(){const K=yield L.openDbPromise;return new Promise((ee,Me)=>{const Je=K.transaction([Hs],"readwrite").objectStore(Hs),Tt=L.createCompositeKey(C);try{const Pt=Je.put({compositeKey:Tt,value:N});Pt.onerror=Mt=>{Me(_l(Mt,"storage-set"))},Pt.onsuccess=()=>{ee()}}catch(Pt){Me(Vn.create("storage-set",{originalErrorMessage:Pt&&Pt.message}))}})})()}delete(C){var N=this;return(0,O.Z)(function*(){const L=yield N.openDbPromise;return new Promise((K,ee)=>{const xe=L.transaction([Hs],"readwrite").objectStore(Hs),Je=N.createCompositeKey(C);try{const Tt=xe.delete(Je);Tt.onerror=Pt=>{ee(_l(Pt,"storage-delete"))},Tt.onsuccess=()=>{K()}}catch(Tt){ee(Vn.create("storage-delete",{originalErrorMessage:Tt&&Tt.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class zc{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const N=C.storage.getLastFetchStatus(),L=C.storage.getLastSuccessfulFetchTimestampMillis(),K=C.storage.getActiveConfig(),ee=yield N;ee&&(C.lastFetchStatus=ee);const Me=yield L;Me&&(C.lastSuccessfulFetchTimestampMillis=Me);const xe=yield K;xe&&(C.activeConfig=xe)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Do(){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,O.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Zo(){(0,le._registerComponent)(new ge.wA("remote-config",function I(C,{instanceIdentifier:N}){const L=C.getProvider("app").getImmediate(),K=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Vn.create("registration-window");if(!(0,X.hl)())throw Vn.create("indexed-db-unavailable");const{projectId:ee,apiKey:Me,appId:xe}=L.options;if(!ee)throw Vn.create("registration-project-id");if(!Me)throw Vn.create("registration-api-key");if(!xe)throw Vn.create("registration-app-id");const Je=new Vh(xe,L.name,N=N||"firebase"),Tt=new zc(Je),Pt=new se.Yd(_r);Pt.logLevel=se.in.ERROR;const Mt=new mu(K,le.SDK_VERSION,N,ee,Me,xe),Kn=new Hp(Mt,Je),Rn=new Lh(Kn,Je,Tt,Pt),ca=new ka(L,Rn,Tt,Je,Pt);return function Ni(I){const C=(0,X.m9)(I);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(ca),ca},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(_r,"0.3.6"),(0,le.registerVersion)(_r,"0.3.6","esm2017")}();const vl="/firebase-messaging-sw.js",Gs="/firebase-cloud-messaging-push-scope",Qr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Io="google.c.a.c_id",Fa="google.c.a.c_l",Wc="google.c.a.ts",Wp="google.c.a.e";var qs=(()=>{return(I=qs||(qs={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",qs;var I})();function hi(I){const C=new Uint8Array(I);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _u(I){const N=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(N),K=new Uint8Array(L.length);for(let ee=0;ee<L.length;++ee)K[ee]=L.charCodeAt(ee);return K}const vu="fcm_token_details_db",vr="fcm_token_object_Store";function Bh(I){return Eu.apply(this,arguments)}function Eu(){return Eu=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(vu))return null;let C=null;return(yield(0,X.X3)(vu,5,function(){var L=(0,O.Z)(function*(K,ee,Me,xe){var Je;if(ee<2||!K.objectStoreNames.contains(vr))return;const Tt=xe.objectStore(vr),Pt=yield Tt.index("fcmSenderId").get(I);if(yield Tt.clear(),Pt)if(2===ee){const Mt=Pt;if(!Mt.auth||!Mt.p256dh||!Mt.endpoint)return;C={token:Mt.fcmToken,createTime:null!==(Je=Mt.createTime)&&void 0!==Je?Je:Date.now(),subscriptionOptions:{auth:Mt.auth,p256dh:Mt.p256dh,endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:"string"==typeof Mt.vapidKey?Mt.vapidKey:hi(Mt.vapidKey)}}}else if(3===ee){const Mt=Pt;C={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:hi(Mt.auth),p256dh:hi(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:hi(Mt.vapidKey)}}}else if(4===ee){const Mt=Pt;C={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:hi(Mt.auth),p256dh:hi(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:hi(Mt.vapidKey)}}}});return function(K,ee,Me,xe){return L.apply(this,arguments)}}())).close(),yield(0,X.Lj)(vu),yield(0,X.Lj)("fcm_vapid_details_db"),yield(0,X.Lj)("undefined"),Kc(C)?C:null}),Eu.apply(this,arguments)}function Kc(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:C}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const _s="firebase-messaging-store";let La=null;function El(){return La||(La=(0,X.X3)("firebase-messaging-database",1,(I,C)=>{0===C&&I.createObjectStore(_s)})),La}function yn(I){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,O.Z)(function*(I){const C=To(I),L=yield(yield El()).transaction(_s).objectStore(_s).get(C);if(L)return L;{const K=yield Bh(I.appConfig.senderId);if(K)return yield zs(I,K),K}})).apply(this,arguments)}function zs(I,C){return ln.apply(this,arguments)}function ln(){return(ln=(0,O.Z)(function*(I,C){const N=To(I),K=(yield El()).transaction(_s,"readwrite");return yield K.objectStore(_s).put(C,N),yield K.complete,C})).apply(this,arguments)}function Zc(I){return Co.apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(I){const C=To(I),L=(yield El()).transaction(_s,"readwrite");yield L.objectStore(_s).delete(C),yield L.complete})).apply(this,arguments)}function To({appConfig:I}){return I.appId}const Un=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Va(I,C){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,O.Z)(function*(I,C){const N=yield Ks(I),L=pt(C),K={method:"POST",headers:N,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(Jr(I.appConfig),K)).json()}catch(Me){throw Un.create("token-subscribe-failed",{errorInfo:Me})}if(ee.error)throw Un.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw Un.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Mr(I,C){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,O.Z)(function*(I,C){const N=yield Ks(I),L=pt(C.subscriptionOptions),K={method:"PATCH",headers:N,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(`${Jr(I.appConfig)}/${C.token}`,K)).json()}catch(Me){throw Un.create("token-update-failed",{errorInfo:Me})}if(ee.error)throw Un.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw Un.create("token-update-no-token");return ee.token})).apply(this,arguments)}function vs(I,C){return Du.apply(this,arguments)}function Du(){return(Du=(0,O.Z)(function*(I,C){const L={method:"DELETE",headers:yield Ks(I)};try{const ee=yield(yield fetch(`${Jr(I.appConfig)}/${C}`,L)).json();if(ee.error)throw Un.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(K){throw Un.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function Jr({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Ks(I){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*({appConfig:I,installations:C}){const N=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function pt({p256dh:I,auth:C,endpoint:N,vapidKey:L}){const K={web:{endpoint:N,auth:C,p256dh:I}};return L!==Qr&&(K.web.applicationPubKey=L),K}const Iu=6048e5;function Ua(I){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,O.Z)(function*(I){const C=yield Yc(I.swRegistration,I.vapidKey),N={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:C.endpoint,auth:hi(C.getKey("auth")),p256dh:hi(C.getKey("p256dh"))},L=yield yn(I.firebaseDependencies);if(L){if(Jo(L.subscriptionOptions,N))return Date.now()>=L.createTime+Iu?wl(I,{token:L.token,createTime:Date.now(),subscriptionOptions:N}):L.token;try{yield vs(I.firebaseDependencies,L.token)}catch(K){console.warn(K)}return De(I.firebaseDependencies,N)}return De(I.firebaseDependencies,N)})).apply(this,arguments)}function Tu(I){return Au.apply(this,arguments)}function Au(){return(Au=(0,O.Z)(function*(I){const C=yield yn(I.firebaseDependencies);C&&(yield vs(I.firebaseDependencies,C.token),yield Zc(I.firebaseDependencies));const N=yield I.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function wl(I,C){return bl.apply(this,arguments)}function bl(){return(bl=(0,O.Z)(function*(I,C){try{const N=yield Mr(I.firebaseDependencies,C),L=Object.assign(Object.assign({},C),{token:N,createTime:Date.now()});return yield zs(I.firebaseDependencies,L),N}catch(N){throw yield Tu(I),N}})).apply(this,arguments)}function De(I,C){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,O.Z)(function*(I,C){const L={token:yield Va(I,C),createTime:Date.now(),subscriptionOptions:C};return yield zs(I,L),L.token})).apply(this,arguments)}function Yc(I,C){return bn.apply(this,arguments)}function bn(){return(bn=(0,O.Z)(function*(I,C){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_u(C)})})).apply(this,arguments)}function Jo(I,C){return C.vapidKey===I.vapidKey&&C.endpoint===I.endpoint&&C.auth===I.auth&&C.p256dh===I.p256dh}function Xo(I){const C={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Xr(I,C){if(!C.notification)return;I.notification={};const N=C.notification.title;N&&(I.notification.title=N);const L=C.notification.body;L&&(I.notification.body=L);const K=C.notification.image;K&&(I.notification.image=K)}(C,I),function Dl(I,C){!C.data||(I.data=C.data)}(C,I),function Il(I,C){if(!C.fcmOptions)return;I.fcmOptions={};const N=C.fcmOptions.link;N&&(I.fcmOptions.link=N);const L=C.fcmOptions.analytics_label;L&&(I.fcmOptions.analyticsLabel=L)}(C,I),C}function Qc(I){return"object"==typeof I&&!!I&&Io in I}function Cl(I,C){const N=[];for(let L=0;L<I.length;L++)N.push(I.charAt(L)),L<C.length&&N.push(C.charAt(L));return N.join("")}function Ys(I){return Un.create("missing-app-config-values",{valueName:I})}Cl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Cl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Er{constructor(C,N,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Su(I){if(!I||!I.options)throw Ys("App Configuration Object");if(!I.name)throw Ys("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:N}=I;for(const L of C)if(!N[L])throw Ys(L);return{appName:I.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:K,installations:N,analyticsProvider:L}}_delete(){return Promise.resolve()}}function fi(I){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(vl,{scope:Gs}),I.swRegistration.update().catch(()=>{})}catch(C){throw Un.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function Qs(I,C){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,O.Z)(function*(I,C){if(!C&&!I.swRegistration&&(yield fi(I)),C||!I.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Un.create("invalid-sw-registration");I.swRegistration=C}})).apply(this,arguments)}function Tl(I,C){return xu.apply(this,arguments)}function xu(){return(xu=(0,O.Z)(function*(I,C){C?I.vapidKey=C:I.vapidKey||(I.vapidKey=Qr)})).apply(this,arguments)}function Al(){return(Al=(0,O.Z)(function*(I,C){if(!navigator)throw Un.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Un.create("permission-blocked");return yield Tl(I,null==C?void 0:C.vapidKey),yield Qs(I,null==C?void 0:C.serviceWorkerRegistration),Ua(I)})).apply(this,arguments)}function Ba(I,C,N){return ea.apply(this,arguments)}function ea(){return(ea=(0,O.Z)(function*(I,C,N){const L=Sl(C);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:N[Io],message_name:N[Fa],message_time:N[Wc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Sl(I){switch(I){case qs.NOTIFICATION_CLICKED:return"notification_open";case qs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Jc(){return(Jc=(0,O.Z)(function*(I,C){const N=C.data;if(!N.isFirebaseMessaging)return;I.onMessageHandler&&N.messageType===qs.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Xo(N)):I.onMessageHandler.next(Xo(N)));const L=N.data;Qc(L)&&"1"===L[Wp]&&(yield Ba(I,N.messageType,L))})).apply(this,arguments)}const xl="@firebase/messaging",Xc=I=>{const C=new Er(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function Ml(I,C){return Jc.apply(this,arguments)}(C,N)),C},So=I=>{const C=I.getProvider("messaging").getImmediate();return{getToken:L=>function Nu(I,C){return Al.apply(this,arguments)}(C,L)}};function td(){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,O.Z)(function*(){try{yield(0,X.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ed(){(0,le._registerComponent)(new ge.wA("messaging",Xc,"PUBLIC")),(0,le._registerComponent)(new ge.wA("messaging-internal",So,"PRIVATE")),(0,le.registerVersion)(xl,"0.9.11"),(0,le.registerVersion)(xl,"0.9.11","esm2017")}();const Rl="analytics",Dy="firebase_id",ja="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ru="https://www.googletagmanager.com/gtag/js",zn=new se.Yd("@firebase/analytics");function nd(I){return Promise.all(I.map(C=>C.catch(N=>N)))}function Kp(I,C){const N=document.createElement("script");N.src=`${Ru}?l=${I}&id=${C}`,N.async=!0,document.head.appendChild(N)}function ta(I,C,N,L,K,ee){return rd.apply(this,arguments)}function rd(){return(rd=(0,O.Z)(function*(I,C,N,L,K,ee){const Me=L[K];try{if(Me)yield C[Me];else{const Je=(yield nd(N)).find(Tt=>Tt.measurementId===K);Je&&(yield C[Je.appId])}}catch(xe){zn.error(xe)}I("config",K,ee)})).apply(this,arguments)}function Pl(I,C,N,L,K){return xo.apply(this,arguments)}function xo(){return(xo=(0,O.Z)(function*(I,C,N,L,K){try{let ee=[];if(K&&K.send_to){let Me=K.send_to;Array.isArray(Me)||(Me=[Me]);const xe=yield nd(N);for(const Je of Me){const Tt=xe.find(Mt=>Mt.measurementId===Je),Pt=Tt&&C[Tt.appId];if(!Pt){ee=[];break}ee.push(Pt)}}0===ee.length&&(ee=Object.values(C)),yield Promise.all(ee),I("event",L,K||{})}catch(ee){zn.error(ee)}})).apply(this,arguments)}function Zp(){const I=window.document.getElementsByTagName("script");for(const C of Object.values(I))if(C.src&&C.src.includes(Ru))return C;return null}const jn=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ur=new class ei{constructor(C={},N=1e3){this.throttleMetadata=C,this.intervalMillis=N}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,N){this.throttleMetadata[C]=N}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function na(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function sd(I){return gn.apply(this,arguments)}function gn(){return(gn=(0,O.Z)(function*(I){var C;const{appId:N,apiKey:L}=I,K={method:"GET",headers:na(L)},ee=ja.replace("{app-id}",N),Me=yield fetch(ee,K);if(200!==Me.status&&304!==Me.status){let xe="";try{const Je=yield Me.json();(null===(C=Je.error)||void 0===C?void 0:C.message)&&(xe=Je.error.message)}catch(Je){}throw jn.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:xe})}return Me.json()})).apply(this,arguments)}function Hh(I){return ki.apply(this,arguments)}function ki(){return(ki=(0,O.Z)(function*(I,C=Ur,N){const{appId:L,apiKey:K,measurementId:ee}=I.options;if(!L)throw jn.create("no-app-id");if(!K){if(ee)return{measurementId:ee,appId:L};throw jn.create("no-api-key")}const Me=C.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},xe=new kl;return setTimeout((0,O.Z)(function*(){xe.abort()}),void 0!==N?N:6e4),Ou({appId:L,apiKey:K,measurementId:ee},Me,xe,C)})).apply(this,arguments)}function Ou(I,C,N){return pi.apply(this,arguments)}function pi(){return(pi=(0,O.Z)(function*(I,{throttleEndTimeMillis:C,backoffCount:N},L,K=Ur){const{appId:ee,measurementId:Me}=I;try{yield Ft(L,C)}catch(xe){if(Me)return zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:ee,measurementId:Me};throw xe}try{const xe=yield sd(I);return K.deleteThrottleMetadata(ee),xe}catch(xe){if(!od(xe)){if(K.deleteThrottleMetadata(ee),Me)return zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:ee,measurementId:Me};throw xe}const Je=503===Number(xe.customData.httpStatus)?(0,X.$s)(N,K.intervalMillis,30):(0,X.$s)(N,K.intervalMillis),Tt={throttleEndTimeMillis:Date.now()+Je,backoffCount:N+1};return K.setThrottleMetadata(ee,Tt),zn.debug(`Calling attemptFetch again in ${Je} millis`),Ou(I,Tt,L,K)}})).apply(this,arguments)}function Ft(I,C){return new Promise((N,L)=>{const K=Math.max(C-Date.now(),0),ee=setTimeout(N,K);I.addEventListener(()=>{clearTimeout(ee),L(jn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function od(I){if(!(I instanceof X.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}class kl{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function Fl(){return No.apply(this,arguments)}function No(){return(No=(0,O.Z)(function*(){if(!(0,X.hl)())return zn.warn(jn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(I){return zn.warn(jn.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function bs(){return(bs=(0,O.Z)(function*(I,C,N,L,K,ee,Me){var xe;const Je=Hh(I);Je.then(Rn=>{N[Rn.measurementId]=Rn.appId,I.options.measurementId&&Rn.measurementId!==I.options.measurementId&&zn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Rn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Rn=>zn.error(Rn)),C.push(Je);const Tt=Fl().then(Rn=>{if(Rn)return L.getId()}),[Pt,Mt]=yield Promise.all([Je,Tt]);Zp()||Kp(ee,Pt.measurementId),K("js",new Date);const Kn=null!==(xe=null==Me?void 0:Me.config)&&void 0!==xe?xe:{};return Kn.origin="firebase",Kn.update=!0,null!=Mt&&(Kn[Dy]=Mt),K("config",Pt.measurementId,Kn),Pt.measurementId})).apply(this,arguments)}class ra{constructor(C){this.app=C}_delete(){return delete gi[this.app.options.appId],Promise.resolve()}}let gi={},eo=[];const mi={};let to,Ji,Qi="dataLayer",Vl=!1;function Fi(I,C,N){!function Ro(){const I=[];if((0,X.ru)()&&I.push("This is a browser extension environment."),(0,X.zI)()||I.push("Cookies are not available."),I.length>0){const C=I.map((L,K)=>`(${K+1}) ${L}`).join(" "),N=jn.create("invalid-analytics-context",{errorInfo:C});zn.warn(N.message)}}();const L=I.options.appId;if(!L)throw jn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw jn.create("no-api-key");zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=gi[L])throw jn.create("already-exists",{id:L});if(!Vl){!function ws(I){let C=[];Array.isArray(window[I])?C=window[I]:window[I]=C}(Qi);const{wrappedGtag:ee,gtagCore:Me}=function $h(I,C,N,L,K){let ee=function(...Me){window[L].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ee=window[K]),window[K]=function id(I,C,N,L){function ee(){return(ee=(0,O.Z)(function*(Me,xe,Je){try{"event"===Me?yield Pl(I,C,N,xe,Je):"config"===Me?yield ta(I,C,N,L,xe,Je):I("set",xe)}catch(Tt){zn.error(Tt)}})).apply(this,arguments)}return function K(Me,xe,Je){return ee.apply(this,arguments)}}(ee,I,C,N),{gtagCore:ee,wrappedGtag:window[K]}}(gi,eo,mi,Qi,"gtag");Ji=ee,to=Me,Vl=!0}return gi[L]=function Wn(I,C,N,L,K,ee,Me){return bs.apply(this,arguments)}(I,eo,mi,C,to,Qi,N),new ra(I)}function sa(){return(sa=(0,O.Z)(function*(I,C,N,L,K){if(K&&K.global)I("event",N,L);else{const ee=yield C;I("event",N,Object.assign(Object.assign({},L),{send_to:ee}))}})).apply(this,arguments)}function An(){return no.apply(this,arguments)}function no(){return(no=(0,O.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(I){return!1}})).apply(this,arguments)}const ro="@firebase/analytics";!function Xp(){(0,le._registerComponent)(new ge.wA(Rl,(C,{options:N})=>Fi(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,le._registerComponent)(new ge.wA("analytics-internal",function I(C){try{const N=C.getProvider(Rl).getImmediate();return{logEvent:(L,K,ee)=>function Jp(I,C,N,L){I=(0,X.m9)(I),function ia(I,C,N,L,K){return sa.apply(this,arguments)}(Ji,gi[I.app.options.appId],C,N,L).catch(K=>zn.error(K))}(N,L,K,ee)}}catch(N){throw jn.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,le.registerVersion)(ro,"0.7.7"),(0,le.registerVersion)(ro,"0.7.7","esm2017")}();var io=P(4408),Pu=P(7565);const Ul=new class Sn extends Pu.v{}(class Ds extends io.o{constructor(C,N){super(C,N),this.scheduler=C,this.work=N}schedule(C,N=0){return N>0?super.schedule(C,N):(this.delay=N,this.state=C,this.scheduler.flush(this),this)}execute(C,N){return N>0||this.closed?super.execute(C,N):this._execute(C,N)}requestAsyncId(C,N,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(C,N,L):C.flush(this)}});var eg=P(4986),Bl=P(8505),Rr=P(9468),yi=P(5363);const jl=new p.GfV("7.3.0"),Is="__angularfire_symbol__analyticsIsSupportedValue",Ui="__angularfire_symbol__analyticsIsSupported",ts="__angularfire_symbol__remoteConfigIsSupportedValue",$a="__angularfire_symbol__remoteConfigIsSupported",$l="__angularfire_symbol__messagingIsSupportedValue",Hl="__angularfire_symbol__messagingIsSupported";function so(I,C,N){if(C){if(1===C.length)return C[0];const ee=C.filter(Me=>Me.app===N);if(1===ee.length)return ee[0]}return N.container.getProvider(I).getImmediate({optional:!0})}globalThis[Ui]||(globalThis[Ui]=An().then(I=>globalThis[Is]=I).catch(()=>globalThis[Is]=!1)),globalThis[Hl]||(globalThis[Hl]=td().then(I=>globalThis[$l]=I).catch(()=>globalThis[$l]=!1)),globalThis[$a]||(globalThis[$a]=Do().then(I=>globalThis[ts]=I).catch(()=>globalThis[ts]=!1));const cd=(I,C)=>{const N=C?[C]:(0,Y.C6)(),L=[];return N.forEach(K=>{K.container.getProvider(I).instances.forEach(Me=>{L.includes(Me)||L.push(Me)})}),L};function Oo(){}class ku{constructor(C,N=Ul){this.zone=C,this.delegate=N}now(){return this.delegate.now()}schedule(C,N,L){const K=this.zone;return this.delegate.schedule(function(Me){K.runGuarded(()=>{C.apply(this,[Me])})},N,L)}}class ns{constructor(C){this.zone=C,this.task=null}call(C,N){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Oo,{},Oo,Oo)),N.pipe((0,Bl.b)({next:L,complete:L,error:L})).subscribe(C).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fu=(()=>{class I{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new ku(Zone.current)),this.insideAngular=N.run(()=>new ku(Zone.current,eg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(N){return new(N||I)(p.LFG(p.R0b))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function rs(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function zl(I){return rs(),function Po(I){return function(N){return(N=N.lift(new ns(I.ngZone))).pipe((0,Rr.R)(I.outsideAngular),(0,yi.Q)(I.insideAngular))}}(rs())(I)}},2090:(ut,Ae,P)=>{P.d(Ae,{BH:()=>Se,LL:()=>At,ZR:()=>ue,zI:()=>me,US:()=>se,tV:()=>$,L:()=>ce,$s:()=>wo,r3:()=>en,Sg:()=>Oe,ne:()=>dt,vZ:()=>Fs,ZB:()=>J,Lj:()=>jt,pd:()=>hs,m9:()=>ht,z$:()=>Ve,jU:()=>tt,ru:()=>Ye,d:()=>_e,xb:()=>gr,w1:()=>Ee,hl:()=>W,uI:()=>pe,UG:()=>be,b$:()=>Ce,G6:()=>te,Mn:()=>Ge,X3:()=>ft,xO:()=>Ki,zd:()=>Lr,eu:()=>ie});var p=P(5861);const X=function(j){const V=[];let q=0;for(let de=0;de<j.length;de++){let Q=j.charCodeAt(de);Q<128?V[q++]=Q:Q<2048?(V[q++]=Q>>6|192,V[q++]=63&Q|128):55296==(64512&Q)&&de+1<j.length&&56320==(64512&j.charCodeAt(de+1))?(Q=65536+((1023&Q)<<10)+(1023&j.charCodeAt(++de)),V[q++]=Q>>18|240,V[q++]=Q>>12&63|128,V[q++]=Q>>6&63|128,V[q++]=63&Q|128):(V[q++]=Q>>12|224,V[q++]=Q>>6&63|128,V[q++]=63&Q|128)}return V},se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,V){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let Q=0;Q<j.length;Q+=3){const Ue=j[Q],Et=Q+1<j.length,Yt=Et?j[Q+1]:0,Tr=Q+2<j.length,zt=Tr?j[Q+2]:0;let fn=(15&Yt)<<2|zt>>6,ar=63&zt;Tr||(ar=64,Et||(fn=64)),de.push(q[Ue>>2],q[(3&Ue)<<4|Yt>>4],q[fn],q[ar])}return de.join("")},encodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(j):this.encodeByteArray(X(j),V)},decodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(j):function(j){const V=[];let q=0,de=0;for(;q<j.length;){const Q=j[q++];if(Q<128)V[de++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ue=j[q++];V[de++]=String.fromCharCode((31&Q)<<6|63&Ue)}else if(Q>239&&Q<365){const Tr=((7&Q)<<18|(63&j[q++])<<12|(63&j[q++])<<6|63&j[q++])-65536;V[de++]=String.fromCharCode(55296+(Tr>>10)),V[de++]=String.fromCharCode(56320+(1023&Tr))}else{const Ue=j[q++],Et=j[q++];V[de++]=String.fromCharCode((15&Q)<<12|(63&Ue)<<6|63&Et)}}return V.join("")}(this.decodeStringToByteArray(j,V))},decodeStringToByteArray(j,V){this.init_();const q=V?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let Q=0;Q<j.length;){const Ue=q[j.charAt(Q++)],Yt=Q<j.length?q[j.charAt(Q)]:0;++Q;const zt=Q<j.length?q[j.charAt(Q)]:64;++Q;const Ot=Q<j.length?q[j.charAt(Q)]:64;if(++Q,null==Ue||null==Yt||null==zt||null==Ot)throw Error();de.push(Ue<<2|Yt>>4),64!==zt&&(de.push(Yt<<4&240|zt>>2),64!==Ot&&de.push(zt<<6&192|Ot))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},ce=function(j){return function(j){const V=X(j);return se.encodeByteArray(V,!0)}(j).replace(/\./g,"")},$=function(j){try{return se.decodeString(j,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function J(j,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return V}for(const q in V)!V.hasOwnProperty(q)||!We(q)||(j[q]=J(j[q],V[q]));return j}function We(j){return"__proto__"!==j}class Se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,q)=>{this.resolve=V,this.reject=q})}wrapCallback(V){return(q,de)=>{q?this.reject(q):this.resolve(de),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(q):V(q,de))}}}function Oe(j,V){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=V||"demo-project",Q=j.iat||0,Ue=j.sub||j.user_id;if(!Ue)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Et=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:Q,exp:Q+3600,auth_time:Q,sub:Ue,user_id:Ue,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(Et)),""].join(".")}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function pe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function tt(){return"object"==typeof self&&self.self===self}function Ye(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return Ve().indexOf("Electron/")>=0}function Ee(){const j=Ve();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ge(){return Ve().indexOf("MSAppHost/")>=0}function te(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W(){return"object"==typeof indexedDB}function ie(){return new Promise((j,V)=>{try{let q=!0;const de="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(de);Q.onsuccess=()=>{Q.result.close(),q||self.indexedDB.deleteDatabase(de),j(!0)},Q.onupgradeneeded=()=>{q=!1},Q.onerror=()=>{var Ue;V((null===(Ue=Q.error)||void 0===Ue?void 0:Ue.message)||"")}}catch(q){V(q)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ue extends Error{constructor(V,q,de){super(q),this.code=V,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,At.prototype.create)}}class At{constructor(V,q,de){this.service=V,this.serviceName=q,this.errors=de}create(V,...q){const de=q[0]||{},Q=`${this.service}/${V}`,Ue=this.errors[V],Et=Ue?function Xt(j,V){return j.replace(Ln,(q,de)=>{const Q=V[de];return null!=Q?String(Q):`<${de}?>`})}(Ue,de):"Error";return new ue(Q,`${this.serviceName}: ${Et} (${Q}).`,de)}}const Ln=/\{\$([^}]+)}/g;function en(j,V){return Object.prototype.hasOwnProperty.call(j,V)}function gr(j){for(const V in j)if(Object.prototype.hasOwnProperty.call(j,V))return!1;return!0}function Fs(j,V){if(j===V)return!0;const q=Object.keys(j),de=Object.keys(V);for(const Q of q){if(!de.includes(Q))return!1;const Ue=j[Q],Et=V[Q];if(Fr(Ue)&&Fr(Et)){if(!Fs(Ue,Et))return!1}else if(Ue!==Et)return!1}for(const Q of de)if(!q.includes(Q))return!1;return!0}function Fr(j){return null!==j&&"object"==typeof j}function Ki(j){const V=[];for(const[q,de]of Object.entries(j))Array.isArray(de)?de.forEach(Q=>{V.push(encodeURIComponent(q)+"="+encodeURIComponent(Q))}):V.push(encodeURIComponent(q)+"="+encodeURIComponent(de));return V.length?"&"+V.join("&"):""}function Lr(j){const V={};return j.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[Q,Ue]=de.split("=");V[decodeURIComponent(Q)]=decodeURIComponent(Ue)}}),V}function hs(j){const V=j.indexOf("?");if(!V)return"";const q=j.indexOf("#",V);return j.substring(V,q>0?q:void 0)}function dt(j,V){const q=new Zr(j,V);return q.subscribe.bind(q)}class Zr{constructor(V,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{V(this)}).catch(de=>{this.error(de)})}next(V){this.forEachObserver(q=>{q.next(V)})}error(V){this.forEachObserver(q=>{q.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,q,de){let Q;if(void 0===V&&void 0===q&&void 0===de)throw new Error("Missing Observer.");Q=function Xn(j,V){if("object"!=typeof j||null===j)return!1;for(const q of V)if(q in j&&"function"==typeof j[q])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:q,complete:de},void 0===Q.next&&(Q.next=li),void 0===Q.error&&(Q.error=li),void 0===Q.complete&&(Q.complete=li);const Ue=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch(Et){}}),this.observers.push(Q),Ue}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,V)}sendOne(V,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{q(this.observers[V])}catch(de){"undefined"!=typeof console&&console.error&&console.error(de)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function li(){}function wo(j,V=1e3,q=2){const de=V*Math.pow(q,j),Q=Math.round(.5*de*(Math.random()-.5)*2);return Math.min(144e5,de+Q)}function ht(j){return j&&j._delegate?j._delegate:j}function Cr(j,V){return new Promise((q,de)=>{j.onsuccess=Q=>{q(Q.target.result)},j.onerror=Q=>{var Ue;de(`${V}: ${null===(Ue=Q.target.error)||void 0===Ue?void 0:Ue.message}`)}})}class Bt{constructor(V){this._db=V,this.objectStoreNames=this._db.objectStoreNames}transaction(V,q){return new Qe(this._db.transaction.call(this._db,V,q))}createObjectStore(V,q){return new Te(this._db.createObjectStore(V,q))}close(){this._db.close()}}class Qe{constructor(V){this._transaction=V,this.complete=new Promise((q,de)=>{this._transaction.oncomplete=function(){q()},this._transaction.onerror=()=>{de(this._transaction.error)},this._transaction.onabort=()=>{de(this._transaction.error)}})}objectStore(V){return new Te(this._transaction.objectStore(V))}}class Te{constructor(V){this._store=V}index(V){return new Xe(this._store.index(V))}createIndex(V,q,de){return new Xe(this._store.createIndex(V,q,de))}get(V){return Cr(this._store.get(V),"Error reading from IndexedDB")}put(V,q){return Cr(this._store.put(V,q),"Error writing to IndexedDB")}delete(V){return Cr(this._store.delete(V),"Error deleting from IndexedDB")}clear(){return Cr(this._store.clear(),"Error clearing IndexedDB object store")}}class Xe{constructor(V){this._index=V}get(V){return Cr(this._index.get(V),"Error reading from IndexedDB")}}function ft(j,V,q){return new Promise((de,Q)=>{try{const Ue=indexedDB.open(j,V);Ue.onsuccess=Et=>{de(new Bt(Et.target.result))},Ue.onerror=Et=>{var Yt;Q(`Error opening indexedDB: ${null===(Yt=Et.target.error)||void 0===Yt?void 0:Yt.message}`)},Ue.onupgradeneeded=Et=>{q(new Bt(Ue.result),Et.oldVersion,Et.newVersion,new Qe(Ue.transaction))}}catch(Ue){Q(`Error opening indexedDB: ${Ue.message}`)}})}function jt(j){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,p.Z)(function*(j){return new Promise((V,q)=>{try{const de=indexedDB.deleteDatabase(j);de.onsuccess=()=>{V()},de.onerror=Q=>{var Ue;q(`Error deleting indexedDB database "${j}": ${null===(Ue=Q.target.error)||void 0===Ue?void 0:Ue.message}`)}}catch(de){q(`Error deleting indexedDB database "${j}": ${de.message}`)}})})).apply(this,arguments)}},9307:(ut,Ae,P)=>{var p=P(5e3);let Y=null;function O(){return Y}const se=new p.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ce(){return(0,p.LFG)(H)}()},providedIn:"platform"}),n})();const $=new p.OlP("Location Initialized");let H=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(se))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function We(){return new H((0,p.LFG)(se))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function be(n){const e=(0,p.LFG)(se).location;return new Ye((0,p.LFG)(fe),e&&e.origin||"")}()},providedIn:"root"}),n})();const tt=new p.OlP("appBaseHref");let Ye=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Ve(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Ve(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fe),p.LFG(tt,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Ve(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Ve(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fe),p.LFG(tt,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe($e(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function Ge(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Se,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(p.LFG(pe),p.LFG(fe))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Ee(){return new _e((0,p.LFG)(pe),(0,p.LFG)(fe))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}var me=(()=>((me=me||{})[me.Format=0]="Format",me[me.Standalone=1]="Standalone",me))(),oe=(()=>((oe=oe||{})[oe.Narrow=0]="Narrow",oe[oe.Abbreviated=1]="Abbreviated",oe[oe.Wide=2]="Wide",oe[oe.Short=3]="Short",oe))(),Re=(()=>((Re=Re||{})[Re.Short=0]="Short",Re[Re.Medium=1]="Medium",Re[Re.Long=2]="Long",Re[Re.Full=3]="Full",Re))(),ue=(()=>((ue=ue||{})[ue.Decimal=0]="Decimal",ue[ue.Group=1]="Group",ue[ue.List=2]="List",ue[ue.PercentSign=3]="PercentSign",ue[ue.PlusSign=4]="PlusSign",ue[ue.MinusSign=5]="MinusSign",ue[ue.Exponential=6]="Exponential",ue[ue.SuperscriptingExponent=7]="SuperscriptingExponent",ue[ue.PerMille=8]="PerMille",ue[ue.Infinity=9]="Infinity",ue[ue.NaN=10]="NaN",ue[ue.TimeSeparator=11]="TimeSeparator",ue[ue.CurrencyDecimal=12]="CurrencyDecimal",ue[ue.CurrencyGroup=13]="CurrencyGroup",ue))();function on(n,e){return sr((0,p.cg1)(n)[p.wAp.DateFormat],e)}function ds(n,e){return sr((0,p.cg1)(n)[p.wAp.TimeFormat],e)}function en(n,e){return sr((0,p.cg1)(n)[p.wAp.DateTimeFormat],e)}function Gt(n,e){const t=(0,p.cg1)(n),r=t[p.wAp.NumberSymbols][e];if(void 0===r){if(e===ue.CurrencyDecimal)return t[p.wAp.NumberSymbols][ue.Decimal];if(e===ue.CurrencyGroup)return t[p.wAp.NumberSymbols][ue.Group]}return r}function hs(n){if(!n[p.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[p.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function sr(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Xn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const or=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ls={},Na=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var qt=(()=>((qt=qt||{})[qt.Short=0]="Short",qt[qt.ShortGMT=1]="ShortGMT",qt[qt.Long=2]="Long",qt[qt.Extended=3]="Extended",qt))(),ot=(()=>((ot=ot||{})[ot.FullYear=0]="FullYear",ot[ot.Month=1]="Month",ot[ot.Date=2]="Date",ot[ot.Hours=3]="Hours",ot[ot.Minutes=4]="Minutes",ot[ot.Seconds=5]="Seconds",ot[ot.FractionalSeconds=6]="FractionalSeconds",ot[ot.Day=7]="Day",ot))(),It=(()=>((It=It||{})[It.DayPeriods=0]="DayPeriods",It[It.Days=1]="Days",It[It.Months=2]="Months",It[It.Eras=3]="Eras",It))();function mr(n,e,t,r){let i=function Yt(n){if(zt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,u=1,c=1]=n.split("-").map(f=>+f);return Zi(i,u-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(or))return function Tr(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,f=Number(n[5]||0)-r,y=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,c,f,y,b),e}(r)}const e=new Date(n);if(!zt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=$t(t,e)||e;let f,c=[];for(;e;){if(f=Na.exec(e),!f){c.push(e);break}{c=c.concat(f.slice(1));const S=c.pop();if(!S)break;e=S}}let y=i.getTimezoneOffset();r&&(y=Q(r,y),i=function Et(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function Ue(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Q(e,i)-i))}(i,r,!0));let b="";return c.forEach(S=>{const M=function de(n){if(q[n])return q[n];let e;switch(n){case"G":case"GG":case"GGG":e=Bt(It.Eras,oe.Abbreviated);break;case"GGGG":e=Bt(It.Eras,oe.Wide);break;case"GGGGG":e=Bt(It.Eras,oe.Narrow);break;case"y":e=ht(ot.FullYear,1,0,!1,!0);break;case"yy":e=ht(ot.FullYear,2,0,!0,!0);break;case"yyy":e=ht(ot.FullYear,3,0,!1,!0);break;case"yyyy":e=ht(ot.FullYear,4,0,!1,!0);break;case"Y":e=V(1);break;case"YY":e=V(2,!0);break;case"YYY":e=V(3);break;case"YYYY":e=V(4);break;case"M":case"L":e=ht(ot.Month,1,1);break;case"MM":case"LL":e=ht(ot.Month,2,1);break;case"MMM":e=Bt(It.Months,oe.Abbreviated);break;case"MMMM":e=Bt(It.Months,oe.Wide);break;case"MMMMM":e=Bt(It.Months,oe.Narrow);break;case"LLL":e=Bt(It.Months,oe.Abbreviated,me.Standalone);break;case"LLLL":e=Bt(It.Months,oe.Wide,me.Standalone);break;case"LLLLL":e=Bt(It.Months,oe.Narrow,me.Standalone);break;case"w":e=j(1);break;case"ww":e=j(2);break;case"W":e=j(1,!0);break;case"d":e=ht(ot.Date,1);break;case"dd":e=ht(ot.Date,2);break;case"c":case"cc":e=ht(ot.Day,1);break;case"ccc":e=Bt(It.Days,oe.Abbreviated,me.Standalone);break;case"cccc":e=Bt(It.Days,oe.Wide,me.Standalone);break;case"ccccc":e=Bt(It.Days,oe.Narrow,me.Standalone);break;case"cccccc":e=Bt(It.Days,oe.Short,me.Standalone);break;case"E":case"EE":case"EEE":e=Bt(It.Days,oe.Abbreviated);break;case"EEEE":e=Bt(It.Days,oe.Wide);break;case"EEEEE":e=Bt(It.Days,oe.Narrow);break;case"EEEEEE":e=Bt(It.Days,oe.Short);break;case"a":case"aa":case"aaa":e=Bt(It.DayPeriods,oe.Abbreviated);break;case"aaaa":e=Bt(It.DayPeriods,oe.Wide);break;case"aaaaa":e=Bt(It.DayPeriods,oe.Narrow);break;case"b":case"bb":case"bbb":e=Bt(It.DayPeriods,oe.Abbreviated,me.Standalone,!0);break;case"bbbb":e=Bt(It.DayPeriods,oe.Wide,me.Standalone,!0);break;case"bbbbb":e=Bt(It.DayPeriods,oe.Narrow,me.Standalone,!0);break;case"B":case"BB":case"BBB":e=Bt(It.DayPeriods,oe.Abbreviated,me.Format,!0);break;case"BBBB":e=Bt(It.DayPeriods,oe.Wide,me.Format,!0);break;case"BBBBB":e=Bt(It.DayPeriods,oe.Narrow,me.Format,!0);break;case"h":e=ht(ot.Hours,1,-12);break;case"hh":e=ht(ot.Hours,2,-12);break;case"H":e=ht(ot.Hours,1);break;case"HH":e=ht(ot.Hours,2);break;case"m":e=ht(ot.Minutes,1);break;case"mm":e=ht(ot.Minutes,2);break;case"s":e=ht(ot.Seconds,1);break;case"ss":e=ht(ot.Seconds,2);break;case"S":e=ht(ot.FractionalSeconds,1);break;case"SS":e=ht(ot.FractionalSeconds,2);break;case"SSS":e=ht(ot.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Te(qt.Short);break;case"ZZZZZ":e=Te(qt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Te(qt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Te(qt.Long);break;default:return null}return q[n]=e,e}(S);b+=M?M(i,t,y):"''"===S?"'":S.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function Zi(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function $t(n,e){const t=function Xt(n){return(0,p.cg1)(n)[p.wAp.LocaleId]}(n);if(Ls[t]=Ls[t]||{},Ls[t][e])return Ls[t][e];let r="";switch(e){case"shortDate":r=on(n,Re.Short);break;case"mediumDate":r=on(n,Re.Medium);break;case"longDate":r=on(n,Re.Long);break;case"fullDate":r=on(n,Re.Full);break;case"shortTime":r=ds(n,Re.Short);break;case"mediumTime":r=ds(n,Re.Medium);break;case"longTime":r=ds(n,Re.Long);break;case"fullTime":r=ds(n,Re.Full);break;case"short":const i=$t(n,"shortTime"),u=$t(n,"shortDate");r=wo(en(n,Re.Short),[i,u]);break;case"medium":const c=$t(n,"mediumTime"),f=$t(n,"mediumDate");r=wo(en(n,Re.Medium),[c,f]);break;case"long":const y=$t(n,"longTime"),b=$t(n,"longDate");r=wo(en(n,Re.Long),[y,b]);break;case"full":const S=$t(n,"fullTime"),M=$t(n,"fullDate");r=wo(en(n,Re.Full),[S,M])}return r&&(Ls[t][e]=r),r}function wo(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Ir(n,e,t="-",r,i){let u="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,u=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.substr(c.length-e)),u+c}function ht(n,e,t=0,r=!1,i=!1){return function(u,c){let f=function Cr(n,e){switch(n){case ot.FullYear:return e.getFullYear();case ot.Month:return e.getMonth();case ot.Date:return e.getDate();case ot.Hours:return e.getHours();case ot.Minutes:return e.getMinutes();case ot.Seconds:return e.getSeconds();case ot.FractionalSeconds:return e.getMilliseconds();case ot.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||f>-t)&&(f+=t),n===ot.Hours)0===f&&-12===t&&(f=12);else if(n===ot.FractionalSeconds)return function yr(n,e){return Ir(n,3).substr(0,e)}(f,e);const y=Gt(c,ue.MinusSign);return Ir(f,e,y,r,i)}}function Bt(n,e,t=me.Format,r=!1){return function(i,u){return function Qe(n,e,t,r,i,u){switch(t){case It.Months:return function vt(n,e,t){const r=(0,p.cg1)(n),u=sr([r[p.wAp.MonthsFormat],r[p.wAp.MonthsStandalone]],e);return sr(u,t)}(e,i,r)[n.getMonth()];case It.Days:return function lt(n,e,t){const r=(0,p.cg1)(n),u=sr([r[p.wAp.DaysFormat],r[p.wAp.DaysStandalone]],e);return sr(u,t)}(e,i,r)[n.getDay()];case It.DayPeriods:const c=n.getHours(),f=n.getMinutes();if(u){const b=function fs(n){const e=(0,p.cg1)(n);return hs(e),(e[p.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Xn(r):[Xn(r[0]),Xn(r[1])])}(e),S=function dt(n,e,t){const r=(0,p.cg1)(n);hs(r);const u=sr([r[p.wAp.ExtraData][0],r[p.wAp.ExtraData][1]],e)||[];return sr(u,t)||[]}(e,i,r),M=b.findIndex(F=>{if(Array.isArray(F)){const[U,G]=F,ne=c>=U.hours&&f>=U.minutes,we=c<G.hours||c===G.hours&&f<G.minutes;if(U.hours<G.hours){if(ne&&we)return!0}else if(ne||we)return!0}else if(F.hours===c&&F.minutes===f)return!0;return!1});if(-1!==M)return S[M]}return function Ln(n,e,t){const r=(0,p.cg1)(n),u=sr([r[p.wAp.DayPeriodsFormat],r[p.wAp.DayPeriodsStandalone]],e);return sr(u,t)}(e,i,r)[c<12?0:1];case It.Eras:return function cn(n,e){return sr((0,p.cg1)(n)[p.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,u,n,e,t,r)}}function Te(n){return function(e,t,r){const i=-1*r,u=Gt(t,ue.MinusSign),c=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case qt.Short:return(i>=0?"+":"")+Ir(c,2,u)+Ir(Math.abs(i%60),2,u);case qt.ShortGMT:return"GMT"+(i>=0?"+":"")+Ir(c,1,u);case qt.Long:return"GMT"+(i>=0?"+":"")+Ir(c,2,u)+":"+Ir(Math.abs(i%60),2,u);case qt.Extended:return 0===r?"Z":(i>=0?"+":"")+Ir(c,2,u)+":"+Ir(Math.abs(i%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function Vt(n){return Zi(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function j(n,e=!1){return function(t,r){let i;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();i=1+Math.floor((c+u)/7)}else{const u=Vt(t),c=function jt(n){const e=Zi(n,0,1).getDay();return Zi(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),f=u.getTime()-c.getTime();i=1+Math.round(f/6048e5)}return Ir(i,n,Gt(r,ue.MinusSign))}}function V(n,e=!1){return function(t,r){return Ir(Vt(t).getFullYear(),n,Gt(r,ue.MinusSign),e)}}const q={};function Q(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function zt(n){return n instanceof Date&&!isNaN(n.valueOf())}let Bs=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class js{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ur=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new js(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const f=r.get(u);r.move(f,c),gs(f,i)}});for(let i=0,u=r.length;i<u;i++){const f=r.get(i).context;f.index=i,f.count=u,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{gs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function gs(n,e){n.context.$implicit=e.item}function qn(n,e){return new p.vHH(2100,"")}class Gc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Hp{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const ys=new Hp,Gp=new Gc;let ka=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,p.QGY)(t))return ys;if((0,p.F4k)(t))return Gp;throw qn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.sBO,16))},n.\u0275pipe=p.Yjl({name:"async",type:n,pure:!1}),n})();const zp=new p.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Vh=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,u){var c;if(null==t||""===t||t!=t)return null;try{return mr(t,r,u||this.locale,null!==(c=null!=i?i:this.defaultTimezone)&&void 0!==c?c:void 0)}catch(f){throw qn()}}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.soG,16),p.Y36(zp,24))},n.\u0275pipe=p.Yjl({name:"date",type:n,pure:!0}),n})(),Ar=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const qs="browser";function vr(n){return"server"===n}let wu=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new bu((0,p.LFG)(se),window)}),n})();class bu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function La(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=_s(this.window.history)||_s(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function _s(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class zs extends class Qo extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){Y||(Y=n)}(new zs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Zc(){return ln=ln||document.querySelector("base"),ln?ln.getAttribute("href"):null}();return null==t?null:function To(n){Co=Co||document.createElement("a"),Co.setAttribute("href",n);const e=Co.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ln=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ko(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Co,ln=null;const Sr=new p.OlP("TRANSITION_ID"),Va=[{provide:p.ip1,useFactory:function Un(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Sr,se,p.zs3],multi:!0}];class Oi{static init(){(0,p.VLi)(new Oi)}addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const f=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Mr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ws=new p.OlP("EventManagerPlugins");let vs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ws),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Du{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Jr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ks=(()=>{class n extends Jr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Zs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Zs))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(se))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Zs(n){O().remove(n)}const pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Iu=/%COMP%/g;function De(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?De(n,i,t):(i=i.replace(Iu,n),t.push(i))}return t}function Ut(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let bn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Jo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Dl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case p.ifc.ShadowDom:return new Il(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=De(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(vs),p.LFG(Ks),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Jo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=pt[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=pt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ut(r)):this.eventManager.addEventListener(e,t,Ut(r))}}class Dl extends Jo{constructor(e,t,r,i){super(e),this.component=r;const u=De(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function wl(n){return"_ngcontent-%COMP%".replace(Iu,n)}(i+"-"+r.id),this.hostAttr=function bl(n){return"_nghost-%COMP%".replace(Iu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Il extends Jo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=De(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const f=document.createElement("style");f.textContent=u[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Qc=(()=>{class n extends Du{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(se))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Cl=["alt","control","meta","shift"],Ys={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Er={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},fi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Mu=(()=>{class n extends Du{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(Cl.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const f={};return f.domEventName=i,f.fullKey=c,f}static getEventFullKey(t){let r="",i=function Qs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Er.hasOwnProperty(e)&&(e=Er[e]))}return Ys[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Cl.forEach(u=>{u!=i&&fi[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(se))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Al=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:qs},{provide:p.g9A,useValue:function Pi(){zs.makeCurrent(),Oi.init()},multi:!0},{provide:se,useFactory:function xu(){return(0,p.RDi)(document),document},deps:[]}]),Ba=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Tl(){return new p.qLn},deps:[]},{provide:Ws,useClass:Qc,multi:!0,deps:[se,p.R0b,p.Lbi]},{provide:Ws,useClass:Mu,multi:!0,deps:[se]},{provide:bn,useClass:bn,deps:[vs,Ks,p.AFp]},{provide:p.FYo,useExisting:bn},{provide:Jr,useExisting:Ks},{provide:Ks,useClass:Ks,deps:[se]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:vs,useClass:vs,deps:[Ws,p.R0b]},{provide:class yn{},useClass:Mr,deps:[]}];let ea=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:Sr,useExisting:p.AFp},Va]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:Ba,imports:[Ar,p.hGG]}),n})();"undefined"!=typeof window&&window;var Bn=P(8996),jn=P(7669);function mt(...n){const e=(0,jn.yG)(n);return(0,Bn.D)(n,e)}var lr=P(7579);class ei extends lr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Ur=P(8306);const{isArray:na}=Array,{getPrototypeOf:sd,prototype:gn,keys:Hh}=Object;function ki(n){if(1===n.length){const e=n[0];if(na(e))return{args:e,keys:null};if(function Ou(n){return n&&"object"==typeof n&&sd(n)===gn}(e)){const t=Hh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var pi=P(4671),Ft=P(4004);const{isArray:od}=Array;function Fl(n){return(0,Ft.U)(e=>function kl(n,e){return od(e)?n(...e):n(e)}(n,e))}function No(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Wn=P(5403),bs=P(9672);function eo(n,e,t){n?(0,bs.f)(t,n,e):e()}var mi=P(576);function Qi(n,e){const t=(0,mi.m)(n)?n:()=>n,r=i=>i.error(t());return new Ur.y(e?i=>e.schedule(r,0,i):r)}const to=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ji=P(8189);function ad(...n){return function Vl(){return(0,Ji.J)(1)}()((0,Bn.D)(n,(0,jn.yG)(n)))}var Ro=P(8421);function Fi(n){return new Ur.y(e=>{(0,Ro.Xf)(n()).subscribe(e)})}var ia=P(515),sa=P(727),Br=P(4482);function Li(){return(0,Br.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Wn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ud extends Ur.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Br.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new sa.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Wn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=sa.w0.EMPTY)}return e}refCount(){return Li()(this)}}function $n(n,e){return(0,Br.e)((t,r)=>{let i=null,u=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,Wn.x)(r,y=>{null==i||i.unsubscribe();let b=0;const S=u++;(0,Ro.Xf)(n(y,S)).subscribe(i=(0,Wn.x)(r,M=>r.next(e?e(y,M,S,b++):M),()=>{i=null,f()}))},()=>{c=!0,f()}))})}var oa=P(5698);function Vi(...n){const e=(0,jn.yG)(n);return(0,Br.e)((t,r)=>{(e?ad(n,t,e):ad(n,t)).subscribe(r)})}function aa(n,e,t,r,i){return(u,c)=>{let f=t,y=e,b=0;u.subscribe((0,Wn.x)(c,S=>{const M=b++;y=f?n(y,S,M):(f=!0,S),r&&c.next(y)},i&&(()=>{f&&c.next(y),c.complete()})))}}function Nr(n,e){return(0,Br.e)(aa(n,e,arguments.length>=2,!0))}function Xi(n,e){return(0,Br.e)((t,r)=>{let i=0;t.subscribe((0,Wn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}function es(n){return(0,Br.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Wn.x)(t,void 0,void 0,c=>{u=(0,Ro.Xf)(n(c,es(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var An=P(5577);function no(n,e){return(0,mi.m)(e)?(0,An.z)(n,e,1):(0,An.z)(n,1)}function ld(n){return n<=0?()=>ia.E:(0,Br.e)((e,t)=>{let r=[];e.subscribe((0,Wn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Nn(n=Yp){return(0,Br.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Yp(){return new to}function Qp(n){return(0,Br.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ro(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xi((i,u)=>n(i,u,r)):pi.y,(0,oa.q)(1),t?Qp(e):Nn(()=>new to))}var ti=P(8505);class io{constructor(e,t){this.id=e,this.url=t}}class Ds extends io{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pu extends io{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Sn extends io{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ul extends io{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ua extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eg extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bl extends io{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Rr extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yi extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Is{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ui{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ts{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $a{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $l{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Lt="primary";class Gl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function tr(n){return new Gl(n)}const ql="ngNavigationCancelingError";function so(n){const e=Error("NavigationCancelingError: "+n);return e[ql]=!0,e}function Oo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],f=n[u];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ns(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!Fu(n[i],e[i]))return!1;return!0}function Fu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function rs(n){return Array.prototype.concat.apply([],n)}function dd(n){return n.length>0?n[n.length-1]:null}function nr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function _i(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,Bn.D)(Promise.resolve(n)):mt(n)}const Po={exact:function C(n,e,t){if(!Pt(n.segments,e.segments)||!ee(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!C(n.children[r],e.children[r],t))return!1;return!0},subset:L},la={exact:function I(n,e){return ns(n,e)},subset:function N(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Fu(n[t],e[t]))},ignored:()=>!0};function Lu(n,e,t){return Po[t.paths](n.root,e.root,t.matrixParams)&&la[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function L(n,e,t){return K(n,e,e.segments,t)}function K(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Pt(i,t)||e.hasChildren()||!ee(i,t,r))}if(n.segments.length===t.length){if(!Pt(n.segments,t)||!ee(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!L(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Pt(n.segments,i)&&ee(n.segments,i,r)&&n.children[Lt])&&K(n.children[Lt],e,u,r)}}function ee(n,e,t){return e.every((r,i)=>la[t](n[i].parameters,r.parameters))}class Me{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tr(this.queryParams)),this._queryParamMap}toString(){return ca.serialize(this)}}class xe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,nr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ko(this)}}class Je{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=tr(this.parameters)),this._parameterMap}toString(){return Ha(this)}}function Pt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Kn{}class Rn{parse(e){const t=new fd(e);return new Me(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${jr(e.root,!0)}`,r=function Iy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Bi(t)}=${Bi(i)}`).join("&"):`${Bi(t)}=${Bi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Fo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ca=new Rn;function ko(n){return n.segments.map(e=>Ha(e)).join("/")}function jr(n,e){if(!n.hasChildren())return ko(n);if(e){const t=n.children[Lt]?jr(n.children[Lt],!1):"",r=[];return nr(n.children,(i,u)=>{u!==Lt&&r.push(`${u}:${jr(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Mt(n,e){let t=[];return nr(n.children,(r,i)=>{i===Lt&&(t=t.concat(e(r,i)))}),nr(n.children,(r,i)=>{i!==Lt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Lt?[jr(n.children[Lt],!1)]:[`${i}:${jr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${ko(n)}/${t[0]}`:`${ko(n)}/(${t.join("//")})`}}function vi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bi(n){return vi(n).replace(/%3B/gi,";")}function hd(n){return vi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wl(n){return decodeURIComponent(n)}function Kl(n){return Wl(n.replace(/\+/g,"%20"))}function Ha(n){return`${hd(n.path)}${function tg(n){return Object.keys(n).map(e=>`;${hd(e)}=${hd(n[e])}`).join("")}(n.parameters)}`}const Cy=/^[^\/()?;=#]+/;function Cs(n){const e=n.match(Cy);return e?e[0]:""}const Zl=/^[^=?&#]+/,Ay=/^[^&#]+/;class fd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new xe(e,t)),r}parseSegment(){const e=Cs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Je(Wl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Cs(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Cs(this.remaining);i&&(r=i,this.capture(r))}e[Wl(t)]=Wl(r)}parseQueryParam(e){const t=function Ty(n){const e=n.match(Zl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function ng(n){const e=n.match(Ay);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Kl(t),u=Kl(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Cs(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Lt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Lt]:new xe([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Sy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Gh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Gh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=qh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qh(e,this._root).map(t=>t.value)}}function Gh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Gh(n,t);if(r)return r}return null}function qh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=qh(n,t);if(r.length)return r.unshift(e),r}return[]}class Lo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Vo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class pd extends Sy{constructor(e,t){super(e),this.snapshot=t,md(this,e)}toString(){return this.snapshot.toString()}}function Ga(n,e){const t=function My(n,e){const c=new Vu([],{},{},"",{},Lt,e,null,n.root,-1,{});return new zh("",new Lo(c,[]))}(n,e),r=new ei([new Je("",{})]),i=new ei({}),u=new ei({}),c=new ei({}),f=new ei(""),y=new da(r,i,c,f,u,Lt,e,t.root);return y.snapshot=t.root,new pd(new Lo(y,[]),t)}class da{constructor(e,t,r,i,u,c,f,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ft.U)(e=>tr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ft.U)(e=>tr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function gd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Vu{constructor(e,t,r,i,u,c,f,y,b,S,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.routeConfig=y,this._urlSegment=b,this._lastPathIndex=S,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=tr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zh extends Sy{constructor(e,t){super(t),this.url=e,md(this,t)}toString(){return yd(this._root)}}function md(n,e){e.value._routerState=n,e.children.forEach(t=>md(n,t))}function yd(n){const e=n.children.length>0?` { ${n.children.map(yd).join(", ")} } `:"";return`${n.value}${e}`}function _d(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ns(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ns(e.params,t.params)||n.params.next(t.params),function ku(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ns(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ns(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Wh(n,e){const t=ns(n.params,e.params)&&function Tt(n,e){return Pt(n,e)&&n.every((t,r)=>ns(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Wh(n.parent,e.parent))}function Yl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Kh(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Yl(n,r,i);return Yl(n,r)})}(n,e,t);return new Lo(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Yl(n,f)),c}}const r=function Ry(n){return new da(new ei(n.url),new ei(n.params),new ei(n.queryParams),new ei(n.fragment),new ei(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Yl(n,u));return new Lo(r,i)}}function ha(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Uu(n){return"object"==typeof n&&null!=n&&n.outlets}function rg(n,e,t,r,i){let u={};if(r&&nr(r,(f,y)=>{u[y]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),n===e)return new Me(t,u,i);const c=Zh(n,e,t);return new Me(c,u,i)}function Zh(n,e,t){const r={};return nr(n.children,(i,u)=>{r[u]=i===e?t:Zh(i,e,t)}),new xe(n.segments,r)}class Oy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ha(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Uu);if(i&&i!==dd(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Yh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ly(n,e,t){if(n||(n=new xe([],{})),0===n.segments.length&&n.hasChildren())return ao(n,e,t);const r=function nE(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],f=t[r];if(Uu(f))break;const y=`${f}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&b&&"object"==typeof b&&void 0===b.outlets){if(!ji(y,b,c))return u;r+=2}else{if(!ji(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new xe(n.segments.slice(0,r.pathIndex),{});return u.children[Lt]=new xe(n.segments.slice(r.pathIndex),n.children),ao(u,0,i)}return r.match&&0===i.length?new xe(n.segments,{}):r.match&&!n.hasChildren()?Qh(n,e,t):r.match?ao(n,0,i):Qh(n,e,t)}function ao(n,e,t){if(0===t.length)return new xe(n.segments,{});{const r=function Fy(n){return Uu(n[0])?n[0].outlets:{[Lt]:n}}(t),i={};return nr(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=Ly(n.children[c],e,u))}),nr(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new xe(n.segments,i)}}function Qh(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Uu(u)){const y=Bu(u.outlets);return new xe(r,y)}if(0===i&&ha(t[0])){r.push(new Je(n.segments[e].path,Jh(t[0]))),i++;continue}const c=Uu(u)?u.outlets[Lt]:`${u}`,f=i<t.length-1?t[i+1]:null;c&&f&&ha(f)?(r.push(new Je(c,Jh(f))),i+=2):(r.push(new Je(c,{})),i++)}return new xe(r,{})}function Bu(n){const e={};return nr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Qh(new xe([],{}),0,t))}),e}function Jh(n){const e={};return nr(n,(t,r)=>e[r]=`${t}`),e}function ji(n,e,t){return n==t.path&&ns(e,t.parameters)}class sg{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),_d(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Vo(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),nr(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Vo(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Vo(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Vo(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new $l(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ts(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(_d(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),_d(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=function vd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),y=f?f.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=y,c.outlet&&c.outlet.activateWith(i,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Ed{constructor(e,t){this.routes=e,this.module=t}}function qa(n){return"function"==typeof n}function ju(n){return n instanceof Me}const Jl=Symbol("INITIAL_VALUE");function fa(){return $n(n=>function ra(...n){const e=(0,jn.yG)(n),t=(0,jn.jO)(n),{args:r,keys:i}=ki(n);if(0===r.length)return(0,Bn.D)([],e);const u=new Ur.y(function gi(n,e,t=pi.y){return r=>{eo(e,()=>{const{length:i}=n,u=new Array(i);let c=i,f=i;for(let y=0;y<i;y++)eo(e,()=>{const b=(0,Bn.D)(n[y],e);let S=!1;b.subscribe((0,Wn.x)(r,M=>{u[y]=M,S||(S=!0,f--),f||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>No(i,c):pi.y));return t?u.pipe(Fl(t)):u}(n.map(e=>e.pipe((0,oa.q)(1),Vi(Jl)))).pipe(Nr((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==Jl?i:(u===Jl&&(r=!0),r||!1!==u&&c!==t.length-1&&!ju(u)?i:u),e)},Jl),Xi(e=>e!==Jl),(0,Ft.U)(e=>ju(e)?e:!0===e),(0,oa.q)(1)))}class Vy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Xl,this.attachRef=null}}class Xl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Vy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ec=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=u||Lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,y=new nf(t,f,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Xl),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class nf{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===da?this.route:e===Xl?this.childContexts:this.parent.get(e,t)}}let rf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[ec],encapsulation:2}),n})();function tc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];wd(r,sf(e,r))}}function wd(n,e){n.children&&tc(n.children,e)}function sf(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function of(n){const e=n.children&&n.children.map(of),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=rf),t}function rn(n){return n.outlet||Lt}function af(n,e){const t=n.filter(r=>rn(r)===e);return t.push(...n.filter(r=>rn(r)!==e)),t}const ag={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $u(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},ag):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Oo)(t,n,e);if(!u)return Object.assign({},ag);const c={};nr(u.posParams,(y,b)=>{c[b]=y.path});const f=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:f,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function nc(n,e,t,r,i="corrected"){if(t.length>0&&function By(n,e,t){return t.some(r=>Dd(n,e,r)&&rn(r)!==Lt)}(n,t,r)){const c=new xe(e,function bd(n,e,t,r){const i={};i[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&rn(u)!==Lt){const c=new xe([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[rn(u)]=c}return i}(n,e,r,new xe(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function ug(n,e,t){return t.some(r=>Dd(n,e,r))}(n,t,r)){const c=new xe(n.segments,function Uy(n,e,t,r,i,u){const c={};for(const f of r)if(Dd(n,t,f)&&!i[rn(f)]){const y=new xe([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[rn(f)]=y}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new xe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Dd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function jy(n,e,t,r){return!!(rn(n)===r||r!==Lt&&Dd(e,t,n))&&("**"===n.path||$u(e,n,t).matched)}function $y(n,e,t){return 0===e.length&&!n.children[t]}class pa{constructor(e){this.segmentGroup=e||null}}class Or{constructor(e){this.urlTree=e}}function Uo(n){return Qi(new pa(n))}function rc(n){return Qi(new Or(n))}class lf{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(p.h0i)}apply(){const e=nc(this.urlTree.root,[],[],this.config).segmentGroup,t=new xe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Lt).pipe((0,Ft.U)(u=>this.createUrlTree(Wa(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(es(u=>{if(u instanceof Or)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof pa?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Lt).pipe((0,Ft.U)(i=>this.createUrlTree(Wa(i),e.queryParams,e.fragment))).pipe(es(i=>{throw i instanceof pa?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new xe([],{[Lt]:e}):e;return new Me(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ft.U)(u=>new xe([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Bn.D)(i).pipe(no(u=>{const c=r.children[u],f=af(t,u);return this.expandSegmentGroup(e,f,c,u).pipe((0,Ft.U)(y=>({segment:y,outlet:u})))}),Nr((u,c)=>(u[c.outlet]=c.segment,u),{}),function Jp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xi((i,u)=>n(i,u,r)):pi.y,ld(1),t?Qp(e):Nn(()=>new to))}())}expandSegment(e,t,r,i,u,c){return(0,Bn.D)(r).pipe(no(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,u,c).pipe(es(b=>{if(b instanceof pa)return mt(null);throw b}))),ro(f=>!!f),es((f,y)=>{if(f instanceof to||"EmptyError"===f.name)return $y(t,i,u)?mt(new xe([],{})):Uo(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,u,c,f){return jy(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Uo(t):Uo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?rc(u):this.lineralizeSegments(r,u).pipe((0,An.z)(c=>{const f=new xe(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:f,consumedSegments:y,remainingSegments:b,positionalParamSegments:S}=$u(t,i,u);if(!f)return Uo(t);const M=this.applyRedirectCommands(y,i.redirectTo,S);return i.redirectTo.startsWith("/")?rc(M):this.lineralizeSegments(i,M).pipe((0,An.z)(F=>this.expandSegment(e,t,r,F.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?mt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Ft.U)(M=>(r._loadedConfig=M,new xe(i,{})))):mt(new xe(i,{}));const{matched:c,consumedSegments:f,remainingSegments:y}=$u(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,An.z)(S=>{const M=S.module,F=S.routes,{segmentGroup:U,slicedSegments:G}=nc(t,f,y,F),ne=new xe(U.segments,U.children);if(0===G.length&&ne.hasChildren())return this.expandChildren(M,F,ne).pipe((0,Ft.U)(Ke=>new xe(f,Ke)));if(0===F.length&&0===G.length)return mt(new xe(f,{}));const we=rn(r)===u;return this.expandSegment(M,ne,F,G,we?Lt:u,!0).pipe((0,Ft.U)(Le=>new xe(f.concat(Le.segments),Le.children)))})):Uo(t)}getChildConfig(e,t,r){return t.children?mt(new Ed(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?mt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,An.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Ft.U)(u=>(t._loadedConfig=u,u))):function $r(n){return Qi(so(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):mt(new Ed([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?mt(i.map(c=>{const f=e.get(c);let y;if(function Xh(n){return n&&qa(n.canLoad)}(f))y=f.canLoad(t,r);else{if(!qa(f))throw new Error("Invalid CanLoad guard");y=f(t,r)}return _i(y)})).pipe(fa(),(0,ti.b)(c=>{if(!ju(c))return;const f=so(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw f.url=c,f}),(0,Ft.U)(c=>!0===c)):mt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return mt(r);if(i.numberOfChildren>1||!i.children[Lt])return Qi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Me(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return nr(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[u]=t[f]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return nr(t.children,(f,y)=>{c[y]=this.createSegmentGroup(e,f,r,i)}),new xe(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Wa(n){const e={};for(const r of Object.keys(n.children)){const u=Wa(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function $i(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new xe(n.segments.concat(e.segments),e.children)}return n}(new xe(n.segments,e))}class lg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ka{constructor(e,t){this.component=e,this.route=t}}function df(n,e,t){const r=n._root;return Ei(r,e?e._root:null,t,[r.value])}function ic(n,e,t){const r=function Hy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Ei(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Vo(e);return n.children.forEach(c=>{(function dg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function Gy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Pt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Pt(n.url,e.url)||!ns(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wh(n,e)||!ns(n.queryParams,e.queryParams);default:return!Wh(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new lg(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Ei(n,e,u.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Ka(f.outlet.component,c))}else c&&Za(e,f,i),i.canActivateChecks.push(new lg(r)),Ei(n,null,u.component?f?f.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),nr(u,(c,f)=>Za(c,t.getContext(f),i)),i}function Za(n,e,t){const r=Vo(n),i=n.value;nr(r,(u,c)=>{Za(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Ka(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class pf{}function gf(n){return new Ur.y(e=>e.error(n))}class mf{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=nc(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Lt);if(null===t)return null;const r=new Vu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Lo(r,t),u=new zh(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=xy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],f=af(e,u),y=this.processSegmentGroup(f,c,u);if(null===y)return null;r.push(...y)}const i=fg(r);return function Ky(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return $y(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!jy(e,t,r,i))return null;let u,c=[],f=[];if("**"===e.path){const U=r.length>0?dd(r).parameters:{};u=new Vu(r,U,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),rn(e),e.component,e,h(t),m(t)+r.length,T(e))}else{const U=$u(t,e,r);if(!U.matched)return null;c=U.consumedSegments,f=U.remainingSegments,u=new Vu(c,U.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),rn(e),e.component,e,h(t),m(t)+c.length,T(e))}const y=function Zy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:S}=nc(t,c,f,y.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);if(0===S.length&&b.hasChildren()){const U=this.processChildren(y,b);return null===U?null:[new Lo(u,U)]}if(0===y.length&&0===S.length)return[new Lo(u,[])];const M=rn(e)===i,F=this.processSegment(y,b,S,M?Lt:i);return null===F?null:[new Lo(u,F)]}}function Yy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function fg(n){const e=[],t=new Set;for(const r of n){if(!Yy(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=fg(r.children);e.push(new Lo(r.value,i))}return e.filter(r=>!t.has(r))}function h(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function m(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function E(n){return n.data||{}}function T(n){return n.resolve||{}}function et(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function at(n){return $n(e=>{const t=n(e);return t?(0,Bn.D)(t).pipe((0,Ft.U)(()=>e)):mt(e)})}class oc extends class ss{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Hu=new p.OlP("ROUTES");class Gu{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Ft.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Ed(rs(c.injector.get(Hu,void 0,p.XFs.Self|p.XFs.Optional)).map(of),c)}),es(u=>{throw t._loader$=void 0,u}));return t._loader$=new ud(i,()=>new lr.x).pipe(Li()),t._loader$}loadModuleFactory(e){return _i(e()).pipe((0,An.z)(t=>t instanceof p.YKP?mt(t):(0,Bn.D)(this.compiler.compileModuleAsync(t))))}}class Qy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ga(n){throw n}function Id(n,e,t){return e.parse("/")}function Cd(n,e){return mt(null)}const _f={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Td={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wi=(()=>{class n{constructor(t,r,i,u,c,f,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new lr.x,this.errorHandler=ga,this.malformedUriErrorHandler=Id,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Cd,afterPreactivation:Cd},this.urlHandlingStrategy=new Qy,this.routeReuseStrategy=new oc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(p.h0i),this.console=c.get(p.c2e);const M=c.get(p.R0b);this.isNgZoneEnabled=M instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function zl(){return new Me(new xe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Gu(c,f,F=>this.triggerEvent(new jl(F)),F=>this.triggerEvent(new Is(F))),this.routerState=Ga(this.currentUrlTree,this.rootComponentType),this.transitions=new ei({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Xi(i=>0!==i.id),(0,Ft.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),$n(i=>{let u=!1,c=!1;return mt(i).pipe((0,ti.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),$n(f=>{const y=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return pg(f.source)&&(this.browserUrlTree=f.extractedUrl),mt(f).pipe($n(M=>{const F=this.transitions.getValue();return r.next(new Ds(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?ia.E:Promise.resolve(M)}),function cf(n,e,t,r){return $n(i=>function za(n,e,t,r,i){return new lf(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ft.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ti.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function R(n,e,t,r,i){return(0,An.z)(u=>function Wy(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new mf(n,e,t,r,i,u).recognize();return null===c?gf(new pf):mt(c)}catch(c){return gf(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,Ft.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ti.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(U,M)}this.browserUrlTree=M.urlAfterRedirects}const F=new ua(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:U,source:G,restoredState:ne,extras:we}=f,Ze=new Ds(F,this.serializeUrl(U),G,ne);r.next(Ze);const Le=Ga(U,this.rootComponentType).snapshot;return mt(Object.assign(Object.assign({},f),{targetSnapshot:Le,urlAfterRedirects:U,extras:Object.assign(Object.assign({},we),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),ia.E}),at(f=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:U}}=f;return this.hooks.beforePreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!U})}),(0,ti.b)(f=>{const y=new eg(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),(0,Ft.U)(f=>Object.assign(Object.assign({},f),{guards:df(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function qy(n,e){return(0,An.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?mt(Object.assign(Object.assign({},t),{guardsResult:!0})):function hg(n,e,t,r){return(0,Bn.D)(n).pipe((0,An.z)(i=>function sc(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?mt(u.map(f=>{const y=ic(f,e,i);let b;if(function rE(n){return n&&qa(n.canDeactivate)}(y))b=_i(y.canDeactivate(n,e,t,r));else{if(!qa(y))throw new Error("Invalid CanDeactivate guard");b=_i(y(n,e,t,r))}return b.pipe(ro())})).pipe(fa()):mt(!0)}(i.component,i.route,t,e,r)),ro(i=>!0!==i,!0))}(c,r,i,n).pipe((0,An.z)(f=>f&&function og(n){return"boolean"==typeof n}(f)?function Pr(n,e,t,r){return(0,Bn.D)(e).pipe(no(i=>ad(function ff(n,e){return null!==n&&e&&e(new Ui(n)),mt(!0)}(i.route.parent,r),function hf(n,e){return null!==n&&e&&e(new $a(n)),mt(!0)}(i.route,r),function Bo(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function cg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Fi(()=>mt(c.guards.map(y=>{const b=ic(y,c.node,t);let S;if(function tf(n){return n&&qa(n.canActivateChild)}(b))S=_i(b.canActivateChild(r,n));else{if(!qa(b))throw new Error("Invalid CanActivateChild guard");S=_i(b(r,n))}return S.pipe(ro())})).pipe(fa())));return mt(u).pipe(fa())}(n,i.path,t),function zy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const i=r.map(u=>Fi(()=>{const c=ic(u,e,t);let f;if(function ef(n){return n&&qa(n.canActivate)}(c))f=_i(c.canActivate(e,n));else{if(!qa(c))throw new Error("Invalid CanActivate guard");f=_i(c(e,n))}return f.pipe(ro())}));return mt(i).pipe(fa())}(n,i.route,t))),ro(i=>!0!==i,!0))}(r,u,n,e):mt(f)),(0,Ft.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,ti.b)(f=>{if(ju(f.guardsResult)){const b=so(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw b.url=f.guardsResult,b}const y=new Bl(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(y)}),Xi(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),at(f=>{if(f.guards.canActivateChecks.length)return mt(f).pipe((0,ti.b)(y=>{const b=new Rr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),$n(y=>{let b=!1;return mt(y).pipe(function z(n,e){return(0,An.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return mt(t);let u=0;return(0,Bn.D)(i).pipe(no(c=>function ae(n,e,t,r){return function Be(n,e,t,r){const i=et(n);if(0===i.length)return mt({});const u={};return(0,Bn.D)(i).pipe((0,An.z)(c=>function wt(n,e,t,r){const i=ic(n,e,r);return _i(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,ti.b)(f=>{u[c]=f}))),ld(1),(0,An.z)(()=>et(u).length===i.length?mt(u):ia.E))}(n._resolve,n,e,r).pipe((0,Ft.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),xy(n,t).resolve),null)))}(c.route,r,n,e)),(0,ti.b)(()=>u++),ld(1),(0,An.z)(c=>u===i.length?mt(t):ia.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ti.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,ti.b)(y=>{const b=new yi(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}))}),at(f=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:U}}=f;return this.hooks.afterPreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!U})}),(0,Ft.U)(f=>{const y=function Ny(n,e,t){const r=Yl(n,e._root,t?t._root:void 0);return new pd(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:y})}),(0,ti.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,Ft.U)(r=>(new sg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,ti.b)({next(){u=!0},complete(){u=!0}}),function Xp(n){return(0,Br.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var f;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),es(f=>{if(c=!0,function cd(n){return n&&n[ql]}(f)){const y=ju(f.url);y||(this.navigated=!0,this.restoreHistory(i,!0));const b=new Sn(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(b),y?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||pg(i.source)};this.scheduleNavigation(S,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new Ul(i.id,this.serializeUrl(i.extractedUrl),f);r.next(y);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return ia.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const y=Object.assign({},c);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(u.state=y)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){tc(t),this.config=t.map(of),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:f,preserveFragment:y}=r,b=i||this.routerState.root,S=y?this.currentUrlTree.fragment:c;let M=null;switch(f){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function oo(n,e,t,r,i){if(0===t.length)return rg(e.root,e.root,e.root,r,i);const u=function Py(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Oy(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return nr(u.outlets,(y,b)=>{f[b]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,u]},[]);return new Oy(t,e,r)}(t);if(u.toRoot())return rg(e.root,e.root,new xe([],{}),r,i);const c=function ig(n,e,t){if(n.isAbsolute)return new Yh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Yh(u,u===e.root,0)}const r=ha(n.commands[0])?0:1;return function ky(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Yh(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),f=c.processChildren?ao(c.segmentGroup,c.index,u.commands):Ly(c.segmentGroup,c.index,u.commands);return rg(e.root,c.segmentGroup,f,r,i)}(b,this.currentUrlTree,t,M,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ju(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function vf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},_f):!1===r?Object.assign({},Td):r,ju(t))return Lu(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Lu(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Pu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var f,y;if(this.disposed)return Promise.resolve(!1);let b,S,M;c?(b=c.resolve,S=c.reject,M=c.promise):M=new Promise((G,ne)=>{b=G,S=ne});const F=++this.navigationId;let U;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),U=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):U=0,this.setTransition({id:F,targetPageId:U,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:S,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(G=>Promise.reject(G))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Sn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function pg(n){return"imperative"!==n}let ac=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new lr.x,this.subscription=t.events.subscribe(u=>{u instanceof Pu&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,c){if(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const f={skipLocationChange:Ad(this.skipLocationChange),replaceUrl:Ad(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,f),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ad(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(wi),p.Y36(da),p.Y36(pe))},n.\u0275dir=p.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&p.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&p.uIk("target",r.target)("href",r.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),n})();function Ad(n){return""===n||!!n}class e_{}class sE{preload(e,t){return mt(null)}}let oE=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new Gu(i,r,y=>t.triggerEvent(new jl(y)),y=>t.triggerEvent(new Is(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(Xi(t=>t instanceof Pu),no(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(p.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,Bn.D)(i).pipe((0,Ji.J)(),(0,Ft.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?mt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,An.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(wi),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(e_))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),gg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ds?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Hl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ts=new p.OlP("ROUTER_CONFIGURATION"),n_=new p.OlP("ROUTER_FORROOT_GUARD"),aE=[_e,{provide:Kn,useClass:Rn},{provide:wi,useFactory:function i_(n,e,t,r,i,u,c={},f,y){const b=new wi(null,n,e,t,r,i,rs(u));return f&&(b.urlHandlingStrategy=f),y&&(b.routeReuseStrategy=y),function cE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(S=>{var M,F;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(F=console.groupEnd)||void 0===F||F.call(console)}),b},deps:[Kn,Xl,_e,p.zs3,p.Sil,Hu,Ts,[class yf{},new p.FiY],[class On{},new p.FiY]]},Xl,{provide:da,useFactory:function mg(n){return n.routerState.root},deps:[wi]},oE,sE,class t_{preload(e,t){return t().pipe(es(()=>mt(null)))}},{provide:Ts,useValue:{enableTracing:!1}}];function JD(){return new p.PXZ("Router",wi)}let ma=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[aE,r_(t),{provide:n_,useFactory:lE,deps:[[wi,new p.FiY,new p.tp0]]},{provide:Ts,useValue:r||{}},{provide:pe,useFactory:uE,deps:[fe,[new p.tBr(tt),new p.FiY],Ts]},{provide:gg,useFactory:XD,deps:[wi,wu,Ts]},{provide:e_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:sE},{provide:p.PXZ,multi:!0,useFactory:JD},[Sd,{provide:p.ip1,multi:!0,useFactory:dE,deps:[Sd]},{provide:o_,useFactory:s_,deps:[Sd]},{provide:p.tb,multi:!0,useExisting:o_}]]}}static forChild(t){return{ngModule:n,providers:[r_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n_,8),p.LFG(wi,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function XD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new gg(n,e,t)}function uE(n,e,t={}){return t.useHash?new Ce(n,e):new Ye(n,e)}function lE(n){return"guarded"}function r_(n){return[{provide:p.deG,multi:!0,useValue:n},{provide:Hu,multi:!0,useValue:n}]}let Sd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new lr.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),u=this.injector.get(wi),c=this.injector.get(Ts);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?mt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Ts),i=this.injector.get(oE),u=this.injector.get(gg),c=this.injector.get(wi),f=this.injector.get(p.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function dE(n){return n.appInitializer.bind(n)}function s_(n){return n.bootstrapListener.bind(n)}const o_=new p.OlP("Router Initializer"),hE=new p.OlP("GETS_ALL_DATE_DTO");let Ef=(()=>{class n{constructor(t){this._getsAllDateDto=t,this.currentDate$=this._getsAllDateDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(hE))},n.\u0275cmp=p.Xpm({type:n,selectors:[["lib-date"]],decls:7,vars:6,consts:[[1,"border-bottom","py-4"],[1,"d-inline","fs-3","fw-bold"],[1,"d-inline","fs-5"]],template:function(t,r){if(1&t&&(p.TgZ(0,"div",0)(1,"p",1),p._uU(2,"TODAY "),p.qZA(),p.TgZ(3,"p",2),p._uU(4),p.ALo(5,"date"),p.ALo(6,"async"),p.qZA()()),2&t){let i;p.xp6(4),p.Oqu(p.xi3(5,1,null==(i=p.lcZ(6,4,r.currentDate$))?null:i.currentDate,"E d MMM"))}},pipes:[Vh,ka],encapsulation:2,changeDetection:0}),n})();const fE=new p.OlP("GETS_ALL_TASK_DTO");class eI{constructor(e,t){this.open=e,this.close=t||e}isManual(){return"manual"===this.open||"manual"===this.close}}const pE={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};const Pn="undefined"!=typeof window&&window||{};let As;function xt(){if(void 0===Pn.document)return"bs4";const n=Pn.document.createElement("span");n.innerText="testing bs version",n.classList.add("d-none"),n.classList.add("pl-1"),Pn.document.head.appendChild(n);const e=n.getBoundingClientRect(),t=Pn.getComputedStyle(n).paddingLeft;return!e||e&&0!==e.top?(Pn.document.head.removeChild(n),"bs3"):t&&parseFloat(t)?(Pn.document.head.removeChild(n),"bs4"):(Pn.document.head.removeChild(n),"bs5")}function uc(){return void 0===Pn||(void 0===Pn.__theme?(As||(As=xt()),"bs3"===As):"bs3"===Pn.__theme)}function u_(){return!uc()&&(As||(As=xt()),"bs4"===As)}function Hi(){return{isBs3:uc(),isBs4:u_(),isBs5:!uc()&&!u_()&&(As||(As=xt()),"bs5"===As)}}"undefined"==typeof console||console;class l_{}const zu="*";function bg(n,e=null){return{type:2,steps:n,options:e}}function Md(n){return{type:6,styles:n,offset:null}}function uI(n){Promise.resolve(null).then(n)}class xd{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){uI(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class d_{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?uI(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}var Dg=P(6451),DM=P(1144);const IM=["addListener","removeListener"],CM=["addEventListener","removeEventListener"],TM=["on","off"];function f_(n,e,t,r){if((0,mi.m)(t)&&(r=t,t=void 0),r)return f_(n,e,t).pipe(Fl(r));const[i,u]=function MM(n){return(0,mi.m)(n.addEventListener)&&(0,mi.m)(n.removeEventListener)}(n)?CM.map(c=>f=>n[c](e,f,t)):function AM(n){return(0,mi.m)(n.addListener)&&(0,mi.m)(n.removeListener)}(n)?IM.map(lI(n,e)):function SM(n){return(0,mi.m)(n.on)&&(0,mi.m)(n.off)}(n)?TM.map(lI(n,e)):[];if(!i&&(0,DM.z)(n))return(0,An.z)(c=>f_(c,e,t))((0,Ro.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Ur.y(c=>{const f=(...y)=>c.next(1<y.length?y:y[0]);return i(f),()=>u(f)})}function lI(n,e){return t=>r=>n[t](e,r)}var xM=P(4408);const uo={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=uo;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(u=>{t=void 0,n(u)});return new sa.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=uo;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=uo;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var cI=P(7565);const g_=new class bE extends cI.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class p_ extends xM.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=uo.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(uo.cancelAnimationFrame(t),e._scheduled=void 0)}});var Nd=(()=>{return(n=Nd||(Nd={})).top="top",n.bottom="bottom",n.left="left",n.right="right",n.auto="auto",n.end="right",n.start="left",n["top left"]="top left",n["top right"]="top right",n["right top"]="right top",n["right bottom"]="right bottom",n["bottom right"]="bottom right",n["bottom left"]="bottom left",n["left bottom"]="left bottom",n["left top"]="left top",n["top start"]="top left",n["top end"]="top right",n["end top"]="right top",n["end bottom"]="right bottom",n["bottom end"]="bottom right",n["bottom start"]="bottom left",n["start bottom"]="start bottom",n["start top"]="left top",Nd;var n})(),wf=(()=>{return(n=wf||(wf={})).top="top",n.bottom="bottom",n.left="start",n.right="end",n.auto="auto",n.end="end",n.start="start",n["top left"]="top start",n["top right"]="top end",n["right top"]="end top",n["right bottom"]="end bottom",n["bottom right"]="bottom end",n["bottom left"]="bottom start",n["left bottom"]="start bottom",n["left top"]="start top",n["top start"]="top start",n["top end"]="top end",n["end top"]="end top",n["end bottom"]="end bottom",n["bottom end"]="bottom end",n["bottom start"]="bottom start",n["start bottom"]="start bottom",n["start top"]="start top",wf;var n})();function os(n,e){if(1!==n.nodeType)return[];const t=n.ownerDocument.defaultView,r=null==t?void 0:t.getComputedStyle(n,null);return e?r&&r[e]:r}function Ig(n){if(!n)return document.documentElement;let r,t=null==n?void 0:n.offsetParent;for(;null===t&&n.nextElementSibling&&r!==n.nextElementSibling;)r=n.nextElementSibling,t=r.offsetParent;const i=t&&t.nodeName;return i&&"BODY"!==i&&"HTML"!==i?t&&-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===os(t,"position")?Ig(t):t:r?r.ownerDocument.documentElement:document.documentElement}function bf(n){return null!==n.parentNode?bf(n.parentNode):n}function Cg(n,e){if(!(n&&n.nodeType&&e&&e.nodeType))return document.documentElement;const t=n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=t?n:e,i=t?e:n,u=document.createRange();u.setStart(r,0),u.setEnd(i,0);const c=u.commonAncestorContainer;if(n!==c&&e!==c||r.contains(i))return function hI(n){const{nodeName:e}=n;return"BODY"!==e&&("HTML"===e||Ig(n.firstElementChild)===n)}(c)?c:Ig(c);const f=bf(n);return f.host?Cg(f.host,e):Cg(n,bf(e).host)}function m_(n){if(!n||!n.parentElement)return document.documentElement;let e=n.parentElement;for(;(null==e?void 0:e.parentElement)&&"none"===os(e,"transform");)e=e.parentElement;return e||document.documentElement}function DE(n,e){const t="x"===e?"Left":"Top",r="Left"===t?"Right":"Bottom";return parseFloat(n[`border${t}Width`])+parseFloat(n[`border${r}Width`])}function IE(n,e,t,r){return Math.max(e[`offset${n}`],e[`scroll${n}`],t[`client${n}`],t[`offset${n}`],t[`scroll${n}`],0)}function Rd(n){const e=n.body,t=n.documentElement;return{height:IE("Height",e,t),width:IE("Width",e,t)}}function _a(n){return Object.assign(Object.assign({},n),{right:(n.left||0)+n.width,bottom:(n.top||0)+n.height})}function _n(n){return"number"==typeof n||"[object Number]"===Object.prototype.toString.call(n)}function Od(n){const e=n.getBoundingClientRect();if(!(e&&_n(e.top)&&_n(e.left)&&_n(e.bottom)&&_n(e.right)))return e;const t={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===n.nodeName?Rd(n.ownerDocument):void 0,i=(null==r?void 0:r.width)||n.clientWidth||_n(e.right)&&_n(t.left)&&e.right-t.left||0,u=(null==r?void 0:r.height)||n.clientHeight||_n(e.bottom)&&_n(t.top)&&e.bottom-t.top||0;let c=n.offsetWidth-i,f=n.offsetHeight-u;if(c||f){const y=os(n);c-=DE(y,"x"),f-=DE(y,"y"),t.width-=c,t.height-=f}return _a(t)}function Wu(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function __(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}const{overflow:e,overflowX:t,overflowY:r}=os(n);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(t))?n:__(Wu(n))}function Tg(n,e,t=!1){var r,i,u,c,f,y;const b="HTML"===e.nodeName,S=Od(n),M=Od(e),U=(__(n),os(e)),G=parseFloat(U.borderTopWidth),ne=parseFloat(U.borderLeftWidth);t&&b&&(M.top=Math.max(null!==(r=M.top)&&void 0!==r?r:0,0),M.left=Math.max(null!==(i=M.left)&&void 0!==i?i:0,0));const we=_a({top:(null!==(u=S.top)&&void 0!==u?u:0)-(null!==(c=M.top)&&void 0!==c?c:0)-G,left:(null!==(f=S.left)&&void 0!==f?f:0)-(null!==(y=M.left)&&void 0!==y?y:0)-ne,width:S.width,height:S.height});if(we.marginTop=0,we.marginLeft=0,b){const Ze=parseFloat(U.marginTop),Le=parseFloat(U.marginLeft);_n(we.top)&&(we.top-=G-Ze),_n(we.bottom)&&(we.bottom-=G-Ze),_n(we.left)&&(we.left-=ne-Le),_n(we.right)&&(we.right-=ne-Le),we.marginTop=Ze,we.marginLeft=Le}return we}function v_(n,e="top"){const t="top"===e?"scrollTop":"scrollLeft",r=n.nodeName;if("BODY"===r||"HTML"===r){const i=n.ownerDocument.documentElement;return(n.ownerDocument.scrollingElement||i)[t]}return n[t]}function Ag(n){const e=n.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===os(n,"position")||Ag(Wu(n)))}function Sg(n,e,t=0,r,i=!1){let u={top:0,left:0};const c=i?m_(n):Cg(n,e);if("viewport"===r)u=function E_(n,e=!1){const t=n.ownerDocument.documentElement,r=Tg(n,t),i=Math.max(t.clientWidth,window.innerWidth||0),u=Math.max(t.clientHeight,window.innerHeight||0),c=e?0:v_(t),f=e?0:v_(t,"left");return _a({top:c-Number(null==r?void 0:r.top)+Number(null==r?void 0:r.marginTop),left:f-Number(null==r?void 0:r.left)+Number(null==r?void 0:r.marginLeft),width:i,height:u})}(c,i);else{let f;"scrollParent"===r?(f=__(Wu(e)),"BODY"===f.nodeName&&(f=n.ownerDocument.documentElement)):f="window"===r?n.ownerDocument.documentElement:r;const y=Tg(f,c,i);if(y&&"HTML"===f.nodeName&&!Ag(c)){const{height:b,width:S}=Rd(n.ownerDocument);_n(u.top)&&_n(y.top)&&_n(y.marginTop)&&(u.top+=y.top-y.marginTop),_n(u.top)&&(u.bottom=Number(b)+Number(y.top)),_n(u.left)&&_n(y.left)&&_n(y.marginLeft)&&(u.left+=y.left-y.marginLeft),_n(u.top)&&(u.right=Number(S)+Number(y.left))}else y&&(u=y)}return _n(u.left)&&(u.left+=t),_n(u.top)&&(u.top+=t),_n(u.right)&&(u.right-=t),_n(u.bottom)&&(u.bottom-=t),u}function Mg({width:n,height:e}){return n*e}function CE(n,e,t,r,i=["top","bottom","right","left"],u="viewport",c=0){var f,y,b,S,M,F,U,G,ne,we,Ze,Le;if(-1===n.indexOf("auto"))return n;const Ke=Sg(t,r,c,u),ze={top:{width:null!==(f=null==Ke?void 0:Ke.width)&&void 0!==f?f:0,height:(null!==(y=null==e?void 0:e.top)&&void 0!==y?y:0)-(null!==(b=null==Ke?void 0:Ke.top)&&void 0!==b?b:0)},right:{width:(null!==(S=null==Ke?void 0:Ke.right)&&void 0!==S?S:0)-(null!==(M=null==e?void 0:e.right)&&void 0!==M?M:0),height:null!==(F=null==Ke?void 0:Ke.height)&&void 0!==F?F:0},bottom:{width:null!==(U=null==Ke?void 0:Ke.width)&&void 0!==U?U:0,height:(null!==(G=null==Ke?void 0:Ke.bottom)&&void 0!==G?G:0)-(null!==(ne=null==e?void 0:e.bottom)&&void 0!==ne?ne:0)},left:{width:(null!==(we=e.left)&&void 0!==we?we:0)-(null!==(Ze=null==Ke?void 0:Ke.left)&&void 0!==Ze?Ze:0),height:null!==(Le=null==Ke?void 0:Ke.height)&&void 0!==Le?Le:0}},_t=Object.keys(ze).map(En=>Object.assign(Object.assign({position:En},ze[En]),{area:Mg(ze[En])})).sort((En,Zt)=>Zt.area-En.area);let ct=_t.filter(({width:En,height:Zt})=>En>=t.clientWidth&&Zt>=t.clientHeight);ct=ct.filter(({position:En})=>i.some(Zt=>Zt===En));const Jt=ct.length>0?ct[0].position:_t[0].position,Dn=n.split(" ")[1];return t.className=t.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${Hi().isBs5?wf[Jt]:Jt}`),Jt+(Dn?`-${Dn}`:"")}const Df=(n,e=0)=>n?parseFloat(n):e;function SE(n){const e=n.ownerDocument.defaultView,t=null==e?void 0:e.getComputedStyle(n),r=Df(null==t?void 0:t.marginTop)+Df(null==t?void 0:t.marginBottom),i=Df(null==t?void 0:t.marginLeft)+Df(null==t?void 0:t.marginRight);return{width:Number(n.offsetWidth)+i,height:Number(n.offsetHeight)+r}}function w_(n,e,t){return Tg(e,t?m_(n):Cg(n,e),t)}function b_(n,e,t){var r,i,u;const c=t.split(" ")[0],f=SE(n),y={width:f.width,height:f.height},b=-1!==["right","left"].indexOf(c),S=b?"top":"left",M=b?"left":"top",F=b?"height":"width",U=b?"width":"height";return y[S]=(null!==(r=e[S])&&void 0!==r?r:0)+e[F]/2-f[F]/2,y[M]=c===M?(null!==(i=e[M])&&void 0!==i?i:0)-f[U]:null!==(u=e[function NM(n){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,t=>e[t])}(M)])&&void 0!==u?u:0,y}function ME(n,e){var t;return!!(null===(t=n.modifiers[e])||void 0===t?void 0:t.enabled)}const Ss={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function xg(n,e){return!!Hi().isBs5&&Ss[e].includes(n)}function pI(n,e,t){!n||!e||Object.keys(e).forEach(r=>{let i="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&function y_(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(Number(n))}(e[r])&&(i="px"),t?t.setStyle(n,r,`${String(e[r])}${i}`):n.style[r]=String(e[r])+i})}function xE(n){var e,t,r,i,u,c;let f=n.offsets.target;const y=n.instance.target.querySelector(".arrow");if(!y)return n;const b=-1!==["left","right"].indexOf(n.placement.split(" ")[0]),S=b?"height":"width",M=b?"Top":"Left",F=M.toLowerCase(),U=b?"left":"top",G=b?"bottom":"right",ne=SE(y)[S],we=n.placement.split(" ")[1];(null!==(e=n.offsets.host[G])&&void 0!==e?e:0)-ne<(null!==(t=f[F])&&void 0!==t?t:0)&&(f[F]-=(null!==(r=f[F])&&void 0!==r?r:0)-((null!==(i=n.offsets.host[G])&&void 0!==i?i:0)-ne)),Number(n.offsets.host[F])+Number(ne)>(null!==(u=f[G])&&void 0!==u?u:0)&&(f[F]+=Number(n.offsets.host[F])+Number(ne)-Number(f[G])),f=_a(f);const Ze=os(n.instance.target),Le=parseFloat(Ze[`margin${M}`])||0,Ke=parseFloat(Ze[`border${M}Width`])||0;let ze;if(we){const ct=parseFloat(Ze.borderRadius)||0,Jt=Number(Le+Ke+ct);ze=F===we?Number(n.offsets.host[F])+Jt:Number(n.offsets.host[F])+Number(n.offsets.host[S]-Jt)}else ze=Number(n.offsets.host[F])+Number(n.offsets.host[S]/2-ne/2);let _t=ze-(null!==(c=f[F])&&void 0!==c?c:0)-Le-Ke;return _t=Math.max(Math.min(f[S]-(ne+5),_t),0),n.offsets.arrow={[F]:Math.round(_t),[U]:""},n.instance.arrow=y,n}function OM(n){if(n.offsets.target=_a(n.offsets.target),!ME(n.options,"flip"))return n.offsets.target=Object.assign(Object.assign({},n.offsets.target),b_(n.instance.target,n.offsets.host,n.placement)),n;const e=Sg(n.instance.target,n.instance.host,0,"viewport",!1);let t=n.placement.split(" ")[0],r=n.placement.split(" ")[1]||"";const f=CE("auto",n.offsets.host,n.instance.target,n.instance.host,n.options.allowedPositions),y=[t,f];return y.forEach((b,S)=>{var M,F,U,G,ne,we,Ze,Le,Ke,ze,_t,ct,Jt,Dn,En,Zt;if(t!==b||y.length===S+1)return;t=n.placement.split(" ")[0];const Tn="left"===t&&Math.floor(null!==(M=n.offsets.target.right)&&void 0!==M?M:0)>Math.floor(null!==(F=n.offsets.host.left)&&void 0!==F?F:0)||"right"===t&&Math.floor(null!==(U=n.offsets.target.left)&&void 0!==U?U:0)<Math.floor(null!==(G=n.offsets.host.right)&&void 0!==G?G:0)||"top"===t&&Math.floor(null!==(ne=n.offsets.target.bottom)&&void 0!==ne?ne:0)>Math.floor(null!==(we=n.offsets.host.top)&&void 0!==we?we:0)||"bottom"===t&&Math.floor(null!==(Ze=n.offsets.target.top)&&void 0!==Ze?Ze:0)<Math.floor(null!==(Le=n.offsets.host.bottom)&&void 0!==Le?Le:0),Ps=Math.floor(null!==(Ke=n.offsets.target.left)&&void 0!==Ke?Ke:0)<Math.floor(null!==(ze=e.left)&&void 0!==ze?ze:0),ml=Math.floor(null!==(_t=n.offsets.target.right)&&void 0!==_t?_t:0)>Math.floor(null!==(ct=e.right)&&void 0!==ct?ct:0),J0=Math.floor(null!==(Jt=n.offsets.target.top)&&void 0!==Jt?Jt:0)<Math.floor(null!==(Dn=e.top)&&void 0!==Dn?Dn:0),X0=Math.floor(null!==(En=n.offsets.target.bottom)&&void 0!==En?En:0)>Math.floor(null!==(Zt=e.bottom)&&void 0!==Zt?Zt:0),st="left"===t&&Ps||"right"===t&&ml||"top"===t&&J0||"bottom"===t&&X0,gt=-1!==["top","bottom"].indexOf(t),St=gt&&"left"===r&&Ps||gt&&"right"===r&&ml||!gt&&"left"===r&&J0||!gt&&"right"===r&&X0;(Tn||st||St)&&((Tn||st)&&(t=y[S+1]),St&&(r=function AE(n){return"right"===n?"left":"left"===n?"right":n}(r)),n.placement=t+(r?` ${r}`:""),n.offsets.target=Object.assign(Object.assign({},n.offsets.target),b_(n.instance.target,n.offsets.host,n.placement)))}),n}function D_(n){var e;if(!ME(n.options,"preventOverflow"))return n;const t="transform",r=n.instance.target.style,{top:i,left:u,[t]:c}=r;r.top="",r.left="",r[t]="";const f=Sg(n.instance.target,n.instance.host,0,(null===(e=n.options.modifiers.preventOverflow)||void 0===e?void 0:e.boundariesElement)||"scrollParent",!1);r.top=i,r.left=u,r[t]=c;const b={primary(S){var M,F,U,G;let ne=n.offsets.target[S];return(null!==(M=n.offsets.target[S])&&void 0!==M?M:0)<(null!==(F=f[S])&&void 0!==F?F:0)&&(ne=Math.max(null!==(U=n.offsets.target[S])&&void 0!==U?U:0,null!==(G=f[S])&&void 0!==G?G:0)),{[S]:ne}},secondary(S){var M,F,U,G;const ne="right"===S,we=ne?"left":"top";let Le=n.offsets.target[we];return(null!==(M=n.offsets.target[S])&&void 0!==M?M:0)>(null!==(F=f[S])&&void 0!==F?F:0)&&(Le=Math.min(null!==(U=n.offsets.target[we])&&void 0!==U?U:0,(null!==(G=f[S])&&void 0!==G?G:0)-n.offsets.target[ne?"width":"height"])),{[we]:Le}}};return["left","right","top","bottom"].forEach(S=>{const M=-1!==["left","top","start"].indexOf(S)?b.primary:b.secondary;n.offsets.target=Object.assign(Object.assign({},n.offsets.target),M(S))}),n}function NE(n){var e;const t=n.placement,r=t.split(" ")[0],i=t.split(" ")[1];if(i){const{host:u,target:c}=n.offsets,f=-1!==["bottom","top"].indexOf(r),y=f?"left":"top",b=f?"width":"height",S={start:{[y]:u[y]},end:{[y]:(null!==(e=u[y])&&void 0!==e?e:0)+u[b]-c[b]}};n.offsets.target=Object.assign(Object.assign({},c),{[y]:y===i?S.start[y]:S.end[y]})}return n}const yI=new class mI{position(e,t){return this.offset(e,t)}offset(e,t){return w_(t,e)}positionElements(e,t,r,i,u){const c=[OM,NE,D_,xE],y=function gI(n,e,t,r){if(!n||!e)return;const i=w_(n,e);!t.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!t.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(t="auto");const u=!!t.match(/auto/g);let c=t.match(/auto\s(left|right|top|bottom|start|end)/)?t.split(" ")[1]||"auto":t;const f=c.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return f&&(c=f[1]+(f[2]?` ${f[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(c)&&(c="auto"),c=CE(c,i,n,e,r?r.allowedPositions:void 0),{options:r||{modifiers:{}},instance:{target:n,host:e,arrow:void 0},offsets:{target:b_(n,i,c),host:i,arrow:void 0},positionFixed:!1,placement:c,placementAuto:u}}(t,e,Nd[r],u);if(y)return c.reduce((b,S)=>S(b),y)}};function _I(n,e,t,r,i,u){const c=yI.positionElements(n,e,t,r,i);if(!c)return;const f=function TE(n){var e,t,r,i;return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(null!==(e=n.offsets.target.left)&&void 0!==e?e:0),top:Math.round(null!==(t=n.offsets.target.top)&&void 0!==t?t:0),bottom:Math.round(null!==(r=n.offsets.target.bottom)&&void 0!==r?r:0),right:Math.floor(null!==(i=n.offsets.target.right)&&void 0!==i?i:0)}}(c);pI(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${f.left}px, ${f.top}px, 0px)`},u),c.instance.arrow&&pI(c.instance.arrow,c.offsets.arrow,u),function RM(n,e){const t=n.instance.target;let r=t.className;const i=Hi().isBs5?wf[n.placement]:n.placement;n.placementAuto&&(r=r.replace(/bs-popover-auto/g,`bs-popover-${i}`),r=r.replace(/ms-2|me-2|mb-2|mt-2/g,""),r=r.replace(/bs-tooltip-auto/g,`bs-tooltip-${i}`),r=r.replace(/\sauto/g,` ${i}`),-1!==r.indexOf("popover")&&(r=r+" "+function fI(n){return Hi().isBs5?xg(n,"end")?"ms-2":xg(n,"start")?"me-2":xg(n,"top")?"mb-2":xg(n,"bottom")?"mt-2":"":""}(i)),-1!==r.indexOf("popover")&&-1===r.indexOf("popover-auto")&&(r+=" popover-auto"),-1!==r.indexOf("tooltip")&&-1===r.indexOf("tooltip-auto")&&(r+=" tooltip-auto")),r=r.replace(/left|right|top|bottom|end|start/g,`${i.split(" ")[0]}`),e?e.setAttribute(t,"class",r):t.className=r}(c,u)}let I_=(()=>{class n{constructor(t,r,i){this.update$$=new lr.x,this.positionElements=new Map,this.isDisabled=!1,function Vr(n){return n===qs}(i)&&t.runOutsideAngular(()=>{this.triggerEvent$=(0,Dg.T)(f_(window,"scroll",{passive:!0}),f_(window,"resize",{passive:!0}),mt(0,g_),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(u=>{_I(Ng(u.target),Ng(u.element),u.attachment,u.appendToBody,this.options,r.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(t){this.positionElements.set(Ng(t.element),t)}calcPosition(){this.update$$.next(null)}deletePositionElement(t){this.positionElements.delete(Ng(t))}setOptions(t){this.options=t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.R0b),p.LFG(p.FYo),p.LFG(p.Lbi))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ng(n){return"string"==typeof n?document.querySelector(n):n instanceof p.SBq?n.nativeElement:null!=n?n:null}class If{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}class EI{constructor(e,t,r,i,u,c,f,y){this._viewContainerRef=e,this._renderer=t,this._elementRef=r,this._injector=i,this._componentFactoryResolver=u,this._ngZone=c,this._applicationRef=f,this._posService=y,this.onBeforeShow=new p.vpe,this.onShown=new p.vpe,this.onBeforeHide=new p.vpe,this.onHidden=new p.vpe,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(e){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(e),this}to(e){return this.container=e||this.container,this}position(e){return e?(this.attachment=e.attachment||this.attachment,this._elementRef=e.target||this._elementRef,this):this}provide(e){return this._providers.push(e),this}show(e={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(e.content,e.context,e.initialState);const t=p.zs3.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(t,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,e),this.container instanceof p.SBq&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&"undefined"!=typeof document){const r=document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector);if(!r)return;r.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(e.id?{id:e.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(e){var t,r,i,u,c,f;if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const y=this._componentRef.location.nativeElement;return null===(t=y.parentNode)||void 0===t||t.removeChild(y),null===(i=null===(r=this._contentRef)||void 0===r?void 0:r.componentRef)||void 0===i||i.destroy(),this._viewContainerRef&&(null===(u=this._contentRef)||void 0===u?void 0:u.viewRef)&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),null===(f=null===(c=this._contentRef)||void 0===c?void 0:c.viewRef)||void 0===f||f.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(e?{id:e}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(e){var t;this.triggers=e.triggers||this.triggers,this._listenOpts.outsideClick=e.outsideClick,this._listenOpts.outsideEsc=e.outsideEsc,e.target=e.target||(null===(t=this._elementRef)||void 0===t?void 0:t.nativeElement);const r=this._listenOpts.hide=()=>e.hide?e.hide():void this.hide(),i=this._listenOpts.show=c=>{e.show?e.show(c):this.show(c),c()};return this._renderer&&(this._unregisterListenersFn=function uM(n,e){const t=function _g(n,e=pE){const t=(n||"").trim();if(0===t.length)return[];const r=t.split(/\s+/).map(u=>u.split(":")).map(u=>{const c=e[u[0]]||u;return new eI(c[0],c[1])}),i=r.filter(u=>u.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===i.length&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}(e.triggers),r=e.target;if(1===t.length&&t[0].isManual())return Function.prototype;const i=[],u=[],c=()=>{u.forEach(f=>i.push(f())),u.length=0};return t.forEach(f=>{const y=f.open===f.close,b=y?e.toggle:e.show;if(!y&&f.close&&e.hide){const S=n.listen(r,f.close,e.hide);u.push(()=>S)}b&&i.push(n.listen(r,f.open,()=>b(c)))}),()=>{i.forEach(f=>f())}}(this._renderer,{target:e.target,triggers:e.triggers,show:i,hide:r,toggle:c=>{this.isShown?r():i(c)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(e,t){return e&&t&&(this._inlineViewRef=e.createEmbeddedView(t)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const e=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(this._globalListener=function gE(n,e){return e.outsideClick?n.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[e,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=function nI(n,e){return e.outsideEsc?n.listen("document","keyup.esc",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{var e;this._posService.position({element:null===(e=this._componentRef)||void 0===e?void 0:e.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{!this._componentRef||this._posService.calcPosition()}))}_unsubscribePositioning(){!this._zoneSubscription||(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(e,t,r){if(!e)return new If([]);if(e instanceof p.Rgc){if(this._viewContainerRef){const c=this._viewContainerRef.createEmbeddedView(e,t);return c.markForCheck(),new If([c.rootNodes],c)}const u=e.createEmbeddedView({});return this._applicationRef.attachView(u),new If([u.rootNodes],u)}if("function"==typeof e){const u=this._componentFactoryResolver.resolveComponentFactory(e),c=p.zs3.create({providers:this._providers,parent:this._injector}),f=u.create(c);return Object.assign(f.instance,r),this._applicationRef.attachView(f.hostView),new If([[f.location.nativeElement]],f.hostView,f)}const i=this._renderer?[this._renderer.createText(`${e}`)]:[];return new If([i])}}let C_=(()=>{class n{constructor(t,r,i,u,c){this._componentFactoryResolver=t,this._ngZone=r,this._injector=i,this._posService=u,this._applicationRef=c}createLoader(t,r,i){return new EI(r,i,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p._Vd),p.LFG(p.R0b),p.LFG(p.zs3),p.LFG(I_),p.LFG(p.z2F))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const RE=function(n){return{dropdown:n}},wI=["*"],Rg=[Md({height:0,overflow:"hidden"}),function wg(n,e=null){return{type:4,styles:e,timings:n}}("220ms cubic-bezier(0, 0, 0.2, 1)",Md({height:"*",overflow:"hidden"}))];let lc=(()=>{class n{constructor(){this.direction="down",this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.stopOnClickPropagation=!1,this.isOpenChange=new p.vpe,this.isDisabledChange=new p.vpe,this.toggleClick=new p.vpe,this.counts=0,this.dropdownMenu=new Promise(t=>{this.resolveDropdownMenu=t})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),bI=(()=>{class n{constructor(t,r,i,u,c){this._state=t,this.cd=r,this._renderer=i,this._element=u,this.isOpen=!1,this._factoryDropDownAnimation=c.build(Rg),this._subscription=t.isOpenChange.subscribe(f=>{this.isOpen=f;const y=this._element.nativeElement.querySelector(".dropdown-menu");this._renderer.addClass(this._element.nativeElement.querySelector("div"),"open"),y&&!uc()&&(this._renderer.addClass(y,"show"),(y.classList.contains("dropdown-menu-right")||y.classList.contains("dropdown-menu-end"))&&(this._renderer.setStyle(y,"left","auto"),this._renderer.setStyle(y,"right","0")),"up"===this.direction&&(this._renderer.setStyle(y,"top","auto"),this._renderer.setStyle(y,"transform","translateY(-101%)"))),y&&this._state.isAnimated&&this._factoryDropDownAnimation.create(y).play(),this.cd.markForCheck(),this.cd.detectChanges()})}get direction(){return this._state.direction}_contains(t){return this._element.nativeElement.contains(t)}ngOnDestroy(){this._subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(lc),p.Y36(p.sBO),p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(l_))},n.\u0275cmp=p.Xpm({type:n,selectors:[["bs-dropdown-container"]],hostAttrs:[2,"display","block","position","absolute","z-index","1040"],ngContentSelectors:wI,decls:2,vars:9,consts:[[3,"ngClass"]],template:function(t,r){1&t&&(p.F$t(),p.TgZ(0,"div",0),p.Hsn(1),p.qZA()),2&t&&(p.ekj("dropup","up"===r.direction)("show",r.isOpen)("open",r.isOpen),p.Q6J("ngClass",p.VKq(7,RE,"down"===r.direction)))},directives:[Bs],encapsulation:2,changeDetection:0}),n})(),DI=(()=>{class n{constructor(){this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.stopOnClickPropagation=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),T_=(()=>{class n{constructor(t,r,i,u,c,f,y){this._elementRef=t,this._renderer=r,this._viewContainerRef=i,this._cis=u,this._state=c,this._config=f,this.dropup=!1,this._isInlineOpen=!1,this._isDisabled=!1,this._subscriptions=[],this._isInited=!1,this._state.autoClose=this._config.autoClose,this._state.insideClick=this._config.insideClick,this._state.isAnimated=this._config.isAnimated,this._state.stopOnClickPropagation=this._config.stopOnClickPropagation,this._factoryDropDownAnimation=y.build(Rg),this._dropdown=this._cis.createLoader(this._elementRef,this._viewContainerRef,this._renderer).provide({provide:lc,useValue:this._state}),this.onShown=this._dropdown.onShown,this.onHidden=this._dropdown.onHidden,this.isOpenChange=this._state.isOpenChange}set autoClose(t){this._state.autoClose=t}get autoClose(){return this._state.autoClose}set isAnimated(t){this._state.isAnimated=t}get isAnimated(){return this._state.isAnimated}set insideClick(t){this._state.insideClick=t}get insideClick(){return this._state.insideClick}set isDisabled(t){this._isDisabled=t,this._state.isDisabledChange.emit(t),t&&this.hide()}get isDisabled(){return this._isDisabled}get isOpen(){return this._showInline?this._isInlineOpen:this._dropdown.isShown}set isOpen(t){t?this.show():this.hide()}get isBs4(){return!uc()}get _showInline(){return!this.container}ngOnInit(){this._isInited||(this._isInited=!0,this._dropdown.listen({outsideClick:!1,triggers:this.triggers,show:()=>this.show()}),this._subscriptions.push(this._state.toggleClick.subscribe(t=>this.toggle(t))),this._subscriptions.push(this._state.isDisabledChange.pipe(Xi(t=>t)).subscribe(()=>this.hide())))}show(){if(!this.isOpen&&!this.isDisabled){if(this._showInline)return this._inlinedMenu||this._state.dropdownMenu.then(t=>{this._dropdown.attachInline(t.viewContainer,t.templateRef),this._inlinedMenu=this._dropdown._inlineViewRef,this.addBs4Polyfills(),this._inlinedMenu&&this._renderer.addClass(this._inlinedMenu.rootNodes[0].parentNode,"open"),this.playAnimation()}).catch(),this.addBs4Polyfills(),this._isInlineOpen=!0,this.onShown.emit(!0),this._state.isOpenChange.emit(!0),void this.playAnimation();this._state.dropdownMenu.then(t=>{const r=this.dropup||void 0!==this.dropup&&this.dropup;this._state.direction=r?"up":"down";const i=this.placement||(r?"top start":"bottom start");this._dropdown.attach(bI).to(this.container).position({attachment:i}).show({content:t.templateRef,placement:i}),this._state.isOpenChange.emit(!0)}).catch()}}hide(){!this.isOpen||(this._showInline?(this.removeShowClass(),this.removeDropupStyles(),this._isInlineOpen=!1,this.onHidden.emit(!0)):this._dropdown.hide(),this._state.isOpenChange.emit(!1))}toggle(t){return this.isOpen||!t?this.hide():this.show()}_contains(t){return this._elementRef.nativeElement.contains(t.target)||this._dropdown.instance&&this._dropdown.instance._contains(t.target)}navigationClick(t){const r=this._elementRef.nativeElement.querySelector(".dropdown-menu");if(!r)return;const i=this._elementRef.nativeElement.ownerDocument.activeElement,u=r.querySelectorAll(".dropdown-item");switch(t.keyCode){case 38:this._state.counts>0&&u[--this._state.counts].focus();break;case 40:this._state.counts+1<u.length&&(i.classList!==u[this._state.counts].classList?u[this._state.counts].focus():u[++this._state.counts].focus())}t.preventDefault()}ngOnDestroy(){for(const t of this._subscriptions)t.unsubscribe();this._dropdown.dispose()}addBs4Polyfills(){uc()||(this.addShowClass(),this.checkRightAlignment(),this.addDropupStyles())}playAnimation(){this._state.isAnimated&&this._inlinedMenu&&setTimeout(()=>{this._inlinedMenu&&this._factoryDropDownAnimation.create(this._inlinedMenu.rootNodes[0]).play()})}addShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.addClass(this._inlinedMenu.rootNodes[0],"show")}removeShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.removeClass(this._inlinedMenu.rootNodes[0],"show")}checkRightAlignment(){if(this._inlinedMenu&&this._inlinedMenu.rootNodes[0]){const t=this._inlinedMenu.rootNodes[0].classList.contains("dropdown-menu-right")||this._inlinedMenu.rootNodes[0].classList.contains("dropdown-menu-end");this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"left",t?"auto":"0"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"right",t?"0":"auto")}}addDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"top",this.dropup?"auto":"100%"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"transform",this.dropup?"translateY(-101%)":"translateY(0)"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"bottom","auto"))}removeDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"top"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"transform"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"bottom"))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(p.s_b),p.Y36(C_),p.Y36(lc),p.Y36(DI),p.Y36(l_))},n.\u0275dir=p.lG2({type:n,selectors:[["","bsDropdown",""],["","dropdown",""]],hostVars:6,hostBindings:function(t,r){1&t&&p.NdJ("keydown.arrowDown",function(u){return r.navigationClick(u)})("keydown.arrowUp",function(u){return r.navigationClick(u)}),2&t&&p.ekj("dropup",r.dropup)("open",r.isOpen)("show",r.isOpen&&r.isBs4)},inputs:{placement:"placement",triggers:"triggers",container:"container",dropup:"dropup",autoClose:"autoClose",isAnimated:"isAnimated",insideClick:"insideClick",isDisabled:"isDisabled",isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange",onShown:"onShown",onHidden:"onHidden"},exportAs:["bs-dropdown"],features:[p._Bn([lc])]}),n})(),II=(()=>{class n{constructor(t,r,i){t.resolveDropdownMenu({templateRef:i,viewContainer:r})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(lc),p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","bsDropdownMenu",""],["","dropdownMenu",""]],exportAs:["bs-dropdown-menu"]}),n})(),CI=(()=>{class n{constructor(t,r,i,u,c){this._changeDetectorRef=t,this._dropdown=r,this._element=i,this._renderer=u,this._state=c,this.isOpen=!1,this._subscriptions=[],this._subscriptions.push(this._state.isOpenChange.subscribe(f=>{this.isOpen=f,f?(this._documentClickListener=this._renderer.listen("document","click",y=>{this._state.autoClose&&2!==y.button&&!this._element.nativeElement.contains(y.target)&&(!this._state.insideClick||!this._dropdown._contains(y))&&(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())}),this._escKeyUpListener=this._renderer.listen(this._element.nativeElement,"keyup.esc",()=>{this._state.autoClose&&(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())})):(this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener())})),this._subscriptions.push(this._state.isDisabledChange.subscribe(f=>this.isDisabled=f||void 0))}onClick(t){this._state.stopOnClickPropagation&&t.stopPropagation(),!this.isDisabled&&this._state.toggleClick.emit(!0)}ngOnDestroy(){this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener();for(const t of this._subscriptions)t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.sBO),p.Y36(T_),p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(lc))},n.\u0275dir=p.lG2({type:n,selectors:[["","bsDropdownToggle",""],["","dropdownToggle",""]],hostVars:3,hostBindings:function(t,r){1&t&&p.NdJ("click",function(u){return r.onClick(u)}),2&t&&p.uIk("aria-haspopup",!0)("disabled",r.isDisabled)("aria-expanded",r.isOpen)},exportAs:["bs-dropdown-toggle"]}),n})(),TI=(()=>{class n{static forRoot(){return{ngModule:n,providers:[C_,I_,lc]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[Ar]]}),n})();function A_(n,e){1&n&&(p.TgZ(0,"ul",7)(1,"li",8)(2,"a",9),p._uU(3,"Delete task"),p.qZA()(),p.TgZ(4,"li",8)(5,"a",9),p._uU(6,"Delete task"),p.qZA()(),p.TgZ(7,"li",8)(8,"a",9),p._uU(9,"Delete task"),p.qZA()()())}function AI(n,e){if(1&n&&(p.TgZ(0,"div",2)(1,"div"),p._UZ(2,"input",3),p.TgZ(3,"label"),p._uU(4),p.qZA()(),p.TgZ(5,"div",4)(6,"button",5),p._uU(7,"..."),p.qZA(),p.YNc(8,A_,10,0,"ul",6),p.qZA()()),2&n){const t=e.$implicit;p.xp6(4),p.Oqu(t.task)}}let OE=(()=>{class n{constructor(t){this._getsAllTaskDto=t,this.tasksList$=this._getsAllTaskDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(fE))},n.\u0275cmp=p.Xpm({type:n,selectors:[["lib-tasks-list-view"]],features:[p._Bn([{provide:DI,useValue:{isAnimated:!0,autoClose:!0}}])],decls:3,vars:3,consts:[[1,"py-5","border-bottom"],["class","form-check d-flex justify-content-between align-items-center py-3 pe-5",4,"ngFor","ngForOf"],[1,"form-check","d-flex","justify-content-between","align-items-center","py-3","pe-5"],["type","checkbox",1,"form-check-input","rounded-circle","border-dark","border-2"],["dropdown","",1,"btn-group"],["id","button-animated","dropdownToggle","","type","button","aria-controls","dropdown-animated",1,"btn","bg-white","fw-bold"],["id","dropdown-animated","class","dropdown-menu dropdown-menu-right","role","menu","aria-labelledby","button-animated",4,"dropdownMenu"],["id","dropdown-animated","role","menu","aria-labelledby","button-animated",1,"dropdown-menu","dropdown-menu-right"],["role","menuitem"],["href","#",1,"dropdown-item"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.YNc(1,AI,9,1,"div",1),p.ALo(2,"async"),p.qZA()),2&t&&(p.xp6(1),p.Q6J("ngForOf",p.lcZ(2,1,r.tasksList$)))},directives:[ur,T_,CI,II],pipes:[ka],encapsulation:2,changeDetection:0}),n})(),Og=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-my-list-page"]],decls:5,vars:0,consts:[["routerLink","/add-task","role","button",1,"btn","bg-special","text-white","mt-5"]],template:function(t,r){1&t&&(p._UZ(0,"lib-date")(1,"lib-tasks-list-view"),p.TgZ(2,"div")(3,"a",0),p._uU(4,"Add task"),p.qZA()())},directives:[Ef,OE,ac],encapsulation:2,changeDetection:0}),n})(),Pd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[],imports:[[Ar]]}),n})(),PE=(()=>{class n{getAll(){return mt({currentDate:new Date})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),kd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[PE,{provide:hE,useExisting:PE}],imports:[[]]}),n})(),M_=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),cc=(()=>{class n extends M_{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const Ea=new p.OlP("NgValueAccessor"),MI={provide:Ea,useExisting:(0,p.Gpc)(()=>Cf),multi:!0},FE=new p.OlP("CompositionEventMode");let Cf=(()=>{class n extends M_{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function kE(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(FE,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[p._Bn([MI]),p.qOj]}),n})();function Ya(n){return null==n||0===n.length}function N_(n){return null!=n&&"number"==typeof n.length}const Hn=new p.OlP("NgValidators"),jo=new p.OlP("NgAsyncValidators"),xI=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class NI{static min(e){return function RI(n){return e=>{if(Ya(e.value)||Ya(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Pg(n){return e=>{if(Ya(e.value)||Ya(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function R_(n){return Ya(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function kg(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Fd(n){return Ya(n.value)||xI.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function LE(n){return e=>Ya(e.value)||!N_(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Fg(n){return e=>N_(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function O_(n){if(!n)return Tf;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ya(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return dc(e)}static composeAsync(e){return BE(e)}}function Tf(n){return null}function P_(n){return null!=n}function VE(n){const e=(0,p.QGY)(n)?(0,Bn.D)(n):n;return(0,p.CqO)(e),e}function Lg(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function UE(n,e){return e.map(t=>t(n))}function k_(n){return n.map(e=>function OI(n){return!n.validate}(e)?e:t=>e.validate(t))}function dc(n){if(!n)return null;const e=n.filter(P_);return 0==e.length?null:function(t){return Lg(UE(t,e))}}function Vg(n){return null!=n?dc(k_(n)):null}function BE(n){if(!n)return null;const e=n.filter(P_);return 0==e.length?null:function(t){return function S_(...n){const e=(0,jn.jO)(n),{args:t,keys:r}=ki(n),i=new Ur.y(u=>{const{length:c}=t;if(!c)return void u.complete();const f=new Array(c);let y=c,b=c;for(let S=0;S<c;S++){let M=!1;(0,Ro.Xf)(t[S]).subscribe((0,Wn.x)(u,F=>{M||(M=!0,b--),f[S]=F},()=>y--,void 0,()=>{(!y||!M)&&(b||u.next(r?No(r,f):f),u.complete())}))}});return e?i.pipe(Fl(e)):i}(UE(t,e).map(VE)).pipe((0,Ft.U)(Lg))}}function F_(n){return null!=n?BE(k_(n)):null}function hc(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function jE(n){return n._rawValidators}function $E(n){return n._rawAsyncValidators}function L_(n){return n?Array.isArray(n)?n:[n]:[]}function Ug(n,e){return Array.isArray(n)?n.includes(e):n===e}function lo(n,e){const t=L_(e);return L_(n).forEach(i=>{Ug(t,i)||t.push(i)}),t}function Bg(n,e){return L_(e).filter(t=>!Ug(n,t))}class V_{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Vg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=F_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Qa extends V_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class bi extends V_{get formDirective(){return null}get path(){return null}}class U_{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let HE=(()=>{class n extends U_{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Qa,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[p.qOj]}),n})(),GE=(()=>{class n extends U_{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(bi,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[p.qOj]}),n})();function Ld(n,e){Sf(n,e),e.valueAccessor.writeValue(n.value),function H_(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ZE(n,e)})}(n,e),function VI(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function LI(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ZE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function KE(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function $g(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Hg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function $_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Sf(n,e){const t=jE(n);null!==e.validator?n.setValidators(hc(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=$E(n);null!==e.asyncValidator?n.setAsyncValidators(hc(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();$_(e._rawValidators,i),$_(e._rawAsyncValidators,i)}function Hg(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=jE(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=$E(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return $_(e._rawValidators,r),$_(e._rawAsyncValidators,r),t}function ZE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ho(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const $o="VALID",gc="INVALID",ni="PENDING",mc="DISABLED";function Ku(n){return(Ja(n)?n.validators:n)||null}function yc(n){return Array.isArray(n)?Vg(n):n||null}function Zu(n,e){return(Ja(e)?e.asyncValidators:n)||null}function _c(n){return Array.isArray(n)?F_(n):n||null}function Ja(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const vc=n=>n instanceof Wg,Yu=n=>n instanceof xf;function G_(n){return vc(n)?n.value:n.getRawValue()}function q_(n,e){const t=Yu(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[e])throw new p.vHH(1001,"")}function z_(n,e){Yu(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new p.vHH(1002,"")})}class zg{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=yc(this._rawValidators),this._composedAsyncValidatorFn=_c(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===$o}get invalid(){return this.status===gc}get pending(){return this.status==ni}get disabled(){return this.status===mc}get enabled(){return this.status!==mc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=yc(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=_c(e)}addValidators(e){this.setValidators(lo(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lo(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Bg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Bg(e,this._rawAsyncValidators))}hasValidator(e){return Ug(this._rawValidators,e)}hasAsyncValidator(e){return Ug(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ni,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=mc,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=$o,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$o||this.status===ni)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mc:$o}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ni,this._hasOwnPendingAsyncValidator=!0;const t=VE(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Vd(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Yu(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof JE)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?mc:this.errors?gc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ni)?ni:this._anyControlsHaveStatus(gc)?gc:$o}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ja(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Wg extends zg{constructor(e=null,t,r){super(Ku(t),Zu(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ja(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ho(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ho(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class xf extends zg{constructor(e,t,r){super(Ku(t),Zu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){z_(this,e),Object.keys(e).forEach(r=>{q_(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=G_(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class JE extends zg{constructor(e,t,r){super(Ku(t),Zu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){z_(this,e),e.forEach((r,i)=>{q_(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>G_(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let tw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),iw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const Kg=new p.OlP("NgModelWithFormControlWarning"),jd={provide:bi,useExisting:(0,p.Gpc)(()=>Zg)};let Zg=(()=>{class n extends bi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Hg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Ld(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){$g(t.control||null,t,!1),ho(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function QE(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&($g(r||null,t),vc(i)&&(Ld(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function YE(n,e){Sf(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function UI(n,e){return Hg(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Sf(this.form,this),this._oldForm&&Hg(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Hn,10),p.Y36(jo,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([jd]),p.qOj,p.TTD]}),n})();const cw={provide:Qa,useExisting:(0,p.Gpc)(()=>X_)};let X_=(()=>{class n extends Qa{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Mf(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===Cf?t=u:function BI(n){return Object.getPrototypeOf(n.constructor)===cc}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function pc(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Af(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(p.Y36(bi,13),p.Y36(Hn,10),p.Y36(jo,10),p.Y36(Ea,10),p.Y36(Kg,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([cw]),p.qOj,p.TTD]}),n})(),bw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[iw]]}),n})(),QI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Kg,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[bw]}),n})(),uv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[],imports:[[Ar,ma,QI]]}),n})();var lv=P(4986),Gr=P(5813);function em(){return(0,Br.e)((n,e)=>{let t,r=!1;n.subscribe((0,Wn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function Cw(n,e){return n===e}var nt,fo=P(2011),Tw=(P(4087),P(3942)),ve=P(5861),Gd=P(9681),tm=P(4859),Ju=P(1877),Ht=P(2090),tC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},In={},cv=cv||{},Rt=tC||self;function Rf(){}function dv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function qd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Xu="closure_uid_"+(1e9*Math.random()>>>0),nC=0;function rC(n,e,t){return n.call.apply(n.bind,arguments)}function Sw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ri(n,e,t){return(ri=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rC:Sw).apply(null,arguments)}function Of(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Di(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function Xa(){this.s=this.s,this.o=this.o}var wa={};Xa.prototype.s=!1,Xa.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Aw(n){return Object.prototype.hasOwnProperty.call(n,Xu)&&n[Xu]||(n[Xu]=++nC)}(this);delete wa[n]}},Xa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Mw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},xw=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function po(n){return Array.prototype.concat.apply([],arguments)}function Ms(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Pf(n){return/^[\s\xa0]*$/.test(n)}var qi,fv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Gi(n,e){return-1!=n.indexOf(e)}function pv(n,e){return n<e?-1:n>e?1:0}e:{var Nw=Rt.navigator;if(Nw){var nm=Nw.userAgent;if(nm){qi=nm;break e}}qi=""}function Ec(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Rw(n){const e={};for(const t in n)e[t]=n[t];return e}var gv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ow(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<gv.length;u++)t=gv[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function rm(n){return rm[" "](n),n}rm[" "]=Rf;var kf,n,im=Gi(qi,"Opera"),zd=Gi(qi,"Trident")||Gi(qi,"MSIE"),mv=Gi(qi,"Edge"),sm=mv||zd,om=Gi(qi,"Gecko")&&!(Gi(qi.toLowerCase(),"webkit")&&!Gi(qi,"Edge"))&&!(Gi(qi,"Trident")||Gi(qi,"MSIE"))&&!Gi(qi,"Edge"),yv=Gi(qi.toLowerCase(),"webkit")&&!Gi(qi,"Edge");function _v(){var n=Rt.document;return n?n.documentMode:void 0}e:{var am="",um=(n=qi,om?/rv:([^\);]+)(\)|;)/.exec(n):mv?/Edge\/([\d\.]+)/.exec(n):zd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):yv?/WebKit\/(\S+)/.exec(n):im?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(um&&(am=um?um[1]:""),zd){var lm=_v();if(null!=lm&&lm>parseFloat(am)){kf=String(lm);break e}}kf=am}var kw={};var iC=Rt.document&&zd&&(_v()||parseInt(kf,10))||void 0,sC=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",Rf,e),Rt.removeEventListener("test",Rf,e)}catch(t){}return n}();function Ii(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Ff(n,e){if(Ii.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(om){e:{try{rm(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:oC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ff.Z.h.call(this)}}Ii.prototype.h=function(){this.defaultPrevented=!0},Di(Ff,Ii);var oC={2:"touch",3:"pen",4:"mouse"};Ff.prototype.h=function(){Ff.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Lf="closure_listenable_"+(1e6*Math.random()|0),aC=0;function uC(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++aC,this.ca=this.fa=!1}function dm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function hm(n){this.src=n,this.g={},this.h=0}function vv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=Mw(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(dm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ev(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}hm.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Ev(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new uC(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var wv="closure_lm_"+(1e6*Math.random()|0),bv={};function Vw(n,e,t,r,i){if(r&&r.once)return Dv(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Vw(n,e[u],t,r,i);return null}return t=mm(t),n&&n[Lf]?n.N(e,t,qd(r)?!!r.capture:!!r,i):Uw(n,e,t,!1,r,i)}function Uw(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=qd(i)?!!i.capture:!!i,f=pm(n);if(f||(n[wv]=f=new hm(n)),(t=f.add(e,t,r,c,u)).proxy)return t;if(r=function lC(){var e=Bw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)sC||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Cv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Dv(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Dv(n,e[u],t,r,i);return null}return t=mm(t),n&&n[Lf]?n.O(e,t,qd(r)?!!r.capture:!!r,i):Uw(n,e,t,!0,r,i)}function Iv(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)Iv(n,e[u],t,r,i);else r=qd(r)?!!r.capture:!!r,t=mm(t),n&&n[Lf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ev(u=n.g[e],t,r,i))&&(dm(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=pm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ev(e,t,r,i)),(t=-1<n?e[n]:null)&&fm(t))}function fm(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Lf])vv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Cv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=pm(e))?(vv(t,n),0==t.h&&(t.src=null,e[wv]=null)):dm(n)}}}function Cv(n){return n in bv?bv[n]:bv[n]="on"+n}function Bw(n,e){if(n.ca)n=!0;else{e=new Ff(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&fm(n),n=t.call(r,e)}return n}function pm(n){return(n=n[wv])instanceof hm?n:null}var gm="__closure_events_fn_"+(1e9*Math.random()>>>0);function mm(n){return"function"==typeof n?n:(n[gm]||(n[gm]=function(e){return n.handleEvent(e)}),n[gm])}function kr(){Xa.call(this),this.i=new hm(this),this.P=this,this.I=null}function qr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ii(e,n);else if(e instanceof Ii)e.target=e.target||n;else{var i=e;Ow(e=new Ii(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Vf(c,r,!0,e)&&i}if(i=Vf(c=e.g=n,r,!0,e)&&i,i=Vf(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Vf(c=e.g=t[u],r,!1,e)&&i}function Vf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var f=c.listener,y=c.ia||c.src;c.fa&&vv(n.i,c),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}Di(kr,Xa),kr.prototype[Lf]=!0,kr.prototype.removeEventListener=function(n,e,t,r){Iv(this,n,e,t,r)},kr.prototype.M=function(){if(kr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)dm(t[r]);delete n.g[e],n.h--}}this.I=null},kr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},kr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var eu=Rt.JSON.stringify;function cC(){var n=bt;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ym,wc=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new JM,n=>n.reset());class JM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Tv(n){Rt.setTimeout(()=>{throw n},0)}function jw(n,e){ym||function $w(){var n=Rt.Promise.resolve(void 0);ym=function(){n.then(hC)}}(),Hw||(ym(),Hw=!0),bt.add(n,e)}var Hw=!1,bt=new class dC{constructor(){this.h=this.g=null}add(e,t){const r=wc.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function hC(){for(var n;n=cC();){try{n.h.call(n.g)}catch(t){Tv(t)}var e=wc;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Hw=!1}function _m(n,e){kr.call(this),this.h=n||1,this.g=e||Rt,this.j=ri(this.kb,this),this.l=Date.now()}function Av(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Wd(n,e,t){if("function"==typeof n)t&&(n=ri(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ri(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function Gw(n){n.g=Wd(()=>{n.g=null,n.i&&(n.i=!1,Gw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Di(_m,kr),(nt=_m.prototype).da=!1,nt.S=null,nt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),qr(this,"tick"),this.da&&(Av(this),this.start()))}},nt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.M=function(){_m.Z.M.call(this),Av(this),delete this.g};class vm extends Xa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Gw(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function el(n){Xa.call(this),this.h=n,this.g={}}Di(el,Xa);var Zn=[];function fC(n,e,t,r){Array.isArray(t)||(t&&(Zn[0]=t.toString()),t=Zn);for(var i=0;i<t.length;i++){var u=Vw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Sv(n){Ec(n.g,function(e,t){this.g.hasOwnProperty(t)&&fm(e)},n),n.g={}}function Em(){this.g=!0}function bc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ww(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return eu(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}el.prototype.M=function(){el.Z.M.call(this),Sv(this)},el.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Em.prototype.Aa=function(){this.g=!1},Em.prototype.info=function(){};var Dc={},Kw=null;function wm(){return Kw=Kw||new kr}function Kd(n){Ii.call(this,Dc.Ma,n)}function Uf(n){const e=wm();qr(e,new Kd(e,n))}function Zw(n,e){Ii.call(this,Dc.STAT_EVENT,n),this.stat=e}function zi(n){const e=wm();qr(e,new Zw(e,n))}function Bf(n,e){Ii.call(this,Dc.Na,n),this.size=e}function Zd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}Dc.Ma="serverreachability",Di(Kd,Ii),Dc.STAT_EVENT="statevent",Di(Zw,Ii),Dc.Na="timingevent",Di(Bf,Ii);var jf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Mv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function xv(){}function Qd(){}xv.prototype.h=null;var bm,$f={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Nv(){Ii.call(this,"d")}function Rv(){Ii.call(this,"c")}function Hf(){}function Jd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new el(this),this.P=Qw,this.W=new _m(n=sm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Yw}function Yw(){this.i=null,this.g="",this.h=!1}Di(Nv,Ii),Di(Rv,Ii),Di(Hf,xv),Hf.prototype.g=function(){return new XMLHttpRequest},Hf.prototype.i=function(){return{}},bm=new Hf;var Qw=45e3,Ov={},Dm={};function Jw(n,e,t){n.K=1,n.v=Tm(tu(e)),n.s=t,n.U=!0,gC(n,null)}function gC(n,e){n.F=Date.now(),tl(n),n.A=tu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),ab(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Yw,n.g=Wv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new vm(ri(n.Ia,n,n.g),n.O)),fC(n.V,n.g,"readystatechange",n.gb),e=n.H?Rw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Uf(1),function pC(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",f=u.split("&"),y=0;y<f.length;y++){var b=f[y].split("=");if(1<b.length){var S=b[0];b=b[1];var M=S.split("_");c=2<=M.length&&"type"==M[1]?c+(S+"=")+b+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function mC(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function yC(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Xw(n,t),i==Dm){4==e&&(n.o=4,zi(14),r=!1),bc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Ov){n.o=4,zi(15),bc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}bc(n.j,n.m,i,null),Pv(n,i)}mC(n)&&i!=Dm&&i!=Ov&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,zi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),zv(e),e.L=!0,zi(11))):(bc(n.j,n.m,t,"[Invalid Chunked Response]"),Ho(n),Xd(n))}function Xw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Dm:(t=Number(e.substring(t,r)),isNaN(t)?Ov:(r+=1)+t>e.length?Dm:(e=e.substr(r,t),n.C=r+t,e))}function tl(n){n.Y=Date.now()+n.P,eb(n,n.P)}function eb(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Zd(ri(n.eb,n),e)}function Im(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function Xd(n){0==n.l.G||n.I||Tc(n.l,n)}function Ho(n){Im(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Av(n.W),Sv(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Pv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Am(t.i,n)))if(t.I=n.N,!n.J&&Am(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Zd(ri(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Jf(t),il(t)}qv(t),zi(18)}if(1>=cb(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else sl(t,11)}else if((n.J||t.g==n)&&Jf(t),!Pf(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const S=b[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const G=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var u=r.i;!u.g&&(Gi(G,"spdy")||Gi(G,"quic")||Gi(G,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Bv(u,u.h),u.h=null))}if(r.D){const ne=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;ne&&(r.sa=ne,kn(r.F,r.D,ne))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=kC(r,r.H?r.la:null,r.W),c.J){db(r.i,c);var f=c,y=r.K;y&&f.setTimeout(y),f.B&&(Im(f),tl(f)),r.g=c}else OC(r);0<t.l.length&&Qf(t)}else"stop"!=b[0]&&"close"!=b[0]||sl(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?sl(t,7):lh(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Uf(4)}catch(b){}}function kv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(dv(n)||"string"==typeof n)xw(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(dv(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function _C(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(dv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function eh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof eh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Fv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];nl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)nl(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function nl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(nt=Jd.prototype).setTimeout=function(n){this.P=n},nt.gb=function(n){n=n.target;const e=this.L;e&&3==nu(n)?e.l():this.Ia(n)},nt.Ia=function(n){try{if(n==this.g)e:{const S=nu(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>S)&&(3!=S||sm||this.g&&(this.h.h||this.g.ga()||mb(this.g)))){this.I||4!=S||7==e||Uf(8==e||0>=M?3:2),Im(this);var t=this.g.ba();this.N=t;t:if(mC(this)){var r=mb(this.g);n="";var i=r.length,u=4==nu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ho(this),Xd(this);var c="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function qw(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pf(f)){var b=f;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,zi(12),Ho(this),Xd(this);break e}bc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Pv(this,t)}this.U?(yC(this,S,c),sm&&this.i&&3==S&&(fC(this.V,this.W,"tick",this.fb),this.W.start())):(bc(this.j,this.m,c,null),Pv(this,c)),4==S&&Ho(this),this.i&&!this.I&&(4==S?Tc(this.l,this):(this.i=!1,tl(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,zi(12)):(this.o=0,zi(13)),Ho(this),Xd(this)}}}catch(S){}},nt.fb=function(){if(this.g){var n=nu(this.g),e=this.g.ga();this.C<e.length&&(Im(this),yC(this,n,e),this.i&&4!=n&&tl(this))}},nt.cancel=function(){this.I=!0,Ho(this)},nt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function zw(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Uf(3),zi(17)),Ho(this),this.o=2,Xd(this)):eb(this,this.Y-n)},(nt=eh.prototype).R=function(){Fv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},nt.T=function(){return Fv(this),this.g.concat()},nt.get=function(n,e){return nl(this.h,n)?this.h[n]:e},nt.set=function(n,e){nl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},nt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var tb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function go(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof go){this.g=void 0!==e?e:n.g,Gf(this,n.j),this.s=n.s,Cm(this,n.i),qf(this,n.m),this.l=n.l,e=n.h;var t=new zf;t.i=e.i,e.g&&(t.g=new eh(e.g),t.h=e.h),nb(this,t),this.o=n.o}else n&&(t=String(n).match(tb))?(this.g=!!e,Gf(this,t[1]||"",!0),this.s=th(t[2]||""),Cm(this,t[3]||"",!0),qf(this,t[4]),this.l=th(t[5]||"",!0),nb(this,t[6]||"",!0),this.o=th(t[7]||"")):(this.g=!!e,this.h=new zf(null,this.g))}function tu(n){return new go(n)}function Gf(n,e,t){n.j=t?th(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Cm(n,e,t){n.i=t?th(e,!0):e}function qf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function nb(n,e,t){e instanceof zf?(n.h=e,function IC(n,e){e&&!n.j&&(rl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(sb(this,r),ab(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=nh(e,DC)),n.h=new zf(e,n.g))}function kn(n,e,t){n.h.set(e,t)}function Tm(n){return kn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function th(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function nh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,wC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function wC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}go.prototype.toString=function(){var n=[],e=this.j;e&&n.push(nh(e,rb,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(nh(e,rb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(nh(t,"/"==t.charAt(0)?Vv:bC,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",nh(t,ib)),n.join("")};var rb=/[#\/\?@]/g,bC=/[#\?:]/g,Vv=/[#\?]/g,DC=/[#\?@]/g,ib=/#/g;function zf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function rl(n){n.g||(n.g=new eh,n.h=0,n.i&&function vC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function sb(n,e){rl(n),e=rh(n,e),nl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,nl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Fv(n)))}function ob(n,e){return rl(n),e=rh(n,e),nl(n.g.h,e)}function ab(n,e,t){sb(n,e),0<t.length&&(n.i=null,n.g.set(rh(n,e),Ms(t)),n.h+=t.length)}function rh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Uv(n){this.l=n||ub,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ea&&Rt.g.Ea()&&Rt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=zf.prototype).add=function(n,e){rl(this),this.i=null,n=rh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){rl(this),this.g.forEach(function(t,r){xw(t,function(i){n.call(e,i,r,this)},this)},this)},nt.T=function(){rl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},nt.R=function(n){rl(this);var e=[];if("string"==typeof n)ob(this,n)&&(e=po(e,this.g.get(rh(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=po(e,n[t])}return e},nt.set=function(n,e){return rl(this),this.i=null,ob(this,n=rh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var ub=10;function lb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function cb(n){return n.h?1:n.g?n.g.size:0}function Am(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Bv(n,e){n.g?n.g.add(e):n.h=e}function db(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function hb(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ms(n.i)}function Wf(){}function jv(){this.g=new Wf}function fb(n,e,t){const r=t||"";try{kv(n,function(i,u){let c=i;qd(i)&&(c=eu(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Sm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function Kf(n){this.l=n.$b||null,this.j=n.ib||!1}function ih(n,e){kr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Hv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Uv.prototype.cancel=function(){if(this.i=hb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Wf.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},Wf.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},Di(Kf,xv),Kf.prototype.g=function(){return new ih(this.l,this.j)},Kf.prototype.i=function(n){return function(){return n}}({}),Di(ih,kr);var Hv=0;function Gv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Zf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,sh(n)}function sh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=ih.prototype).open=function(n,e){if(this.readyState!=Hv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,sh(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zf(this)),this.readyState=Hv},nt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,sh(this)),this.g&&(this.readyState=3,sh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Rt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},nt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Zf(this):sh(this),3==this.readyState&&Gv(this)}},nt.Ua=function(n){this.g&&(this.response=this.responseText=n,Zf(this))},nt.Ta=function(n){this.g&&(this.response=n,Zf(this))},nt.ha=function(){this.g&&Zf(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ih.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var TC=Rt.JSON.parse;function cr(n){kr.call(this),this.headers=new eh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=AC,this.K=this.L=!1}Di(cr,kr);var AC="",SC=/^https?$/i,Mm=["POST","PUT"];function oh(n){return"content-type"==n.toLowerCase()}function ah(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,pb(n),Yf(n)}function pb(n){n.D||(n.D=!0,qr(n,"complete"),qr(n,"error"))}function xC(n){if(n.h&&void 0!==cv&&(!n.C[1]||4!=nu(n)||2!=n.ba()))if(n.v&&4==nu(n))Wd(n.Fa,0,n);else if(qr(n,"readystatechange"),4==nu(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(tb)[1]||null;if(!i&&Rt.self&&Rt.self.location){var u=Rt.self.location.protocol;i=u.substr(0,u.length-1)}r=!SC.test(i?i.toLowerCase():"")}t=r}if(t)qr(n,"complete"),qr(n,"success");else{n.m=6;try{var c=2<nu(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",pb(n)}}finally{Yf(n)}}}function Yf(n,e){if(n.g){gb(n);const t=n.g,r=n.C[0]?Rf:null;n.g=null,n.C=null,e||qr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function gb(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function nu(n){return n.g?n.g.readyState:0}function mb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case AC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function xm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function NC(n){let e="";return Ec(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):kn(n,e,t))}function uh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Nm(n){this.za=0,this.l=[],this.h=new Em,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=uh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=uh("baseRetryDelayMs",5e3,n),this.$a=uh("retryDelaySeedMs",1e4,n),this.Ya=uh("forwardChannelMaxRetries",2,n),this.ra=uh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Uv(n&&n.concurrentRequestLimit),this.Ca=new jv,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function lh(n){if(yb(n),3==n.G){var e=n.V++,t=tu(n.F);kn(t,"SID",n.J),kn(t,"RID",e),kn(t,"TYPE","terminate"),Ic(n,t),(e=new Jd(n,n.h,e,void 0)).K=2,e.v=Tm(tu(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Wv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),tl(e)}Eb(n)}function il(n){n.g&&(zv(n),n.g.cancel(),n.g=null)}function yb(n){il(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),Jf(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function Rm(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Qf(n)}function Qf(n){lb(n.i)||n.m||(n.m=!0,jw(n.Ha,n),n.C=0)}function _b(n,e){var t;t=e?e.m:n.V++;const r=tu(n.F);kn(r,"SID",n.J),kn(r,"RID",t),kn(r,"AID",n.U),Ic(n,r),n.o&&n.s&&xm(r,n.o,n.s),t=new Jd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=vb(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Bv(n.i,t),Jw(t,r,e)}function Ic(n,e){n.j&&kv({},function(t,r){kn(e,r,t)})}function vb(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ri(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let f=!0;for(let y=0;y<t;y++){let b=i[y].h;const S=i[y].g;if(b-=u,0>b)u=Math.max(0,i[y].h-100),f=!1;else try{fb(S,c,"req"+b+"_")}catch(M){r&&r(S)}}if(f){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function OC(n){n.g||n.u||(n.Y=1,jw(n.Ga,n),n.A=0)}function qv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Zd(ri(n.Ga,n),PC(n,n.A)),n.A++,0))}function zv(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function Cc(n){n.g=new Jd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=tu(n.oa);kn(e,"RID","rpc"),kn(e,"SID",n.J),kn(e,"CI",n.N?"0":"1"),kn(e,"AID",n.U),Ic(n,e),kn(e,"TYPE","xmlhttp"),n.o&&n.s&&xm(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Tm(tu(e)),t.s=null,t.U=!0,gC(t,n)}function Jf(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function Tc(n,e){var t=null;if(n.g==e){Jf(n),zv(n),n.g=null;var r=2}else{if(!Am(n.i,e))return;t=e.D,db(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;qr(r=wm(),new Bf(r,t,e,i)),Qf(n)}else OC(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function RC(n,e){return!(cb(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Zd(ri(n.Ha,n,e),PC(n,n.C)),n.C++,0)))}(n,e)||2==r&&qv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:sl(n,5);break;case 4:sl(n,10);break;case 3:sl(n,6);break;default:sl(n,2)}}function PC(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function sl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ri(n.jb,n);t||(t=new go("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||Gf(t,"https"),Tm(t)),function $v(n,e){const t=new Em;if(Rt.Image){const r=new Image;r.onload=Of(Sm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Of(Sm,t,r,"TestLoadImage: error",!1,e),r.onabort=Of(Sm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Of(Sm,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else zi(2);n.G=0,n.j&&n.j.va(e),Eb(n),yb(n)}function Eb(n){n.G=0,n.I=-1,n.j&&((0!=hb(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Ms(n.l),n.l.length=0),n.j.ua())}function kC(n,e,t){let r=function Lv(n){return n instanceof go?tu(n):new go(n,void 0)}(t);if(""!=r.i)e&&Cm(r,e+"."+r.i),qf(r,r.m);else{const i=Rt.location;r=function EC(n,e,t,r){var i=new go(null,void 0);return n&&Gf(i,n),e&&Cm(i,e),t&&qf(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Ec(n.aa,function(i,u){kn(r,u,i)}),t=n.sa,(e=n.D)&&t&&kn(r,e,t),kn(r,"VER",n.ma),Ic(n,r),r}function Wv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cr(t&&n.Ba&&!n.qa?new Kf({ib:!0}):n.qa)).L=n.H,e}function FC(){}function Xf(){if(zd&&!(10<=Number(iC)))throw Error("Environmental error: no available transport.")}function Wi(n,e){kr.call(this),this.g=new Nm(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Pf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Pf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ch(this)}function wb(n){Nv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Kv(){Rv.call(this),this.status=1}function ch(n){this.g=n}(nt=cr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():bm.g(),this.C=function Yd(n){return n.h||(n.h=n.i())}(this.u?this.u:bm),this.g.onreadystatechange=ri(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void ah(this,u)}n=t||"";const i=new eh(this.headers);r&&kv(r,function(u,c){i.set(c,u)}),r=function ba(n){e:{var e=oh;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Rt.FormData&&n instanceof Rt.FormData,!(0<=Mw(Mm,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{gb(this),0<this.B&&((this.K=function MC(n){return zd&&function Fw(){return function Pw(n){var e=kw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=fv(String(kf)).split("."),t=fv("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=pv(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||pv(0==i[2].length,0==u[2].length)||pv(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ri(this.pa,this)):this.A=Wd(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){ah(this,u)}},nt.pa=function(){void 0!==cv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qr(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,qr(this,"complete"),qr(this,"abort"),Yf(this))},nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yf(this,!0)),cr.Z.M.call(this)},nt.Fa=function(){this.s||(this.F||this.v||this.l?xC(this):this.cb())},nt.cb=function(){xC(this)},nt.ba=function(){try{return 2<nu(this)?this.g.status:-1}catch(n){return-1}},nt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},nt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),TC(e)}},nt.Da=function(){return this.m},nt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=Nm.prototype).ma=8,nt.G=1,nt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},nt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Jd(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Rw(u),Ow(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=vb(this,i,e),kn(t=tu(this.F),"RID",n),kn(t,"CVER",22),this.D&&kn(t,"X-HTTP-Session-Id",this.D),Ic(this,t),this.o&&u&&xm(t,this.o,u),Bv(this.i,i),this.Ra&&kn(t,"TYPE","init"),this.ja?(kn(t,"$req",e),kn(t,"SID","null"),i.$=!0,Jw(i,t,null)):Jw(i,t,e),this.G=2}}else 3==this.G&&(n?_b(this,n):0==this.l.length||lb(this.i)||_b(this))},nt.Ga=function(){if(this.u=null,Cc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Zd(ri(this.bb,this),n)}},nt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,zi(10),il(this),Cc(this))},nt.ab=function(){null!=this.v&&(this.v=null,il(this),qv(this),zi(19))},nt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),zi(2)):(this.h.info("Failed to ping google.com"),zi(1))},(nt=FC.prototype).xa=function(){},nt.wa=function(){},nt.va=function(){},nt.ua=function(){},nt.Oa=function(){},Xf.prototype.g=function(n,e){return new Wi(n,e)},Di(Wi,kr),Wi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),jw(ri(n.hb,n,e))),zi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=kC(n,null,n.W),Qf(n)},Wi.prototype.close=function(){lh(this.g)},Wi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Rm(this.g,e)}else this.v?((e={}).__data__=eu(n),Rm(this.g,e)):Rm(this.g,n)},Wi.prototype.M=function(){this.g.j=null,delete this.j,lh(this.g),delete this.g,Wi.Z.M.call(this)},Di(wb,Nv),Di(Kv,Rv),Di(ch,FC),ch.prototype.xa=function(){qr(this.g,"a")},ch.prototype.wa=function(n){qr(this.g,new wb(n))},ch.prototype.va=function(n){qr(this.g,new Kv(n))},ch.prototype.ua=function(){qr(this.g,"b")},Xf.prototype.createWebChannel=Xf.prototype.g,Wi.prototype.send=Wi.prototype.u,Wi.prototype.open=Wi.prototype.m,Wi.prototype.close=Wi.prototype.close,jf.NO_ERROR=0,jf.TIMEOUT=8,jf.HTTP_ERROR=6,Mv.COMPLETE="complete",Qd.EventType=$f,$f.OPEN="a",$f.CLOSE="b",$f.ERROR="c",$f.MESSAGE="d",kr.prototype.listen=kr.prototype.N,cr.prototype.listenOnce=cr.prototype.O,cr.prototype.getLastError=cr.prototype.La,cr.prototype.getLastErrorCode=cr.prototype.Da,cr.prototype.getStatus=cr.prototype.ba,cr.prototype.getResponseJson=cr.prototype.Qa,cr.prototype.getResponseText=cr.prototype.ga,cr.prototype.send=cr.prototype.ea;var LC=In.createWebChannelTransport=function(){return new Xf},VC=In.getStatEventTarget=function(){return wm()},Zv=In.ErrorCode=jf,UC=In.EventType=Mv,BC=In.Event=Dc,bb=In.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},jC=In.FetchXmlHttpFactory=Kf,ol=In.WebChannel=Qd,Db=In.XhrIo=cr;const Yv="@firebase/firestore";class zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");let Ac="9.6.10";const ru=new Ju.Yd("@firebase/firestore");function Om(){return ru.logLevel}function ke(n,...e){if(ru.logLevel<=Ju.in.DEBUG){const t=e.map(Qv);ru.debug(`Firestore (${Ac}): ${n}`,...t)}}function dr(n,...e){if(ru.logLevel<=Ju.in.ERROR){const t=e.map(Qv);ru.error(`Firestore (${Ac}): ${n}`,...t)}}function ep(n,...e){if(ru.logLevel<=Ju.in.WARN){const t=e.map(Qv);ru.warn(`Firestore (${Ac}): ${n}`,...t)}}function Qv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Ac}) INTERNAL ASSERTION FAILED: `+n;throw dr(e),new Error(e)}function Ct(n,e){n||it()}function qe(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Ht.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class dh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zr.UNAUTHENTICATED))}shutdown(){}}class qC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class zC{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new wr,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const b=c;e.enqueueRetryable((0,ve.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},y=b=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new wr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new dh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new zr(e)}}class Pm{constructor(e,t,r){this.type="FirstParty",this.user=zr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class km{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Pm(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ib{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WC{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.p=t.token,new Ib(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class as{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Jv(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}as.A=-1;class Xv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Jv(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Wt(n,e){return n<e?-1:n>e?1:0}function hh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function ZC(n){return n+"\0"}class Yn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Yn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Yn(0,0))}static max(){return new Dt(new Yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function e0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function iu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Fm(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class tp{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===tp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends tp{construct(e,t,r){return new tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const YC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wr extends tp{construct(e,t,r){return new Wr(e,t,r)}static isValidIdentifier(e){return YC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Ne(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ne(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Ne(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(u(),i++)}if(u(),c)throw new Ne(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wr(t)}static emptyPath(){return new Wr([])}}class Sc{constructor(e){this.fields=e,e.sort(Wr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new br(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}br.EMPTY_BYTE_STRING=new br("");const QC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function su(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=QC.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qn(n.seconds),nanos:Qn(n.nanos)}}function Qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Mc(n){return"string"==typeof n?br.fromBase64String(n):br.fromUint8Array(n)}function Lm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function n0(n){const e=n.mapValue.fields.__previous_value__;return Lm(e)?n0(e):e}function np(n){const e=su(n.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}class Cb{constructor(e,t,r,i,u,c,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=y}}class ou{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ou("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ou&&e.projectId===this.projectId&&e.database===this.database}}function hr(n){return null==n}function Da(n){return 0===n&&1/n==-1/0}function Tb(n){return"number"==typeof n&&Number.isInteger(n)&&!Da(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class je{constructor(e){this.path=e}static fromPath(e){return new je(tn.fromString(e))}static fromName(e){return new je(tn.fromString(e).popFirst(5))}static empty(){return new je(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new tn(e.slice()))}}const JC={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fh={nullValue:"NULL_VALUE"};function xc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lm(n)?4:r0(n)?9:10:it()}function mo(n,e){if(n===e)return!0;const t=xc(n);if(t!==xc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return np(n).isEqual(np(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=su(r.timestampValue),c=su(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Mc(n.bytesValue).isEqual(Mc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Qn(r.geoPointValue.latitude)===Qn(i.geoPointValue.latitude)&&Qn(r.geoPointValue.longitude)===Qn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Qn(r.integerValue)===Qn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Qn(r.doubleValue),c=Qn(i.doubleValue);return u===c?Da(u)===Da(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return hh(n.arrayValue.values||[],e.arrayValue.values||[],mo);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(e0(u)!==e0(c))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===c[f]||!mo(u[f],c[f])))return!1;return!0}(n,e);default:return it()}var i}function rp(n,e){return void 0!==(n.values||[]).find(t=>mo(t,e))}function au(n,e){if(n===e)return 0;const t=xc(n),r=xc(e);if(t!==r)return Wt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=Qn(i.integerValue||i.doubleValue),f=Qn(u.integerValue||u.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return Ab(n.timestampValue,e.timestampValue);case 4:return Ab(np(n),np(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Mc(i),f=Mc(u);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),f=u.split("/");for(let y=0;y<c.length&&y<f.length;y++){const b=Wt(c[y],f[y]);if(0!==b)return b}return Wt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Wt(Qn(i.latitude),Qn(u.latitude));return 0!==c?c:Wt(Qn(i.longitude),Qn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],f=u.values||[];for(let y=0;y<c.length&&y<f.length;++y){const b=au(c[y],f[y]);if(b)return b}return Wt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){const c=i.fields||{},f=Object.keys(c),y=u.fields||{},b=Object.keys(y);f.sort(),b.sort();for(let S=0;S<f.length&&S<b.length;++S){const M=Wt(f[S],b[S]);if(0!==M)return M;const F=au(c[f[S]],y[b[S]]);if(0!==F)return F}return Wt(f.length,b.length)}(n.mapValue,e.mapValue);default:throw it()}}function Ab(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=su(n),r=su(e),i=Wt(t.seconds,r.seconds);return 0!==i?i:Wt(t.nanos,r.nanos)}function ph(n){return ip(n)}function ip(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=su(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Mc(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=ip(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const f of i)c?c=!1:u+=",",u+=`${f}:${ip(r.fields[f])}`;return u+"}"}(n.mapValue):it();var e}function Nc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vm(n){return!!n&&"integerValue"in n}function al(n){return!!n&&"arrayValue"in n}function Um(n){return!!n&&"nullValue"in n}function XC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sp(n){return!!n&&"mapValue"in n}function op(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return iu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=op(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=op(n.arrayValue.values[t]);return e}return Object.assign({},n)}function r0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ap(n,e){return void 0===n?e:void 0===e||au(n,e)>0?n:e}function s0(n,e){return void 0===n?e:void 0===e||au(n,e)<0?n:e}class Ci{constructor(e){this.value=e}static empty(){return new Ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!sp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=op(t)}setAll(e){let t=Wr.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=op(c):i.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());sp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];sp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){iu(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new Ci(op(this.value))}}function Bm(n){const e=[];return iu(n.fields,(t,r)=>{const i=new Wr([t]);if(sp(r)){const u=Bm(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new Sc(e)}class Cn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Cn(e,0,Dt.min(),Dt.min(),Ci.empty(),0)}static newFoundDocument(e,t,r){return new Cn(e,1,t,Dt.min(),r,0)}static newNoDocument(e,t){return new Cn(e,2,t,Dt.min(),Ci.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,Dt.min(),Ci.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class o0{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function a0(n){return n.fields.find(e=>2===e.kind)}function gh(n){return n.fields.filter(e=>2!==e.kind)}o0.UNKNOWN_ID=-1;class up{constructor(e,t){this.fieldPath=e,this.kind=t}}class mh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new mh(0,Ia.min())}}function Sb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new Yn(t+1,0):new Yn(t,r));return new Ia(i,je.empty(),e)}function Mb(n){return new Ia(n.readTime,n.key,-1)}class Ia{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ia(Dt.min(),je.empty(),-1)}static max(){return new Ia(Dt.max(),je.empty(),-1)}}function eT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:Wt(n.largestBatchId,e.largestBatchId))}class tT{constructor(e,t=null,r=[],i=[],u=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=f,this.P=null}}function u0(n,e=null,t=[],r=[],i=null,u=null,c=null){return new tT(n,e,t,r,i,u,c)}function Rc(n){const e=qe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+ph(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),hr(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ph(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ph(r)).join(",")),e.P=t}return e.P}function yh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!ix(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!mo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iT(n.startAt,e.startAt)&&iT(n.endAt,e.endAt)}function lp(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function cp(n,e){return n.filters.filter(t=>t instanceof ii&&t.field.isEqual(e))}class ii extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new nT(e,t,r):"array-contains"===t?new ex(e,r):"in"===t?new tx(e,r):"not-in"===t?new nx(e,r):"array-contains-any"===t?new rx(e,r):new ii(e,t,r)}static V(e,t,r){return"in"===t?new XM(e,r):new Nb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(au(t,this.value)):null!==t&&xc(this.value)===xc(t)&&this.v(au(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class nT extends ii{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.v(t)}}class XM extends ii{constructor(e,t){super(e,"in",t),this.keys=rT(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Nb extends ii{constructor(e,t){super(e,"not-in",t),this.keys=rT(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rT(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class ex extends ii{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return al(t)&&rp(t.arrayValue,this.value)}}class tx extends ii{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&rp(this.value.arrayValue,t)}}class nx extends ii{constructor(e,t){super(e,"not-in",t)}matches(e){if(rp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!rp(this.value.arrayValue,t)}}class rx extends ii{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!al(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>rp(this.value.arrayValue,r))}}class Oc{constructor(e,t){this.position=e,this.inclusive=t}}class dp{constructor(e,t="asc"){this.field=e,this.dir=t}}function ix(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function hp(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?je.comparator(je.fromName(c.referenceValue),t.key):au(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function iT(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mo(n.position[t],e.position[t]))return!1;return!0}class Ca{constructor(e,t=null,r=[],i=[],u=null,c="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=f,this.endAt=y,this.D=null,this.C=null}}function jm(n,e,t,r,i,u,c,f){return new Ca(n,e,t,r,i,u,c,f)}function Pc(n){return new Ca(n)}function fp(n){return!hr(n.limit)&&"F"===n.limitType}function l0(n){return!hr(n.limit)&&"L"===n.limitType}function pp(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function $m(n){for(const e of n.filters)if(e.S())return e.field;return null}function Hm(n){return null!==n.collectionGroup}function kc(n){const e=qe(n);if(null===e.D){e.D=[];const t=$m(e),r=pp(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new dp(t)),e.D.push(new dp(Wr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new dp(Wr.keyField(),u))}}}return e.D}function Go(n){const e=qe(n);if(!e.C)if("F"===e.limitType)e.C=u0(e.path,e.collectionGroup,kc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of kc(e))t.push(new dp(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Oc(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Oc(e.startAt.position,!e.startAt.inclusive):null;e.C=u0(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function c0(n,e,t){return new Ca(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gp(n,e){return yh(Go(n),Go(e))&&n.limitType===e.limitType}function Gm(n){return`${Rc(Go(n))}|lt:${n.limitType}`}function d0(n){return`Query(target=${function xb(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ph(r.value)}`;var r}).join(", ")}]`),hr(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ph(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ph(t)).join(",")),`Target(${e})`}(Go(n))}; limitType=${n.limitType})`}function Rb(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):je.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const f=hp(i,u,c);return i.inclusive?f<=0:f<0}(t.startAt,kc(t),r)||t.endAt&&!function(i,u,c){const f=hp(i,u,c);return i.inclusive?f>=0:f>0}(t.endAt,kc(t),r)));var t,r}function sT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oT(n){return(e,t)=>{let r=!1;for(const i of kc(n)){const u=aT(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function aT(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(i,u,c){const f=u.data.field(i),y=c.data.field(i);return null!==f&&null!==y?au(f,y):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function Ob(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Da(e)?"-0":e}}function Pb(n){return{integerValue:""+n}}function uT(n,e){return Tb(e)?Pb(e):Ob(n,e)}class qm{constructor(){this._=void 0}}function h0(n,e,t){return n instanceof _h?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof uu?kb(n,e):n instanceof Fc?zm(n,e):function(r,i){const u=yo(r,i),c=f0(u)+f0(r.k);return Vm(u)&&Vm(r.k)?Pb(c):Ob(r.M,c)}(n,e)}function lT(n,e,t){return n instanceof uu?kb(n,e):n instanceof Fc?zm(n,e):t}function yo(n,e){return n instanceof Lc?Vm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class _h extends qm{}class uu extends qm{constructor(e){super(),this.elements=e}}function kb(n,e){const t=Fb(e);for(const r of n.elements)t.some(i=>mo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Fc extends qm{constructor(e){super(),this.elements=e}}function zm(n,e){let t=Fb(e);for(const r of n.elements)t=t.filter(i=>!mo(i,r));return{arrayValue:{values:t}}}class Lc extends qm{constructor(e,t){super(),this.M=e,this.k=t}}function f0(n){return Qn(n.integerValue||n.doubleValue)}function Fb(n){return al(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class vh{constructor(e,t){this.field=e,this.transform=t}}class cT{constructor(e,t){this.version=e,this.transformResults=t}}class Dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dr}static exists(e){return new Dr(void 0,e)}static updateTime(e){return new Dr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class us{}function dT(n,e,t){n instanceof mp?function(r,i,u){const c=r.value.clone(),f=fT(r.fieldTransforms,i,u.transformResults);c.setAll(f),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ul?function(r,i,u){if(!Eh(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=fT(r.fieldTransforms,i,u.transformResults),f=i.data;f.setAll(Bb(r)),f.setAll(c),i.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Vb(n,e,t){var i;n instanceof mp?function(r,i,u){if(!Eh(r.precondition,i))return;const c=r.value.clone(),f=g0(r.fieldTransforms,u,i);c.setAll(f),i.convertToFoundDocument(Ub(i),c).setHasLocalMutations()}(n,e,t):n instanceof ul?function(r,i,u){if(!Eh(r.precondition,i))return;const c=g0(r.fieldTransforms,u,i),f=i.data;f.setAll(Bb(r)),f.setAll(c),i.convertToFoundDocument(Ub(i),f).setHasLocalMutations()}(n,e,t):Eh(n.precondition,i=e)&&i.convertToNoDocument(Dt.min())}function hT(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=yo(r.transform,i||null);null!=u&&(null==t&&(t=Ci.empty()),t.set(r.field,u))}return t||null}function p0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&hh(t,r,(i,u)=>function Lb(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof uu&&r instanceof uu||t instanceof Fc&&r instanceof Fc?hh(t.elements,r.elements,mo):t instanceof Lc&&r instanceof Lc?mo(t.k,r.k):t instanceof _h&&r instanceof _h);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Ub(n){return n.isFoundDocument()?n.version:Dt.min()}class mp extends us{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class ul extends us{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function Bb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function fT(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,f=e.data.field(u.field);r.set(u.field,lT(c,f,t[i]))}return r}function g0(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,h0(u,c,e))}return r}class wh extends us{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class m0 extends us{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class pT{constructor(e){this.count=e}}var fr,Qt;function Wm(n){switch(n){default:return it();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function y0(n){if(void 0===n)return dr("GRPC error has no .code"),re.UNKNOWN;switch(n){case fr.OK:return re.OK;case fr.CANCELLED:return re.CANCELLED;case fr.UNKNOWN:return re.UNKNOWN;case fr.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case fr.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case fr.INTERNAL:return re.INTERNAL;case fr.UNAVAILABLE:return re.UNAVAILABLE;case fr.UNAUTHENTICATED:return re.UNAUTHENTICATED;case fr.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case fr.NOT_FOUND:return re.NOT_FOUND;case fr.ALREADY_EXISTS:return re.ALREADY_EXISTS;case fr.PERMISSION_DENIED:return re.PERMISSION_DENIED;case fr.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case fr.ABORTED:return re.ABORTED;case fr.OUT_OF_RANGE:return re.OUT_OF_RANGE;case fr.UNIMPLEMENTED:return re.UNIMPLEMENTED;case fr.DATA_LOSS:return re.DATA_LOSS;default:return it()}}(Qt=fr||(fr={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";class ll{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){iu(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return Fm(this.inner)}size(){return this.innerSize}}class rr{constructor(e,t){this.comparator=e,this.root=t||si.EMPTY}insert(e,t){return new rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,si.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yp(this.root,e,this.comparator,!1)}getReverseIterator(){return new yp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yp(this.root,e,this.comparator,!0)}}class yp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class si{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:si.RED,this.left=null!=i?i:si.EMPTY,this.right=null!=u?u:si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new si(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return si.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}si.EMPTY=null,si.RED=!0,si.BLACK=!1,si.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,i){return this}insert(n,e,t){return new si(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fn{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gT(this.data.getIterator())}getIteratorFrom(e){return new gT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Fn(this.comparator);return t.data=e,t}}class gT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _p(n){return n.hasNext()?n.getNext():void 0}const jb=new rr(je.comparator);function _o(){return jb}const mT=new rr(je.comparator);function _0(){return mT}function Km(){return new ll(n=>n.toString(),(n,e)=>n.isEqual(e))}const sx=new rr(je.comparator),ox=new Fn(je.comparator);function vn(...n){let e=ox;for(const t of n)e=e.add(t);return e}const ax=new Fn(Wt);function Zm(){return ax}class cl{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,vp.createSynthesizedTargetChangeForCurrentChange(e,t)),new cl(Dt.min(),r,Zm(),_o(),vn())}}class vp{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new vp(br.EMPTY_BYTE_STRING,t,vn(),vn(),vn())}}class Ym{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class v0{constructor(e,t){this.targetId=e,this.$=t}}class dl{constructor(e,t,r=br.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class E0{constructor(){this.B=0,this.L=$b(),this.U=br.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=vn(),t=vn(),r=vn();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:it()}}),new vp(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=$b()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class w0{constructor(e){this.nt=e,this.st=new Map,this.it=_o(),this.rt=Qm(),this.ot=new Fn(Wt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(lp(u))if(0===r){const c=new je(u.path);this.ct(t,c,Cn.newNoDocument(c,Dt.min()))}else Ct(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const f=this.wt(c);if(f){if(u.current&&lp(f.target)){const y=new je(f.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,Cn.newNoDocument(y,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=vn();this.rt.forEach((u,c)=>{let f=!0;c.forEachWhile(y=>{const b=this.wt(y);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new cl(e,t,this.ot,this.it,r);return this.it=_o(),this.rt=Qm(),this.ot=new Fn(Wt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new E0,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Fn(Wt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new E0),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Qm(){return new rr(je.comparator)}function $b(){return new rr(je.comparator)}const b0={asc:"ASCENDING",desc:"DESCENDING"},D0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Jm{constructor(e,t){this.databaseId=e,this.N=t}}function Xm(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yT(n,e){return n.N?e.toBase64():e.toUint8Array()}function ux(n,e){return Xm(n,e.toTimestamp())}function oi(n){return Ct(!!n),Dt.fromTimestamp(function(e){const t=su(e);return new Yn(t.seconds,t.nanos)}(n))}function ey(n,e){return(t=n,new tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Hb(n){const e=tn.fromString(n);return Ct(Zb(e)),e}function Ep(n,e){return ey(n.databaseId,e.path)}function Ta(n,e){const t=Hb(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(T0(t))}function I0(n,e){return ey(n.databaseId,e)}function C0(n){const e=Hb(n);return 4===e.length?tn.emptyPath():T0(e)}function bh(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function T0(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Gb(n,e,t){return{name:Ep(n,e),fields:t.value.mapValue.fields}}function qb(n,e,t){const r=Ta(n,e.name),i=oi(e.updateTime),u=new Ci({mapValue:{fields:e.fields}}),c=Cn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function ty(n,e){let t;if(e instanceof mp)t={update:Gb(n,e.key,e.value)};else if(e instanceof wh)t={delete:Ep(n,e.key)};else if(e instanceof ul)t={update:Gb(n,e.key,e.data),updateMask:hx(e.fieldMask)};else{if(!(e instanceof m0))return it();t={verify:Ep(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof _h)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof uu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Fc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Lc)return{fieldPath:u.field.canonicalString(),increment:c.k};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:ux(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:it()),t;var i}function ny(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Dr.updateTime(oi(i.updateTime)):void 0!==i.exists?Dr.exists(i.exists):Dr.none():Dr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let f=null;"setToServerValue"in c?(Ct("REQUEST_TIME"===c.setToServerValue),f=new _h):"appendMissingElements"in c?f=new uu(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new Fc(c.removeAllFromArray.values||[]):"increment"in c?f=new Lc(u,c.increment):it();const y=Wr.fromServerFormat(c.fieldPath);return new vh(y,f)}(n,i)):[];var i;if(e.update){const i=Ta(n,e.update.name),u=new Ci({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Sc((e.updateMask.fieldPaths||[]).map(b=>Wr.fromServerFormat(b)));return new ul(i,u,c,t,r)}return new mp(i,u,t,r)}if(e.delete){const i=Ta(n,e.delete);return new wh(i,t)}if(e.verify){const i=Ta(n,e.verify);return new m0(i,t)}return it()}function Wb(n,e){return{documents:[I0(n,e.path)]}}function Kb(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=I0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=I0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const b=y.map(S=>function(M){if("=="===M.op){if(XC(M.value))return{unaryFilter:{field:wp(M.field),op:"IS_NAN"}};if(Um(M.value))return{unaryFilter:{field:wp(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(XC(M.value))return{unaryFilter:{field:wp(M.field),op:"IS_NOT_NAN"}};if(Um(M.value))return{unaryFilter:{field:wp(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wp(M.field),op:wT(M.op),value:M.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(b=>{return{field:wp((S=b).field),direction:ET(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||hr(b)?b:{value:b});var b,f,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function _T(n){let e=C0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=vT(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new dp(bp((M=S).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let f=null;t.limit&&(f=function(S){let M;return M="object"==typeof S?S.value:S,hr(M)?null:M}(t.limit));let y=null;var S;t.startAt&&(y=new Oc((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new Oc(S.values||[],!S.before)}(t.endAt)),jm(e,i,c,u,f,"F",y,b)}function vT(n){return n?void 0!==n.unaryFilter?[dx(n)]:void 0!==n.fieldFilter?[cx(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>vT(e)).reduce((e,t)=>e.concat(t)):it():[]}function ET(n){return b0[n]}function wT(n){return D0[n]}function wp(n){return{fieldPath:n.canonicalString()}}function bp(n){return Wr.fromServerFormat(n.fieldPath)}function cx(n){return ii.create(bp(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function dx(n){switch(n.unaryFilter.op){case"IS_NAN":const e=bp(n.unaryFilter.field);return ii.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=bp(n.unaryFilter.field);return ii.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=bp(n.unaryFilter.field);return ii.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=bp(n.unaryFilter.field);return ii.create(i,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function hx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Zb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ai(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bT(e)),e=fx(n.get(t),e);return bT(e)}function fx(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function bT(n){return n+"\x01\x01"}function Aa(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&it(),n.charAt(c+1)){case"\x01":const f=n.substring(u,c);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:it()}u=c+2}return new tn(r)}const s=["userId","batchId"];function o(n,e){return[n,ai(e)]}function a(n,e,t){return[n,ai(e),t]}const l={},d=["prefixPath","collectionGroup","readTime","documentId"],g=["prefixPath","collectionGroup","documentId"],v=["collectionGroup","readTime","prefixPath","documentId"],w=["canonicalId","targetId"],D=["targetId","path"],A=["path","targetId"],x=["collectionId","parent"],k=["indexId","uid"],B=["uid","sequenceNumber"],Z=["indexId","uid","arrayValue","directionalValue","documentKey"],ye=["indexId","uid","documentKey"],Fe=["userId","collectionPath","documentId"],He=["userId","collectionPath","largestBatchId"],rt=["userId","collectionGroup","largestBatchId"],Ie=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yt=[...Ie,"documentOverlays"],Kt=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mn=[...Kt,"indexConfiguration","indexState","indexEntries"],ls="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let i=0,u=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(i=>i?he.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class Dh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new wr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Vc(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=DT(r.target.error);this.At.reject(new Vc(e,i))}}static open(e,t,r,i){try{return new Dh(t,e.transaction(i,r))}catch(u){throw new Vc(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new x0(t)}}class xs{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===xs.Vt((0,Ht.z$)())&&dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),cu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Ht.hl)())return!1;if(xs.St())return!0;const e=(0,Ht.z$)(),t=xs.Vt(e),r=0<t&&t<10,i=xs.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ve.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Vc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Ne(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ne(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Vc(e,f))},u.onupgradeneeded=c=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,ve.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{u.db=yield u.Nt(e);const y=Dh.open(u.db,e,c?"readonly":"readwrite",r),b=i(y).next(S=>(y.bt(),S)).catch(S=>(y.abort(S),he.reject(S))).toPromise();return b.catch(()=>{}),yield y.Rt,b}catch(y){const b="FirebaseError"!==y.name&&f<3;if(ke("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),u.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class M0{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return cu(this.Ft.delete())}}class Vc extends Ne{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function lu(n){return"IndexedDbTransactionError"===n.name}class x0{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cu(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),cu(this.store.add(e))}get(e){return cu(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),cu(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),cu(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Gt(i,(c,f)=>{u.push(f)}).next(()=>u)}{const i=this.store.getAll(r.range);return new he((u,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{u(f.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(u,c,f)=>f.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new he((r,i)=>{t.onerror=u=>{const c=DT(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}Gt(e,t){const r=[];return new he((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const y=new M0(f),b=t(f.primaryKey,f.value,y);if(b instanceof he){const S=b.catch(M=>(y.done(),he.reject(M)));r.push(S)}y.isDone?i():null===y.Lt?f.continue():f.continue(y.Lt)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cu(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=DT(r.target.error);t(i)}})}let ry=!1;function DT(n){const e=xs.Vt((0,Ht.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ry||(ry=!0,setTimeout(()=>{throw r},0)),r}}return n}class px extends hl{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Ti(n,e){const t=qe(n);return xs.xt(t.Ht,e)}class IT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&dT(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Vb(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Vb(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Dt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vn())}isEqual(e){return this.batchId===e.batchId&&hh(this.mutations,e.mutations,(t,r)=>p0(t,r))&&hh(this.baseMutations,e.baseMutations,(t,r)=>p0(t,r))}}class CT{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=sx;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new CT(e,t,r,i)}}class TT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ih{constructor(e,t,r,i,u=Dt.min(),c=Dt.min(),f=br.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f}withSequenceNumber(e){return new Ih(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class gx{constructor(e){this.Jt=e}}function mx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Yb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ep(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Xm(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Dp(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:Dp(e.version)}}var i,u;return r}function Yb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Dp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ip(n){const e=new Yn(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function iy(n,e){const t=(e.baseMutations||[]).map(u=>ny(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>ny(n.Jt,u)),i=Yn.fromMillis(e.localWriteTimeMs);return new IT(e.batchId,i,t,r)}function N0(n){const e=Ip(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ip(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(Ct(1===(i=n.query).documents.length),r=Go(Pc(C0(i.documents[0])))):r=Go(_T(n.query)),new Ih(r,n.targetId,0,n.lastListenSequenceNumber,e,t,br.fromBase64String(n.resumeToken))}function yx(n,e){const t=Dp(e.snapshotVersion),r=Dp(e.lastLimboFreeSnapshotVersion);let i;i=lp(e.target)?Wb(n.Jt,e.target):Kb(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Rc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function AT(n){const e=_T({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?c0(e,e.limit,"L"):e}function ST(n,e){return new TT(e.largestBatchId,ny(n.Jt,e.overlayMutation))}function _x(n,e){const t=e.path.lastSegment();return[n,ai(e.path.popLast()),t]}class WO{getBundleMetadata(e,t){return vx(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Ip(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return vx(e).put({bundleId:(r=t).id,createTime:Dp(oi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Ex(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:AT(i.bundledQuery),readTime:Ip(i.readTime)};var i})}saveNamedQuery(e,t){return Ex(e).put({name:(r=t).name,readTime:Dp(oi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function vx(n){return Ti(n,"bundles")}function Ex(n){return Ti(n,"namedQueries")}class MT{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new MT(e,t.uid||"")}getOverlay(e,t){return R0(e).get(_x(this.userId,t)).next(r=>r?ST(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const f=new TT(t,c);i.push(this.Xt(e,f))}),he.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(ai(c.getCollectionPath())));const u=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(R0(e).Qt("collectionPathOverlayIndex",f))}),he.waitFor(u)}getOverlaysForCollection(e,t,r){const i=Km(),u=ai(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return R0(e).qt("collectionPathOverlayIndex",c).next(f=>{for(const y of f){const b=ST(this.M,y);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=Km();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return R0(e).Wt({index:"collectionGroupOverlayIndex",range:f},(y,b,S)=>{const M=ST(this.M,b);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return R0(e).put(function(r,i,u){const[c,f,y]=_x(i,u.mutation.key);return{userId:i,collectionPath:f,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:ty(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function R0(n){return Ti(n,"documentOverlays")}class sy{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Qn(e.integerValue));else if("doubleValue"in e){const r=Qn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Da(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Mc(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?r0(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):it()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function KO(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function wx(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=KO(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}sy.fe=new sy;class ZO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=wx(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=wx(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class YO{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class QO{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Qb{constructor(){this.De=new ZO,this.Ce=new YO(this.De),this.xe=new QO(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Ch{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ch(this.indexId,this.documentKey,this.arrayValue,r)}}function Cp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=bx(n.arrayValue,e.arrayValue),0!==t?t:(t=bx(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function bx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class JO{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=a0(e);if(void 0!==t&&!this.Be(t))return!1;const r=gh(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class XO{constructor(){this.qe=new xT}addToCollectionParentIndex(e,t){return this.qe.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getFieldIndex(e,t){return he.resolve(null)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class xT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Fn(tn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fn(tn.comparator)).toArray()}}const Jb=new Uint8Array(0);class eP{constructor(e){this.user=e,this.Ge=new xT,this.Ke=new ll(t=>Rc(t),(t,r)=>yh(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const u={collectionId:r,parent:ai(i)};return Dx(e).put(u)}return he.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[ZC(t),""],!1,!0);return Dx(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Aa(c.parent))}return r})}addFieldIndex(e,t){const r=Xb(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=Xb(e),i=eD(e),u=O0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=O0(e);let i=!0;const u=new Map;return he.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(f=>{i&&(i=!!f),u.set(c,f)})).next(()=>{if(i){let c=vn();return he.forEach(u,(f,y)=>{var b;ke("IndexedDbIndexManager",`Using index ${b=f,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Le=>`${Le.fieldPath}:${Le.kind}`).join(",")}`} to execute ${Rc(t)}`);const S=function(Le,Ke){const ze=a0(Ke);if(void 0===ze)return null;for(const _t of cp(Le,ze.fieldPath))switch(_t.op){case"array-contains-any":return _t.value.arrayValue.values||[];case"array-contains":return[_t.value]}return null}(y,f),M=function(Le,Ke){const ze=new Map;for(const _t of gh(Ke))for(const ct of cp(Le,_t.fieldPath))switch(ct.op){case"==":case"in":ze.set(_t.fieldPath.canonicalString(),ct.value);break;case"not-in":case"!=":return ze.set(_t.fieldPath.canonicalString(),ct.value),Array.from(ze.values())}return null}(y,f),F=function(Le,Ke){const ze=[];let _t=!0;for(const Jt of gh(Ke)){let Dn,En=!0;for(const Zt of cp(Le,Jt.fieldPath)){let Tn,Ps=!0;switch(Zt.op){case"<":case"<=":Tn="nullValue"in(ct=Zt.value)?fh:"booleanValue"in ct?{booleanValue:!1}:"integerValue"in ct||"doubleValue"in ct?{doubleValue:NaN}:"timestampValue"in ct?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in ct?{stringValue:""}:"bytesValue"in ct?{bytesValue:""}:"referenceValue"in ct?Nc(ou.empty(),je.empty()):"geoPointValue"in ct?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in ct?{arrayValue:{}}:"mapValue"in ct?{mapValue:{}}:it();break;case"==":case"in":case">=":Tn=Zt.value;break;case">":Tn=Zt.value,Ps=!1;break;case"!=":case"not-in":Tn=fh}ap(Dn,Tn)===Tn&&(Dn=Tn,En=Ps)}if(null!==Le.startAt)for(let Zt=0;Zt<Le.orderBy.length;++Zt)if(Le.orderBy[Zt].field.isEqual(Jt.fieldPath)){const Tn=Le.startAt.position[Zt];ap(Dn,Tn)===Tn&&(Dn=Tn,En=Le.startAt.inclusive);break}if(void 0===Dn)return null;ze.push(Dn),_t&&(_t=En)}var ct;return new Oc(ze,_t)}(y,f),U=function(Le,Ke){const ze=[];let _t=!0;for(const Jt of gh(Ke)){let Dn,En=!0;for(const Zt of cp(Le,Jt.fieldPath)){let Tn,Ps=!0;switch(Zt.op){case">=":case">":Tn="nullValue"in(ct=Zt.value)?{booleanValue:!1}:"booleanValue"in ct?{doubleValue:NaN}:"integerValue"in ct||"doubleValue"in ct?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in ct?{stringValue:""}:"stringValue"in ct?{bytesValue:""}:"bytesValue"in ct?Nc(ou.empty(),je.empty()):"referenceValue"in ct?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in ct?{arrayValue:{}}:"arrayValue"in ct?{mapValue:{}}:"mapValue"in ct?JC:it(),Ps=!1;break;case"==":case"in":case"<=":Tn=Zt.value;break;case"<":Tn=Zt.value,Ps=!1;break;case"!=":case"not-in":Tn=JC}s0(Dn,Tn)===Tn&&(Dn=Tn,En=Ps)}if(null!==Le.endAt)for(let Zt=0;Zt<Le.orderBy.length;++Zt)if(Le.orderBy[Zt].field.isEqual(Jt.fieldPath)){const Tn=Le.endAt.position[Zt];s0(Dn,Tn)===Tn&&(Dn=Tn,En=Le.endAt.inclusive);break}if(void 0===Dn)return null;ze.push(Dn),_t&&(_t=En)}var ct;return new Oc(ze,_t)}(y,f),G=this.je(f,y,F),ne=this.je(f,y,U),we=this.We(f,y,M),Ze=this.ze(f.indexId,S,G,!!F&&F.inclusive,ne,!!U&&U.inclusive,we);return he.forEach(Ze,Le=>r.Kt(Le,t.limit).next(Ke=>{Ke.forEach(ze=>{c=c.add(new je(Aa(ze.documentKey)))})}))}).next(()=>c)}return he.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,u,c,f){const y=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),b=y/(null!=t?t.length:1),S=[];for(let M=0;M<y;++M){const F=t?this.He(t[M/b]):Jb,U=r?this.Je(e,F,r[M%b],i):this.Ye(e),G=u?this.Xe(e,F,u[M%b],c):this.Ye(e+1);S.push(...this.createRange(U,G,f.map(ne=>this.Je(e,F,ne,!0))))}return S}Je(e,t,r,i){const u=new Ch(e,je.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new Ch(e,je.empty(),t,r);return i?u.ke():u}Ye(e){return new Ch(e,je.empty(),Jb,Jb)}getFieldIndex(e,t){const r=new JO(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{const c=u.filter(f=>r.$e(f));return c.sort((f,y)=>y.fields.length-f.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new Qb;for(const i of gh(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);sy.fe.Zt(u,c)}return r.Se()}He(e){const t=new Qb;return sy.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new Qb);let u=0;for(const c of gh(e)){const f=r[u++];for(const y of i)if(this.tn(t,c.fieldPath)&&al(f))i=this.en(i,c,f);else{const b=y.Ne(c.kind);sy.fe.Zt(f,b)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const f of i){const y=new Qb;y.seed(f.Se()),sy.fe.Zt(c,y.Ne(t.kind)),u.push(y)}return u}tn(e,t){return!!e.filters.find(r=>r instanceof ii&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Xb(e),i=eD(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return he.forEach(u,f=>i.get([f.indexId,this.uid]).next(y=>{c.push(function(b,S){const M=S?new mh(S.sequenceNumber,new Ia(Ip(S.readTime),new je(Aa(S.documentKey)),S.largestBatchId)):mh.empty(),F=b.fields.map(([U,G])=>new up(Wr.fromServerFormat(U),G));return new o0(b.indexId,b.collectionGroup,F,M)}(f,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Wt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Xb(e),u=eD(e);return this.sn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>he.forEach(f,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Dp((F=r).readTime),documentKey:ai(F.documentKey.path),largestBatchId:F.largestBatchId});var F})))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?he.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),he.forEach(f,y=>this.rn(e,i,y).next(b=>{const S=this.on(u,y);return b.isEqual(S)?he.resolve():this.un(e,u,b,S)}))))})}an(e,t,r){return O0(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:ai(t.key.path)})}cn(e,t,r){return O0(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,ai(t.key.path)])}rn(e,t,r){const i=O0(e);let u=new Fn(Cp);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,ai(t.path)])},(c,f)=>{u=u.add(new Ch(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>u)}on(e,t){let r=new Fn(Cp);const i=this.Ze(t,e);if(null==i)return r;const u=a0(t);if(null!=u){const c=e.data.field(u.fieldPath);if(al(c))for(const f of c.arrayValue.values||[])r=r.add(new Ch(t.indexId,e.key,this.He(f),i))}else r=r.add(new Ch(t.indexId,e.key,Jb,i));return r}un(e,t,r,i){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(c,f,y,b,S){const M=c.getIterator(),F=f.getIterator();let U=_p(M),G=_p(F);for(;U||G;){let ne=!1,we=!1;if(U&&G){const Ze=y(U,G);Ze<0?we=!0:Ze>0&&(ne=!0)}else null!=U?we=!0:ne=!0;ne?(b(G),G=_p(F)):we?(S(U),U=_p(M)):(U=_p(M),G=_p(F))}}(r,i,Cp,c=>{u.push(this.an(e,t,c))},c=>{u.push(this.cn(e,t,c))}),he.waitFor(u)}sn(e){let t=1;return eD(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>Cp(c,f)).filter((c,f,y)=>!f||0!==Cp(c,y[f-1]));const i=[];i.push(e);for(const c of r){const f=Cp(c,e),y=Cp(c,t);if(0===f)i[0]=e.ke();else if(f>0&&y<0)i.push(c),i.push(c.ke());else if(y>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,""],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,""]));return u}}function Dx(n){return Ti(n,"collectionParents")}function O0(n){return Ti(n,"indexEntries")}function Xb(n){return Ti(n,"indexConfiguration")}function eD(n){return Ti(n,"indexState")}const Ix={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new vo(e,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Cx(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let f=0;const y=r.Wt({range:c},(S,M,F)=>(f++,F.delete()));u.push(y.next(()=>{Ct(1===f)}));const b=[];for(const S of t.mutations){const M=a(e,S.key.path,t.batchId);u.push(i.delete(M)),b.push(S.key)}return he.waitFor(u).next(()=>b)}function tD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}vo.DEFAULT_COLLECTION_PERCENTILE=10,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vo.DEFAULT=new vo(41943040,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vo.DISABLED=new vo(-1,0,0);class NT{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){Ct(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new NT(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Th(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=oy(e),c=Th(e);return c.add({}).next(f=>{Ct("number"==typeof f);const y=new IT(f,t,r,i),b=function(F,U,G){const ne=G.baseMutations.map(Ze=>ty(F.Jt,Ze)),we=G.mutations.map(Ze=>ty(F.Jt,Ze));return{userId:U,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:ne,mutations:we}}(this.M,this.userId,y),S=[];let M=new Fn((F,U)=>Wt(F.canonicalString(),U.canonicalString()));for(const F of i){const U=a(this.userId,F.key.path,f);M=M.add(F.key.path.popLast()),S.push(c.put(b)),S.push(u.put(U,l))}return M.forEach(F=>{S.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.hn[f]=y.keys()}),he.waitFor(S).next(()=>y)})}lookupMutationBatch(e,t){return Th(e).get(t).next(r=>r?(Ct(r.userId===this.userId),iy(this.M,r)):null)}ln(e,t){return this.hn[t]?he.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Th(e).Wt({index:"userMutationsIndex",range:i},(c,f,y)=>{f.userId===this.userId&&(Ct(f.batchId>=r),u=iy(this.M,f)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Th(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Th(e).qt("userMutationsIndex",t).next(r=>r.map(i=>iy(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=o(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return oy(e).Wt({range:i},(c,f,y)=>{const[b,S,M]=c,F=Aa(S);if(b===this.userId&&t.path.isEqual(F))return Th(e).get(M).next(U=>{if(!U)throw it();Ct(U.userId===this.userId),u.push(iy(this.M,U))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fn(Wt);const i=[];return t.forEach(u=>{const c=o(this.userId,u.path),f=IDBKeyRange.lowerBound(c),y=oy(e).Wt({range:f},(b,S,M)=>{const[F,U,G]=b,ne=Aa(U);F===this.userId&&u.path.isEqual(ne)?r=r.add(G):M.done()});i.push(y)}),he.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=o(this.userId,r),c=IDBKeyRange.lowerBound(u);let f=new Fn(Wt);return oy(e).Wt({range:c},(y,b,S)=>{const[M,F,U]=y,G=Aa(F);M===this.userId&&r.isPrefixOf(G)?G.length===i&&(f=f.add(U)):S.done()}).next(()=>this.fn(e,f))}fn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Th(e).get(u).next(c=>{if(null===c)throw it();Ct(c.userId===this.userId),r.push(iy(this.M,c))}))}),he.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Cx(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),he.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return oy(e).Wt({range:r},(u,c,f)=>{if(u[0]===this.userId){const y=Aa(u[1]);i.push(y)}else f.done()}).next(()=>{Ct(0===i.length)})})}containsKey(e,t){return Tx(e,this.userId,t)}_n(e){return Ax(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Tx(n,e,t){const r=o(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return oy(n).Wt({range:u,jt:!0},(f,y,b)=>{const[S,M,F]=f;S===e&&M===i&&(c=!0),b.done()}).next(()=>c)}function Th(n){return Ti(n,"mutations")}function oy(n){return Ti(n,"documentMutations")}function Ax(n){return Ti(n,"mutationQueues")}class Tp{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new Tp(0)}static gn(){return new Tp(-1)}}class tP{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new Tp(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>Dt.fromTimestamp(new Yn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ay(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return ay(e).Wt((c,f)=>{const y=N0(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>he.waitFor(u)).next(()=>i)}forEachTarget(e,t){return ay(e).Wt((r,i)=>{const u=N0(i);t(u)})}yn(e){return Sx(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}pn(e,t){return Sx(e).put("targetGlobalKey",t)}In(e,t){return ay(e).put(yx(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Rc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ay(e).Wt({range:i,index:"queryTargetsIndex"},(c,f,y)=>{const b=N0(f);yh(t,b.target)&&(u=b,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Ah(e);return t.forEach(c=>{const f=ai(c.path);i.push(u.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),he.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ah(e);return he.forEach(t,u=>{const c=ai(u.path);return he.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ah(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ah(e);let u=vn();return i.Wt({range:r,jt:!0},(c,f,y)=>{const b=Aa(c[1]),S=new je(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=ai(t.path),i=IDBKeyRange.bound([r],[ZC(r)],!1,!0);let u=0;return Ah(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,f],y,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return ay(e).get(t).next(r=>r?N0(r):null)}}function ay(n){return Ti(n,"targets")}function Sx(n){return Ti(n,"targetGlobal")}function Ah(n){return Ti(n,"targetDocuments")}function Ap(n){return RT.apply(this,arguments)}function RT(){return RT=(0,ve.Z)(function*(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==ls)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),RT.apply(this,arguments)}function Mx([n,e],[t,r]){const i=Wt(n,t);return 0===i?Wt(e,r):i}class nP{constructor(e){this.En=e,this.buffer=new Fn(Mx),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Mx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rP{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){lu(i)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Ap(i)}yield t.vn(e)}))}}class iP{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(as.A);const r=new nP(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(Ix)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ix):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,u,c,f,y,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,f=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),Om()<=Ju.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${u} targets in `+(y-f)+`ms\n\tRemoved ${M} documents in `+(b-y)+`ms\nTotal Duration: ${b-S}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class sP{constructor(e,t){this.db=e,this.garbageCollector=new iP(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return nD(e,r)}removeReference(e,t,r){return nD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return nD(e,t)}Mn(e,t){return function(r,i){let u=!1;return Ax(r).zt(c=>Tx(r,c,i).next(f=>(f&&(u=!0),he.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.kn(e,(c,f)=>{if(f<=t){const y=this.Mn(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Dt.min()),Ah(e).delete([0,ai(c.path)])))});i.push(y)}}).next(()=>he.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return nD(e,t)}kn(e,t){const r=Ah(e);let i,u=as.A;return r.Wt({index:"documentTargetsIndex"},([c,f],{path:y,sequenceNumber:b})=>{0===c?(u!==as.A&&t(new je(Aa(i)),u),u=b,i=y):u=as.A}).next(()=>{u!==as.A&&t(new je(Aa(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nD(n,e){return Ah(n).put((r=n.currentSequenceNumber,{targetId:0,path:ai(e.path),sequenceNumber:r}));var r}class xx{constructor(){this.changes=new ll(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oP{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Sp(e).put(r)}removeEntry(e,t,r){return Sp(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Yb(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=Cn.newInvalidDocument(t);return Sp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(P0(t))},(i,u)=>{r=this.Fn(t,u)}).next(()=>r)}$n(e,t){let r={size:0,document:Cn.newInvalidDocument(t)};return Sp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(P0(t))},(i,u)=>{r={document:this.Fn(t,u),size:tD(u)}}).next(()=>r)}getEntries(e,t){let r=_o();return this.Bn(e,t,(i,u)=>{const c=this.Fn(i,u);r=r.insert(i,c)}).next(()=>r)}Ln(e,t){let r=_o(),i=new rr(je.comparator);return this.Bn(e,t,(u,c)=>{const f=this.Fn(u,c);r=r.insert(u,f),i=i.insert(u,tD(c))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return he.resolve();let i=new Fn(Ox);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(P0(i.first()),P0(i.last())),c=i.getIterator();let f=c.getNext();return Sp(e).Wt({index:"documentKeyIndex",range:u},(y,b,S)=>{const M=je.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;f&&Ox(f,M)<0;)r(f,null),f=c.getNext();f&&f.isEqual(M)&&(r(f,b),f=c.hasNext()?c.getNext():null),f?S.Ut(P0(f)):S.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Yb(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Sp(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let f=_o();for(const y of c){const b=this.Fn(je.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);f=f.insert(b.key,b)}return f})}getAllFromCollectionGroup(e,t,r,i){let u=_o();const c=Rx(t,r),f=Rx(t,Ia.max());return Sp(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(y,b,S)=>{const M=this.Fn(je.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&S.done()}).next(()=>u)}newChangeBuffer(e){return new aP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Nx(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}On(e,t){return Nx(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function zO(n,e){let t;if(e.document)t=qb(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),i=Ip(e.noDocument.readTime);t=Cn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=je.fromSegments(e.unknownDocument.path),i=Ip(e.unknownDocument.version);t=Cn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Yn(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return Cn.newInvalidDocument(e)}}class aP extends xx{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new ll(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Fn((u,c)=>Wt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const f=this.Gn.get(u);if(t.push(this.qn.removeEntry(e,u,f.readTime)),c.isValidDocument()){const y=mx(this.qn.M,c);i=i.add(u.path.popLast()),r+=tD(y)-f.size,t.push(this.qn.addEntry(e,u,y))}else if(r-=f.size,this.trackRemovals){const y=mx(this.qn.M,c.convertToNoDocument(Dt.min()));t.push(this.qn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.qn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function Nx(n){return Ti(n,"remoteDocumentGlobal")}function Sp(n){return Ti(n,"remoteDocumentsV14")}function P0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Rx(n,e){const t=e.documentKey.path.toArray();return[n,Yb(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ox(n,e){const t=n.path.length-e.path.length;return 0!==t?t:je.comparator(n,e)}class uP{constructor(e){this.M=e}kt(e,t,r,i){const u=new Dh("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",s,{unique:!0}),f.createObjectStore("documentMutations"),Px(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=he.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),Px(e)),c=c.next(()=>function(f){const y=f.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,y){return y.store("mutations").qt().next(b=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",s,{unique:!0});const S=y.store("mutations"),M=b.map(F=>S.put(F));return he.waitFor(M)})}(e,u))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Kn(u))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(u)))),r<7&&i>=7&&(c=c.next(()=>this.jn(u))),r<8&&i>=8&&(c=c.next(()=>this.Wn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.zn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:Fe});y.createIndex("collectionPathOverlayIndex",He,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",rt,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:d});y.createIndex("documentKeyIndex",g),y.createIndex("collectionGroupIndex",v)}(e)).next(()=>this.Hn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:k}).createIndex("sequenceNumberIndex",B,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:Z}).createIndex("documentKeyIndex",ye,{unique:!1})}(e)})),c}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=tD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>he.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(f=>he.forEach(f,y=>{Ct(y.userId===u.userId);const b=iy(this.M,y);return Cx(e,u.userId,b).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,f)=>{const y=new tn(c),b=[0,ai(y)];u.push(t.get(b).next(S=>S?he.resolve():t.put({targetId:0,path:ai(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>he.waitFor(u))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:x});const r=t.store("collectionParents"),i=new xT,u=c=>{if(i.add(c)){const f=c.lastSegment(),y=c.popLast();return r.put({collectionId:f,parent:ai(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,f)=>{const y=new tn(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,f,y],b)=>{const S=Aa(f);return u(S.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=N0(i),c=yx(this.M,u);return t.put(c)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const f=t.store("remoteDocumentsV14"),y=(b=c,b.document?new je(tn.fromString(b.document.name).popFirst(5)):b.noDocument?je.fromSegments(b.noDocument.path):b.unknownDocument?je.fromSegments(b.unknownDocument.path):it()).path.toArray();var b;const S={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(S))}).next(()=>he.waitFor(i))}}function Px(n){n.createObjectStore("targetDocuments",{keyPath:D}).createIndex("documentTargetsIndex",A,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",w,{unique:!0}),n.createObjectStore("targetGlobal")}const OT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class PT{constructor(e,t,r,i,u,c,f,y,b,S,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=u,this.window=c,this.document=f,this.Yn=b,this.Xn=S,this.Zn=M,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=F=>Promise.resolve(),!PT.vt())throw new Ne(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sP(this,i),this.cs=t+"main",this.M=new gx(y),this.hs=new xs(this.cs,this.Zn,new uP(this.M)),this.ls=new tP(this.referenceDelegate,this.M),this.fs=new oP(this.M),this.ds=new WO,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===S&&dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(re.FAILED_PRECONDITION,OT);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new as(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(lu(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return k0(e).get("owner").next(t=>he.resolve(this.bs(t)))}Ps(e){return rD(e).delete(this.clientId)}Vs(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ti(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ss(u,18e5),f=u.filter(y=>-1===c.indexOf(y));return he.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?he.resolve(!0):k0(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ne(re.FAILED_PRECONDITION,OT);return!1}}return!(!this.networkEnabled||!this.inForeground)||rD(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new px(t,as.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>rD(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return NT.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new eP(e)}getDocumentOverlayCache(e){return MT.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.Zn)?mn:13===c?Kt:12===c?yt:11===c?Ie:void it();var c;let f;return this.hs.runTransaction(e,i,u,y=>(f=new px(y,this.ts?this.ts.next():as.A),"readwrite-primary"===t?this.Ts(f).next(b=>!!b||this.Es(f)).next(b=>{if(!b)throw dr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Ne(re.FAILED_PRECONDITION,ls);return r(f)}).next(b=>this.Rs(f).next(()=>b)):this.Fs(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}Fs(e){return k0(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(re.FAILED_PRECONDITION,OT)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return k0(e).put("owner",t)}static vt(){return xs.vt()}As(e){const t=k0(e);return t.get("owner").next(r=>this.bs(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(dr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,Ht.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return dr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){dr("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function k0(n){return Ti(n,"owner")}function rD(n){return Ti(n,"clientMetadata")}function kT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class lP{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return je.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):Hm(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new je(t)).next(r=>{let i=_0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let u=_0();return this.indexManager.getCollectionParents(e,i).next(c=>he.forEach(c,f=>{const y=(b=t,S=f.child(i),new Ca(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.Ws(e,y,r).next(b=>{b.forEach((S,M)=>{u=u.insert(S,M)})})}).next(()=>u))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const f of c.mutations){const y=f.key;let b=i.get(y);null==b&&(b=Cn.newInvalidDocument(y),i=i.insert(y,b)),Vb(f,b,c.localWriteTime),b.isFoundDocument()||(i=i.remove(y))}}).next(()=>(i.forEach((u,c)=>{Rb(t,c)||(i=i.remove(u))}),i))}}class FT{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=vn(),i=vn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new FT(e,t.fromCache,r,i)}}class kx{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(Dt.min())?this.Zs(e,t):this.Xs.qs(e,i).next(u=>{const c=this.ti(t,u);return(fp(t)||l0(t))&&this.ei(t.limitType,c,i,r)?this.Zs(e,t):(Om()<=Ju.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),d0(t)),this.Xs.Ks(e,t,Sb(r,-1)).next(f=>(c.forEach(y=>{f=f.insert(y.key,y)}),f)))});var u}ti(e,t){let r=new Fn(oT(e));return t.forEach((i,u)=>{Rb(e,u)&&(r=r.add(u))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Zs(e,t){return Om()<=Ju.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",d0(t)),this.Xs.Ks(e,t,Ia.min())}}class cP{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new rr(Wt),this.ii=new ll(u=>Rc(u),yh),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new lP(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function Fx(n,e,t,r){return new cP(n,e,t,r)}function Lx(n,e){return LT.apply(this,arguments)}function LT(){return LT=(0,ve.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(u=>(i=u,t.ui(e),t.$s.getAllMutationBatches(r))).next(u=>{const c=[],f=[];let y=vn();for(const b of i){c.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}for(const b of u){f.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}return t.ai.qs(r,y).next(b=>({ci:b,removedBatchIds:c,addedBatchIds:f}))})})}),LT.apply(this,arguments)}function dP(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.oi.newChangeBuffer({trackRemovals:!0});return function(c,f,y,b){const S=y.batch,M=S.keys();let F=he.resolve();return M.forEach(U=>{F=F.next(()=>b.getEntry(f,U)).next(G=>{const ne=y.docVersions.get(U);Ct(null!==ne),G.version.compareTo(ne)<0&&(S.applyToRemoteDocument(G,y),G.isValidDocument()&&(G.setReadTime(y.commitVersion),b.addEntry(G)))})}),F.next(()=>c.$s.removeMutationBatch(f,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function Vx(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function hP(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const f=[];e.targetChanges.forEach((b,S)=>{const M=i.get(S);if(!M)return;f.push(t.ls.removeMatchingKeys(u,b.removedDocuments,S).next(()=>t.ls.addMatchingKeys(u,b.addedDocuments,S)));let F=M.withSequenceNumber(u.currentSequenceNumber);var U,G,ne;e.targetMismatches.has(S)?F=F.withResumeToken(br.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(S,F),G=F,ne=b,(0===(U=M).resumeToken.approximateByteSize()||G.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0)&&f.push(t.ls.updateTargetData(u,F))});let y=_o();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),f.push(Ux(u,c,e.documentUpdates).next(b=>{y=b})),!r.isEqual(Dt.min())){const b=t.ls.getLastRemoteSnapshotVersion(u).next(S=>t.ls.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(b)}return he.waitFor(f).next(()=>c.apply(u)).next(()=>t.ai.Gs(u,y)).next(()=>y)}).then(u=>(t.si=i,u))}function Ux(n,e,t){let r=vn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=_o();return t.forEach((c,f)=>{const y=i.get(c);f.isNoDocument()&&f.version.isEqual(Dt.min())?(e.removeEntry(c,f.readTime),u=u.insert(c,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(f),u=u.insert(c,f)):ke("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",f.version)}),u})}function fP(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function uy(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(u=>u?(i=u,he.resolve(i)):t.ls.allocateTargetId(r).next(c=>(i=new Ih(e,c,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function ly(n,e,t){return VT.apply(this,arguments)}function VT(){return VT=(0,ve.Z)(function*(n,e,t){const r=qe(n),i=r.si.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!lu(c))throw c;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),VT.apply(this,arguments)}function iD(n,e,t){const r=qe(n);let i=Dt.min(),u=vn();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,y,b){const S=qe(f),M=S.ii.get(b);return void 0!==M?he.resolve(S.si.get(M)):S.ls.getTargetData(y,b)}(r,c,Go(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(c,f.targetId).next(y=>{u=y})}).next(()=>r.ni.Ks(c,e,t?i:Dt.min(),t?u:vn())).next(f=>($x(r,sT(e),f),{documents:f,hi:u})))}function Bx(n,e){const t=qe(n),r=qe(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function jx(n,e){const t=qe(n),r=t.ri.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,Sb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>($x(t,e,i),i))}function $x(n,e,t){let r=Dt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ri.set(e,r)}function UT(){return UT=(0,ve.Z)(function*(n,e,t,r){const i=qe(n);let u=vn(),c=_o();for(const b of t){const S=e.li(b.metadata.name);b.document&&(u=u.add(S));const M=e.fi(b);M.setReadTime(e.di(b.metadata.readTime)),c=c.insert(S,M)}const f=i.oi.newChangeBuffer({trackRemovals:!0}),y=yield uy(i,(b=r,Go(Pc(tn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>Ux(b,f,c).next(S=>(f.apply(b),S)).next(S=>i.ls.removeMatchingKeysForTargetId(b,y.targetId).next(()=>i.ls.addMatchingKeys(b,u,y.targetId)).next(()=>i.ai.Gs(b,S)).next(()=>S)))}),UT.apply(this,arguments)}function gP(n,e){return BT.apply(this,arguments)}function BT(){return BT=(0,ve.Z)(function*(n,e,t=vn()){const r=yield uy(n,Go(AT(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=oi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.ds.saveNamedQuery(u,e);const f=r.withResumeToken(br.EMPTY_BYTE_STRING,c);return i.si=i.si.insert(f.targetId,f),i.ls.updateTargetData(u,f).next(()=>i.ls.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.ls.addMatchingKeys(u,t,r.targetId)).next(()=>i.ds.saveNamedQuery(u,e))})}),BT.apply(this,arguments)}class mP{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return he.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:oi(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:AT(r.bundledQuery),readTime:oi(r.readTime)}),he.resolve();var r}}class yP{constructor(){this.overlays=new rr(je.comparator),this.mi=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.mi.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=Km(),u=t.length+1,c=new je(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const y=f.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new rr((b,S)=>b-S);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=Km(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const f=Km(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,S)=>f.set(b,S)),!(f.size()>=i)););return he.resolve(f)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new TT(t,r));let u=this.mi.get(t);void 0===u&&(u=vn(),this.mi.set(t,u)),this.mi.set(t,u.add(r.key))}}class jT{constructor(){this.gi=new Fn(Ai.yi),this.pi=new Fn(Ai.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Ai(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Ai(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new je(new tn([])),r=new Ai(t,e),i=new Ai(t,e+1),u=[];return this.pi.forEachInRange([r,i],c=>{this.Ei(c),u.push(c.key)}),u}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new je(new tn([])),r=new Ai(t,e),i=new Ai(t,e+1);let u=vn();return this.pi.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Ai(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ai{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return je.comparator(e.key,t.key)||Wt(e.Vi,t.Vi)}static Ii(e,t){return Wt(e.Vi,t.Vi)||je.comparator(e.key,t.key)}}class _P{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new Fn(Ai.yi)}checkEmpty(e){return he.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const u=this.vi;this.vi++;const c=new IT(u,t,r,i);this.$s.push(c);for(const f of i)this.Si=this.Si.add(new Ai(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),u=i<0?0:i;return he.resolve(this.$s.length>u?this.$s[u]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return he.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ai(t,0),i=new Ai(t,Number.POSITIVE_INFINITY),u=[];return this.Si.forEachInRange([r,i],c=>{const f=this.Di(c.Vi);u.push(f)}),he.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fn(Wt);return t.forEach(i=>{const u=new Ai(i,0),c=new Ai(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([u,c],f=>{r=r.add(f.Vi)})}),he.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;je.isDocumentKey(u)||(u=u.child(""));const c=new Ai(new je(u),0);let f=new Fn(Wt);return this.Si.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(y.Vi)),!0)},c),he.resolve(this.xi(f))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return he.forEach(t.mutations,i=>{const u=new Ai(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Ai(t,0),i=this.Si.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return he.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class vP{constructor(e){this.ki=e,this.docs=new rr(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=_o();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Cn.newInvalidDocument(i))}),he.resolve(r)}getAllFromCollection(e,t,r){let i=_o();const u=new je(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:y}}=c.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||eT(Mb(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return he.resolve(i)}getAllFromCollectionGroup(e,t,r,i){it()}Mi(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new EP(this)}getSize(e){return he.resolve(this.size)}}class EP extends xx{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class wP{constructor(e){this.persistence=e,this.Oi=new ll(t=>Rc(t),yh),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Fi=0,this.$i=new jT,this.targetCount=0,this.Bi=Tp.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),he.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new Tp(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.In(t),he.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Oi.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Oi.delete(c),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),he.waitFor(u).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),he.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.$i.containsKey(t))}}class bP{constructor(e,t){this.Li={},this.overlays={},this.ts=new as(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new wP(this),this.indexManager=new XO,this.fs=new vP(r=>this.referenceDelegate.Ui(r)),this.M=new gx(t),this.ds=new mP(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new _P(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const i=new DP(this.ts.next());return this.referenceDelegate.qi(),r(i).next(u=>this.referenceDelegate.Gi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ki(e,t){return he.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class DP extends hl{constructor(e){super(),this.currentSequenceNumber=e}}class $T{constructor(e){this.persistence=e,this.Qi=new jT,this.ji=null}static Wi(e){return new $T(e)}get zi(){if(this.ji)return this.ji;throw it()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.zi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.zi,r=>{const i=je.fromPath(r);return this.Hi(e,i).next(u=>{u||t.removeEntry(i,Dt.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return he.or([()=>he.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function Hx(n,e){return`firestore_clients_${n}_${e}`}function Gx(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function HT(n,e){return`firestore_targets_${n}_${e}`}class sD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Ne(i.error.code,i.error.message))),c?new sD(e,t,i.state,u):(dr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class F0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Ne(r.error.code,r.error.message))),u?new F0(e,r.state,i):(dr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Zm();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=Tb(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new oD(e,u):(dr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class GT{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new GT(t.clientId,t.onlineState):(dr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class qT{constructor(){this.activeTargetIds=Zm()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zT{constructor(e,t,r,i,u){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new rr(Wt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=Hx(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new qT),this.ar=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const u=e.getItem(Hx(e.persistenceKey,i));if(u){const c=oD.Ji(i,u);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(HT(this.persistenceKey,e));if(r){const i=F0.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(HT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(u){let c=as.A;if(null!=u)try{const f=JSON.parse(u);Ct("number"==typeof f),c=f}catch(f){dr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==as.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new sD(this.currentUser,e,t,r),u=Gx(this.persistenceKey,this.currentUser,e);this.setItem(u,i.Yi())}pr(e){const t=Gx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=HT(this.persistenceKey,e),u=new F0(e,t,r);this.setItem(i,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return oD.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return sD.Ji(new zr(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return F0.Ji(i,t)}wr(e){return GT.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),u=this.gr(r),c=[],f=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||f.push(y)}),this.syncEngine.Or(c,f).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Zm();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class qx{constructor(){this.Fr=new qT,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new qT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class IP{Br(e){}shutdown(){}}class zx{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const CP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class TP{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class AP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,u){const c=this.oo(e,t);ke("RestConnection","Sending: ",c,r);const f={};return this.uo(f,i,u),this.ao(e,c,f,r).then(y=>(ke("RestConnection","Received: ",y),y),y=>{throw ep("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}co(e,t,r,i,u){return this.ro(e,t,r,i,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ac,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}oo(e,t){return`${this.so}/v1/${t}:${CP[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((u,c)=>{const f=new Db;f.listenOnce(UC.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Zv.NO_ERROR:const b=f.getResponseJson();ke("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Zv.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),c(new Ne(re.DEADLINE_EXCEEDED,"Request time out"));break;case Zv.HTTP_ERROR:const S=f.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',S,"response text:",f.getResponseText()),S>0){const M=f.getResponseJson().error;if(M&&M.status&&M.message){const F=function(U){const G=U.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(G)>=0?G:re.UNKNOWN}(M.status);c(new Ne(F,M.message))}else c(new Ne(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Ne(re.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);f.send(t,"POST",y,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=LC(),c=VC(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new jC({})),this.uo(f.initMessageHeaders,t,r),(0,Ht.uI)()||(0,Ht.b$)()||(0,Ht.d)()||(0,Ht.w1)()||(0,Ht.Mn)()||(0,Ht.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");ke("Connection","Creating WebChannel: "+y,f);const b=u.createWebChannel(y,f);let S=!1,M=!1;const F=new TP({jr:G=>{M?ke("Connection","Not sending because WebChannel is closed:",G):(S||(ke("Connection","Opening WebChannel transport."),b.open(),S=!0),ke("Connection","WebChannel sending:",G),b.send(G))},Wr:()=>b.close()}),U=(G,ne,we)=>{G.listen(ne,Ze=>{try{we(Ze)}catch(Le){setTimeout(()=>{throw Le},0)}})};return U(b,ol.EventType.OPEN,()=>{M||ke("Connection","WebChannel transport opened.")}),U(b,ol.EventType.CLOSE,()=>{M||(M=!0,ke("Connection","WebChannel transport closed"),F.eo())}),U(b,ol.EventType.ERROR,G=>{M||(M=!0,ep("Connection","WebChannel transport errored:",G),F.eo(new Ne(re.UNAVAILABLE,"The operation could not be completed")))}),U(b,ol.EventType.MESSAGE,G=>{var ne;if(!M){const we=G.data[0];Ct(!!we);const Ze=we,Le=Ze.error||(null===(ne=Ze[0])||void 0===ne?void 0:ne.error);if(Le){ke("Connection","WebChannel received error:",Le);const Ke=Le.status;let ze=function(ct){const Jt=fr[ct];if(void 0!==Jt)return y0(Jt)}(Ke),_t=Le.message;void 0===ze&&(ze=re.INTERNAL,_t="Unknown error status: "+Ke+" with message "+Le.message),M=!0,F.eo(new Ne(ze,_t)),b.close()}else ke("Connection","WebChannel received:",we),F.no(we)}}),U(c,BC.STAT_EVENT,G=>{G.stat===bb.PROXY?ke("Connection","Detected buffering proxy"):G.stat===bb.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.Zr()},0),F}}function Wx(){return"undefined"!=typeof window?window:null}function aD(){return"undefined"!=typeof document?document:null}function L0(n){return new Jm(n,!0)}class WT{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Kx{constructor(e,t,r,i,u,c,f,y){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new WT(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ve.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ve.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(dr(t.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===re.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Ne(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ve.Z)(function*(){e.state=0,e.start()}))}qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SP extends Kx{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function A0(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:it(),i=e.targetChange.targetIds||[],u=function(y,b){return y.N?(Ct(void 0===b||"string"==typeof b),br.fromBase64String(b||"")):(Ct(void 0===b||b instanceof Uint8Array),br.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(y){const b=void 0===y.code?re.UNKNOWN:y0(y.code);return new Ne(b,y.message||"")}(c);t=new dl(r,i,u,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Ta(n,r.document.name),u=oi(r.document.updateTime),c=new Ci({mapValue:{fields:r.document.fields}}),f=Cn.newFoundDocument(i,u,c);t=new Ym(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Ta(n,r.document),u=r.readTime?oi(r.readTime):Dt.min(),c=Cn.newNoDocument(i,u);t=new Ym([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ta(n,r.document);t=new Ym([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return it();{const r=e.filter,u=new pT(r.count||0);t=new v0(r.targetId,u)}}var y;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Dt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Dt.min():u.readTime?oi(u.readTime):Dt.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=bh(this.M),t.addTarget=function(i,u){let c;const f=u.target;return c=lp(f)?{documents:Wb(i,f)}:{query:Kb(i,f)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=yT(i,u.resumeToken):u.snapshotVersion.compareTo(Dt.min())>0&&(c.readTime=Xm(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function lx(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=bh(this.M),t.removeTarget=e,this.Oo(t)}}class MP extends Kx{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function S0(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let u=oi(r.updateTime?r.updateTime:i);return u.isEqual(Dt.min())&&(u=oi(i)),new cT(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=oi(e.commitTime);return this.listener.Jo(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=bh(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ty(this.M,r))};this.Oo(t)}}class xP extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new Ne(re.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.ro(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(re.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(re.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class NP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(dr(t),this.su=!1):ke("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class RP{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(f=>{r.enqueueAndForget((0,ve.Z)(function*(){var y;Sh(c)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,ve.Z)(function*(b){const S=qe(b);S.lu.add(4),yield cy(S),S._u.set("Unknown"),S.lu.delete(4),yield V0(S)}),function(b){return y.apply(this,arguments)})(c))}))}),this._u=new NP(r,i)}}function V0(n){return KT.apply(this,arguments)}function KT(){return KT=(0,ve.Z)(function*(n){if(Sh(n))for(const e of n.fu)yield e(!0)}),KT.apply(this,arguments)}function cy(n){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,ve.Z)(function*(n){for(const e of n.fu)yield e(!1)}),ZT.apply(this,arguments)}function uD(n,e){const t=qe(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),JT(t)?QT(t):hy(t).Co()&&YT(t,e))}function U0(n,e){const t=qe(n),r=hy(t);t.hu.delete(e),r.Co()&&Zx(t,e),0===t.hu.size&&(r.Co()?r.ko():Sh(t)&&t._u.set("Unknown"))}function YT(n,e){n.wu.Z(e.targetId),hy(n).Qo(e)}function Zx(n,e){n.wu.Z(e),hy(n).jo(e)}function QT(n){n.wu=new w0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),hy(n).start(),n._u.iu()}function JT(n){return Sh(n)&&!hy(n).Do()&&n.hu.size>0}function Sh(n){return 0===qe(n).lu.size}function Yx(n){n.wu=void 0}function OP(n){return XT.apply(this,arguments)}function XT(){return XT=(0,ve.Z)(function*(n){n.hu.forEach((e,t)=>{YT(n,e)})}),XT.apply(this,arguments)}function PP(n,e){return eA.apply(this,arguments)}function eA(){return eA=(0,ve.Z)(function*(n,e){Yx(n),JT(n)?(n._u.uu(e),QT(n)):n._u.set("Unknown")}),eA.apply(this,arguments)}function kP(n,e,t){return tA.apply(this,arguments)}function tA(){return tA=(0,ve.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof dl&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,u){const c=u.cause;for(const f of u.targetIds)i.hu.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.hu.delete(f),i.wu.removeTarget(f))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield lD(n,r)}else if(e instanceof Ym?n.wu.ut(e):e instanceof v0?n.wu._t(e):n.wu.ht(e),!t.isEqual(Dt.min()))try{const r=yield Vx(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.wu.yt(u);return c.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const b=i.hu.get(y);b&&i.hu.set(y,b.withResumeToken(f.resumeToken,u))}}),c.targetMismatches.forEach(f=>{const y=i.hu.get(f);if(!y)return;i.hu.set(f,y.withResumeToken(br.EMPTY_BYTE_STRING,y.snapshotVersion)),Zx(i,f);const b=new Ih(y.target,f,1,y.sequenceNumber);YT(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield lD(n,r)}var r}),tA.apply(this,arguments)}function lD(n,e,t){return nA.apply(this,arguments)}function nA(){return nA=(0,ve.Z)(function*(n,e,t){if(!lu(e))throw e;n.lu.add(1),yield cy(n),n._u.set("Offline"),t||(t=()=>Vx(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield V0(n)}))}),nA.apply(this,arguments)}function Qx(n,e){return e().catch(t=>lD(n,t,e))}function dy(n){return rA.apply(this,arguments)}function rA(){return rA=(0,ve.Z)(function*(n){const e=qe(n),t=Mh(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;FP(e);)try{const i=yield fP(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,LP(e,i)}catch(i){yield lD(e,i)}Jx(e)&&Xx(e)}),rA.apply(this,arguments)}function FP(n){return Sh(n)&&n.cu.length<10}function LP(n,e){n.cu.push(e);const t=Mh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function Jx(n){return Sh(n)&&!Mh(n).Do()&&n.cu.length>0}function Xx(n){Mh(n).start()}function VP(n){return iA.apply(this,arguments)}function iA(){return iA=(0,ve.Z)(function*(n){Mh(n).Xo()}),iA.apply(this,arguments)}function UP(n){return sA.apply(this,arguments)}function sA(){return sA=(0,ve.Z)(function*(n){const e=Mh(n);for(const t of n.cu)e.Ho(t.mutations)}),sA.apply(this,arguments)}function BP(n,e,t){return oA.apply(this,arguments)}function oA(){return oA=(0,ve.Z)(function*(n,e,t){const r=n.cu.shift(),i=CT.from(r,e,t);yield Qx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield dy(n)}),oA.apply(this,arguments)}function jP(n,e){return aA.apply(this,arguments)}function aA(){return aA=(0,ve.Z)(function*(n,e){var t;e&&Mh(n).zo&&(yield(t=(0,ve.Z)(function*(r,i){if(Wm(u=i.code)&&u!==re.ABORTED){const c=r.cu.shift();Mh(r).No(),yield Qx(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield dy(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),Jx(n)&&Xx(n)}),aA.apply(this,arguments)}function eN(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,ve.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Sh(t);t.lu.add(3),yield cy(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield V0(t)}),uA.apply(this,arguments)}function lA(n,e){return cA.apply(this,arguments)}function cA(){return cA=(0,ve.Z)(function*(n,e){const t=qe(n);e?(t.lu.delete(2),yield V0(t)):e||(t.lu.add(2),yield cy(t),t._u.set("Unknown"))}),cA.apply(this,arguments)}function hy(n){return n.mu||(n.mu=function(e,t,r){const i=qe(e);return i.tu(),new SP(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:OP.bind(null,n),Jr:PP.bind(null,n),Ko:kP.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.mu.No(),JT(n)?QT(n):n._u.set("Unknown")):(yield n.mu.stop(),Yx(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Mh(n){return n.gu||(n.gu=function(e,t,r){const i=qe(e);return i.tu(),new MP(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:VP.bind(null,n),Jr:jP.bind(null,n),Yo:UP.bind(null,n),Jo:BP.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.gu.No(),yield dy(n)):(yield n.gu.stop(),n.cu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class dA{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,f=new dA(e,t,c,i,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(n,e){if(dr("AsyncQueue",`${e}: ${n}`),lu(n))return new Ne(re.UNAVAILABLE,`${e}: ${n}`);throw n}class py{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=_0(),this.sortedSet=new rr(this.comparator)}static emptySet(e){return new py(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof py)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new py;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class tN{constructor(){this.yu=new rr(je.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):it():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class gy{constructor(e,t,r,i,u,c,f,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new gy(e,t,py.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class $P{constructor(){this.Iu=void 0,this.listeners=[]}}class HP{constructor(){this.queries=new ll(e=>Gm(e),gp),this.onlineState="Unknown",this.Tu=new Set}}function hA(n,e){return fA.apply(this,arguments)}function fA(){return fA=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new $P),i)try{u.Iu=yield t.onListen(r)}catch(c){const f=fy(c,`Initialization of query '${d0(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&mA(t)}),fA.apply(this,arguments)}function pA(n,e){return gA.apply(this,arguments)}function gA(){return gA=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),gA.apply(this,arguments)}function GP(n,e){const t=qe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.Au(i)&&(r=!0);c.Iu=i}}r&&mA(t)}function qP(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function mA(n){n.Tu.forEach(e=>{e.next()})}class yA{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new gy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=gy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class zP{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class nN{constructor(e){this.M=e}li(e){return Ta(this.M,e)}fi(e){return e.metadata.exists?qb(this.M,e.document,!1):Cn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return oi(e)}}class WP{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rN(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=tn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new nN(this.M);for(const i of e)if(i.metadata.queries){const u=r.li(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||vn()).add(u);t.set(c,f)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function pP(n,e,t,r){return UT.apply(this,arguments)}(e.localStore,new nN(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield gP(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function rN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class iN{constructor(e){this.key=e}}class sN{constructor(e){this.key=e}}class oN{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=vn(),this.mutatedKeys=vn(),this.Lu=oT(e),this.Uu=new py(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new tN,i=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const y=fp(this.query)&&i.size===this.query.limit?i.last():null,b=l0(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,M)=>{const F=i.get(S),U=Rb(this.query,M)?M:null,G=!!F&&this.mutatedKeys.has(F.key),ne=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let we=!1;F&&U?F.data.isEqual(U.data)?G!==ne&&(r.track({type:3,doc:U}),we=!0):this.Qu(F,U)||(r.track({type:2,doc:U}),we=!0,(y&&this.Lu(U,y)>0||b&&this.Lu(U,b)<0)&&(f=!0)):!F&&U?(r.track({type:0,doc:U}),we=!0):F&&!U&&(r.track({type:1,doc:F}),we=!0,(y||b)&&(f=!0)),we&&(U?(c=c.add(U),u=ne?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),fp(this.query)||l0(this.query))for(;c.size>this.query.limit;){const S=fp(this.query)?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Uu:c,Ku:r,ei:f,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Ku.pu();u.sort((b,S)=>function(M,F){const U=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return U(M)-U(F)}(b.type,S.type)||this.Lu(b.doc,S.doc)),this.ju(r);const c=t?this.Wu():[],f=0===this.Bu.size&&this.current?1:0,y=f!==this.$u;return this.$u=f,0!==u.length||y?{snapshot:new gy(this.query,e.Uu,i,u,e.mutatedKeys,0===f,y,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new tN,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=vn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new sN(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new iN(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=vn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return gy.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class KP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ZP{constructor(e){this.key=e,this.Xu=!1}}class YP{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Zu={},this.ta=new ll(f=>Gm(f),gp),this.ea=new Map,this.na=new Set,this.sa=new rr(je.comparator),this.ia=new Map,this.ra=new jT,this.oa={},this.ua=new Map,this.aa=Tp.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function QP(n,e){return _A.apply(this,arguments)}function _A(){return _A=(0,ve.Z)(function*(n,e){const t=jA(n);let r,i;const u=t.ta.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.Yu();else{const c=yield uy(t.localStore,Go(e));t.isPrimaryClient&&uD(t.remoteStore,c);const f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield vA(t,e,r,"current"===f)}return i}),_A.apply(this,arguments)}function vA(n,e,t,r){return EA.apply(this,arguments)}function EA(){return EA=(0,ve.Z)(function*(n,e,t,r){n.ha=(S,M,F)=>{return(U=(0,ve.Z)(function*(G,ne,we,Ze){let Le=ne.view.Gu(we);Le.ei&&(Le=yield iD(G.localStore,ne.query,!1).then(({documents:_t})=>ne.view.Gu(_t,Le)));const Ke=Ze&&Ze.targetChanges.get(ne.targetId),ze=ne.view.applyChanges(Le,G.isPrimaryClient,Ke);return xA(G,ne.targetId,ze.zu),ze.snapshot}),function(G,ne,we,Ze){return U.apply(this,arguments)})(n,S,M,F);var U};const i=yield iD(n.localStore,e,!0),u=new oN(e,i.hi),c=u.Gu(i.documents),f=vp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,f);xA(n,t,y.zu);const b=new KP(e,t,u);return n.ta.set(e,b),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),y.snapshot}),EA.apply(this,arguments)}function JP(n,e){return wA.apply(this,arguments)}function wA(){return wA=(0,ve.Z)(function*(n,e){const t=qe(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(u=>!gp(u,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ly(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),U0(t.remoteStore,r.targetId),my(t,r.targetId)}).catch(Ap))):(my(t,r.targetId),yield ly(t.localStore,r.targetId,!0))}),wA.apply(this,arguments)}function bA(){return bA=(0,ve.Z)(function*(n,e,t){const r=$A(n);try{const i=yield function(u,c){const f=qe(u),y=Yn.now(),b=c.reduce((M,F)=>M.add(F.key),vn());let S;return f.persistence.runTransaction("Locally write mutations","readwrite",M=>f.ai.qs(M,b).next(F=>{S=F;const U=[];for(const G of c){const ne=hT(G,S.get(G.key));null!=ne&&U.push(new ul(G.key,ne,Bm(ne.value.mapValue),Dr.exists(!0)))}return f.$s.addMutationBatch(M,y,U,c)})).then(M=>(M.applyToLocalDocumentSet(S),{batchId:M.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,f){let y=u.oa[u.currentUser.toKey()];y||(y=new rr(Wt)),y=y.insert(c,f),u.oa[u.currentUser.toKey()]=y}(r,i.batchId,t),yield Uc(r,i.changes),yield dy(r.remoteStore)}catch(i){const u=fy(i,"Failed to persist write");t.reject(u)}}),bA.apply(this,arguments)}function aN(n,e){return DA.apply(this,arguments)}function DA(){return DA=(0,ve.Z)(function*(n,e){const t=qe(n);try{const r=yield hP(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.ia.get(u);c&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?Ct(c.Xu):i.removedDocuments.size>0&&(Ct(c.Xu),c.Xu=!1))}),yield Uc(t,r,e)}catch(r){yield Ap(r)}}),DA.apply(this,arguments)}function uN(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((u,c)=>{const f=c.view.Eu(e);f.snapshot&&i.push(f.snapshot)}),function(u,c){const f=qe(u);f.onlineState=c;let y=!1;f.queries.forEach((b,S)=>{for(const M of S.listeners)M.Eu(c)&&(y=!0)}),y&&mA(f)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ek(n,e,t){return IA.apply(this,arguments)}function IA(){return IA=(0,ve.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),u=i&&i.key;if(u){let c=new rr(je.comparator);c=c.insert(u,Cn.newNoDocument(u,Dt.min()));const f=vn().add(u),y=new cl(Dt.min(),new Map,new Fn(Wt),c,f);yield aN(r,y),r.sa=r.sa.remove(u),r.ia.delete(e),NA(r)}else yield ly(r.localStore,e,!1).then(()=>my(r,e,t)).catch(Ap)}),IA.apply(this,arguments)}function tk(n,e){return CA.apply(this,arguments)}function CA(){return CA=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield dP(t.localStore,e);MA(t,r,null),SA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Uc(t,i)}catch(i){yield Ap(i)}}),CA.apply(this,arguments)}function nk(n,e,t){return TA.apply(this,arguments)}function TA(){return TA=(0,ve.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(u,c){const f=qe(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return f.$s.lookupMutationBatch(y,c).next(S=>(Ct(null!==S),b=S.keys(),f.$s.removeMutationBatch(y,S))).next(()=>f.$s.performConsistencyCheck(y)).next(()=>f.ai.qs(y,b))})}(r.localStore,e);MA(r,e,t),SA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Uc(r,i)}catch(i){yield Ap(i)}}),TA.apply(this,arguments)}function AA(){return AA=(0,ve.Z)(function*(n,e){const t=qe(n);Sh(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=qe(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.$s.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=fy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),AA.apply(this,arguments)}function SA(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function MA(n,e,t){const r=qe(n);let i=r.oa[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function my(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||lN(n,r)})}function lN(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(U0(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),NA(n))}function xA(n,e,t){for(const r of t)r instanceof iN?(n.ra.addReference(r.key,e),ik(n,r)):r instanceof sN?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||lN(n,r.key)):it()}function ik(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.na.add(r),NA(n))}function NA(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new je(tn.fromString(e)),r=n.aa.next();n.ia.set(r,new ZP(t)),n.sa=n.sa.insert(t,r),uD(n.remoteStore,new Ih(Go(Pc(t.path)),r,2,as.A))}}function Uc(n,e,t){return RA.apply(this,arguments)}function RA(){return RA=(0,ve.Z)(function*(n,e,t){const r=qe(n),i=[],u=[],c=[];var f;r.ta.isEmpty()||(r.ta.forEach((f,y)=>{c.push(r.ha(y,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b.fromCache?"not-current":"current"),i.push(b);const S=FT.Js(y.targetId,b);u.push(S)}}))}),yield Promise.all(c),r.Zu.Ko(i),yield(f=(0,ve.Z)(function*(y,b){const S=qe(y);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>he.forEach(b,F=>he.forEach(F.zs,U=>S.persistence.referenceDelegate.addReference(M,F.targetId,U)).next(()=>he.forEach(F.Hs,U=>S.persistence.referenceDelegate.removeReference(M,F.targetId,U)))))}catch(M){if(!lu(M))throw M;ke("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const F=M.targetId;if(!M.fromCache){const U=S.si.get(F),ne=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);S.si=S.si.insert(F,ne)}}}),function(y,b){return f.apply(this,arguments)})(r.localStore,u))}),RA.apply(this,arguments)}function sk(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,ve.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield Lx(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(c=>{c.forEach(f=>{f.reject(new Ne(re.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Uc(t,r.ci)}var i}),OA.apply(this,arguments)}function ok(n,e){const t=qe(n),r=t.ia.get(e);if(r&&r.Xu)return vn().add(r.key);{let i=vn();const u=t.ea.get(e);if(!u)return i;for(const c of u){const f=t.ta.get(c);i=i.unionWith(f.view.qu)}return i}}function ak(n,e){return PA.apply(this,arguments)}function PA(){return PA=(0,ve.Z)(function*(n,e){const t=qe(n),r=yield iD(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&xA(t,e.targetId,i.zu),i}),PA.apply(this,arguments)}function uk(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,ve.Z)(function*(n,e){const t=qe(n);return jx(t.localStore,e).then(r=>Uc(t,r))}),kA.apply(this,arguments)}function lk(n,e,t,r){return FA.apply(this,arguments)}function FA(){return FA=(0,ve.Z)(function*(n,e,t,r){const i=qe(n),u=yield function(c,f){const y=qe(c),b=qe(y.$s);return y.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.ln(S,f).next(M=>M?y.ai.qs(S,M):he.resolve(null)))}(i.localStore,e);var f;null!==u?("pending"===t?yield dy(i.remoteStore):"acknowledged"===t||"rejected"===t?(MA(i,e,r||null),SA(i,e),f=e,qe(qe(i.localStore).$s).dn(f)):it(),yield Uc(i,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),FA.apply(this,arguments)}function LA(){return LA=(0,ve.Z)(function*(n,e){const t=qe(n);if(jA(t),$A(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield cN(t,r.toArray());t.ca=!0,yield lA(t.remoteStore,!0);for(const u of i)uD(t.remoteStore,u)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(my(t,c),ly(t.localStore,c,!0))),U0(t.remoteStore,c)}),yield i,yield cN(t,r),function(u){const c=qe(u);c.ia.forEach((f,y)=>{U0(c.remoteStore,y)}),c.ra.bi(),c.ia=new Map,c.sa=new rr(je.comparator)}(t),t.ca=!1,yield lA(t.remoteStore,!1)}}),LA.apply(this,arguments)}function cN(n,e,t){return VA.apply(this,arguments)}function VA(){return VA=(0,ve.Z)(function*(n,e,t){const r=qe(n),i=[],u=[];for(const c of e){let f;const y=r.ea.get(c);if(y&&0!==y.length){f=yield uy(r.localStore,Go(y[0]));for(const b of y){const S=r.ta.get(b),M=yield ak(r,S);M.snapshot&&u.push(M.snapshot)}}else{const b=yield Bx(r.localStore,c);f=yield uy(r.localStore,b),yield vA(r,dN(b),c,!1)}i.push(f)}return r.Zu.Ko(u),i}),VA.apply(this,arguments)}function dN(n){return jm(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function dk(n){const e=qe(n);return qe(qe(e.localStore).persistence).Os()}function hk(n,e,t,r){return UA.apply(this,arguments)}function UA(){return UA=(0,ve.Z)(function*(n,e,t,r){const i=qe(n);if(i.ca)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=i.ea.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield jx(i.localStore,sT(u[0])),f=cl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Uc(i,c,f);break}case"rejected":yield ly(i.localStore,e,!0),my(i,e,r);break;default:it()}}),UA.apply(this,arguments)}function fk(n,e,t){return BA.apply(this,arguments)}function BA(){return BA=(0,ve.Z)(function*(n,e,t){const r=jA(n);if(r.ca){for(const i of e){if(r.ea.has(i)){ke("SyncEngine","Adding an already active target "+i);continue}const u=yield Bx(r.localStore,i),c=yield uy(r.localStore,u);yield vA(r,dN(u),c.targetId,!1),uD(r.remoteStore,c)}for(const i of t)r.ea.has(i)&&(yield ly(r.localStore,i,!1).then(()=>{U0(r.remoteStore,i),my(r,i)}).catch(Ap))}}),BA.apply(this,arguments)}function jA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=aN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ok.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ek.bind(null,e),e.Zu.Ko=GP.bind(null,e.eventManager),e.Zu.la=qP.bind(null,e.eventManager),e}function $A(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nk.bind(null,e),e}class hN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.M=L0(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return Fx(this.persistence,new kx,e.initialUser,this.M)}_a(e){return new bP($T.Wi,this.M)}da(e){return new qx}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class fN extends hN{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield $A(r.ga.syncEngine),yield dy(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return Fx(this.persistence,new kx,e.initialUser,this.M)}wa(e){return new rP(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=kT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?vo.withCacheSize(this.cacheSizeBytes):vo.DEFAULT;return new PT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Wx(),aD(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new qx}}class gk extends fN{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof zT&&(r.sharedClientState.syncEngine={kr:lk.bind(null,i),Mr:hk.bind(null,i),Or:fk.bind(null,i),Os:dk.bind(null,i),Nr:uk.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var u=(0,ve.Z)(function*(c){yield function ck(n,e){return LA.apply(this,arguments)}(r.ga.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}da(e){const t=Wx();if(!zT.vt(t))throw new Ne(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=kT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class HA{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>uN(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=sk.bind(null,r.syncEngine),yield lA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new HP}createDatastore(e){const t=L0(e.databaseInfo.databaseId),r=new AP(e.databaseInfo);return new xP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=f=>uN(this.syncEngine,f,0),c=zx.vt()?new zx:new IP,new RP(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,f,y,b){const S=new YP(r,i,u,c,f,y);return b&&(S.ca=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=qe(t);ke("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield cy(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function pN(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class cD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class mk{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new wr,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const u=yield e.ba(i);return new zP(JSON.parse(u),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ve.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class yk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(u,c){const f=qe(u),y=bh(f.M)+"/documents",b={documents:c.map(U=>Ep(f.M,U))},S=yield f.co("BatchGetDocuments",y,b),M=new Map;S.forEach(U=>{const G=function zb(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=Ta(t,r.found.name),u=oi(r.found.updateTime),c=new Ci({mapValue:{fields:r.found.fields}});return Cn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=Ta(t,r.missing),u=oi(r.readTime);return Cn.newNoDocument(i,u)}(n,e):it()}(f.M,U);M.set(G.key.toString(),G)});const F=[];return c.forEach(U=>{const G=M.get(U.toString());Ct(!!G),F.push(G)}),F}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new wh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=je.fromPath(i);e.mutations.push(new m0(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(i,u){const c=qe(i),f=bh(c.M)+"/documents",y={writes:u.map(b=>ty(c.M,b))};yield c.ro("Commit",f,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Dr.updateTime(t):Dr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Ne(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dr.updateTime(t)}return Dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _k{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new WT(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ve.Z)(function*(){const t=new yk(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Ca(u)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!hr(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Wm(t)}return!1}}class vk{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=zr.UNAUTHENTICATED,this.clientId=Xv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ve.Z)(function*(f){ke("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ke("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(re.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=fy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function gN(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(u){r.isEqual(u)||(yield Lx(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),GA.apply(this,arguments)}function mN(n,e){return qA.apply(this,arguments)}function qA(){return qA=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield zA(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>eN(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>eN(e.remoteStore,u)),n.onlineComponents=e}),qA.apply(this,arguments)}function zA(n){return WA.apply(this,arguments)}function WA(){return WA=(0,ve.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield gN(n,new hN)),n.offlineComponents}),WA.apply(this,arguments)}function dD(n){return KA.apply(this,arguments)}function KA(){return KA=(0,ve.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield mN(n,new HA)),n.onlineComponents}),KA.apply(this,arguments)}function yN(n){return zA(n).then(e=>e.persistence)}function ZA(n){return zA(n).then(e=>e.localStore)}function _N(n){return dD(n).then(e=>e.remoteStore)}function YA(n){return dD(n).then(e=>e.syncEngine)}function yy(n){return QA.apply(this,arguments)}function QA(){return QA=(0,ve.Z)(function*(n){const e=yield dD(n),t=e.eventManager;return t.onListen=QP.bind(null,e.syncEngine),t.onUnlisten=JP.bind(null,e.syncEngine),t}),QA.apply(this,arguments)}function vN(n,e,t={}){const r=new wr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,u,c,f,y){const b=new cD({next:M=>{u.enqueueAndForget(()=>pA(i,S));const F=M.docs.has(c);!F&&M.fromCache?y.reject(new Ne(re.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&f&&"server"===f.source?y.reject(new Ne(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(M)},error:M=>y.reject(M)}),S=new yA(Pc(c.path),b,{includeMetadataChanges:!0,Du:!0});return hA(i,S)}(yield yy(n),n.asyncQueue,e,t,r)})),r.promise}function EN(n,e,t={}){const r=new wr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,u,c,f,y){const b=new cD({next:M=>{u.enqueueAndForget(()=>pA(i,S)),M.fromCache&&"server"===f.source?y.reject(new Ne(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(M)},error:M=>y.reject(M)}),S=new yA(c,b,{includeMetadataChanges:!0,Du:!0});return hA(i,S)}(yield yy(n),n.asyncQueue,e,t,r)})),r.promise}const wN=new Map;function JA(n,e,t){if(!t)throw new Ne(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bN(n,e,t,r){if(!0===e&&!0===r)throw new Ne(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DN(n){if(!je.isDocumentKey(n))throw new Ne(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function IN(n){if(je.isDocumentKey(n))throw new Ne(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hD(n);throw new Ne(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function CN(n,e){if(e<=0)throw new Ne(re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class TN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,bN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class B0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TN({}),this._settingsFrozen=!1,e instanceof ou?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ne(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ne(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new GC;switch(t.type){case"gapi":const r=t.client;return Ct(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new km(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ne(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=wN.get(e);t&&(ke("ComponentProvider","Removing Datastore"),wN.delete(e),t.terminate())}(this),Promise.resolve()}}class Jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}}class cs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cs(this.firestore,e,this._query)}}class fl extends cs{constructor(e,t,r){super(e,t,Pc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new je(e))}withConverter(e){return new fl(this.firestore,e,this._path)}}function AN(n,e,...t){if(n=(0,Ht.m9)(n),JA("collection","path",e),n instanceof B0){const r=tn.fromString(e,...t);return IN(r),new fl(n,null,r)}{if(!(n instanceof Jn||n instanceof fl))throw new Ne(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return IN(r),new fl(n.firestore,null,r)}}function fD(n,e,...t){if(n=(0,Ht.m9)(n),1===arguments.length&&(e=Xv.R()),JA("doc","path",e),n instanceof B0){const r=tn.fromString(e,...t);return DN(r),new Jn(n,null,new je(r))}{if(!(n instanceof Jn||n instanceof fl))throw new Ne(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return DN(r),new Jn(n.firestore,n instanceof fl?n.converter:null,new je(r))}}function SN(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),(n instanceof Jn||n instanceof fl)&&(e instanceof Jn||e instanceof fl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function MN(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),n instanceof cs&&e instanceof cs&&n.firestore===e.firestore&&gp(n._query,e._query)&&n.converter===e.converter}class xk{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new WT(this,"async_queue_retry"),this.Ua=()=>{const t=aD();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=aD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=aD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new wr;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ve.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!lu(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,dr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=dA.createAndSchedule(this,e,t,r,u=>this.Qa(u));return this.Oa.push(i),i}qa(){this.Fa&&it()}verifyOperationInProgress(){}ja(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function XA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Nk{constructor(){this._progressObserver={},this._taskCompletionResolver=new wr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ir extends B0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new xk,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||xN(this),this._firestoreClient.terminate()}}function Kr(n){return n._firestoreClient||xN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function xN(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Cb(n._databaseId,u,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var u,f;n._firestoreClient=new vk(n._authCredentials,n._appCheckCredentials,n._queue,r)}function NN(n,e,t){const r=new wr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield gN(n,t),yield mN(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===re.FAILED_PRECONDITION||u.code===re.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function RN(n){if(n._initialized||n._terminated)throw new Ne(re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Bc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pl(br.fromBase64String(e))}catch(t){throw new Ne(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pl(br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Mp{constructor(e){this._methodName=e}}class pD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const jk=/^__.*__$/;class $k{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ul(e,this.data,this.fieldMask,t,this.fieldTransforms):new mp(e,this.data,t,this.fieldTransforms)}}class ON{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ul(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function PN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class gD{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.Ja(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new gD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return _D(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(PN(this.Ya)&&jk.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class Hk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||L0(e)}uc(e,t,r,i=!1){return new gD({Ya:e,methodName:t,oc:r,path:Wr.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function xp(n){const e=n._freezeSettings(),t=L0(n._databaseId);return new Hk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mD(n,e,t,r,i,u={}){const c=n.uc(u.merge||u.mergeFields?2:0,e,t,i);rS("Data must be an object, but it was:",c,r);const f=LN(r,c);let y,b;if(u.merge)y=new Sc(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const M of u.mergeFields){const F=iS(e,M,t);if(!c.contains(F))throw new Ne(re.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);UN(S,F)||S.push(F)}y=new Sc(S),b=c.fieldTransforms.filter(M=>y.covers(M.field))}else y=null,b=c.fieldTransforms;return new $k(new Ci(f),y,b)}class j0 extends Mp{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof j0}}function kN(n,e,t){return new gD({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class eS extends Mp{_toFieldTransform(e){return new vh(e.path,new _h)}isEqual(e){return e instanceof eS}}class Gk extends Mp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=kN(this,e,!0),r=this.ac.map(u=>Np(u,t)),i=new uu(r);return new vh(e.path,i)}isEqual(e){return this===e}}class qk extends Mp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=kN(this,e,!0),r=this.ac.map(u=>Np(u,t)),i=new Fc(r);return new vh(e.path,i)}isEqual(e){return this===e}}class zk extends Mp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Lc(e.M,uT(e.M,this.cc));return new vh(e.path,t)}isEqual(e){return this===e}}function tS(n,e,t,r){const i=n.uc(1,e,t);rS("Data must be an object, but it was:",i,r);const u=[],c=Ci.empty();iu(r,(y,b)=>{const S=yD(e,y,t);b=(0,Ht.m9)(b);const M=i.nc(S);if(b instanceof j0)u.push(S);else{const F=Np(b,M);null!=F&&(u.push(S),c.set(S,F))}});const f=new Sc(u);return new ON(c,f,i.fieldTransforms)}function nS(n,e,t,r,i,u){const c=n.uc(1,e,t),f=[iS(e,r,t)],y=[i];if(u.length%2!=0)throw new Ne(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)f.push(iS(e,u[F])),y.push(u[F+1]);const b=[],S=Ci.empty();for(let F=f.length-1;F>=0;--F)if(!UN(b,f[F])){const U=f[F];let G=y[F];G=(0,Ht.m9)(G);const ne=c.nc(U);if(G instanceof j0)b.push(U);else{const we=Np(G,ne);null!=we&&(b.push(U),S.set(U,we))}}const M=new Sc(b);return new ON(S,M,c.fieldTransforms)}function FN(n,e,t,r=!1){return Np(t,n.uc(r?4:3,e))}function Np(n,e){if(VN(n=(0,Ht.m9)(n)))return rS("Unsupported field value:",e,n),LN(n,e);if(n instanceof Mp)return function(t,r){if(!PN(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let f=Np(c,r.sc(u));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Ht.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return uT(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Yn.fromDate(t);return{timestampValue:Xm(r.M,i)}}if(t instanceof Yn){const i=new Yn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Xm(r.M,i)}}if(t instanceof pD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pl)return{bytesValue:yT(r.M,t._byteString)};if(t instanceof Jn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ic(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ey(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${hD(t)}`)}(n,e)}function LN(n,e){const t={};return Fm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):iu(n,(r,i)=>{const u=Np(i,e.Za(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function VN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Yn||n instanceof pD||n instanceof pl||n instanceof Jn||n instanceof Mp)}function rS(n,e,t){if(!VN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=hD(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function iS(n,e,t){if((e=(0,Ht.m9)(e))instanceof Bc)return e._internalPath;if("string"==typeof e)return yD(n,e);throw _D("Field path arguments must be of type string or ",n,!1,void 0,t)}const Wk=new RegExp("[~\\*/\\[\\]]");function yD(n,e,t){if(e.search(Wk)>=0)throw _D(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bc(...e.split("."))._internalPath}catch(r){throw _D(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _D(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Ne(re.INVALID_ARGUMENT,f+n+y)}function UN(n,e){return n.some(t=>t.isEqual(e))}class $0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Kk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Kk extends $0{data(){return super.data()}}function vD(n,e){return"string"==typeof e?yD(n,e):e instanceof Bc?e._internalPath:e._delegate._internalPath}class Rp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jc extends $0{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new H0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class H0 extends jc{data(e={}){return super.data(e)}}class xh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Rp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new H0(this._firestore,this._userDataWriter,r.key,r,new Rp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new H0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Rp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new H0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Rp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:Zk(c.type),doc:f,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Zk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function BN(n,e){return n instanceof jc&&e instanceof jc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof xh&&e instanceof xh&&n._firestore===e._firestore&&MN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function jN(n){if(l0(n)&&0===n.explicitOrderBy.length)throw new Ne(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class G0{}function Nh(n,...e){for(const t of e)n=t._apply(n);return n}class Yk extends G0{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=xp(e.firestore),r=function(i,u,c,f,y,b,S){let M;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ne(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){WN(S,b);const U=[];for(const G of S)U.push(zN(f,i,G));M={arrayValue:{values:U}}}else M=zN(f,i,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||WN(S,b),M=FN(c,"where",S,"in"===b||"not-in"===b);const F=ii.create(y,b,M);return function(U,G){if(G.S()){const we=$m(U);if(null!==we&&!we.isEqual(G.field))throw new Ne(re.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${we.toString()}' and '${G.field.toString()}'`);const Ze=pp(U);null!==Ze&&KN(0,G.field,Ze)}const ne=function(we,Ze){for(const Le of we.filters)if(Ze.indexOf(Le.op)>=0)return Le.op;return null}(U,function(we){switch(we){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==ne)throw new Ne(re.INVALID_ARGUMENT,ne===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${ne.toString()}' filters.`)}(i,F),F}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new cs(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new Ca(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class Jk extends G0{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Ne(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new dp(i,u);return function(f,y){if(null===pp(f)){const b=$m(f);null!==b&&KN(0,b,y.field)}}(r,c),c}(e._query,this.hc,this.dc);return new cs(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Ca(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class $N extends G0{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new cs(e.firestore,e.converter,c0(e._query,this._c,this.wc))}}class HN extends G0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=qN(e,this.type,this.mc,this.gc);return new cs(e.firestore,e.converter,(i=t,new Ca((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class GN extends G0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=qN(e,this.type,this.mc,this.gc);return new cs(e.firestore,e.converter,(i=t,new Ca((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function qN(n,e,t,r){if(t[0]=(0,Ht.m9)(t[0]),t[0]instanceof $0)return function(i,u,c,f,y){if(!f)throw new Ne(re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const S of kc(i))if(S.field.isKeyField())b.push(Nc(u,f.key));else{const M=f.data.field(S.field);if(Lm(M))throw new Ne(re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=S.field.canonicalString();throw new Ne(re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(M)}return new Oc(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=xp(n.firestore);return function(u,c,f,y,b,S){const M=u.explicitOrderBy;if(b.length>M.length)throw new Ne(re.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let U=0;U<b.length;U++){const G=b[U];if(M[U].field.isKeyField()){if("string"!=typeof G)throw new Ne(re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof G}`);if(!Hm(u)&&-1!==G.indexOf("/"))throw new Ne(re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${G}' contains a slash.`);const ne=u.path.child(tn.fromString(G));if(!je.isDocumentKey(ne))throw new Ne(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ne}' is not because it contains an odd number of segments.`);const we=new je(ne);F.push(Nc(c,we))}else{const ne=FN(f,y,G);F.push(ne)}}return new Oc(F,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function zN(n,e,t){if("string"==typeof(t=(0,Ht.m9)(t))){if(""===t)throw new Ne(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hm(e)&&-1!==t.indexOf("/"))throw new Ne(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tn.fromString(t));if(!je.isDocumentKey(r))throw new Ne(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nc(n,new je(r))}if(t instanceof Jn)return Nc(n,t._key);throw new Ne(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hD(t)}.`)}function WN(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(re.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function KN(n,e,t){if(!t.isEqual(e))throw new Ne(re.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class sS{convertValue(e,t="none"){switch(xc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return iu(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new pD(Qn(e.latitude),Qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=n0(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(np(e));default:return null}}convertTimestamp(e){const t=su(e);return new Yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tn.fromString(e);Ct(Zb(r));const i=new ou(r.get(1),r.get(3)),u=new je(r.popFirst(5));return i.isEqual(t)||dr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function ED(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class o1 extends sS{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}class ZN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xp(e)}set(e,t,r){this._verifyNotCommitted();const i=Rh(e,this._firestore),u=ED(i.converter,t,r),c=mD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Dr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Rh(e,this._firestore);let c;return c="string"==typeof(t=(0,Ht.m9)(t))||t instanceof Bc?nS(this._dataReader,"WriteBatch.update",u._key,t,r,i):tS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rh(e,this._firestore);return this._mutations=this._mutations.concat(new wh(t._key,Dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rh(n,e){if((n=(0,Ht.m9)(n)).firestore!==e)throw new Ne(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Op extends sS{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}function YN(n,e,t){n=sn(n,Jn);const r=sn(n.firestore,ir),i=ED(n.converter,e,t);return _y(r,[mD(xp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Dr.none())])}function QN(n,e,t,...r){n=sn(n,Jn);const i=sn(n.firestore,ir),u=xp(i);let c;return c="string"==typeof(e=(0,Ht.m9)(e))||e instanceof Bc?nS(u,"updateDoc",n._key,e,t,r):tS(u,"updateDoc",n._key,e),_y(i,[c.toMutation(n._key,Dr.exists(!0))])}function JN(n,...e){var t,r,i;n=(0,Ht.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||XA(e[c])||(u=e[c],c++);const f={includeMetadataChanges:u.includeMetadataChanges};if(XA(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let y,b,S;if(n instanceof Jn)b=sn(n.firestore,ir),S=Pc(n._key.path),y={next:M=>{e[c]&&e[c](oS(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=sn(n,cs);b=sn(M.firestore,ir),S=M._query;const F=new Op(b);y={next:U=>{e[c]&&e[c](new xh(b,F,M,U))},error:e[c+1],complete:e[c+2]},jN(n._query)}return function(M,F,U,G){const ne=new cD(G),we=new yA(F,ne,U);return M.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return hA(yield yy(M),we)})),()=>{ne.pa(),M.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return pA(yield yy(M),we)}))}}(Kr(b),S,f,y)}function _y(n,e){return function(t,r){const i=new wr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function XP(n,e,t){return bA.apply(this,arguments)}(yield YA(t),r,i)})),i.promise}(Kr(n),e)}function oS(n,e,t){const r=t.docs.get(e._key),i=new Op(n);return new jc(n,i,e._key,r,new Rp(t.hasPendingWrites,t.fromCache),e.converter)}class m1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=xp(e)}get(e){const t=Rh(e,this._firestore),r=new o1(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return it();const u=i[0];if(u.isFoundDocument())return new $0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new $0(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const i=Rh(e,this._firestore),u=ED(i.converter,t,r),c=mD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Rh(e,this._firestore);let c;return c="string"==typeof(t=(0,Ht.m9)(t))||t instanceof Bc?nS(this._dataReader,"Transaction.update",u._key,t,r,i):tS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Rh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Rh(e,this._firestore),r=new Op(this._firestore);return super.get(e).then(i=>new jc(this._firestore,r,t._key,i._document,new Rp(!1,!1),t.converter))}}function aS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function eR(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function tR(){if(!function t0(){return"undefined"!=typeof atob}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ac=Gd.SDK_VERSION,(0,Gd._registerComponent)(new tm.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new ir(i,new zC(t.getProvider("auth-internal")),new WC(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Gd.registerVersion)(Yv,"3.4.7",n),(0,Gd.registerVersion)(Yv,"3.4.7","esm2017")}();class q0{constructor(e){this._delegate=e}static fromBase64String(e){return tR(),new q0(pl.fromBase64String(e))}static fromUint8Array(e){return eR(),new q0(pl.fromUint8Array(e))}toBase64(){return tR(),this._delegate.toBase64()}toUint8Array(){return eR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function uS(n){return function C1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class T1{enableIndexedDbPersistence(e,t){return function Ok(n,e){RN(n=sn(n,ir));const t=Kr(n),r=n._freezeSettings(),i=new HA;return NN(t,i,new fN(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Pk(n){RN(n=sn(n,ir));const e=Kr(n),t=n._freezeSettings(),r=new HA;return NN(e,r,new gk(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function kk(n){if(n._initialized&&!n._terminated)throw new Ne(re.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new wr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!xs.vt())return Promise.resolve();const i=r+"main";yield xs.delete(i)}),function(r){return t.apply(this,arguments)})(kT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class nR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ou||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ep("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Sk(n,e,t,r={}){var i;const u=(n=sn(n,B0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&ep("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=zr.MOCK_USER;else{c=(0,Ht.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Ne(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new zr(y)}n._authCredentials=new qC(new dh(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function Lk(n){return function Ek(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield yN(n),t=yield _N(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i.lu.delete(0),V0(i)}(t)}))}(Kr(n=sn(n,ir)))}(this._delegate)}disableNetwork(){return function Vk(n){return function wk(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield yN(n),t=yield _N(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const u=qe(i);u.lu.add(0),yield cy(u),u._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Kr(n=sn(n,ir)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,bN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Fk(n){return function(e){const t=new wr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function rk(n,e){return AA.apply(this,arguments)}(yield YA(e),t)})),t.promise}(Kr(n=sn(n,ir)))}(this._delegate)}onSnapshotsInSync(e){return function g1(n,e){return function Ik(n,e){const t=new cD(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield yy(n),i=t,qe(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield yy(n),i=t,void qe(r).Tu.delete(i);var r,i}))}}(Kr(n=sn(n,ir)),XA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vy(this,AN(this._delegate,e))}catch(t){throw Ns(t,"collection()","Firestore.collection()")}}doc(e){try{return new Sa(this,fD(this._delegate,e))}catch(t){throw Ns(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rs(this,function Mk(n,e){if(n=sn(n,B0),JA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(re.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new cs(n,null,(t=e,new Ca(tn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ns(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function y1(n,e){return function Ck(n,e){const t=new wr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const r=yield(i=n,dD(i).then(u=>u.datastore));var i;new _k(n.asyncQueue,r,e,t).run()})),t.promise}(Kr(n=sn(n,ir)),t=>e(new m1(n,t)))}(this._delegate,t=>e(new rR(this,t)))}batch(){return Kr(this._delegate),new iR(new ZN(this._delegate,e=>_y(this._delegate,e)))}loadBundle(e){return function Uk(n,e){const t=Kr(n=sn(n,ir)),r=new Nk;return function Tk(n,e,t,r){const i=function(u,c){let f;return f="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,b){if(y instanceof Uint8Array)return pN(y,b);if(y instanceof ArrayBuffer)return pN(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new mk(y,c);var y}(t,L0(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function pk(n,e,t){const r=qe(n);var i;(i=(0,ve.Z)(function*(u,c,f){try{const y=yield c.getMetadata();if(yield function(F,U){const G=qe(F),ne=oi(U.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",we=>G.ds.getBundleMetadata(we,U.id)).then(we=>!!we&&we.createTime.compareTo(ne)>=0)}(u.localStore,y))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(F=y).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);f._updateProgress(rN(y));const b=new WP(y,u.localStore,c.M);let S=yield c.fa();for(;S;){const F=yield b.Nu(S);F&&f._updateProgress(F),S=yield c.fa()}const M=yield b.complete();return yield Uc(u,M.Ou,void 0),yield function(F,U){const G=qe(F);return G.persistence.runTransaction("Save bundle","readwrite",ne=>G.ds.saveBundleMetadata(ne,U))}(u.localStore,y),f._completeWith(M.progress),Promise.resolve(M.Mu)}catch(y){return ep("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var F}),function(u,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield YA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Bk(n,e){return function Ak(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.ds.getNamedQuery(u,r))}(yield ZA(n),e)}))}(Kr(n=sn(n,ir)),e).then(t=>t?new cs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Rs(this,t):null)}}class wD extends sS{constructor(e){super(),this.firestore=e}convertBytes(e){return new q0(new pl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Sa.forKey(t,this.firestore,null)}}class rR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new wD(e)}get(e){const t=kp(e);return this._delegate.get(t).then(r=>new z0(this._firestore,new jc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=kp(e);return r?(aS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=kp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=kp(e);return this._delegate.delete(t),this}}class iR{constructor(e){this._delegate=e}set(e,t,r){const i=kp(e);return r?(aS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=kp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=kp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Pp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new H0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new W0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Pp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Pp(e,new wD(e),t),i.set(t,u)),u}}Pp.INSTANCES=new WeakMap;class Sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Sa(t,new Jn(t._delegate,r,new je(e)))}static forKey(e,t,r){return new Sa(t,new Jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vy(this.firestore,AN(this._delegate,e))}catch(t){throw Ns(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ht.m9)(e))instanceof Jn&&SN(this._delegate,e)}set(e,t){t=aS("DocumentReference.set",t);try{return t?YN(this._delegate,e,t):YN(this._delegate,e)}catch(r){throw Ns(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?QN(this._delegate,e):QN(this._delegate,e,t,...r)}catch(i){throw Ns(i,"updateDoc()","DocumentReference.update()")}}delete(){return function f1(n){return _y(sn(n.firestore,ir),[new wh(n._key,Dr.none())])}(this._delegate)}onSnapshot(...e){const t=sR(e),r=oR(e,i=>new z0(this.firestore,new jc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return JN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function u1(n){n=sn(n,Jn);const e=sn(n.firestore,ir),t=Kr(e),r=new Op(e);return function bk(n,e){const t=new wr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,u,c){try{const f=yield function(y,b){const S=qe(y);return S.persistence.runTransaction("read document","readonly",M=>S.ai.Bs(M,b))}(i,u);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Ne(re.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=fy(f,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield ZA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new jc(e,r,n._key,i,new Rp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function l1(n){n=sn(n,Jn);const e=sn(n.firestore,ir);return vN(Kr(e),n._key,{source:"server"}).then(t=>oS(e,n,t))}(this._delegate):function a1(n){n=sn(n,Jn);const e=sn(n.firestore,ir);return vN(Kr(e),n._key).then(t=>oS(e,n,t))}(this._delegate),t.then(r=>new z0(this.firestore,new jc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Sa(this.firestore,this._delegate.withConverter(e?Pp.getInstance(this.firestore,e):null))}}function Ns(n,e,t){return n.message=n.message.replace(e,t),n}function sR(n){for(const e of n)if("object"==typeof e&&!uS(e))return e;return{}}function oR(n,e){var t,r;let i;return i=uS(n[0])?n[0]:uS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class z0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return BN(this._delegate,e._delegate)}}class W0 extends z0{data(e){const t=this._delegate.data(e);return function HC(n,e){n||it()}(void 0!==t),t}}class Rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wD(e)}where(e,t,r){try{return new Rs(this.firestore,Nh(this._delegate,function Qk(n,e,t){const r=e,i=vD("where",n);return new Yk(i,r,t)}(e,t,r)))}catch(i){throw Ns(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Rs(this.firestore,Nh(this._delegate,function Xk(n,e="asc"){const t=e,r=vD("orderBy",n);return new Jk(r,t)}(e,t)))}catch(r){throw Ns(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rs(this.firestore,Nh(this._delegate,function e1(n){return CN("limit",n),new $N("limit",n,"F")}(e)))}catch(t){throw Ns(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Rs(this.firestore,Nh(this._delegate,function t1(n){return CN("limitToLast",n),new $N("limitToLast",n,"L")}(e)))}catch(t){throw Ns(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Rs(this.firestore,Nh(this._delegate,function n1(...n){return new HN("startAt",n,!0)}(...e)))}catch(t){throw Ns(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Rs(this.firestore,Nh(this._delegate,function r1(...n){return new HN("startAfter",n,!1)}(...e)))}catch(t){throw Ns(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Rs(this.firestore,Nh(this._delegate,function i1(...n){return new GN("endBefore",n,!1)}(...e)))}catch(t){throw Ns(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Rs(this.firestore,Nh(this._delegate,function s1(...n){return new GN("endAt",n,!0)}(...e)))}catch(t){throw Ns(t,"endAt()","Query.endAt()")}}isEqual(e){return MN(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function d1(n){n=sn(n,cs);const e=sn(n.firestore,ir),t=Kr(e),r=new Op(e);return function Dk(n,e){const t=new wr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,u,c){try{const f=yield iD(i,u,!0),y=new oN(u,f.hi),b=y.Gu(f.documents),S=y.applyChanges(b,!1);c.resolve(S.snapshot)}catch(f){const y=fy(f,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield ZA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new xh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function h1(n){n=sn(n,cs);const e=sn(n.firestore,ir),t=Kr(e),r=new Op(e);return EN(t,n._query,{source:"server"}).then(i=>new xh(e,r,n,i))}(this._delegate):function c1(n){n=sn(n,cs);const e=sn(n.firestore,ir),t=Kr(e),r=new Op(e);return jN(n._query),EN(t,n._query).then(i=>new xh(e,r,n,i))}(this._delegate),t.then(r=>new lS(this.firestore,new xh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=sR(e),r=oR(e,i=>new lS(this.firestore,new xh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return JN(this._delegate,t,r)}withConverter(e){return new Rs(this.firestore,this._delegate.withConverter(e?Pp.getInstance(this.firestore,e):null))}}class S1{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new W0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new W0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new S1(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new W0(this._firestore,r))})}isEqual(e){return BN(this._delegate,e._delegate)}}class vy extends Rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Sa(this.firestore,e):null}doc(e){try{return new Sa(this.firestore,void 0===e?fD(this._delegate):fD(this._delegate,e))}catch(t){throw Ns(t,"doc()","CollectionReference.doc()")}}add(e){return function p1(n,e){const t=sn(n.firestore,ir),r=fD(n),i=ED(n.converter,e);return _y(t,[mD(xp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Dr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Sa(this.firestore,t))}isEqual(e){return SN(this._delegate,e._delegate)}withConverter(e){return new vy(this.firestore,this._delegate.withConverter(e?Pp.getInstance(this.firestore,e):null))}}function kp(n){return sn(n,Jn)}class cS{constructor(...e){this._delegate=new Bc(...e)}static documentId(){return new cS(Wr.keyField().canonicalString())}isEqual(e){return(e=(0,Ht.m9)(e))instanceof Bc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Fp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function v1(){return new eS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Fp(e)}static delete(){const e=function _1(){return new j0("deleteField")}();return e._methodName="FieldValue.delete",new Fp(e)}static arrayUnion(...e){const t=function E1(...n){return new Gk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Fp(t)}static arrayRemove(...e){const t=function w1(...n){return new qk("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Fp(t)}static increment(e){const t=function b1(n){return new zk("increment",n)}(e);return t._methodName="FieldValue.increment",new Fp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const M1={Firestore:nR,GeoPoint:pD,Timestamp:Yn,Blob:q0,Transaction:rR,WriteBatch:iR,DocumentReference:Sa,DocumentSnapshot:z0,Query:Rs,QueryDocumentSnapshot:W0,QuerySnapshot:lS,CollectionReference:vy,FieldPath:cS,FieldValue:Fp,setLogLevel:function A1(n){!function $C(n){ru.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function N1(n){(function x1(n,e){n.INTERNAL.registerComponent(new tm.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},M1)))})(n,(e,t)=>new nR(e,t,new T1)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(Tw.Z);var bD=P(5363),R1=P(6063);class O1 extends lr.x{constructor(e=1/0,t=1/0,r=R1.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let f=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)f=y;f&&r.splice(0,f+1)}}}var P1=P(3099);function aR(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,P1.B)({connector:()=>new O1(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function uR(n,e){return(0,mi.m)(e)?$n(()=>n,e):$n(()=>n)}var dS=P(9468);P(5867);const cR=new Map,U1={activated:!1,tokenObservers:[]},B1={initialized:!1,enabled:!1};function Si(n){return cR.get(n)||U1}function du(n,e){cR.set(n,e)}function ID(){return B1}class q1{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new Ht.BH,yield function z1(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ht.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Os=new Ht.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function hR(n){if(!Si(n).activated)throw Os.create("use-before-activation",{appName:n.name})}function gS(n,e){return mS.apply(this,arguments)}function mS(){return mS=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,u)}catch(M){throw Os.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==c.status)throw Os.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(M){throw Os.create("fetch-parse-error",{originalErrorMessage:M.message})}const y=f.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Os.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const b=1e3*Number(y[1]),S=Date.now();return{token:f.attestationToken,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),mS.apply(this,arguments)}function Q1(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const K0="firebase-app-check-store";let AD=null;function pR(){return AD||(AD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Os.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(K0,{keyPath:"compositeKey"})}}catch(t){e(Os.create("storage-open",{originalErrorMessage:t.message}))}}),AD)}function yS(){return yS=(0,ve.Z)(function*(n,e){const r=(yield pR()).transaction(K0,"readwrite"),u=r.objectStore(K0).put({compositeKey:n,value:e});return new Promise((c,f)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var b;f(Os.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})}),yS.apply(this,arguments)}const Z0=new Ju.Yd("@firebase/app-check");function _R(n,e){return(0,Ht.hl)()?function tF(n,e){return function gR(n,e){return yS.apply(this,arguments)}(function yR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Z0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function vR(){return ID().enabled}function ER(){return wS.apply(this,arguments)}function wS(){return wS=(0,ve.Z)(function*(){const n=ID();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),wS.apply(this,arguments)}const aF={error:"UNKNOWN_ERROR"};function uF(n){return Ht.US.encodeString(JSON.stringify(n),!1)}function SD(n){return bS.apply(this,arguments)}function bS(){return bS=(0,ve.Z)(function*(n,e=!1){const t=n.app;hR(t);const r=Si(t);let u,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&MD(y)&&(i=y)}if(!e&&i&&MD(i))return{token:i.token};let f,c=!1;if(vR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gS(Q1(t,yield ER()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const y=yield r.exchangeTokenPromise;return yield _R(t,y),du(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?Z0.warn(y.message):Z0.error(y),u=y}return i?(f={token:i.token},du(t,Object.assign(Object.assign({},r),{token:i})),yield _R(t,i)):f=cF(u),c&&bR(t,f),f}),bS.apply(this,arguments)}function IS(n,e){const t=Si(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),du(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function wR(n){const{app:e}=n,t=Si(e);let r=t.tokenRefresher;r||(r=function lF(n){const{app:e}=n;return new q1((0,ve.Z)(function*(){let r;if(r=Si(e).token?yield SD(n,!0):yield SD(n),r.error)throw r.error}),()=>!0,()=>{const t=Si(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),du(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function bR(n,e){const t=Si(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function MD(n){return n.expireTimeMillis-Date.now()>0}function cF(n){return{token:uF(aF),error:n}}class dF{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Si(this.app);for(const t of e)IS(this.app,t.next);return Promise.resolve()}}const xR="app-check-internal";!function CF(){(0,Gd._registerComponent)(new tm.wA("app-check",n=>function hF(n,e){return new dF(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(xR).initialize()})),(0,Gd._registerComponent)(new tm.wA(xR,n=>function fF(n){return{getToken:e=>SD(n,e),addTokenListener:e=>function DS(n,e,t,r){const{app:i}=n,u=Si(i),c={next:t,error:r,type:e};if(du(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&MD(u.token)){const f=u.token;Promise.resolve().then(()=>{t({token:f.token}),wR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>wR(n))}(n,"INTERNAL",e),removeTokenListener:e=>IS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Gd.registerVersion)("@firebase/app-check","0.5.5")}();class SS{constructor(){return(0,Gr.vb)("app-check")}}"undefined"!=typeof window&&window;var xF=P(127);const RR=new p.OlP("angularfire2.auth.use-emulator"),OR=new p.OlP("angularfire2.auth.settings"),PR=new p.OlP("angularfire2.auth.tenant-id"),kR=new p.OlP("angularfire2.auth.langugage-code"),FR=new p.OlP("angularfire2.auth.use-device-language"),LR=new p.OlP("angularfire.auth.persistence"),VR=(n,e,t,r,i,u,c,f)=>(0,fo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[b,S]of Object.entries(c))y.settings[b]=S;return f&&y.setPersistence(f),y},[t,r,i,u,c,f]);let UR=(()=>{class n{constructor(t,r,i,u,c,f,y,b,S,M,F,U){const G=new lr.x,ne=mt(void 0).pipe((0,bD.Q)(c.outsideAngular),$n(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,4087)))),(0,Ft.U)(()=>(0,fo.on)(t,u,r)),(0,Ft.U)(we=>VR(we,u,f,b,S,M,y,F)),aR({bufferSize:1,refCount:!1}));if(vr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{ne.pipe(ro()).subscribe();const Ze=ne.pipe($n(ze=>ze.getRedirectResult().then(_t=>_t,()=>null)),Gr.iC,aR({bufferSize:1,refCount:!1})),Le=ne.pipe($n(ze=>new Ur.y(_t=>({unsubscribe:u.runOutsideAngular(()=>ze.onAuthStateChanged(ct=>_t.next(ct),ct=>_t.error(ct),()=>_t.complete()))})))),Ke=ne.pipe($n(ze=>new Ur.y(_t=>({unsubscribe:u.runOutsideAngular(()=>ze.onIdTokenChanged(ct=>_t.next(ct),ct=>_t.error(ct),()=>_t.complete()))}))));this.authState=Ze.pipe(uR(Le),(0,dS.R)(c.outsideAngular),(0,bD.Q)(c.insideAngular)),this.user=Ze.pipe(uR(Ke),(0,dS.R)(c.outsideAngular),(0,bD.Q)(c.insideAngular)),this.idToken=this.user.pipe($n(ze=>ze?(0,Bn.D)(ze.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe($n(ze=>ze?(0,Bn.D)(ze.getIdTokenResult()):mt(null))),this.credential=(0,Dg.T)(Ze,G,this.authState.pipe(Xi(ze=>!ze))).pipe((0,Ft.U)(ze=>(null==ze?void 0:ze.user)?ze:null),(0,dS.R)(c.outsideAngular),(0,bD.Q)(c.insideAngular))}return(0,fo.pX)(this,ne,u,{spy:{apply:(we,Ze,Le)=>{(we.startsWith("signIn")||we.startsWith("createUser"))&&Le.then(Ke=>G.next(Ke))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fo.Dh),p.LFG(fo.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Gr.HU),p.LFG(RR,8),p.LFG(OR,8),p.LFG(PR,8),p.LFG(kR,8),p.LFG(FR,8),p.LFG(LR,8),p.LFG(SS,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function BR(n,e){return function RF(n,e=lv.z){return new Ur.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function xS(n,e){return BR(n,e).pipe((0,Ft.U)(t=>({payload:t,type:"query"})))}function ND(n,e){return xS(n,e).pipe(Vi(void 0),em(),(0,Ft.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const y=i.find(S=>S.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),u}))}function jR(n,e,t){return ND(n,t).pipe(Nr((r,i)=>function PF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function kF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return NS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return NS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return NS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function Iw(n,e=pi.y){return n=null!=n?n:Cw,(0,Br.e)((t,r)=>{let i,u=!0;t.subscribe((0,Wn.x)(r,c=>{const f=e(c);(u||!n(i,f))&&(u=!1,i=f,r.next(c))}))})}(),(0,Ft.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function NS(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function $R(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class HR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ND(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ft.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Vi(void 0),em(),Xi(([r,i])=>i.length>0||!r),(0,Ft.U)(([r,i])=>i),Gr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Nr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$R(e);return jR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gr.iC)}valueChanges(e={}){return xS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ft.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Gr.iC)}get(e){return(0,Bn.D)(this.query.get(e)).pipe(Gr.iC)}add(e){return this.ref.add(e)}doc(e){return new GR(this.ref.doc(e),this.afs)}}class GR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=WR(r,t);return new HR(i,u,this.afs)}snapshotChanges(){return function OF(n,e){return BR(n,e).pipe(Vi(void 0),em(),(0,Ft.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Gr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ft.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Bn.D)(this.ref.get(e)).pipe(Gr.iC)}}class FF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ND(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ft.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Xi(t=>t.length>0),Gr.iC):ND(this.query,this.afs.schedulers.outsideAngular).pipe(Gr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Nr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$R(e);return jR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gr.iC)}valueChanges(e={}){return xS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ft.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Gr.iC)}get(e){return(0,Bn.D)(this.query.get(e)).pipe(Gr.iC)}}const qR=new p.OlP("angularfire2.enableFirestorePersistence"),zR=new p.OlP("angularfire2.firestore.persistenceSettings"),LF=new p.OlP("angularfire2.firestore.settings"),VF=new p.OlP("angularfire2.firestore.use-emulator");function WR(n,e=(t=>t)){return{query:e(n),ref:n}}let RS=(()=>{class n{constructor(t,r,i,u,c,f,y,b,S,M,F,U,G,ne,we,Ze,Le){this.schedulers=y;const Ke=(0,fo.on)(t,f,r),ze=S;M&&VR(Ke,f,F,G,ne,we,U,Ze),[this.firestore,this.persistenceEnabled$]=(0,fo.cc)(`${Ke.name}.firestore`,"AngularFirestore",Ke.name,()=>{const _t=f.runOutsideAngular(()=>Ke.firestore());if(u&&_t.settings(u),ze&&_t.useEmulator(...ze),i&&!vr(c)){const ct=()=>{try{return(0,Bn.D)(_t.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Jt){return"undefined"!=typeof console&&console.warn(Jt),mt(!1)}};return[_t,f.runOutsideAngular(ct)]}return[_t,mt(!1)]},[u,ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=WR(i,r),f=this.schedulers.ngZone.run(()=>u);return new HR(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new FF(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new GR(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fo.Dh),p.LFG(fo.xv,8),p.LFG(qR,8),p.LFG(LF,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Gr.HU),p.LFG(zR,8),p.LFG(VF,8),p.LFG(UR,8),p.LFG(RR,8),p.LFG(OR,8),p.LFG(PR,8),p.LFG(kR,8),p.LFG(FR,8),p.LFG(LR,8),p.LFG(SS,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),KR=(()=>{class n{constructor(){xF.Z.registerVersion("angularfire",Gr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:qR,useValue:!0},{provide:zR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[RS]}),n})();const ZR=(n,e)=>{if(void 0===e)return n;const t=Object.keys(e);return n.filter(i=>((i,u,c)=>void 0===i.find(f=>u[f]!==c[f]))(t,i,e))};let OS=(()=>{class n{constructor(t){this._client=t}add(t){this._client.collection("tasks").add(t)}getAll(t){return this._client.collection("tasks").valueChanges({idField:"id"}).pipe((0,Ft.U)(r=>ZR(r,t)))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(RS))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const YR=new p.OlP("ADDS_TASK_DTO");let PS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[OS,{provide:YR,useExisting:OS},{provide:fE,useExisting:OS}],imports:[[KR]]}),n})(),QR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[],imports:[[Ar,TI.forRoot()]]}),n})(),UF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[],imports:[[Ar,ma.forChild([{path:"",component:Og}]),Pd,PS,QR,kd]]}),n})();const JR=new p.OlP("GETS_ALL_IMAGE_DTO");function BF(n,e){if(1&n&&(p.TgZ(0,"div",2),p._UZ(1,"img",3),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.Q6J("src",t.imageUrl,p.LSH)("alt",t.alt)}}let XR=(()=>{class n{constructor(t){this._getsAllImageDto=t,this.images$=this._getsAllImageDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(JR))},n.\u0275cmp=p.Xpm({type:n,selectors:[["lib-photos-list"]],decls:3,vars:3,consts:[[1,"d-flex","justify-content-between","align-items-center","pt-4"],["style","width: 24rem;",4,"ngFor","ngForOf"],[2,"width","24rem"],[1,"card-img-top",3,"src","alt"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.YNc(1,BF,2,2,"div",1),p.ALo(2,"async"),p.qZA()),2&t&&(p.xp6(1),p.Q6J("ngForOf",p.lcZ(2,1,r.images$)))},directives:[ur],pipes:[ka],encapsulation:2,changeDetection:0}),n})(),jF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-home-page"]],decls:9,vars:0,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","h-50"],[1,"text-center"],["routerLink","/first-task","role","button",1,"btn","bg-special","text-white"]],template:function(t,r){1&t&&(p._UZ(0,"lib-date"),p.TgZ(1,"div",0)(2,"h1",1),p._uU(3,"Get a clear view of the day ahead"),p.qZA(),p.TgZ(4,"p",1),p._uU(5,"All your tasks that are due today will show up here"),p.qZA(),p.TgZ(6,"a",2),p._uU(7,"Add task"),p.qZA()(),p._UZ(8,"lib-photos-list"))},directives:[Ef,ac,XR],encapsulation:2,changeDetection:0}),n})(),kS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[],imports:[[Ar]]}),n})(),eO=(()=>{class n{constructor(t){this._client=t}getAll(t){return this._client.collection("images").valueChanges({idField:"id"}).pipe((0,Ft.U)(r=>ZR(r,t)))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(RS))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),FS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[eO,{provide:JR,useExisting:eO}],imports:[[KR]]}),n})(),$F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[],imports:[[Ar,ma.forChild([{path:"",component:jF}]),Pd,kS,FS,kd]]}),n})(),tO=(()=>{class n{constructor(t,r){this._addsTaskDto=t,this.router=r,this.createTask=new xf({task:new Wg("",[NI.required])})}onCreateTaskSubmited(t){var r;t.invalid||(this._addsTaskDto.add({task:null===(r=null==t?void 0:t.get("task"))||void 0===r?void 0:r.value}),this.router.navigate(["/my-list"]))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(YR),p.Y36(wi))},n.\u0275cmp=p.Xpm({type:n,selectors:[["lib-add-task"]],decls:8,vars:2,consts:[[1,"pt-5"],[1,"form-floating",3,"formGroup","ngSubmit"],["type","text","formControlName","task","placeholder","Write your task here","id","floatingTextarea2",1,"form-control",2,"height","100px","width","350px"],["for","floatingTextarea2"],["type","submit","value","Add task",1,"btn","bg-special","text-white","mt-4","me-4",3,"disabled"],["routerLink","/my-list","role","button",1,"btn","text-dark","bg-white","border-dark","mt-4"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"form",1),p.NdJ("ngSubmit",function(){return r.onCreateTaskSubmited(r.createTask)}),p._UZ(2,"input",2),p.TgZ(3,"label",3),p._uU(4,"Write your task here"),p.qZA(),p._UZ(5,"input",4),p.TgZ(6,"a",5),p._uU(7,"Cancel"),p.qZA()()()),2&t&&(p.xp6(1),p.Q6J("formGroup",r.createTask),p.xp6(4),p.Q6J("disabled",r.createTask.invalid))},directives:[tw,GE,Zg,Cf,HE,X_,ac],encapsulation:2,changeDetection:0}),n})(),HF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-add-task-page"]],decls:3,vars:0,template:function(t,r){1&t&&p._UZ(0,"lib-date")(1,"lib-tasks-list-view")(2,"lib-add-task")},directives:[Ef,OE,tO],encapsulation:2,changeDetection:0}),n})(),GF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[],imports:[[Ar,ma.forChild([{path:"",component:HF}]),Pd,kS,QR,PS,uv,FS,kd]]}),n})(),qF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-first-task-page"]],decls:4,vars:0,consts:[[1,"h-50"]],template:function(t,r){1&t&&(p._UZ(0,"lib-date"),p.TgZ(1,"div",0),p._UZ(2,"lib-add-task"),p.qZA(),p._UZ(3,"lib-photos-list"))},directives:[Ef,tO,XR],encapsulation:2,changeDetection:0}),n})(),zF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[],imports:[[Ar,ma.forChild([{path:"",component:qF}]),Pd,kd,uv,PS,kS,FS]]}),n})();const WF=[{path:"my-list",loadChildren:()=>UF},{path:"",loadChildren:()=>$F},{path:"add-task",loadChildren:()=>GF},{path:"first-task",loadChildren:()=>zF}];let KF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[ma.forRoot(WF)],ma]}),n})(),ZF=(()=>{class n{constructor(){this.title="ToDoApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:0,consts:[[1,"d-flex","py-3","fs-5","justify-content-center","bg-special"],[1,"w-75"],["routerLink","/",1,"text-decoration-none","text-white"],[1,"d-flex","justify-content-center","vh-100"]],template:function(t,r){1&t&&(p.TgZ(0,"header",0)(1,"div",1)(2,"a",2),p._uU(3,"RAMOTKA's TO-DO APP"),p.qZA()()(),p.TgZ(4,"div",3)(5,"div",1),p._UZ(6,"router-outlet"),p.qZA()())},directives:[ac,ec],styles:[""]}),n})();const nn=!1;function nO(n){return new p.vHH(3e3,nn)}function ML(){return"undefined"!=typeof window&&void 0!==window.document}function LS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Oh(n){switch(n.length){case 0:return new xd;case 1:return n[0];default:return new d_(n)}}function rO(n,e,t,r,i={},u={}){const c=[],f=[];let y=-1,b=null;if(r.forEach(S=>{const M=S.offset,F=M==y,U=F&&b||{};Object.keys(S).forEach(G=>{let ne=G,we=S[G];if("offset"!==G)switch(ne=e.normalizePropertyName(ne,c),we){case"!":we=i[G];break;case zu:we=u[G];break;default:we=e.normalizeStyleValue(G,ne,we,c)}U[ne]=we}),F||f.push(U),b=U,y=M}),c.length)throw function _L(n){return new p.vHH(3502,nn)}();return f}function VS(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&US(t,"start",n)));break;case"done":n.onDone(()=>r(t&&US(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&US(t,"destroy",n)))}}function US(n,e,t){const r=t.totalTime,u=BS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function BS(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function qo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function iO(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let jS=(n,e)=>!1,sO=(n,e,t)=>[],oO=null;function $S(n){const e=n.parentNode||n.host;return e===oO?null:e}(LS()||"undefined"!=typeof Element)&&(ML()?(oO=(()=>document.documentElement)(),jS=(n,e)=>{for(;e;){if(e===n)return!0;e=$S(e)}return!1}):jS=(n,e)=>n.contains(e),sO=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Lp=null,aO=!1;function uO(n){Lp||(Lp=function NL(){return"undefined"!=typeof document?document.body:null}()||{},aO=!!Lp.style&&"WebkitAppearance"in Lp.style);let e=!0;return Lp.style&&!function xL(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Lp.style,!e&&aO&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Lp.style)),e}const lO=jS,cO=sO;let dO=(()=>{class n{validateStyleProperty(t){return uO(t)}matchesElement(t,r){return!1}containsElement(t,r){return lO(t,r)}getParentElement(t){return $S(t)}query(t,r,i){return cO(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,f=[],y){return new xd(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),HS=(()=>{class n{}return n.NOOP=new dO,n})();const GS="ng-enter",OD="ng-leave",PD="ng-trigger",kD=".ng-trigger",fO="ng-animating",qS=".ng-animating";function Vp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:zS(parseFloat(e[1]),e[2])}function zS(n,e){return"s"===e?1e3*n:n}function FD(n,e,t){return n.hasOwnProperty("duration")?n:function PL(n,e,t){let i,u=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(nO()),{duration:0,delay:0,easing:""};i=zS(parseFloat(f[1]),f[2]);const y=f[3];null!=y&&(u=zS(parseFloat(y),f[4]));const b=f[5];b&&(c=b)}else i=n;if(!t){let f=!1,y=e.length;i<0&&(e.push(function YF(){return new p.vHH(3100,nn)}()),f=!0),u<0&&(e.push(function QF(){return new p.vHH(3101,nn)}()),f=!0),f&&e.splice(y,0,nO())}return{duration:i,delay:u,easing:c}}(n,e,t)}function Ey(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Ph(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Ey(n,t);return t}function gO(n,e,t){return t?e+":"+t+";":""}function mO(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=gO(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=gO(0,LL(t),n.style[t]));n.setAttribute("style",e)}function gl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=KS(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),LS()&&mO(n))}function Up(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=KS(t);n.style[r]=""}),LS()&&mO(n))}function Y0(n){return Array.isArray(n)?1==n.length?n[0]:bg(n):n}const WS=new RegExp("{{\\s*(.+?)\\s*}}","g");function yO(n){let e=[];if("string"==typeof n){let t;for(;t=WS.exec(n);)e.push(t[1]);WS.lastIndex=0}return e}function LD(n,e,t){const r=n.toString(),i=r.replace(WS,(u,c)=>{let f=e[c];return e.hasOwnProperty(c)||(t.push(function XF(n){return new p.vHH(3003,nn)}()),f=""),f.toString()});return i==r?n:i}function VD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const FL=/-+([a-z0-9])/g;function KS(n){return n.replace(FL,(...e)=>e[1].toUpperCase())}function LL(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function zo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function eL(n){return new p.vHH(3004,nn)}()}}function _O(n,e){return window.getComputedStyle(n)[e]}function HL(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function GL(n,e,t){if(":"==n[0]){const y=function qL(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function pL(n){return new p.vHH(3016,nn)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function fL(n){return new p.vHH(3015,nn)}()),e;const i=r[1],u=r[2],c=r[3];e.push(vO(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(vO(c,i))}(r,t,e)):t.push(n),t}const $D=new Set(["true","1"]),HD=new Set(["false","0"]);function vO(n,e){const t=$D.has(n)||HD.has(n),r=$D.has(e)||HD.has(e);return(i,u)=>{let c="*"==n||n==i,f="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?$D.has(n):HD.has(n)),!f&&r&&"boolean"==typeof u&&(f=u?$D.has(e):HD.has(e)),c&&f}}const zL=new RegExp("s*:selfs*,?","g");function ZS(n,e,t,r){return new WL(n).build(e,t,r)}class WL{constructor(e){this._driver=e}build(e,t,r){const i=new YL(t);this._resetContextStyleTimingState(i);const u=zo(this,Y0(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function nL(){return new p.vHH(3006,nn)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const y=f,b=y.name;b.toString().split(/\s*,\s*/).forEach(S=>{y.name=S,u.push(this.visitState(y,t))}),y.name=b}else if(1==f.type){const y=this.visitTransition(f,t);r+=y.queryCount,i+=y.depCount,c.push(y)}else t.errors.push(function rL(){return new p.vHH(3007,nn)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(f=>{if(GD(f)){const y=f;Object.keys(y).forEach(b=>{yO(y[b]).forEach(S=>{c.hasOwnProperty(S)||u.add(S)})})}}),u.size&&(VD(u.values()),t.errors.push(function iL(n,e){return new p.vHH(3008,nn)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=zo(this,Y0(e.animation),t);return{type:1,matchers:HL(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Bp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>zo(this,r,t)),options:Bp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const f=zo(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:u,options:Bp(e.options)}}visitAnimate(e,t){const r=function JL(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return YS(FD(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=YS(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||FD(r,e),YS(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:Md({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,f=!1;if(!c){f=!0;const b={};r.easing&&(b.easing=r.easing),c=Md(b)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(c,t);y.isEmptyStep=f,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==zu?r.push(c):t.errors.push(function sL(n){return new p.vHH(3002,nn)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(GD(c)){const f=c,y=f.easing;if(y&&(u=y,delete f.easing),!i)for(let b in f)if(f[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(f=>{if(!this._driver.validateStyleProperty(f))return delete c[f],void t.unsupportedCSSPropertiesFound.add(f);const y=t.collectedStyles[t.currentQuerySelector],b=y[f];let S=!0;b&&(u!=i&&u>=b.startTime&&i<=b.endTime&&(t.errors.push(function oL(n,e,t,r,i){return new p.vHH(3010,nn)}()),S=!1),u=b.startTime),S&&(y[f]={startTime:u,endTime:i}),t.options&&function kL(n,e,t){const r=e.params||{},i=yO(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function JF(n){return new p.vHH(3001,nn)}())})}(c[f],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function aL(){return new p.vHH(3011,nn)}()),r;let u=0;const c=[];let f=!1,y=!1,b=0;const S=e.steps.map(Ze=>{const Le=this._makeStyleAst(Ze,t);let Ke=null!=Le.offset?Le.offset:function QL(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(GD(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(GD(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Le.styles),ze=0;return null!=Ke&&(u++,ze=Le.offset=Ke),y=y||ze<0||ze>1,f=f||ze<b,b=ze,c.push(ze),Le});y&&t.errors.push(function uL(){return new p.vHH(3012,nn)}()),f&&t.errors.push(function lL(){return new p.vHH(3200,nn)}());const M=e.steps.length;let F=0;u>0&&u<M?t.errors.push(function cL(){return new p.vHH(3202,nn)}()):0==u&&(F=1/(M-1));const U=M-1,G=t.currentTime,ne=t.currentAnimateTimings,we=ne.duration;return S.forEach((Ze,Le)=>{const Ke=F>0?Le==U?1:F*Le:c[Le],ze=Ke*we;t.currentTime=G+ne.delay+ze,ne.duration=ze,this._validateStyleAst(Ze,t),Ze.offset=Ke,r.styles.push(Ze)}),r}visitReference(e,t){return{type:8,animation:zo(this,Y0(e.animation),t),options:Bp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Bp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Bp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function KL(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(zL,"")),n=n.replace(/@\*/g,kD).replace(/@\w+/g,t=>kD+"-"+t.substr(1)).replace(/:animating/g,qS),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,qo(t.collectedStyles,t.currentQuerySelector,{});const f=zo(this,Y0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:Bp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function dL(){return new p.vHH(3013,nn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:FD(e.timings,t.errors,!0);return{type:12,animation:zo(this,Y0(e.animation),t),timings:r,options:null}}}class YL{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function GD(n){return!Array.isArray(n)&&"object"==typeof n}function Bp(n){return n?(n=Ey(n)).params&&(n.params=function ZL(n){return n?Ey(n):null}(n.params)):n={},n}function YS(n,e,t){return{duration:n,delay:e,easing:t}}function QS(n,e,t,r,i,u,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:f}}class qD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const tV=new RegExp(":enter","g"),rV=new RegExp(":leave","g");function JS(n,e,t,r,i,u={},c={},f,y,b=[]){return(new iV).buildKeyframes(n,e,t,r,i,u,c,f,y,b)}class iV{buildKeyframes(e,t,r,i,u,c,f,y,b,S=[]){b=b||new qD;const M=new XS(e,t,b,i,u,S,[]);M.options=y,M.currentTimeline.setStyles([c],null,M.errors,y),zo(this,r,M);const F=M.timelines.filter(U=>U.containsAnimation());if(Object.keys(f).length){let U;for(let G=F.length-1;G>=0;G--){const ne=F[G];if(ne.element===t){U=ne;break}}U&&!U.allowOnlyTimelineStyles()&&U.setStyles([f],null,M.errors,y)}return F.length?F.map(U=>U.buildKeyframes()):[QS(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?Vp(r.duration):null,f=null!=r.delay?Vp(r.delay):null;return 0!==c&&e.forEach(y=>{const b=t.appendInstructionToTimeline(y,c,f);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),zo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=zD);const c=Vp(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>zo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?Vp(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);u&&f.delayNextStep(u),zo(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return FD(t.params?LD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(y=>{f.forwardTime((y.offset||0)*u),f.setStyles(y.styles,y.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?Vp(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=zD);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let y=null;f.forEach((b,S)=>{t.currentQueryIndex=S;const M=t.createSubContext(e.options,b);u&&M.delayNextStep(u),b===t.element&&(y=M.currentTimeline),zo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),f=c*(t.currentQueryTotal-1);let y=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":y=f-y;break;case"full":y=r.currentStaggerTime}const S=t.currentTimeline;y&&S.delayNextStep(y);const M=S.currentTime;zo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const zD={};class XS{constructor(e,t,r,i,u,c,f,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=zD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new WD(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Vp(r.duration)),null!=r.delay&&(i.delay=Vp(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=LD(u[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new XS(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=zD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new sV(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(tV,"."+this._enterClassName)).replace(rV,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),f.push(...b)}return!u&&0==f.length&&c.push(function hL(n){return new p.vHH(3014,nn)}()),f}}class WD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new WD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||zu,this._currentKeyframe[t]=zu}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function oV(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=zu})):Ph(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(f=>{const y=LD(c[f],u,r);this._pendingStyles[f]=y,this._localTimelineStyles.hasOwnProperty(f)||(this._backFill[f]=this._globalTimelineStyles.hasOwnProperty(f)?this._globalTimelineStyles[f]:zu),this._updateStyle(f,y)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,y)=>{const b=Ph(f,!0);Object.keys(b).forEach(S=>{const M=b[S];"!"==M?e.add(S):M==zu&&t.add(S)}),r||(b.offset=y/this.duration),i.push(b)});const u=e.size?VD(e.values()):[],c=t.size?VD(t.values()):[];if(r){const f=i[0],y=Ey(f);f.offset=0,y.offset=1,i=[f,y]}return QS(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class sV extends WD{constructor(e,t,r,i,u,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,f=t/c,y=Ph(e[0],!1);y.offset=0,u.push(y);const b=Ph(e[0],!1);b.offset=bO(f),u.push(b);const S=e.length-1;for(let M=1;M<=S;M++){let F=Ph(e[M],!1);F.offset=bO((t+F.offset*r)/c),u.push(F)}r=c,t=0,i="",e=u}return QS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function bO(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class eM{}class aV extends eM{normalizePropertyName(e,t){return KS(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(uV[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function tL(n,e){return new p.vHH(3005,nn)}())}return c+u}}const uV=(()=>function lV(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function DO(n,e,t,r,i,u,c,f,y,b,S,M,F){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:f,queriedElements:y,preStyleProps:b,postStyleProps:S,totalTime:M,errors:F}}const tM={};class IO{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function cV(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,f,y,b,S){const M=[],F=this.ast.options&&this.ast.options.params||tM,G=this.buildStyles(r,f&&f.params||tM,M),ne=y&&y.params||tM,we=this.buildStyles(i,ne,M),Ze=new Set,Le=new Map,Ke=new Map,ze="void"===i,_t={params:Object.assign(Object.assign({},F),ne)},ct=S?[]:JS(e,t,this.ast.animation,u,c,G,we,_t,b,M);let Jt=0;if(ct.forEach(En=>{Jt=Math.max(En.duration+En.delay,Jt)}),M.length)return DO(t,this._triggerName,r,i,ze,G,we,[],[],Le,Ke,Jt,M);ct.forEach(En=>{const Zt=En.element,Tn=qo(Le,Zt,{});En.preStyleProps.forEach(ml=>Tn[ml]=!0);const Ps=qo(Ke,Zt,{});En.postStyleProps.forEach(ml=>Ps[ml]=!0),Zt!==t&&Ze.add(Zt)});const Dn=VD(Ze.values());return DO(t,this._triggerName,r,i,ze,G,we,ct,Dn,Le,Ke,Jt)}}class dV{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Ey(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(f=>{let y=c[f];y.length>1&&(y=LD(y,i,t));const b=this.normalizer.normalizePropertyName(f,t);y=this.normalizer.normalizeStyleValue(f,b,y,t),r[b]=y})}}),r}}class fV{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new dV(i.style,i.options&&i.options.params||{},r)}),CO(this.states,"true","1"),CO(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new IO(e,i,this.states))}),this.fallbackTransition=function pV(n,e,t){return new IO(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function CO(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const gV=new qD;class mV{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=ZS(this._driver,t,r,[]);if(r.length)throw function vL(n){return new p.vHH(3503,nn)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=rO(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const f=new Map;if(u?(c=JS(this._driver,t,u,GS,OD,{},{},r,gV,i),c.forEach(S=>{const M=qo(f,S.element,{});S.postStyleProps.forEach(F=>M[F]=null)})):(i.push(function EL(){return new p.vHH(3300,nn)}()),c=[]),i.length)throw function wL(n){return new p.vHH(3504,nn)}();f.forEach((S,M)=>{Object.keys(S).forEach(F=>{S[F]=this._driver.computeStyle(M,F,zu)})});const b=Oh(c.map(S=>{const M=f.get(S.element);return this._buildPlayer(S,{},M)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function bL(n){return new p.vHH(3301,nn)}();return t}listen(e,t,r,i){const u=BS(t,"","","");return VS(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const TO="ng-animate-queued",nM="ng-animate-disabled",wV=[],AO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},bV={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ma="__ng_removed";class rM{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function TV(n){return null!=n?n:null}(r?e.value:e),r){const u=Ey(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Q0="void",iM=new rM(Q0);class DV{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,xa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function DL(n,e){return new p.vHH(3302,nn)}();if(null==r||0==r.length)throw function IL(n){return new p.vHH(3303,nn)}();if(!function AV(n){return"start"==n||"done"==n}(r))throw function CL(n,e){return new p.vHH(3400,nn)}();const u=qo(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const f=qo(this._engine.statesByElement,e,{});return f.hasOwnProperty(t)||(xa(e,PD),xa(e,PD+"-"+t),f[t]=iM),()=>{this._engine.afterFlush(()=>{const y=u.indexOf(c);y>=0&&u.splice(y,1),this._triggers[t]||delete f[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function TL(n){return new p.vHH(3401,nn)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new sM(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(xa(e,PD),xa(e,PD+"-"+t),this._engine.statesByElement.set(e,f={}));let y=f[t];const b=new rM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&b.absorbOptions(y.options),f[t]=b,y||(y=iM),b.value!==Q0&&y.value===b.value){if(!function xV(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(y.params,b.params)){const ne=[],we=u.matchStyles(y.value,y.params,ne),Ze=u.matchStyles(b.value,b.params,ne);ne.length?this._engine.reportError(ne):this._engine.afterFlush(()=>{Up(e,we),gl(e,Ze)})}return}const F=qo(this._engine.playersByElement,e,[]);F.forEach(ne=>{ne.namespaceId==this.id&&ne.triggerName==t&&ne.queued&&ne.destroy()});let U=u.matchTransition(y.value,b.value,e,b.params),G=!1;if(!U){if(!i)return;U=u.fallbackTransition,G=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:U,fromState:y,toState:b,player:c,isFallbackTransition:G}),G||(xa(e,TO),c.onStart(()=>{wy(e,TO)})),c.onDone(()=>{let ne=this.players.indexOf(c);ne>=0&&this.players.splice(ne,1);const we=this._engine.playersByElement.get(e);if(we){let Ze=we.indexOf(c);Ze>=0&&we.splice(Ze,1)}}),this.players.push(c),F.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,kD,!0);r.forEach(i=>{if(i[Ma])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const f=[];if(Object.keys(u).forEach(y=>{if(c.set(y,u[y].value),this._triggers[y]){const b=this.trigger(e,y,Q0,i);b&&f.push(b)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Oh(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const y=this._triggers[c].fallbackTransition,b=r[c]||iM,S=new rM(Q0),M=new sM(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:y,fromState:b,toState:S,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Ma];(!u||u===AO)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){xa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(f=>{if(f.name==r.triggerName){const y=BS(u,r.triggerName,r.fromState.value,r.toState.value);y._data=e,VS(r.player,f.phase,y,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class IV{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new DV(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let f=this.driver.getParentElement(t);for(;f;){const y=i.get(f);if(y){const b=r.indexOf(y);r.splice(b+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}}else for(let f=u;f>=0;f--)if(this.driver.containsElement(r[f].hostElement,t)){r.splice(f+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const f=this._fetchNamespace(c);f&&t.add(f)}}}return t}trigger(e,t,r,i){if(KD(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!KD(t))return;const u=t[Ma];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),xa(e,nM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),wy(e,nM))}removeNode(e,t,r,i){if(KD(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[Ma]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return KD(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,kD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,qS,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Oh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Ma];if(r&&r.setForRemoval){if(e[Ma]=AO,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(nM))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)xa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Oh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function AL(n){return new p.vHH(3402,nn)}()}_flushAnimations(e,t){const r=new qD,i=[],u=new Map,c=[],f=new Map,y=new Map,b=new Map,S=new Set;this.disabledNodes.forEach(st=>{S.add(st);const gt=this.driver.query(st,".ng-animate-queued",!0);for(let St=0;St<gt.length;St++)S.add(gt[St])});const M=this.bodyNode,F=Array.from(this.statesByElement.keys()),U=xO(F,this.collectedEnterElements),G=new Map;let ne=0;U.forEach((st,gt)=>{const St=GS+ne++;G.set(gt,St),st.forEach(hn=>xa(hn,St))});const we=[],Ze=new Set,Le=new Set;for(let st=0;st<this.collectedLeaveElements.length;st++){const gt=this.collectedLeaveElements[st],St=gt[Ma];St&&St.setForRemoval&&(we.push(gt),Ze.add(gt),St.hasAnimation?this.driver.query(gt,".ng-star-inserted",!0).forEach(hn=>Ze.add(hn)):Le.add(gt))}const Ke=new Map,ze=xO(F,Array.from(Ze));ze.forEach((st,gt)=>{const St=OD+ne++;Ke.set(gt,St),st.forEach(hn=>xa(hn,St))}),e.push(()=>{U.forEach((st,gt)=>{const St=G.get(gt);st.forEach(hn=>wy(hn,St))}),ze.forEach((st,gt)=>{const St=Ke.get(gt);st.forEach(hn=>wy(hn,St))}),we.forEach(st=>{this.processLeaveNode(st)})});const _t=[],ct=[];for(let st=this._namespaceList.length-1;st>=0;st--)this._namespaceList[st].drainQueuedTransitions(t).forEach(St=>{const hn=St.player,Mi=St.element;if(_t.push(hn),this.collectedEnterElements.length){const ks=Mi[Ma];if(ks&&ks.setForMove){if(ks.previousTriggersValues&&ks.previousTriggersValues.has(St.triggerName)){const jp=ks.previousTriggersValues.get(St.triggerName),Fh=this.statesByElement.get(St.element);Fh&&Fh[St.triggerName]&&(Fh[St.triggerName].value=jp)}return void hn.destroy()}}const yl=!M||!this.driver.containsElement(M,Mi),Wo=Ke.get(Mi),kh=G.get(Mi),pr=this._buildInstruction(St,r,kh,Wo,yl);if(pr.errors&&pr.errors.length)return void ct.push(pr);if(yl)return hn.onStart(()=>Up(Mi,pr.fromStyles)),hn.onDestroy(()=>gl(Mi,pr.toStyles)),void i.push(hn);if(St.isFallbackTransition)return hn.onStart(()=>Up(Mi,pr.fromStyles)),hn.onDestroy(()=>gl(Mi,pr.toStyles)),void i.push(hn);const jO=[];pr.timelines.forEach(ks=>{ks.stretchStartingKeyframe=!0,this.disabledNodes.has(ks.element)||jO.push(ks)}),pr.timelines=jO,r.append(Mi,pr.timelines),c.push({instruction:pr,player:hn,element:Mi}),pr.queriedElements.forEach(ks=>qo(f,ks,[]).push(hn)),pr.preStyleProps.forEach((ks,jp)=>{const Fh=Object.keys(ks);if(Fh.length){let $p=y.get(jp);$p||y.set(jp,$p=new Set),Fh.forEach(aM=>$p.add(aM))}}),pr.postStyleProps.forEach((ks,jp)=>{const Fh=Object.keys(ks);let $p=b.get(jp);$p||b.set(jp,$p=new Set),Fh.forEach(aM=>$p.add(aM))})});if(ct.length){const st=[];ct.forEach(gt=>{st.push(function SL(n,e){return new p.vHH(3505,nn)}())}),_t.forEach(gt=>gt.destroy()),this.reportError(st)}const Jt=new Map,Dn=new Map;c.forEach(st=>{const gt=st.element;r.has(gt)&&(Dn.set(gt,gt),this._beforeAnimationBuild(st.player.namespaceId,st.instruction,Jt))}),i.forEach(st=>{const gt=st.element;this._getPreviousPlayers(gt,!1,st.namespaceId,st.triggerName,null).forEach(hn=>{qo(Jt,gt,[]).push(hn),hn.destroy()})});const En=we.filter(st=>RO(st,y,b)),Zt=new Map;MO(Zt,this.driver,Le,b,zu).forEach(st=>{RO(st,y,b)&&En.push(st)});const Ps=new Map;U.forEach((st,gt)=>{MO(Ps,this.driver,new Set(st),y,"!")}),En.forEach(st=>{const gt=Zt.get(st),St=Ps.get(st);Zt.set(st,Object.assign(Object.assign({},gt),St))});const ml=[],J0=[],X0={};c.forEach(st=>{const{element:gt,player:St,instruction:hn}=st;if(r.has(gt)){if(S.has(gt))return St.onDestroy(()=>gl(gt,hn.toStyles)),St.disabled=!0,St.overrideTotalTime(hn.totalTime),void i.push(St);let Mi=X0;if(Dn.size>1){let Wo=gt;const kh=[];for(;Wo=Wo.parentNode;){const pr=Dn.get(Wo);if(pr){Mi=pr;break}kh.push(Wo)}kh.forEach(pr=>Dn.set(pr,Mi))}const yl=this._buildAnimation(St.namespaceId,hn,Jt,u,Ps,Zt);if(St.setRealPlayer(yl),Mi===X0)ml.push(St);else{const Wo=this.playersByElement.get(Mi);Wo&&Wo.length&&(St.parentPlayer=Oh(Wo)),i.push(St)}}else Up(gt,hn.fromStyles),St.onDestroy(()=>gl(gt,hn.toStyles)),J0.push(St),S.has(gt)&&i.push(St)}),J0.forEach(st=>{const gt=u.get(st.element);if(gt&&gt.length){const St=Oh(gt);st.setRealPlayer(St)}}),i.forEach(st=>{st.parentPlayer?st.syncPlayerEvents(st.parentPlayer):st.destroy()});for(let st=0;st<we.length;st++){const gt=we[st],St=gt[Ma];if(wy(gt,OD),St&&St.hasAnimation)continue;let hn=[];if(f.size){let yl=f.get(gt);yl&&yl.length&&hn.push(...yl);let Wo=this.driver.query(gt,qS,!0);for(let kh=0;kh<Wo.length;kh++){let pr=f.get(Wo[kh]);pr&&pr.length&&hn.push(...pr)}}const Mi=hn.filter(yl=>!yl.destroyed);Mi.length?SV(this,gt,Mi):this.processLeaveNode(gt)}return we.length=0,ml.forEach(st=>{this.players.push(st),st.onDone(()=>{st.destroy();const gt=this.players.indexOf(st);this.players.splice(gt,1)}),st.play()}),ml}elementContainsData(e,t){let r=!1;const i=t[Ma];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const y=!u||u==Q0;f.forEach(b=>{b.queued||!y&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const b=y.element,S=b!==u,M=qo(r,b,[]);this._getPreviousPlayers(b,S,c,f,t.toState).forEach(U=>{const G=U.getRealPlayer();G.beforeDestroy&&G.beforeDestroy(),U.destroy(),M.push(U)})}Up(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const f=t.triggerName,y=t.element,b=[],S=new Set,M=new Set,F=t.timelines.map(G=>{const ne=G.element;S.add(ne);const we=ne[Ma];if(we&&we.removedBeforeQueried)return new xd(G.duration,G.delay);const Ze=ne!==y,Le=function MV(n){const e=[];return NO(n,e),e}((r.get(ne)||wV).map(Jt=>Jt.getRealPlayer())).filter(Jt=>!!Jt.element&&Jt.element===ne),Ke=u.get(ne),ze=c.get(ne),_t=rO(0,this._normalizer,0,G.keyframes,Ke,ze),ct=this._buildPlayer(G,_t,Le);if(G.subTimeline&&i&&M.add(ne),Ze){const Jt=new sM(e,f,ne);Jt.setRealPlayer(ct),b.push(Jt)}return ct});b.forEach(G=>{qo(this.playersByQueriedElement,G.element,[]).push(G),G.onDone(()=>function CV(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,G.element,G))}),S.forEach(G=>xa(G,fO));const U=Oh(F);return U.onDestroy(()=>{S.forEach(G=>wy(G,fO)),gl(y,t.toStyles)}),M.forEach(G=>{qo(i,G,[]).push(U)}),U}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new xd(e.duration,e.delay)}}class sM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new xd,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>VS(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){qo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function KD(n){return n&&1===n.nodeType}function SO(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function MO(n,e,t,r,i){const u=[];t.forEach(y=>u.push(SO(y)));const c=[];r.forEach((y,b)=>{const S={};y.forEach(M=>{const F=S[M]=e.computeStyle(b,M,i);(!F||0==F.length)&&(b[Ma]=bV,c.push(b))}),n.set(b,S)});let f=0;return t.forEach(y=>SO(y,u[f++])),c}function xO(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(f){if(!f)return 1;let y=u.get(f);if(y)return y;const b=f.parentNode;return y=t.has(b)?b:i.has(b)?1:c(b),u.set(f,y),y}return e.forEach(f=>{const y=c(f);1!==y&&t.get(y).push(f)}),t}function xa(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function wy(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function SV(n,e,t){Oh(t).onDone(()=>n.processLeaveNode(e))}function NO(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof d_?NO(r.players,e):e.push(r)}}function RO(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class ZD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new IV(e,t,r),this._timelineEngine=new mV(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const y=[],S=ZS(this._driver,u,y,[]);if(y.length)throw function yL(n,e){return new p.vHH(3404,nn)}();f=function hV(n,e,t){return new fV(n,e,t)}(i,S,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=iO(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,f]=iO(r);return this._timelineEngine.listen(c,t,f,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let RV=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&gl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gl(this._element,this._initialStyles),this._endStyles&&(gl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Up(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Up(this._element,this._endStyles),this._endStyles=null),gl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function oM(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];OV(i)&&(e=e||{},e[i]=n[i])}return e}function OV(n){return"display"===n||"position"===n}class OO{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:_O(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class PV{validateStyleProperty(e){return uO(e)}matchesElement(e,t){return!1}containsElement(e,t){return lO(e,t)}getParentElement(e){return $S(e)}query(e,t,r){return cO(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(y.easing=u);const b={},S=c.filter(F=>F instanceof OO);(function VL(n,e){return 0===n||0===e})(r,i)&&S.forEach(F=>{let U=F.currentSnapshot;Object.keys(U).forEach(G=>b[G]=U[G])}),t=function UL(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(f=>{u.hasOwnProperty(f)||c.push(f),u[f]=t[f]}),c.length)for(var i=1;i<e.length;i++){let f=e[i];c.forEach(function(y){f[y]=_O(n,y)})}}return e}(e,t=t.map(F=>Ph(F,!1)),b);const M=function NV(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=oM(e[0]),e.length>1&&(r=oM(e[e.length-1]))):e&&(t=oM(e)),t||r?new RV(n,t,r):null}(e,t);return new OO(e,t,y,M)}}let kV=(()=>{class n extends l_{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:p.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?bg(t):t;return PO(this._renderer,null,r,"register",[i]),new FV(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.FYo),p.LFG(se))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class FV extends class EE{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new LV(this._id,e,t||{},this._renderer)}}class LV{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return PO(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function PO(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const kO="@.disabled";let VV=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const f=null==c?void 0:c.parentNode(u);f&&c.removeChild(f,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new FO("",u,this.engine),this._rendererCache.set(u,S)),S}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const y=S=>{Array.isArray(S)?S.forEach(y):this.engine.registerTrigger(c,f,t,S.name,S)};return r.data.animation.forEach(y),new UV(this,f,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,f]=u;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.FYo),p.LFG(ZD),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class FO{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==kO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class UV extends FO{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==kO?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function BV(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function jV(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let $V=(()=>{class n extends ZD{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(se),p.LFG(HS),p.LFG(eM))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const LO=new p.OlP("AnimationModuleType"),VO=[{provide:l_,useClass:kV},{provide:eM,useFactory:function HV(){return new aV}},{provide:ZD,useClass:$V},{provide:p.FYo,useFactory:function GV(n,e,t){return new VV(n,e,t)},deps:[bn,ZD,p.R0b]}],UO=[{provide:HS,useFactory:()=>new PV},{provide:LO,useValue:"BrowserAnimations"},...VO],qV=[{provide:HS,useClass:dO},{provide:LO,useValue:"NoopAnimations"},...VO];let zV=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?qV:UO}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:UO,imports:[ea]}),n})();const BO_firebase={projectId:"to-do-app-ramotka",appId:"1:983135561958:web:67b183d6d2c0dc9c03b327",storageBucket:"to-do-app-ramotka.appspot.com",locationId:"europe-west",apiKey:"AIzaSyCXW3VNnmmF07iVa23HJnznHoasoF7KRCI",authDomain:"to-do-app-ramotka.firebaseapp.com",messagingSenderId:"983135561958"};let WV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[ZF]}),n.\u0275inj=p.cJS({providers:[],imports:[[ea,KF,zV,fo.hO.initializeApp(BO_firebase)]]}),n})();(0,p.G48)(),Al().bootstrapModule(WV).catch(n=>console.error(n))},5867:(ut,Ae,P)=>{P.d(Ae,{Mq:()=>p.getApp,C6:()=>p.getApps});var p=P(9681);(0,p.registerVersion)("firebase","9.6.10","app")},127:(ut,Ae,P)=>{P.d(Ae,{Z:()=>p.Z});var p=P(3942);p.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(ut,Ae,P)=>{P.r(Ae);var p=P(5861),Y=P(3942),O=P(2090),le=P(9681),X=P(655),ge=P(1877),se=P(4859);const Oe=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tt=new ge.Yd("@firebase/auth");function Ye(_,...h){tt.logLevel<=ge.in.ERROR&&tt.error(`Auth (${le.SDK_VERSION}): ${_}`,...h)}function Ce(_,...h){throw $e(_,...h)}function _e(_,...h){return $e(_,...h)}function Ee(_,h,m){const E=Object.assign(Object.assign({},Ve()),{[h]:m});return new O.LL("auth","Firebase",E).create(h,{appName:_.name})}function Ge(_,h,m){if(!(h instanceof m))throw m.name!==h.constructor.name&&Ce(_,"argument-error"),Ee(_,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(_,...h){if("string"!=typeof _){const m=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(m,...E)}return pe.create(_,...h)}function te(_,h,...m){if(!_)throw $e(h,...m)}function W(_){const h="INTERNAL ASSERTION FAILED: "+_;throw Ye(h),new Error(h)}function ie(_,h){_||W(h)}const me=new Map;function oe(_){ie(_ instanceof Function,"Expected a class definition");let h=me.get(_);return h?(ie(h instanceof _,"Instance stored in cache mismatched with class"),h):(h=new _,me.set(_,h),h)}function At(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Xt(){return"http:"===Ln()||"https:"===Ln()}function Ln(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class cn{constructor(h,m){this.shortDelay=h,this.longDelay=m,ie(m>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function lt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dn(_,h){ie(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return h?`${m}${h.startsWith("/")?h.slice(1):h}`:m}class xi{static initialize(h,m,E){this.fetchImpl=h,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void W("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void W("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void W("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const on={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ds=new cn(3e4,6e4);function en(_,h){return _.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:_.tenantId}):h}function Gt(_,h,m,E){return gr.apply(this,arguments)}function gr(){return(gr=(0,p.Z)(function*(_,h,m,E,T={}){return ui(_,T,(0,p.Z)(function*(){let R={},z={};E&&("GET"===h?z=E:R={body:JSON.stringify(E)});const ae=(0,O.xO)(Object.assign({key:_.config.apiKey},z)).slice(1),Be=yield _._getAdditionalHeaders();return Be["Content-Type"]="application/json",_.languageCode&&(Be["X-Firebase-Locale"]=_.languageCode),xi.fetch()(Lr(_,_.config.apiHost,m,ae),Object.assign({method:h,headers:Be,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ui(_,h,m){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,p.Z)(function*(_,h,m){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},on),h);try{const T=new hs(_),R=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const z=yield R.json();if("needConfirmation"in z)throw fs(_,"account-exists-with-different-credential",z);if(R.ok&&!("errorMessage"in z))return z;{const ae=R.ok?z.errorMessage:z.error.message,[Be,et]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw fs(_,"credential-already-in-use",z);if("EMAIL_EXISTS"===Be)throw fs(_,"email-already-in-use",z);const wt=E[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(et)throw Ee(_,wt,et);Ce(_,wt)}}catch(T){if(T instanceof O.ZR)throw T;Ce(_,"network-request-failed")}})).apply(this,arguments)}function Fr(_,h,m,E){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,p.Z)(function*(_,h,m,E,T={}){const R=yield Gt(_,h,m,E,T);return"mfaPendingCredential"in R&&Ce(_,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Lr(_,h,m,E){const T=`${h}${m}?${E}`;return _.config.emulator?dn(_.config,T):`${_.config.apiScheme}://${T}`}class hs{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(_e(this.auth,"network-request-failed")),ds.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fs(_,h,m){const E={appName:_.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const T=_e(_,h,E);return T.customData._tokenResponse=m,T}function Zr(){return(Zr=(0,p.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function sr(_,h){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,p.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function li(_,h){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,p.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function wn(_){if(_)try{const h=new Date(Number(_));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Na(){return(Na=(0,p.Z)(function*(_,h=!1){const m=(0,O.m9)(_),E=yield m.getIdToken(h),T=ot(E);te(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,z=null==R?void 0:R.sign_in_provider;return{claims:T,token:E,authTime:wn(qt(T.auth_time)),issuedAtTime:wn(qt(T.iat)),expirationTime:wn(qt(T.exp)),signInProvider:z||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function qt(_){return 1e3*Number(_)}function ot(_){const[h,m,E]=_.split(".");if(void 0===h||void 0===m||void 0===E)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(m);return T?JSON.parse(T):(Ye("Failed to decode base64 JWT payload"),null)}catch(T){return Ye("Caught error parsing JWT payload as JSON",T),null}}function mr(_,h){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,p.Z)(function*(_,h,m=!1){if(m)return h;try{return yield h}catch(E){throw E instanceof O.ZR&&$t(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function $t({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class wo{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var m;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),E)}iteration(){var h=this;return(0,p.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&h.schedule(!0))}h.schedule()})()}}class Ir{constructor(h,m){this.createdAt=h,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=wn(this.lastLoginAt),this.creationTime=wn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yr(_){return ht.apply(this,arguments)}function ht(){return(ht=(0,p.Z)(function*(_){var h;const m=_.auth,E=yield _.getIdToken(),T=yield mr(_,li(m,{idToken:E}));te(null==T?void 0:T.users.length,m,"internal-error");const R=T.users[0];_._notifyReloadListener(R);const z=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?Te(R.providerUserInfo):[],ae=Qe(_.providerData,z),wt=!!_.isAnonymous&&!(_.email&&R.passwordHash||(null==ae?void 0:ae.length)),at={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ae,metadata:new Ir(R.createdAt,R.lastLoginAt),isAnonymous:wt};Object.assign(_,at)})).apply(this,arguments)}function Bt(){return(Bt=(0,p.Z)(function*(_){const h=(0,O.m9)(_);yield yr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Qe(_,h){return[..._.filter(E=>!h.some(T=>T.providerId===E.providerId)),...h]}function Te(_){return _.map(h=>{var{providerId:m}=h,E=(0,X._T)(h,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function ft(){return(ft=(0,p.Z)(function*(_,h){const m=yield ui(_,{},(0,p.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:R}=_.config,z=Lr(_,T,"/v1/token",`key=${R}`),ae=yield _._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",xi.fetch()(z,{method:"POST",headers:ae,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class jt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){te(h.idToken,"internal-error"),te(void 0!==h.idToken,"internal-error"),te(void 0!==h.refreshToken,"internal-error");const m="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function It(_){const h=ot(_);return te(h,"internal-error"),te(void 0!==h.exp,"internal-error"),te(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,m)}getToken(h,m=!1){var E=this;return(0,p.Z)(function*(){return te(!E.accessToken||E.refreshToken,h,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,m){var E=this;return(0,p.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:z}=yield function Xe(_,h){return ft.apply(this,arguments)}(h,m);E.updateTokensAndExpiration(T,R,Number(z))})()}updateTokensAndExpiration(h,m,E){this.refreshToken=m||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,m){const{refreshToken:E,accessToken:T,expirationTime:R}=m,z=new jt;return E&&(te("string"==typeof E,"internal-error",{appName:h}),z.refreshToken=E),T&&(te("string"==typeof T,"internal-error",{appName:h}),z.accessToken=T),R&&(te("number"==typeof R,"internal-error",{appName:h}),z.expirationTime=R),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new jt,this.toJSON())}_performRefresh(){return W("not implemented")}}function Vt(_,h){te("string"==typeof _||void 0===_,"internal-error",{appName:h})}class j{constructor(h){var{uid:m,auth:E,stsTokenManager:T}=h,R=(0,X._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new Ir(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var m=this;return(0,p.Z)(function*(){const E=yield mr(m,m.stsTokenManager.getToken(m.auth,h));return te(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(h){return function Ls(_){return Na.apply(this,arguments)}(this,h)}reload(){return function Cr(_){return Bt.apply(this,arguments)}(this)}_assign(h){this!==h&&(te(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(m=>Object.assign({},m)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new j(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,m=!1){var E=this;return(0,p.Z)(function*(){let T=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),T=!0),m&&(yield yr(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,p.Z)(function*(){const m=yield h.getIdToken();return yield mr(h,function dt(_,h){return Zr.apply(this,arguments)}(h.auth,{idToken:m})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,m){var E,T,R,z,ae,Be,et,wt;const at=null!==(E=m.displayName)&&void 0!==E?E:void 0,On=null!==(T=m.email)&&void 0!==T?T:void 0,ss=null!==(R=m.phoneNumber)&&void 0!==R?R:void 0,oc=null!==(z=m.photoURL)&&void 0!==z?z:void 0,Hu=null!==(ae=m.tenantId)&&void 0!==ae?ae:void 0,Gu=null!==(Be=m._redirectEventId)&&void 0!==Be?Be:void 0,yf=null!==(et=m.createdAt)&&void 0!==et?et:void 0,Qy=null!==(wt=m.lastLoginAt)&&void 0!==wt?wt:void 0,{uid:ga,emailVerified:Id,isAnonymous:Cd,providerData:_f,stsTokenManager:Td}=m;te(ga&&Td,h,"internal-error");const wi=jt.fromJSON(this.name,Td);te("string"==typeof ga,h,"internal-error"),Vt(at,h.name),Vt(On,h.name),te("boolean"==typeof Id,h,"internal-error"),te("boolean"==typeof Cd,h,"internal-error"),Vt(ss,h.name),Vt(oc,h.name),Vt(Hu,h.name),Vt(Gu,h.name),Vt(yf,h.name),Vt(Qy,h.name);const vf=new j({uid:ga,auth:h,email:On,emailVerified:Id,displayName:at,isAnonymous:Cd,photoURL:oc,phoneNumber:ss,tenantId:Hu,stsTokenManager:wi,createdAt:yf,lastLoginAt:Qy});return _f&&Array.isArray(_f)&&(vf.providerData=_f.map(pg=>Object.assign({},pg))),Gu&&(vf._redirectEventId=Gu),vf}static _fromIdTokenResponse(h,m,E=!1){return(0,p.Z)(function*(){const T=new jt;T.updateFromServerResponse(m);const R=new j({uid:m.localId,auth:h,stsTokenManager:T,isAnonymous:E});return yield yr(R),R})()}}const q=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,E){var T=this;return(0,p.Z)(function*(){T.storage[m]=E})()}_get(m){var E=this;return(0,p.Z)(function*(){const T=E.storage[m];return void 0===T?null:T})()}_remove(m){var E=this;return(0,p.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return _.type="NONE",_})();function de(_,h,m){return`firebase:${_}:${h}:${m}`}class Q{constructor(h,m,E){this.persistence=h,this.auth=m,this.userKey=E;const{config:T,name:R}=this.auth;this.fullUserKey=de(this.userKey,T.apiKey,R),this.fullPersistenceKey=de("persistence",T.apiKey,R),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,p.Z)(function*(){const m=yield h.persistence._get(h.fullUserKey);return m?j._fromJSON(h.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var m=this;return(0,p.Z)(function*(){if(m.persistence===h)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=h,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,m,E="authUser"){return(0,p.Z)(function*(){if(!m.length)return new Q(oe(q),h,E);const T=(yield Promise.all(m.map(function(){var et=(0,p.Z)(function*(wt){if(yield wt._isAvailable())return wt});return function(wt){return et.apply(this,arguments)}}()))).filter(et=>et);let R=T[0]||oe(q);const z=de(E,h.config.apiKey,h.name);let ae=null;for(const et of m)try{const wt=yield et._get(z);if(wt){const at=j._fromJSON(h,wt);et!==R&&(ae=at),R=et;break}}catch(wt){}const Be=T.filter(et=>et._shouldAllowMigration);return R._shouldAllowMigration&&Be.length?(R=Be[0],ae&&(yield R._set(z,ae.toJSON())),yield Promise.all(m.map(function(){var et=(0,p.Z)(function*(wt){if(wt!==R)try{yield wt._remove(z)}catch(at){}});return function(wt){return et.apply(this,arguments)}}())),new Q(R,h,E)):new Q(R,h,E)})()}}function Ue(_){const h=_.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(zt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Et(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ot(h))return"Blackberry";if(fn(h))return"Webos";if(Yt(h))return"Safari";if((h.includes("chrome/")||Tr(h))&&!h.includes("edge/"))return"Chrome";if(Mn(h))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Et(_=(0,O.z$)()){return/firefox\//i.test(_)}function Yt(_=(0,O.z$)()){const h=_.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Tr(_=(0,O.z$)()){return/crios\//i.test(_)}function zt(_=(0,O.z$)()){return/iemobile/i.test(_)}function Mn(_=(0,O.z$)()){return/android/i.test(_)}function Ot(_=(0,O.z$)()){return/blackberry/i.test(_)}function fn(_=(0,O.z$)()){return/webos/i.test(_)}function ar(_=(0,O.z$)()){return/iphone|ipad|ipod/i.test(_)}function ps(_=(0,O.z$)()){return ar(_)||Mn(_)||fn(_)||Ot(_)||/windows phone/i.test(_)||zt(_)}function Oa(_,h=[]){let m;switch(_){case"Browser":m=Ue((0,O.z$)());break;case"Worker":m=`${Ue((0,O.z$)())}-${_}`;break;default:m=_}const E=h.length?h.join(","):"FirebaseCore-web";return`${m}/JsCore/${le.SDK_VERSION}/${E}`}class ci{constructor(h,m,E){this.app=h,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kt(this),this.idTokenSubscription=new kt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(h,m){var E=this;return m&&(this._popupRedirectResolver=oe(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var T,R;if(!E._deleted&&(E.persistenceManager=yield Q.create(E,h),!E._deleted)){if(null===(T=E._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(z){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,p.Z)(function*(){if(h._deleted)return;const m=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||m){if(h.currentUser&&m&&h.currentUser.uid===m.uid)return h._currentUser._assign(m),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(m)}})()}initializeCurrentUser(h){var m=this;return(0,p.Z)(function*(){var E;let T=yield m.assertedPersistence.getCurrentUser();if(h&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const R=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,z=null==T?void 0:T._redirectEventId,ae=yield m.tryRedirectSignIn(h);(!R||R===z)&&(null==ae?void 0:ae.user)&&(T=ae.user)}return T?T._redirectEventId?(te(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===T._redirectEventId?m.directlySetCurrentUser(T):m.reloadAndSetCurrentUserOrClear(T)):m.reloadAndSetCurrentUserOrClear(T):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var m=this;return(0,p.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,h,!0)}catch(T){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var m=this;return(0,p.Z)(function*(){try{yield yr(h)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function vt(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var h=this;return(0,p.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var m=this;return(0,p.Z)(function*(){const E=h?(0,O.m9)(h):null;return E&&te(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(h){var m=this;return(0,p.Z)(function*(){if(!m._deleted)return h&&te(m.tenantId===h.tenantId,m,"tenant-id-mismatch"),m.queue((0,p.Z)(function*(){yield m.directlySetCurrentUser(h),m.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,p.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(oe(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,m,E){return this.registerStateListener(this.authStateSubscription,h,m,E)}onIdTokenChanged(h,m,E){return this.registerStateListener(this.idTokenSubscription,h,m,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,m){var E=this;return(0,p.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(m);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const E=h&&oe(h)||m._popupRedirectResolver;te(E,m,"argument-error"),m.redirectPersistenceManager=yield Q.create(m,[oe(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(h){var m=this;return(0,p.Z)(function*(){var E,T;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===h?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?m.redirectUser:null})()}_persistUserIfCurrent(h){var m=this;return(0,p.Z)(function*(){if(h===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,m,E,T){if(this._deleted)return()=>{};const R="function"==typeof m?m:m.next.bind(m),z=this._isInitialized?Promise.resolve():this._initializationPromise;return te(z,this,"internal-error"),z.then(()=>R(this.currentUser)),"function"==typeof m?h.addObserver(m,E,T):h.addObserver(m)}directlySetCurrentUser(h){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==h&&(m._currentUser._stopProactiveRefresh(),h&&m.isProactiveRefreshEnabled&&h._startProactiveRefresh()),m.currentUser=h,h?yield m.assertedPersistence.setCurrentUser(h):yield m.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Oa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,p.Z)(function*(){var m;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(m=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return T&&(E["X-Firebase-Client"]=T),E})()}}function Pe(_){return(0,O.m9)(_)}class kt{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(m=>this.observer=m)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _r(_){const h=_.indexOf(":");return h<0?"":_.substr(0,h+1)}function Gn(_){if(!_)return null;const h=Number(_);return isNaN(h)?null:h}class an{constructor(h,m){this.providerId=h,this.signInMethod=m}toJSON(){return W("not implemented")}_getIdTokenResponse(h){return W("not implemented")}_linkToIdToken(h,m){return W("not implemented")}_getReauthenticationResolver(h){return W("not implemented")}}function Vn(_,h){return Us.apply(this,arguments)}function Us(){return(Us=(0,p.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:resetPassword",en(_,h))})).apply(this,arguments)}function Nt(_,h){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,p.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Bs(_,h){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,p.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:update",en(_,h))})).apply(this,arguments)}function ur(){return(ur=(0,p.Z)(function*(_,h){return Fr(_,"POST","/v1/accounts:signInWithPassword",en(_,h))})).apply(this,arguments)}function gs(_,h){return ms.apply(this,arguments)}function ms(){return(ms=(0,p.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:sendOobCode",en(_,h))})).apply(this,arguments)}function Ni(_,h){return un.apply(this,arguments)}function un(){return(un=(0,p.Z)(function*(_,h){return gs(_,h)})).apply(this,arguments)}function fu(_,h){return pu.apply(this,arguments)}function pu(){return(pu=(0,p.Z)(function*(_,h){return gs(_,h)})).apply(this,arguments)}function Ri(_,h){return di.apply(this,arguments)}function di(){return(di=(0,p.Z)(function*(_,h){return gs(_,h)})).apply(this,arguments)}function $c(_,h){return $s.apply(this,arguments)}function $s(){return($s=(0,p.Z)(function*(_,h){return gs(_,h)})).apply(this,arguments)}function Yr(){return(Yr=(0,p.Z)(function*(_,h){return Fr(_,"POST","/v1/accounts:signInWithEmailLink",en(_,h))})).apply(this,arguments)}function Hc(){return(Hc=(0,p.Z)(function*(_,h){return Fr(_,"POST","/v1/accounts:signInWithEmailLink",en(_,h))})).apply(this,arguments)}class mu extends an{constructor(h,m,E,T=null){super("password",E),this._email=h,this._password=m,this._tenantId=T}static _fromEmailAndPassword(h,m){return new mu(h,m,"password")}static _fromEmailAndCode(h,m,E=null){return new mu(h,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(h){var m=this;return(0,p.Z)(function*(){switch(m.signInMethod){case"password":return function js(_,h){return ur.apply(this,arguments)}(h,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function gu(_,h){return Yr.apply(this,arguments)}(h,{email:m._email,oobCode:m._password});default:Ce(h,"internal-error")}})()}_linkToIdToken(h,m){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return Nt(h,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Lh(_,h){return Hc.apply(this,arguments)}(h,{idToken:m,email:E._email,oobCode:E._password});default:Ce(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function qn(_,h){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,p.Z)(function*(_,h){return Fr(_,"POST","/v1/accounts:signInWithIdp",en(_,h))})).apply(this,arguments)}class ys extends an{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const m=new ys(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(m.idToken=h.idToken),h.accessToken&&(m.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(m.nonce=h.nonce),h.pendingToken&&(m.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(m.accessToken=h.oauthToken,m.secret=h.oauthTokenSecret):Ce("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T}=m,R=(0,X._T)(m,["providerId","signInMethod"]);if(!E||!T)return null;const z=new ys(E,T);return z.idToken=R.idToken||void 0,z.accessToken=R.accessToken||void 0,z.secret=R.secret,z.nonce=R.nonce,z.pendingToken=R.pendingToken||null,z}_getIdTokenResponse(h){return qn(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,qn(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,qn(h,m)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),h.postBody=(0,O.xO)(m)}return h}}function Gp(_,h){return ka.apply(this,arguments)}function ka(){return(ka=(0,p.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:sendVerificationCode",en(_,h))})).apply(this,arguments)}function Hs(){return(Hs=(0,p.Z)(function*(_,h){return Fr(_,"POST","/v1/accounts:signInWithPhoneNumber",en(_,h))})).apply(this,arguments)}function qc(){return(qc=(0,p.Z)(function*(_,h){const m=yield Fr(_,"POST","/v1/accounts:signInWithPhoneNumber",en(_,h));if(m.temporaryProof)throw fs(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const zp={USER_NOT_FOUND:"user-not-found"};function zc(){return(zc=(0,p.Z)(function*(_,h){return Fr(_,"POST","/v1/accounts:signInWithPhoneNumber",en(_,Object.assign(Object.assign({},h),{operation:"REAUTH"})),zp)})).apply(this,arguments)}class Zo extends an{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,m){return new Zo({verificationId:h,verificationCode:m})}static _fromTokenResponse(h,m){return new Zo({phoneNumber:h,temporaryProof:m})}_getIdTokenResponse(h){return function _l(_,h){return Hs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,m){return function qp(_,h){return qc.apply(this,arguments)}(h,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Vh(_,h){return zc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:m,verificationId:E,verificationCode:T}=this.params;return h&&m?{temporaryProof:h,phoneNumber:m}:{sessionInfo:E,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:R}=h;return E||m||T||R?new Zo({verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:R}):null}}class Do{constructor(h){var m,E,T,R,z,ae;const Be=(0,O.zd)((0,O.pd)(h)),et=null!==(m=Be.apiKey)&&void 0!==m?m:null,wt=null!==(E=Be.oobCode)&&void 0!==E?E:null,at=function by(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Be.mode)&&void 0!==T?T:null);te(et&&wt&&at,"argument-error"),this.apiKey=et,this.operation=at,this.code=wt,this.continueUrl=null!==(R=Be.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(z=Be.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(ae=Be.tenantId)&&void 0!==ae?ae:null}static parseLink(h){const m=function yu(_){const h=(0,O.zd)((0,O.pd)(_)).link,m=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(_)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||m||h||_}(h);try{return new Do(m)}catch(E){return null}}}let vl=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,E){return mu._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const T=Do.parseLink(E);return te(T,"argument-error"),mu._fromEmailAndCode(m,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Gs{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Qr extends Gs{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Yo extends Qr{static credentialFromJSON(h){const m="string"==typeof h?JSON.parse(h):h;return te("providerId"in m&&"signInMethod"in m,"argument-error"),ys._fromParams(m)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return te(h.idToken||h.accessToken,"argument-error"),ys._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Yo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Yo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:R,nonce:z,providerId:ae}=h;if(!E&&!T&&!m&&!R||!ae)return null;try{return new Yo(ae)._credential({idToken:m,accessToken:E,nonce:z,pendingToken:R})}catch(Be){return null}}}let Io=(()=>{class _ extends Qr{constructor(){super("facebook.com")}static credential(m){return ys._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Fa=(()=>{class _ extends Qr{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return ys._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:T}=m;if(!E&&!T)return null;try{return _.credential(E,T)}catch(R){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Wc=(()=>{class _ extends Qr{constructor(){super("github.com")}static credential(m){return ys._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Ar extends an{constructor(h,m){super(h,h),this.pendingToken=m}_getIdTokenResponse(h){return qn(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,qn(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,qn(h,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T,pendingToken:R}=m;return E&&T&&R&&E===T?new Ar(E,R):null}static _create(h,m){return new Ar(h,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class hi extends Gs{constructor(h){te(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return hi.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return hi.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const m=Ar.fromJSON(h);return te(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:m,providerId:E}=h;if(!m||!E)return null;try{return Ar._create(E,m)}catch(T){return null}}}let _u=(()=>{class _ extends Qr{constructor(){super("twitter.com")}static credential(m,E){return ys._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=m;if(!E||!T)return null;try{return _.credential(E,T)}catch(R){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function vu(_,h){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,p.Z)(function*(_,h){return Fr(_,"POST","/v1/accounts:signUp",en(_,h))})).apply(this,arguments)}class vr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,m,E,T=!1){return(0,p.Z)(function*(){const R=yield j._fromIdTokenResponse(h,E,T),z=Bh(E);return new vr({user:R,providerId:z,_tokenResponse:E,operationType:m})})()}static _forOperation(h,m,E){return(0,p.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const T=Bh(E);return new vr({user:h,providerId:T,_tokenResponse:E,operationType:m})})()}}function Bh(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Kc(){return(Kc=(0,p.Z)(function*(_){var h;const m=Pe(_);if(yield m._initializationPromise,null===(h=m.currentUser)||void 0===h?void 0:h.isAnonymous)return new vr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield vu(m,{returnSecureToken:!0}),T=yield vr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class wu extends O.ZR{constructor(h,m,E,T){var R;super(m.code,m.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,wu.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,m,E,T){return new wu(h,m,E,T)}}function bu(_,h,m,E){return("reauthenticate"===h?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?wu._fromErrorAndOperation(_,R,h,E):R})}function _s(_){return new Set(_.map(({providerId:h})=>h).filter(h=>!!h))}function El(){return(El=(0,p.Z)(function*(_,h){const m=(0,O.m9)(_);yield zs(!0,m,h);const{providerUserInfo:E}=yield sr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[h]}),T=_s(E||[]);return m.providerData=m.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function yn(_,h){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,p.Z)(function*(_,h,m=!1){const E=yield mr(_,h._linkToIdToken(_.auth,yield _.getIdToken()),m);return vr._forOperation(_,"link",E)})).apply(this,arguments)}function zs(_,h,m){return ln.apply(this,arguments)}function ln(){return(ln=(0,p.Z)(function*(_,h,m){yield yr(h);const T=!1===_?"provider-already-linked":"no-such-provider";te(_s(h.providerData).has(m)===_,h.auth,T)})).apply(this,arguments)}function Zc(_,h){return Co.apply(this,arguments)}function Co(){return(Co=(0,p.Z)(function*(_,h,m=!1){const{auth:E}=_,T="reauthenticate";try{const R=yield mr(_,bu(E,T,h,_),m);te(R.idToken,E,"internal-error");const z=ot(R.idToken);te(z,E,"internal-error");const{sub:ae}=z;return te(_.uid===ae,E,"user-mismatch"),vr._forOperation(_,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&Ce(E,"user-mismatch"),R}})).apply(this,arguments)}function To(_,h){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,p.Z)(function*(_,h,m=!1){const E="signIn",T=yield bu(_,E,h),R=yield vr._fromIdTokenResponse(_,E,T);return m||(yield _._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Un(_,h){return Va.apply(this,arguments)}function Va(){return(Va=(0,p.Z)(function*(_,h){return To(Pe(_),h)})).apply(this,arguments)}function Oi(_,h){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,p.Z)(function*(_,h){const m=(0,O.m9)(_);return yield zs(!1,m,h.providerId),yn(m,h)})).apply(this,arguments)}function Ws(_,h){return vs.apply(this,arguments)}function vs(){return(vs=(0,p.Z)(function*(_,h){return Zc((0,O.m9)(_),h)})).apply(this,arguments)}function Du(_,h){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,p.Z)(function*(_,h){return Fr(_,"POST","/v1/accounts:signInWithCustomToken",en(_,h))})).apply(this,arguments)}function Zs(){return(Zs=(0,p.Z)(function*(_,h){const m=Pe(_),E=yield Du(m,{token:h,returnSecureToken:!0}),T=yield vr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class pt{constructor(h,m){this.factorId=h,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(h,m){return"phoneInfo"in m?Iu._fromServerResponse(h,m):Ce(h,"internal-error")}}class Iu extends pt{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,m){return new Iu(m)}}function Ua(_,h,m){var E;te((null===(E=m.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),te(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),h.continueUrl=m.url,h.dynamicLinkDomain=m.dynamicLinkDomain,h.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(te(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),h.iOSBundleId=m.iOS.bundleId),m.android&&(te(m.android.packageName.length>0,_,"missing-android-pkg-name"),h.androidInstallApp=m.android.installApp,h.androidMinimumVersionCode=m.android.minimumVersion,h.androidPackageName=m.android.packageName)}function Tu(){return(Tu=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_),T={requestType:"PASSWORD_RESET",email:h};m&&Ua(E,T,m),yield fu(E,T)})).apply(this,arguments)}function wl(){return(wl=(0,p.Z)(function*(_,h,m){yield Vn((0,O.m9)(_),{oobCode:h,newPassword:m})})).apply(this,arguments)}function De(){return(De=(0,p.Z)(function*(_,h){yield Bs((0,O.m9)(_),{oobCode:h})})).apply(this,arguments)}function Ut(_,h){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,p.Z)(function*(_,h){const m=(0,O.m9)(_),E=yield Vn(m,{oobCode:h}),T=E.requestType;switch(te(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(E.mfaInfo,m,"internal-error");default:te(E.email,m,"internal-error")}let R=null;return E.mfaInfo&&(R=pt._fromServerResponse(Pe(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function Jo(){return(Jo=(0,p.Z)(function*(_,h){const{data:m}=yield Ut((0,O.m9)(_),h);return m.email})).apply(this,arguments)}function Xr(){return(Xr=(0,p.Z)(function*(_,h,m){const E=Pe(_),T=yield vu(E,{returnSecureToken:!0,email:h,password:m}),R=yield vr._fromIdTokenResponse(E,"signIn",T);return yield E._updateCurrentUser(R.user),R})).apply(this,arguments)}function Qc(){return(Qc=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_),T={requestType:"EMAIL_SIGNIN",email:h};te(m.handleCodeInApp,E,"argument-error"),m&&Ua(E,T,m),yield Ri(E,T)})).apply(this,arguments)}function Ys(){return(Ys=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_),T=vl.credentialWithLink(h,m||At());return te(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Un(E,T)})).apply(this,arguments)}function Er(_,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,p.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:createAuthUri",en(_,h))})).apply(this,arguments)}function Qs(){return(Qs=(0,p.Z)(function*(_,h){const E={identifier:h,continueUri:Xt()?At():"http://localhost"},{signinMethods:T}=yield Er((0,O.m9)(_),E);return T||[]})).apply(this,arguments)}function Tl(){return(Tl=(0,p.Z)(function*(_,h){const m=(0,O.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};h&&Ua(m.auth,T,h);const{email:R}=yield Ni(m.auth,T);R!==_.email&&(yield _.reload())})).apply(this,arguments)}function Nu(){return(Nu=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:h};m&&Ua(E.auth,R,m);const{email:z}=yield $c(E.auth,R);z!==_.email&&(yield _.reload())})).apply(this,arguments)}function Al(_,h){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,p.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Sl(){return(Sl=(0,p.Z)(function*(_,{displayName:h,photoURL:m}){if(void 0===h&&void 0===m)return;const E=(0,O.m9)(_),R={idToken:yield E.getIdToken(),displayName:h,photoUrl:m,returnSecureToken:!0},z=yield mr(E,Al(E.auth,R));E.displayName=z.displayName||null,E.photoURL=z.photoUrl||null;const ae=E.providerData.find(({providerId:Be})=>"password"===Be);ae&&(ae.displayName=E.displayName,ae.photoURL=E.photoURL),yield E._updateTokensIfNecessary(z)})).apply(this,arguments)}function xl(_,h,m){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,p.Z)(function*(_,h,m){const{auth:E}=_,R={idToken:yield _.getIdToken(),returnSecureToken:!0};h&&(R.email=h),m&&(R.password=m);const z=yield mr(_,Nt(E,R));yield _._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class So{constructor(h,m,E={}){this.isNewUser=h,this.providerId=m,this.profile=E}}class ed extends So{constructor(h,m,E,T){super(h,m,E),this.username=T}}class td extends So{constructor(h,m){super(h,"facebook.com",m)}}class Mo extends ed{constructor(h,m){super(h,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Js extends So{constructor(h,m){super(h,"google.com",m)}}class Nl extends ed{constructor(h,m,E){super(h,"twitter.com",m,E)}}function xr(_){const{user:h,_tokenResponse:m}=_;return h.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Xc(_){var h,m;if(!_)return null;const{providerId:E}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},R=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&(null==_?void 0:_.idToken)){const z=null===(m=null===(h=ot(_.idToken))||void 0===h?void 0:h.firebase)||void 0===m?void 0:m.sign_in_provider;if(z)return new So(R,"anonymous"!==z&&"custom"!==z?z:null)}if(!E)return null;switch(E){case"facebook.com":return new td(R,T);case"github.com":return new Mo(R,T);case"google.com":return new Js(R,T);case"twitter.com":return new Nl(R,T,_.screenName||null);case"custom":case"anonymous":return new So(R,null);default:return new So(R,E,T)}}(m)}class Es{constructor(h,m){this.type=h,this.credential=m}static _fromIdtoken(h){return new Es("enroll",h)}static _fromMfaPendingCredential(h){return new Es("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var m,E;if(null==h?void 0:h.multiFactorSession){if(null===(m=h.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return Es._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return Es._fromIdtoken(h.multiFactorSession.idToken)}return null}}class ja{constructor(h,m,E){this.session=h,this.hints=m,this.signInResolver=E}static _fromError(h,m){const E=Pe(h),T=m.customData._serverResponse,R=(T.mfaInfo||[]).map(ae=>pt._fromServerResponse(E,ae));te(T.mfaPendingCredential,E,"internal-error");const z=Es._fromMfaPendingCredential(T.mfaPendingCredential);return new ja(z,R,function(){var ae=(0,p.Z)(function*(Be){const et=yield Be._process(E,z);delete T.mfaInfo,delete T.mfaPendingCredential;const wt=Object.assign(Object.assign({},T),{idToken:et.idToken,refreshToken:et.refreshToken});switch(m.operationType){case"signIn":const at=yield vr._fromIdTokenResponse(E,m.operationType,wt);return yield E._updateCurrentUser(at.user),at;case"reauthenticate":return te(m.user,E,"internal-error"),vr._forOperation(m.user,m.operationType,wt);default:Ce(E,"internal-error")}});return function(Be){return ae.apply(this,arguments)}}())}resolveSignIn(h){var m=this;return(0,p.Z)(function*(){return m.signInResolver(h)})()}}function zn(_,h){return Gt(_,"POST","/v2/accounts/mfaEnrollment:start",en(_,h))}class ws{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>pt._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new ws(h)}getSession(){var h=this;return(0,p.Z)(function*(){return Es._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,m){var E=this;return(0,p.Z)(function*(){const T=h,R=yield E.getSession(),z=yield mr(E.user,T._process(E.user.auth,R,m));return yield E.user._updateTokensIfNecessary(z),E.user.reload()})()}unenroll(h){var m=this;return(0,p.Z)(function*(){const E="string"==typeof h?h:h.uid,T=yield m.user.getIdToken(),R=yield mr(m.user,function Kp(_,h){return Gt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",en(_,h))}(m.user.auth,{idToken:T,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:z})=>z!==E),yield m.user._updateTokensIfNecessary(R);try{yield m.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const ta=new WeakMap,Pl="__sak";class xo{constructor(h,m){this.storageRetriever=h,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Pl,"1"),this.storage.removeItem(Pl),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,m){return this.storage.setItem(h,JSON.stringify(m)),Promise.resolve()}_get(h){const m=this.storage.getItem(h);return Promise.resolve(m?JSON.parse(m):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const jn=(()=>{class _ extends xo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function id(){const _=(0,O.z$)();return Yt(_)||ar(_)}()&&function er(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=ps(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),R=this.localCache[E];T!==R&&m(E,R,T)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((ae,Be,et)=>{this.notifyListeners(ae,et)});const T=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(T);if(m.newValue!==ae)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!E)return}const R=()=>{const ae=this.storage.getItem(T);!E&&this.localCache[T]===ae||this.notifyListeners(T,ae)},z=this.storage.getItem(T);!function Ra(){return(0,O.w1)()&&10===document.documentMode}()||z===m.newValue||m.newValue===m.oldValue?R():setTimeout(R,10)}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const R of Array.from(T))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var T=()=>super._set,R=this;return(0,p.Z)(function*(){yield T().call(R,m,E),R.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,T=this;return(0,p.Z)(function*(){const R=yield E().call(T,m);return T.localCache[m]=JSON.stringify(R),R})()}_remove(m){var E=()=>super._remove,T=this;return(0,p.Z)(function*(){yield E().call(T,m),delete T.localCache[m]})()}}return _.type="LOCAL",_})(),lr=(()=>{class _ extends xo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return _.type="SESSION",_})();let Ur=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(R=>R.isListeningto(m));if(E)return E;const T=new _(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,p.Z)(function*(){const T=m,{eventId:R,eventType:z,data:ae}=T.data,Be=E.handlersMap[z];if(!(null==Be?void 0:Be.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:z});const et=Array.from(Be).map(function(){var at=(0,p.Z)(function*(On){return On(T.origin,ae)});return function(On){return at.apply(this,arguments)}}()),wt=yield function ei(_){return Promise.all(_.map(function(){var h=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return h.apply(this,arguments)}}()))}(et);T.ports[0].postMessage({status:"done",eventId:R,eventType:z,response:wt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function na(_="",h=10){let m="";for(let E=0;E<h;E++)m+=Math.floor(10*Math.random());return _+m}class sd{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,m,E=50){var T=this;return(0,p.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let z,ae;return new Promise((Be,et)=>{const wt=na("",20);R.port1.start();const at=setTimeout(()=>{et(new Error("unsupported_event"))},E);ae={messageChannel:R,onMessage(On){const ss=On;if(ss.data.eventId===wt)switch(ss.data.status){case"ack":clearTimeout(at),z=setTimeout(()=>{et(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Be(ss.data.response);break;default:clearTimeout(at),clearTimeout(z),et(new Error("invalid_response"))}}},T.handlers.add(ae),R.port1.addEventListener("message",ae.onMessage),T.target.postMessage({eventType:h,eventId:wt,data:m},[R.port2])}).finally(()=>{ae&&T.removeMessageHandler(ae)})})()}}function gn(){return window}function ki(){return void 0!==gn().WorkerGlobalScope&&"function"==typeof gn().importScripts}function pi(){return(pi=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const kl="firebaseLocalStorageDb",No="firebaseLocalStorage",Wn="fbase_key";class bs{constructor(h){this.request=h}toPromise(){return new Promise((h,m)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ra(_,h){return _.transaction([No],h?"readwrite":"readonly").objectStore(No)}function eo(){const _=indexedDB.open(kl,1);return new Promise((h,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(No,{keyPath:Wn})}catch(T){m(T)}}),_.addEventListener("success",(0,p.Z)(function*(){const E=_.result;E.objectStoreNames.contains(No)?h(E):(E.close(),yield function gi(){const _=indexedDB.deleteDatabase(kl);return new bs(_).toPromise()}(),h(yield eo()))}))})}function mi(_,h,m){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,p.Z)(function*(_,h,m){const E=ra(_,!0).put({[Wn]:h,value:m});return new bs(E).toPromise()})).apply(this,arguments)}function to(){return(to=(0,p.Z)(function*(_,h){const m=ra(_,!1).get(h),E=yield new bs(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Ji(_,h){const m=ra(_,!0).delete(h);return new bs(m).toPromise()}const Fi=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield eo()),m.db})()}_withRetries(m){var E=this;return(0,p.Z)(function*(){let T=0;for(;;)try{const R=yield E._openDb();return yield m(R)}catch(R){if(T++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return ki()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=Ur._getInstance(function od(){return ki()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(T,R){return{keyProcessed:(yield m._poll()).includes(R.key)}});return function(T,R){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var E,T;if(m.activeServiceWorker=yield function Ou(){return pi.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new sd(m.activeServiceWorker);const R=yield m.sender._send("ping",{},800);!R||(null===(E=R[0])||void 0===E?void 0:E.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Ft(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield eo();return yield mi(m,Pl,"1"),yield Ji(m,Pl),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var T=this;return(0,p.Z)(function*(){return T._withPendingWrite((0,p.Z)(function*(){return yield T._withRetries(R=>mi(R,m,E)),T.localCache[m]=E,T.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,p.Z)(function*(){const T=yield E._withRetries(R=>function Ll(_,h){return to.apply(this,arguments)}(R,m));return E.localCache[m]=T,T})()}_remove(m){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(T=>Ji(T,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const E=yield m._withRetries(z=>{const ae=ra(z,!1).getAll();return new bs(ae).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:z,value:ae}of E)R.add(z),JSON.stringify(m.localCache[z])!==JSON.stringify(ae)&&(m.notifyListeners(z,ae),T.push(z));for(const z of Object.keys(m.localCache))m.localCache[z]&&!R.has(z)&&(m.notifyListeners(z,null),T.push(z));return T})()}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const R of Array.from(T))R(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function ia(_,h){return Gt(_,"POST","/v2/accounts/mfaSignIn:start",en(_,h))}function Li(){return(Li=(0,p.Z)(function*(_){return(yield Gt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function $n(_){return new Promise((h,m)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=h,E.onerror=T=>{const R=_e("internal-error");R.customData=T,m(R)},E.type="text/javascript",E.charset="UTF-8",function ud(){var _,h;return null!==(h=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==h?h:document}().appendChild(E)})}function oa(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Nr=1e12;class Xi{constructor(h){this.auth=h,this.counter=Nr,this._widgets=new Map}render(h,m){const E=this.counter;return this._widgets.set(E,new es(h,this.auth.name,m||{})),this.counter++,E}reset(h){var m;const E=h||Nr;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(h){var m;return(null===(m=this._widgets.get(h||Nr))||void 0===m?void 0:m.getResponse())||""}execute(h){var m=this;return(0,p.Z)(function*(){var E;return null===(E=m._widgets.get(h||Nr))||void 0===E||E.execute(),""})()}}class es{constructor(h,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;te(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function An(_){const h=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)h.push(m.charAt(Math.floor(Math.random()*m.length)));return h.join("")}(50);const{callback:h,"expired-callback":m}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const no=oa("rcb"),ld=new cn(3e4,6e4);class Yp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!gn().grecaptcha}load(h,m=""){return te(function Qp(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),h,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(gn().grecaptcha):new Promise((E,T)=>{const R=gn().setTimeout(()=>{T(_e(h,"network-request-failed"))},ld.get());gn()[no]=()=>{gn().clearTimeout(R),delete gn()[no];const ae=gn().grecaptcha;if(!ae)return void T(_e(h,"internal-error"));const Be=ae.render;ae.render=(et,wt)=>{const at=Be(et,wt);return this.counter++,at},this.hostLanguage=m,E(ae)},$n(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:no,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(R),T(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!gn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Jp{load(h){return(0,p.Z)(function*(){return new Xi(h)})()}clearedOneInstance(){}}const ro="recaptcha",ti={theme:"light",type:"image"};class Xp{constructor(h,m=Object.assign({},ti),E){this.parameters=m,this.type=ro,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pe(E),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;te(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Jp:new Yp,this.validateStartingState()}verify(){var h=this;return(0,p.Z)(function*(){h.assertNotDestroyed();const m=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(m)||new Promise(R=>{const z=ae=>{!ae||(h.tokenChangeListeners.delete(z),R(ae))};h.tokenChangeListeners.add(z),h.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof h)h(m);else if("string"==typeof h){const E=gn()[h];"function"==typeof E&&E(m)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,p.Z)(function*(){if(yield h.init(),!h.widgetId){let m=h.container;if(!h.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}h.widgetId=h.getAssertedRecaptcha().render(m,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,p.Z)(function*(){te(Xt()&&!ki(),h.auth,"internal-error"),yield function io(){let _=null;return new Promise(h=>{"complete"!==document.readyState?(_=()=>h(),window.addEventListener("load",_)):h()}).catch(h=>{throw _&&window.removeEventListener("load",_),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const m=yield function Br(_){return Li.apply(this,arguments)}(h.auth);te(m,h.auth,"internal-error"),h.parameters.sitekey=m})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ds{constructor(h,m){this.verificationId=h,this.onConfirmation=m}confirm(h){const m=Zo._fromVerification(this.verificationId,h);return this.onConfirmation(m)}}function Sn(){return(Sn=(0,p.Z)(function*(_,h,m){const E=Pe(_),T=yield Rr(E,h,(0,O.m9)(m));return new Ds(T,R=>Un(E,R))})).apply(this,arguments)}function ua(){return(ua=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_);yield zs(!1,E,"phone");const T=yield Rr(E.auth,h,(0,O.m9)(m));return new Ds(T,R=>Oi(E,R))})).apply(this,arguments)}function Bl(){return(Bl=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_),T=yield Rr(E.auth,h,(0,O.m9)(m));return new Ds(T,R=>Ws(E,R))})).apply(this,arguments)}function Rr(_,h,m){return yi.apply(this,arguments)}function yi(){return(yi=(0,p.Z)(function*(_,h,m){var E;const T=yield m.verify();try{let R;if(te("string"==typeof T,_,"argument-error"),te(m.type===ro,_,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const z=R.session;if("phoneNumber"in R)return te("enroll"===z.type,_,"internal-error"),(yield zn(_,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{te("signin"===z.type,_,"internal-error");const ae=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return te(ae,_,"missing-multi-factor-info"),(yield ia(_,{mfaPendingCredential:z.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Gp(_,{phoneNumber:R.phoneNumber,recaptchaToken:T});return z}}finally{m._reset()}})).apply(this,arguments)}function Is(){return(Is=(0,p.Z)(function*(_,h){yield yn((0,O.m9)(_),h)})).apply(this,arguments)}let Ui=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=Pe(m)}verifyPhoneNumber(m,E){return Rr(this.auth,m,(0,O.m9)(E))}static credential(m,E){return Zo._fromVerification(m,E)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:T}=m;return E&&T?Zo._fromTokenResponse(E,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function ts(_,h){return h?oe(h):(te(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class $a extends an{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return qn(h,this._buildIdpRequest())}_linkToIdToken(h,m){return qn(h,this._buildIdpRequest(m))}_getReauthenticationResolver(h){return qn(h,this._buildIdpRequest())}_buildIdpRequest(h){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(m.idToken=h),m}}function $l(_){return To(_.auth,new $a(_),_.bypassAuthState)}function Hl(_){const{auth:h,user:m}=_;return te(m,h,"internal-error"),Zc(m,new $a(_),_.bypassAuthState)}function Lt(_){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,p.Z)(function*(_){const{auth:h,user:m}=_;return te(m,h,"internal-error"),yn(m,new $a(_),_.bypassAuthState)})).apply(this,arguments)}class tr{constructor(h,m,E,T,R=!1){this.auth=h,this.resolver=E,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var h=this;return new Promise(function(){var m=(0,p.Z)(function*(E,T){h.pendingPromise={resolve:E,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(E,T){return m.apply(this,arguments)}}())}onAuthEvent(h){var m=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:R,tenantId:z,error:ae,type:Be}=h;if(ae)return void m.reject(ae);const et={auth:m.auth,requestUri:E,sessionId:T,tenantId:z||void 0,postBody:R||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Be)(et))}catch(wt){m.reject(wt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return $l;case"linkViaPopup":case"linkViaRedirect":return Lt;case"reauthViaPopup":case"reauthViaRedirect":return Hl;default:Ce(this.auth,"internal-error")}}resolve(h){ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ql=new cn(2e3,1e4);function cd(){return(cd=(0,p.Z)(function*(_,h,m){const E=Pe(_);Ge(_,h,Gs);const T=ts(E,m);return new rs(E,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function ku(){return(ku=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_);Ge(E.auth,h,Gs);const T=ts(E.auth,m);return new rs(E.auth,"reauthViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}function Fu(){return(Fu=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_);Ge(E.auth,h,Gs);const T=ts(E.auth,m);return new rs(E.auth,"linkViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}let rs=(()=>{class _ extends tr{constructor(m,E,T,R,z){super(m,E,R,z),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const E=yield m.execute();return te(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,p.Z)(function*(){ie(1===m.filter.length,"Popup operations only handle one event");const E=na();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(_e(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,T;this.pollId=(null===(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ql.get())};m()}}return _.currentPopupAction=null,_})();const is=new Map;class nr extends tr{constructor(h,m,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,m=this;return(0,p.Z)(function*(){let E=is.get(m.auth._key());if(!E){try{const R=(yield function _i(_,h){return zl.apply(this,arguments)}(m.resolver,m.auth))?yield h().call(m):null;E=()=>Promise.resolve(R)}catch(T){E=()=>Promise.reject(T)}is.set(m.auth._key(),E)}return m.bypassAuthState||is.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var m=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===h.type)return m().call(E,h);if("unknown"!==h.type){if(h.eventId){const T=yield E.auth._redirectUserForId(h.eventId);if(T)return E.user=T,m().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function zl(){return(zl=(0,p.Z)(function*(_,h){const m=C(h),E=I(_);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(m));return yield E._remove(m),T})).apply(this,arguments)}function Po(_,h){return la.apply(this,arguments)}function la(){return(la=(0,p.Z)(function*(_,h){return I(_)._set(C(h),"true")})).apply(this,arguments)}function I(_){return oe(_._redirectPersistence)}function C(_){return de("pendingRedirect",_.config.apiKey,_.name)}function K(){return(K=(0,p.Z)(function*(_,h,m){const E=Pe(_);Ge(_,h,Gs);const T=ts(E,m);return yield Po(T,E),T._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function xe(){return(xe=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_);Ge(E.auth,h,Gs);const T=ts(E.auth,m);yield Po(T,E.auth);const R=yield ko(E);return T._openRedirect(E.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Pt(){return(Pt=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_);Ge(E.auth,h,Gs);const T=ts(E.auth,m);yield zs(!1,E,h.providerId),yield Po(T,E.auth);const R=yield ko(E);return T._openRedirect(E.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function Kn(){return(Kn=(0,p.Z)(function*(_,h){return yield Pe(_)._initializationPromise,Rn(_,h,!1)})).apply(this,arguments)}function Rn(_,h){return ca.apply(this,arguments)}function ca(){return(ca=(0,p.Z)(function*(_,h,m=!1){const E=Pe(_),T=ts(E,h),z=yield new nr(E,T,m).execute();return z&&!m&&(delete z.user._redirectEventId,yield E._persistUserIfCurrent(z.user),yield E._setRedirectUser(null,h)),z})).apply(this,arguments)}function ko(_){return jr.apply(this,arguments)}function jr(){return(jr=(0,p.Z)(function*(_){const h=na(`${_.uid}:::`);return _._redirectEventId=h,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),h})).apply(this,arguments)}class Bi{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(m=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Wl(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hd(_);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=h,m=!0)),m}sendToConsumer(h,m){var E;if(h.error&&!hd(h)){const T=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(_e(this.auth,T))}else m.onAuthEvent(h)}isEventForConsumer(h,m){const E=null===m.eventId||!!h.eventId&&h.eventId===m.eventId;return m.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fo(h))}saveEventToCache(h){this.cachedEventUids.add(Fo(h)),this.lastProcessedEventTime=Date.now()}}function Fo(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(h=>h).join("-")}function hd({type:_,error:h}){return"unknown"===_&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Kl(_){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,p.Z)(function*(_,h={}){return Gt(_,"GET","/v1/projects",h)})).apply(this,arguments)}const tg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Iy=/^https?/;function Cs(){return(Cs=(0,p.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:h}=yield Kl(_);for(const m of h)try{if(Zl(m))return}catch(E){}Ce(_,"unauthorized-domain")})).apply(this,arguments)}function Zl(_){const h=At(),{protocol:m,hostname:E}=new URL(h);if(_.startsWith("chrome-extension://")){const z=new URL(_);return""===z.hostname&&""===E?"chrome-extension:"===m&&_.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===m&&z.hostname===E}if(!Iy.test(m))return!1;if(tg.test(_))return E===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const Ty=new cn(3e4,6e4);function Ay(){const _=gn().___jsl;if(null==_?void 0:_.H)for(const h of Object.keys(_.H))if(_.H[h].r=_.H[h].r||[],_.H[h].L=_.H[h].L||[],_.H[h].r=[..._.H[h].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let fd=null;function Sy(_){return fd=fd||function ng(_){return new Promise((h,m)=>{var E,T,R;function z(){Ay(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Ay(),m(_e(_,"network-request-failed"))},timeout:Ty.get()})}if(null===(T=null===(E=gn().gapi)||void 0===E?void 0:E.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=gn().gapi)||void 0===R?void 0:R.load)){const ae=oa("iframefcb");return gn()[ae]=()=>{gapi.load?z():m(_e(_,"network-request-failed"))},$n(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Be=>m(Be))}z()}}).catch(h=>{throw fd=null,h})}(_),fd}const Gh=new cn(5e3,15e3),Vo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ga(_){const h=_.config;te(h.authDomain,_,"auth-domain-config-required");const m=h.emulator?dn(h,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:_.name,v:le.SDK_VERSION},T=pd.get(_.config.apiHost);T&&(E.eid=T);const R=_._getFrameworks();return R.length&&(E.fw=R.join(",")),`${m}?${(0,O.xO)(E).slice(1)}`}function da(){return da=(0,p.Z)(function*(_){const h=yield Sy(_),m=gn().gapi;return te(m,_,"internal-error"),h.open({where:document.body,url:Ga(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vo,dontclear:!0},E=>new Promise(function(){var T=(0,p.Z)(function*(R,z){yield E.restyle({setHideOnLeave:!1});const ae=_e(_,"network-request-failed"),Be=gn().setTimeout(()=>{z(ae)},Gh.get());function et(){gn().clearTimeout(Be),R(E)}E.ping(et).then(et,()=>{z(ae)})});return function(R,z){return T.apply(this,arguments)}}()))}),da.apply(this,arguments)}const xy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class yd{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Kh(_,h,m,E,T,R){te(_.config.authDomain,_,"auth-domain-config-required"),te(_.config.apiKey,_,"invalid-api-key");const z={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:E,v:le.SDK_VERSION,eventId:T};if(h instanceof Gs){h.setDefaultLanguage(_.languageCode),z.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(z.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Be,et]of Object.entries(R||{}))z[Be]=et}if(h instanceof Qr){const Be=h.getScopes().filter(et=>""!==et);Be.length>0&&(z.scopes=Be.join(","))}_.tenantId&&(z.tid=_.tenantId);const ae=z;for(const Be of Object.keys(ae))void 0===ae[Be]&&delete ae[Be];return`${function Ry({config:_}){return _.emulator?dn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,O.xO)(ae).slice(1)}`}const oo="webStorageSupport";class Zh extends class rg{constructor(h){this.factorId=h}_process(h,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(h,m.credential,E);case"signin":return this._finalizeSignIn(h,m.credential);default:return W("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Zh(h)}_finalizeEnroll(h,m,E){return function nd(_,h){return Gt(_,"POST","/v2/accounts/mfaEnrollment:finalize",en(_,h))}(h,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,m){return function sa(_,h){return Gt(_,"POST","/v2/accounts/mfaSignIn:finalize",en(_,h))}(h,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Oy=(()=>{class _{constructor(){}static assertion(m){return Zh._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var Py="@firebase/auth",Yh="0.19.11";class ig{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const m=this.auth.onIdTokenChanged(E=>{var T;h((null===(T=E)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,m),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const m=this.internalListeners.get(h);!m||(this.internalListeners.delete(h),m(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ao(){return window}function Bu(){return(Bu=(0,p.Z)(function*(_,h,m){var E;const{BuildInfo:T}=ao();ie(h.sessionId,"AuthEvent did not contain a session ID");const R=yield qa(h.sessionId),z={};return ar()?z.ibi=T.packageName:Mn()?z.apn=T.packageName:Ce(_,"operation-not-supported-in-this-environment"),T.displayName&&(z.appDisplayName=T.displayName),z.sessionId=R,Kh(_,m,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,z)})).apply(this,arguments)}function ji(){return(ji=(0,p.Z)(function*(_){const{BuildInfo:h}=ao(),m={};ar()?m.iosBundleId=h.packageName:Mn()?m.androidPackageName=h.packageName:Ce(_,"operation-not-supported-in-this-environment"),yield Kl(_,m)})).apply(this,arguments)}function vd(){return(vd=(0,p.Z)(function*(_,h,m){const{cordova:E}=ao();let T=()=>{};try{yield new Promise((R,z)=>{let ae=null;function Be(){var at;R();const On=null===(at=E.plugins.browsertab)||void 0===at?void 0:at.close;"function"==typeof On&&On(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function et(){ae||(ae=window.setTimeout(()=>{z(_e(_,"redirect-cancelled-by-user"))},2e3))}function wt(){"visible"===(null==document?void 0:document.visibilityState)&&et()}h.addPassiveListener(Be),document.addEventListener("resume",et,!1),Mn()&&document.addEventListener("visibilitychange",wt,!1),T=()=>{h.removePassiveListener(Be),document.removeEventListener("resume",et,!1),document.removeEventListener("visibilitychange",wt,!1),ae&&window.clearTimeout(ae)}})}finally{T()}})).apply(this,arguments)}function qa(_){return og.apply(this,arguments)}function og(){return(og=(0,p.Z)(function*(_){const h=ju(_),m=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(m)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ju(_){if(ie(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const h=new ArrayBuffer(_.length),m=new Uint8Array(h);for(let E=0;E<_.length;E++)m[E]=_.charCodeAt(E);return m}!function Fy(_){(0,le._registerComponent)(new se.wA("auth",(h,{options:m})=>{const E=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:R,authDomain:z}=E.options;return((ae,Be)=>{te(R&&!R.includes(":"),"invalid-api-key",{appName:ae.name}),te(!(null==z?void 0:z.includes(":")),"argument-error",{appName:ae.name});const et={apiKey:R,authDomain:z,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Oa(_)},wt=new ci(ae,Be,et);return function ue(_,h){const m=(null==h?void 0:h.persistence)||[],E=(Array.isArray(m)?m:[m]).map(oe);(null==h?void 0:h.errorMap)&&_._updateErrorMap(h.errorMap),_._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(wt,m),wt})(E,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,m,E)=>{h.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new se.wA("auth-internal",h=>{const m=Pe(h.getProvider("auth").getImmediate());return new ig(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(Py,Yh,function ky(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,le.registerVersion)(Py,Yh,"esm2017")}("Browser");class ef extends Bi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(h)),super.onEvent(h)}initialized(){var h=this;return(0,p.Z)(function*(){yield h.initPromise})()}}function Jl(_){return fa.apply(this,arguments)}function fa(){return(fa=(0,p.Z)(function*(_){const h=yield ec()._get(nf(_));return h&&(yield ec()._remove(nf(_))),h})).apply(this,arguments)}function Xl(){const _=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*h.length);_.push(h.charAt(E))}return _.join("")}function ec(){return oe(jn)}function nf(_){return de("authEvent",_.config.apiKey,_.name)}function wd(_){if(!(null==_?void 0:_.includes("?")))return{};const[h,...m]=_.split("?");return(0,O.zd)(m.join("?"))}function af(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function bd(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function ug(_=(0,O.z$)()){return!("file:"!==bd()&&"ionic:"!==bd()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Or(){try{const _=self.localStorage,h=na();if(_)return _.setItem(h,"1"),_.removeItem(h),!function pa(_=(0,O.z$)()){return function jy(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function $y(_=(0,O.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,O.hl)()}catch(_){return Uo()&&(0,O.hl)()}return!1}function Uo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function rc(){return(function By(){return"http:"===bd()||"https:"===bd()}()||(0,O.ru)()||ug())&&!function Dd(){return(0,O.b$)()||(0,O.UG)()}()&&Or()&&!Uo()}function uf(){return ug()&&"undefined"!=typeof document}function za(){return(za=(0,p.Z)(function*(){return!!uf()&&new Promise(_=>{const h=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),_(!0)})})})).apply(this,arguments)}const $i={LOCAL:"local",NONE:"none",SESSION:"session"},Wa=te,cf="persistence";function Ka(_){return df.apply(this,arguments)}function df(){return(df=(0,p.Z)(function*(_){yield _._initializationPromise;const h=ic(),m=de(cf,_.config.apiKey,_.name);h&&h.setItem(m,_._getPersistence())})).apply(this,arguments)}function ic(){var _;try{return(null===(_=function lf(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(h){return null}}const Hy=te;class Ei{constructor(){this.browserResolver=oe(class ha{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lr,this._completeRedirectFn=Rn}_openPopup(h,m,E,T){var R=this;return(0,p.Z)(function*(){var z;ie(null===(z=R.eventManagers[h._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const ae=Kh(h,m,E,At(),T);return function _d(_,h,m,E=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),z=Math.max((window.screen.availWidth-E)/2,0).toString();let ae="";const Be=Object.assign(Object.assign({},xy),{width:E.toString(),height:T.toString(),top:R,left:z}),et=(0,O.z$)().toLowerCase();m&&(ae=Tr(et)?"_blank":m),Et(et)&&(h=h||"http://localhost",Be.scrollbars="yes");const wt=Object.entries(Be).reduce((On,[ss,oc])=>`${On}${ss}=${oc},`,"");if(function hu(_=(0,O.z$)()){var h;return ar(_)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(et)&&"_self"!==ae)return function Wh(_,h){const m=document.createElement("a");m.href=_,m.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(h||"",ae),new yd(null);const at=window.open(h||"",ae,wt);te(at,_,"popup-blocked");try{at.focus()}catch(On){}return new yd(at)}(h,ae,na())})()}_openRedirect(h,m,E,T){var R=this;return(0,p.Z)(function*(){return yield R._originValidation(h),function Hh(_){gn().location.href=_}(Kh(h,m,E,At(),T)),new Promise(()=>{})})()}_initialize(h){const m=h._key();if(this.eventManagers[m]){const{manager:T,promise:R}=this.eventManagers[m];return T?Promise.resolve(T):(ie(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(h);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(h){var m=this;return(0,p.Z)(function*(){const E=yield function My(_){return da.apply(this,arguments)}(h),T=new Bi(h);return E.register("authEvent",R=>(te(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[h._key()]={manager:T},m.iframes[h._key()]=E,T})()}_isIframeWebStorageSupported(h,m){this.iframes[h._key()].send(oo,{type:oo},T=>{var R;const z=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[oo];void 0!==z&&m(!!z),Ce(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Cy(_){return Cs.apply(this,arguments)}(h)),this.originValidationPromises[m]}get _shouldInitProactively(){return ps()||Yt()||ar()}}),this.cordovaResolver=oe(class of{constructor(){this._redirectPersistence=lr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Rn}_initialize(h){var m=this;return(0,p.Z)(function*(){const E=h._key();let T=m.eventManagers.get(E);return T||(T=new ef(h),m.eventManagers.set(E,T),m.attachCallbackListeners(h,T)),T})()}_openPopup(h){Ce(h,"operation-not-supported-in-this-environment")}_openRedirect(h,m,E,T){var R=this;return(0,p.Z)(function*(){!function Ed(_){var h,m,E,T,R,z,ae,Be,et,wt;const at=ao();te("function"==typeof(null===(h=null==at?void 0:at.universalLinks)||void 0===h?void 0:h.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(void 0!==(null===(m=null==at?void 0:at.BuildInfo)||void 0===m?void 0:m.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(R=null===(T=null===(E=null==at?void 0:at.cordova)||void 0===E?void 0:E.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(Be=null===(ae=null===(z=null==at?void 0:at.cordova)||void 0===z?void 0:z.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Be?void 0:Be.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(wt=null===(et=null==at?void 0:at.cordova)||void 0===et?void 0:et.InAppBrowser)||void 0===wt?void 0:wt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const z=yield R._initialize(h);yield z.initialized(),z.resetRedirect(),function Lu(){is.clear()}(),yield R._originValidation(h);const ae=function tf(_,h,m=null){return{type:h,eventId:m,urlResponse:null,sessionId:Xl(),postBody:null,tenantId:_.tenantId,error:_e(_,"no-auth-event")}}(h,E,T);yield function rE(_,h){return ec()._set(nf(_),h)}(h,ae);const Be=yield function Qh(_,h,m){return Bu.apply(this,arguments)}(h,ae,m),et=yield function Ql(_){const{cordova:h}=ao();return new Promise(m=>{h.plugins.browsertab.isAvailable(E=>{let T=null;E?h.plugins.browsertab.openUrl(_):T=h.InAppBrowser.open(_,function bo(_=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),m(T)})})}(Be);return function sg(_,h,m){return vd.apply(this,arguments)}(h,z,et)})()}_isIframeWebStorageSupported(h,m){throw new Error("Method not implemented.")}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Jh(_){return ji.apply(this,arguments)}(h)),this.originValidationPromises[m]}attachCallbackListeners(h,m){const{universalLinks:E,handleOpenURL:T,BuildInfo:R}=ao(),z=setTimeout((0,p.Z)(function*(){yield Jl(h),m.onEvent(af())}),500),ae=function(){var wt=(0,p.Z)(function*(at){clearTimeout(z);const On=yield Jl(h);let ss=null;On&&(null==at?void 0:at.url)&&(ss=function Vy(_,h){var m,E;const T=function tc(_){const h=wd(_),m=h.link?decodeURIComponent(h.link):void 0,E=wd(m).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return wd(T).link||T||E||m||_}(h);if(T.includes("/__/auth/callback")){const R=wd(T),z=R.firebaseError?function rf(_){try{return JSON.parse(_)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,ae=null===(E=null===(m=null==z?void 0:z.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Be=ae?_e(ae):null;return Be?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:T,postBody:null}}return null}(On,at.url)),m.onEvent(ss||af())});return function(On){return wt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,ae);const Be=T,et=`${R.packageName.toLowerCase()}://`;ao().handleOpenURL=function(){var wt=(0,p.Z)(function*(at){if(at.toLowerCase().startsWith(et)&&ae({url:at}),"function"==typeof Be)try{Be(at)}catch(On){console.error(On)}});return function(at){return wt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=lr,this._completeRedirectFn=Rn}_initialize(h){var m=this;return(0,p.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,m,E,T){var R=this;return(0,p.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,m,E,T)})()}_openRedirect(h,m,E,T){var R=this;return(0,p.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,m,E,T)})()}_isIframeWebStorageSupported(h,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,m)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return uf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Hy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,p.Z)(function*(){if(h.underlyingResolver)return;const m=yield function $r(){return za.apply(this,arguments)}();h.underlyingResolver=m?h.cordovaResolver:h.browserResolver})()}}function dg(_){return _.unwrap()}function Za(_){return hg(_)}function hg(_){const{_tokenResponse:h}=_ instanceof O.ZR?_.customData:_;if(!h)return null;if(!(_ instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Ui.credentialFromResult(_);const m=h.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=Fa;break;case"facebook.com":E=Io;break;case"github.com":E=Wc;break;case"twitter.com":E=_u;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:z,pendingToken:ae,nonce:Be}=h;return R||z||T||ae?ae?m.startsWith("saml.")?Ar._create(m,ae):ys._fromParams({providerId:m,signInMethod:m,pendingToken:ae,idToken:T,accessToken:R}):new Yo(m).credential({idToken:T,accessToken:R,rawNonce:Be}):null}return _ instanceof O.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function Pr(_,h){return h.catch(m=>{throw m instanceof O.ZR&&function qy(_,h){var m;const E=null===(m=h.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new zy(_,function Ru(_,h){var m;const E=(0,O.m9)(_),T=h;return te(h.customData.operationType,E,"argument-error"),te(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),ja._fromError(E,T)}(_,h));else if(E){const T=hg(h),R=h;T&&(R.credential=T,R.tenantId=E.tenantId||void 0,R.email=E.email||void 0,R.phoneNumber=E.phoneNumber||void 0)}}(_,m),m}).then(m=>{const T=m.user;return{operationType:m.operationType,credential:Za(m),additionalUserInfo:xr(m),user:Bo.getOrCreate(T)}})}function hf(_,h){return ff.apply(this,arguments)}function ff(){return(ff=(0,p.Z)(function*(_,h){const m=yield h;return{verificationId:m.verificationId,confirm:E=>Pr(_,m.confirm(E))}})).apply(this,arguments)}class zy{constructor(h,m){this.resolver=m,this.auth=function Gy(_){return _.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Pr(dg(this.auth),this.resolver.resolveSignIn(h))}}class Bo{constructor(h){this._delegate=h,this.multiFactor=function rd(_){const h=(0,O.m9)(_);return ta.has(h)||ta.set(h,ws._fromUser(h)),ta.get(h)}(h)}static getOrCreate(h){return Bo.USER_MAP.has(h)||Bo.USER_MAP.set(h,new Bo(h)),Bo.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var m=this;return(0,p.Z)(function*(){return Pr(m.auth,Oi(m._delegate,h))})()}linkWithPhoneNumber(h,m){var E=this;return(0,p.Z)(function*(){return hf(E.auth,function Ul(_,h,m){return ua.apply(this,arguments)}(E._delegate,h,m))})()}linkWithPopup(h){var m=this;return(0,p.Z)(function*(){return Pr(m.auth,function ns(_,h,m){return Fu.apply(this,arguments)}(m._delegate,h,Ei))})()}linkWithRedirect(h){var m=this;return(0,p.Z)(function*(){return yield Ka(Pe(m.auth)),function Je(_,h,m){return function Tt(_,h,m){return Pt.apply(this,arguments)}(_,h,m)}(m._delegate,h,Ei)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var m=this;return(0,p.Z)(function*(){return Pr(m.auth,Ws(m._delegate,h))})()}reauthenticateWithPhoneNumber(h,m){return hf(this.auth,function eg(_,h,m){return Bl.apply(this,arguments)}(this._delegate,h,m))}reauthenticateWithPopup(h){return Pr(this.auth,function Oo(_,h,m){return ku.apply(this,arguments)}(this._delegate,h,Ei))}reauthenticateWithRedirect(h){var m=this;return(0,p.Z)(function*(){return yield Ka(Pe(m.auth)),function ee(_,h,m){return function Me(_,h,m){return xe.apply(this,arguments)}(_,h,m)}(m._delegate,h,Ei)})()}sendEmailVerification(h){return function Pi(_,h){return Tl.apply(this,arguments)}(this._delegate,h)}unlink(h){var m=this;return(0,p.Z)(function*(){return yield function La(_,h){return El.apply(this,arguments)}(m._delegate,h),m})()}updateEmail(h){return function Ml(_,h){return xl((0,O.m9)(_),h,null)}(this._delegate,h)}updatePassword(h){return function Jc(_,h){return xl((0,O.m9)(_),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function jl(_,h){return Is.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function ea(_,h){return Sl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,m){return function xu(_,h,m){return Nu.apply(this,arguments)}(this._delegate,h,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Bo.USER_MAP=new WeakMap;const sc=te;let pf=(()=>{class _{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=m.options;sc(T,"invalid-api-key",{appName:m.name}),sc(T,"invalid-api-key",{appName:m.name});const R="undefined"!=typeof window?Ei:void 0;this._delegate=E.initialize({options:{persistence:Wy(T,m.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function pn(_,h,m){const E=Pe(_);te(E._canInitEmulator,E,"emulator-config-failed"),te(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const T=!!(null==m?void 0:m.disableWarnings),R=_r(h),{host:z,port:ae}=function Vs(_){const h=_r(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(h.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const R=T[1];return{host:R,port:Gn(E.substr(R.length+1))}}{const[R,z]=E.split(":");return{host:R,port:Gn(z)}}}(h);E.config.emulator={url:`${R}//${z}${null===ae?"":`:${ae}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:z,port:ae,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Yi(){function _(){const h=document.createElement("p"),m=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,m,E)}applyActionCode(m){return function bl(_,h){return De.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Ut(this._delegate,m)}confirmPasswordReset(m,E){return function Au(_,h,m){return wl.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var T=this;return(0,p.Z)(function*(){return Pr(T._delegate,function Xo(_,h,m){return Xr.apply(this,arguments)}(T._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Mu(_,h){return Qs.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Cl(_,h){const m=Do.parseLink(h);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,p.Z)(function*(){sc(rc(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function Mt(_,h){return Kn.apply(this,arguments)}(m._delegate,Ei);return E?Pr(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function ag(_,h){Pe(_)._logFramework(h)}(this._delegate,m)}onAuthStateChanged(m,E,T){const{next:R,error:z,complete:ae}=gf(m,E,T);return this._delegate.onAuthStateChanged(R,z,ae)}onIdTokenChanged(m,E,T){const{next:R,error:z,complete:ae}=gf(m,E,T);return this._delegate.onIdTokenChanged(R,z,ae)}sendSignInLinkToEmail(m,E){return function Il(_,h,m){return Qc.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function Cu(_,h,m){return Tu.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,p.Z)(function*(){let T;switch(function lg(_,h){Wa(Object.values($i).includes(h),_,"invalid-persistence-type"),(0,O.b$)()?Wa(h!==$i.SESSION,_,"unsupported-persistence-type"):(0,O.UG)()?Wa(h===$i.NONE,_,"unsupported-persistence-type"):Uo()?Wa(h===$i.NONE||h===$i.LOCAL&&(0,O.hl)(),_,"unsupported-persistence-type"):Wa(h===$i.NONE||Or(),_,"unsupported-persistence-type")}(E._delegate,m),m){case $i.SESSION:T=lr;break;case $i.LOCAL:T=(yield oe(Fi)._isAvailable())?Fi:jn;break;case $i.NONE:T=q;break;default:return Ce("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Pr(this._delegate,function Eu(_){return Kc.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Pr(this._delegate,Un(this._delegate,m))}signInWithCustomToken(m){return Pr(this._delegate,function Ks(_,h){return Zs.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return Pr(this._delegate,function Dl(_,h,m){return Un((0,O.m9)(_),vl.credential(h,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return Pr(this._delegate,function Su(_,h,m){return Ys.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return hf(this._delegate,function Pu(_,h,m){return Sn.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,p.Z)(function*(){return sc(rc(),E._delegate,"operation-not-supported-in-this-environment"),Pr(E._delegate,function so(_,h,m){return cd.apply(this,arguments)}(E._delegate,m,Ei))})()}signInWithRedirect(m){var E=this;return(0,p.Z)(function*(){return sc(rc(),E._delegate,"operation-not-supported-in-this-environment"),yield Ka(E._delegate),function N(_,h,m){return function L(_,h,m){return K.apply(this,arguments)}(_,h,m)}(E._delegate,m,Ei)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function bn(_,h){return Jo.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=$i,_})();function gf(_,h,m){let E=_;"function"!=typeof _&&({next:E,error:h,complete:m}=_);const T=E;return{next:z=>T(z&&Bo.getOrCreate(z)),error:h,complete:m}}function Wy(_,h){const m=function cg(_,h){const m=ic();if(!m)return[];const E=de(cf,_,h);switch(m.getItem(E)){case $i.NONE:return[q];case $i.LOCAL:return[Fi,lr];case $i.SESSION:return[lr];default:return[]}}(_,h);if("undefined"!=typeof self&&!m.includes(Fi)&&m.push(Fi),"undefined"!=typeof window)for(const E of[jn,lr])m.includes(E)||m.push(E);return m.includes(q)||m.push(q),m}class mf{constructor(){this.providerId="phone",this._delegate=new Ui(dg(Y.Z.auth()))}static credential(h,m){return Ui.credential(h,m)}verifyPhoneNumber(h,m){return this._delegate.verifyPhoneNumber(h,m)}unwrap(){return this._delegate}}mf.PHONE_SIGN_IN_METHOD=Ui.PHONE_SIGN_IN_METHOD,mf.PROVIDER_ID=Ui.PROVIDER_ID;const Ky=te;class Zy{constructor(h,m,E=Y.Z.app()){var T;Ky(null===(T=E.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Xp(h,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function fg(_){_.INTERNAL.registerComponent(new se.wA("auth-compat",h=>{const m=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new pf(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:vl,FacebookAuthProvider:Io,GithubAuthProvider:Wc,GoogleAuthProvider:Fa,OAuthProvider:Yo,SAMLAuthProvider:hi,PhoneAuthProvider:mf,PhoneMultiFactorGenerator:Oy,RecaptchaVerifier:Zy,TwitterAuthProvider:_u,Auth:pf,AuthCredential:an,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.11")}(Y.Z)},8306:(ut,Ae,P)=>{P.d(Ae,{y:()=>$});var p=P(2961),Y=P(727),O=P(8822),le=P(4671);var se=P(2416),fe=P(576),ce=P(2806);let $=(()=>{class Se{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const pe=new Se;return pe.source=this,pe.operator=Ve,pe}subscribe(Ve,pe,be){const tt=function We(Se){return Se&&Se instanceof p.Lv||function J(Se){return Se&&(0,fe.m)(Se.next)&&(0,fe.m)(Se.error)&&(0,fe.m)(Se.complete)}(Se)&&(0,Y.Nn)(Se)}(Ve)?Ve:new p.Hp(Ve,pe,be);return(0,ce.x)(()=>{const{operator:Ye,source:Ce}=this;tt.add(Ye?Ye.call(tt,Ce):Ce?this._subscribe(tt):this._trySubscribe(tt))}),tt}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(pe){Ve.error(pe)}}forEach(Ve,pe){return new(pe=H(pe))((be,tt)=>{const Ye=new p.Hp({next:Ce=>{try{Ve(Ce)}catch(_e){tt(_e),Ye.unsubscribe()}},error:tt,complete:be});this.subscribe(Ye)})}_subscribe(Ve){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Ve)}[O.L](){return this}pipe(...Ve){return function ge(Se){return 0===Se.length?le.y:1===Se.length?Se[0]:function(Ve){return Se.reduce((pe,be)=>be(pe),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=H(Ve))((pe,be)=>{let tt;this.subscribe(Ye=>tt=Ye,Ye=>be(Ye),()=>pe(tt))})}}return Se.create=Oe=>new Se(Oe),Se})();function H(Se){var Oe;return null!==(Oe=null!=Se?Se:se.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(ut,Ae,P)=>{P.d(Ae,{x:()=>se});var p=P(8306),Y=P(727);const le=(0,P(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=P(8737),ge=P(2806);let se=(()=>{class ce extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const J=new fe(this,this);return J.operator=H,J}_throwIfClosed(){if(this.closed)throw new le}next(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(H)}})}error(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:J}=this;for(;J.length;)J.shift().error(H)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:J,isStopped:We,observers:Se}=this;return J||We?Y.Lc:(this.currentObservers=null,Se.push(H),new Y.w0(()=>{this.currentObservers=null,(0,X.P)(Se,H)}))}_checkFinalizedStatuses(H){const{hasError:J,thrownError:We,isStopped:Se}=this;J?H.error(We):Se&&H.complete()}asObservable(){const H=new p.y;return H.source=this,H}}return ce.create=($,H)=>new fe($,H),ce})();class fe extends se{constructor($,H){super(),this.destination=$,this.source=H}next($){var H,J;null===(J=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===J||J.call(H,$)}error($){var H,J;null===(J=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===J||J.call(H,$)}complete(){var $,H;null===(H=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===H||H.call($)}_subscribe($){var H,J;return null!==(J=null===(H=this.source)||void 0===H?void 0:H.subscribe($))&&void 0!==J?J:Y.Lc}}},2961:(ut,Ae,P)=>{P.d(Ae,{Hp:()=>Ve,Lv:()=>J});var p=P(576),Y=P(727),O=P(2416),le=P(7849);function X(){}const ge=ce("C",void 0,void 0);function ce(Ce,_e,Ee){return{kind:Ce,value:_e,error:Ee}}var $=P(3410),H=P(2806);class J extends Y.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Y.Nn)(_e)&&_e.add(this)):this.destination=Ye}static create(_e,Ee,Ge){return new Ve(_e,Ee,Ge)}next(_e){this.isStopped?tt(function fe(Ce){return ce("N",Ce,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?tt(function se(Ce){return ce("E",void 0,Ce)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?tt(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Se(Ce,_e){return We.call(Ce,_e)}class Oe{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(_e)}catch(Ge){pe(Ge)}}error(_e){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(_e)}catch(Ge){pe(Ge)}else pe(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ee){pe(Ee)}}}class Ve extends J{constructor(_e,Ee,Ge){let $e;if(super(),(0,p.m)(_e)||!_e)$e={next:null!=_e?_e:void 0,error:null!=Ee?Ee:void 0,complete:null!=Ge?Ge:void 0};else{let te;this&&O.v.useDeprecatedNextContext?(te=Object.create(_e),te.unsubscribe=()=>this.unsubscribe(),$e={next:_e.next&&Se(_e.next,te),error:_e.error&&Se(_e.error,te),complete:_e.complete&&Se(_e.complete,te)}):$e=_e}this.destination=new Oe($e)}}function pe(Ce){O.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Ce):(0,le.h)(Ce)}function tt(Ce,_e){const{onStoppedNotification:Ee}=O.v;Ee&&$.z.setTimeout(()=>Ee(Ce,_e))}const Ye={closed:!0,next:X,error:function be(Ce){throw Ce},complete:X}},727:(ut,Ae,P)=>{P.d(Ae,{Lc:()=>ge,w0:()=>X,Nn:()=>se});var p=P(576);const O=(0,P(3888).d)(ce=>function(H){ce(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((J,We)=>`${We+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var le=P(8737);class X{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Se of H)Se.remove(this);else H.remove(this);const{initialTeardown:J}=this;if((0,p.m)(J))try{J()}catch(Se){$=Se instanceof O?Se.errors:[Se]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Se of We)try{fe(Se)}catch(Oe){$=null!=$?$:[],Oe instanceof O?$=[...$,...Oe.errors]:$.push(Oe)}}if($)throw new O($)}}add($){var H;if($&&$!==this)if(this.closed)fe($);else{if($ instanceof X){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push($)}}_hasParent($){const{_parentage:H}=this;return H===$||Array.isArray(H)&&H.includes($)}_addParent($){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push($),H):H?[H,$]:$}_removeParent($){const{_parentage:H}=this;H===$?this._parentage=null:Array.isArray(H)&&(0,le.P)(H,$)}remove($){const{_finalizers:H}=this;H&&(0,le.P)(H,$),$ instanceof X&&$._removeParent(this)}}X.EMPTY=(()=>{const ce=new X;return ce.closed=!0,ce})();const ge=X.EMPTY;function se(ce){return ce instanceof X||ce&&"closed"in ce&&(0,p.m)(ce.remove)&&(0,p.m)(ce.add)&&(0,p.m)(ce.unsubscribe)}function fe(ce){(0,p.m)(ce)?ce():ce.unsubscribe()}},2416:(ut,Ae,P)=>{P.d(Ae,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Ae,P)=>{P.d(Ae,{E:()=>Y});const Y=new(P(8306).y)(X=>X.complete())},8996:(ut,Ae,P)=>{P.d(Ae,{D:()=>_e});var p=P(8421),Y=P(5363),O=P(9468),ge=P(8306),fe=P(2202),ce=P(576),$=P(9672);function J(Ee,Ge){if(!Ee)throw new Error("Iterable cannot be null");return new ge.y($e=>{(0,$.f)($e,Ge,()=>{const te=Ee[Symbol.asyncIterator]();(0,$.f)($e,Ge,()=>{te.next().then(W=>{W.done?$e.complete():$e.next(W.value)})},0,!0)})})}var We=P(3670),Se=P(8239),Oe=P(1144),Ve=P(6495),pe=P(2206),be=P(4532),tt=P(3260);function _e(Ee,Ge){return Ge?function Ce(Ee,Ge){if(null!=Ee){if((0,We.c)(Ee))return function le(Ee,Ge){return(0,p.Xf)(Ee).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(Ee,Ge);if((0,Oe.z)(Ee))return function se(Ee,Ge){return new ge.y($e=>{let te=0;return Ge.schedule(function(){te===Ee.length?$e.complete():($e.next(Ee[te++]),$e.closed||this.schedule())})})}(Ee,Ge);if((0,Se.t)(Ee))return function X(Ee,Ge){return(0,p.Xf)(Ee).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(Ee,Ge);if((0,pe.D)(Ee))return J(Ee,Ge);if((0,Ve.T)(Ee))return function H(Ee,Ge){return new ge.y($e=>{let te;return(0,$.f)($e,Ge,()=>{te=Ee[fe.h](),(0,$.f)($e,Ge,()=>{let W,ie;try{({value:W,done:ie}=te.next())}catch(me){return void $e.error(me)}ie?$e.complete():$e.next(W)},0,!0)}),()=>(0,ce.m)(null==te?void 0:te.return)&&te.return()})}(Ee,Ge);if((0,tt.L)(Ee))return function Ye(Ee,Ge){return J((0,tt.Q)(Ee),Ge)}(Ee,Ge)}throw(0,be.z)(Ee)}(Ee,Ge):(0,p.Xf)(Ee)}},8421:(ut,Ae,P)=>{P.d(Ae,{Xf:()=>We});var p=P(655),Y=P(1144),O=P(8239),le=P(8306),X=P(3670),ge=P(2206),se=P(4532),fe=P(6495),ce=P(3260),$=P(576),H=P(7849),J=P(8822);function We(Ce){if(Ce instanceof le.y)return Ce;if(null!=Ce){if((0,X.c)(Ce))return function Se(Ce){return new le.y(_e=>{const Ee=Ce[J.L]();if((0,$.m)(Ee.subscribe))return Ee.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ce);if((0,Y.z)(Ce))return function Oe(Ce){return new le.y(_e=>{for(let Ee=0;Ee<Ce.length&&!_e.closed;Ee++)_e.next(Ce[Ee]);_e.complete()})}(Ce);if((0,O.t)(Ce))return function Ve(Ce){return new le.y(_e=>{Ce.then(Ee=>{_e.closed||(_e.next(Ee),_e.complete())},Ee=>_e.error(Ee)).then(null,H.h)})}(Ce);if((0,ge.D)(Ce))return be(Ce);if((0,fe.T)(Ce))return function pe(Ce){return new le.y(_e=>{for(const Ee of Ce)if(_e.next(Ee),_e.closed)return;_e.complete()})}(Ce);if((0,ce.L)(Ce))return function tt(Ce){return be((0,ce.Q)(Ce))}(Ce)}throw(0,se.z)(Ce)}function be(Ce){return new le.y(_e=>{(function Ye(Ce,_e){var Ee,Ge,$e,te;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,p.KL)(Ce);!(Ge=yield Ee.next()).done;)if(_e.next(Ge.value),_e.closed)return}catch(W){$e={error:W}}finally{try{Ge&&!Ge.done&&(te=Ee.return)&&(yield te.call(Ee))}finally{if($e)throw $e.error}}_e.complete()})})(Ce,_e).catch(Ee=>_e.error(Ee))})}},6451:(ut,Ae,P)=>{P.d(Ae,{T:()=>ge});var p=P(8189),Y=P(8421),O=P(515),le=P(7669),X=P(8996);function ge(...se){const fe=(0,le.yG)(se),ce=(0,le._6)(se,1/0),$=se;return $.length?1===$.length?(0,Y.Xf)($[0]):(0,p.J)(ce)((0,X.D)($,fe)):O.E}},5403:(ut,Ae,P)=>{P.d(Ae,{x:()=>Y});var p=P(2961);function Y(le,X,ge,se,fe){return new O(le,X,ge,se,fe)}class O extends p.Lv{constructor(X,ge,se,fe,ce,$){super(X),this.onFinalize=ce,this.shouldUnsubscribe=$,this._next=ge?function(H){try{ge(H)}catch(J){X.error(J)}}:super._next,this._error=fe?function(H){try{fe(H)}catch(J){X.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch(H){X.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(ut,Ae,P)=>{P.d(Ae,{U:()=>O});var p=P(4482),Y=P(5403);function O(le,X){return(0,p.e)((ge,se)=>{let fe=0;ge.subscribe((0,Y.x)(se,ce=>{se.next(le.call(X,ce,fe++))}))})}},8189:(ut,Ae,P)=>{P.d(Ae,{J:()=>O});var p=P(5577),Y=P(4671);function O(le=1/0){return(0,p.z)(Y.y,le)}},5577:(ut,Ae,P)=>{P.d(Ae,{z:()=>fe});var p=P(4004),Y=P(8421),O=P(4482),le=P(9672),X=P(5403),se=P(576);function fe(ce,$,H=1/0){return(0,se.m)($)?fe((J,We)=>(0,p.U)((Se,Oe)=>$(J,Se,We,Oe))((0,Y.Xf)(ce(J,We))),H):("number"==typeof $&&(H=$),(0,O.e)((J,We)=>function ge(ce,$,H,J,We,Se,Oe,Ve){const pe=[];let be=0,tt=0,Ye=!1;const Ce=()=>{Ye&&!pe.length&&!be&&$.complete()},_e=Ge=>be<J?Ee(Ge):pe.push(Ge),Ee=Ge=>{Se&&$.next(Ge),be++;let $e=!1;(0,Y.Xf)(H(Ge,tt++)).subscribe((0,X.x)($,te=>{null==We||We(te),Se?_e(te):$.next(te)},()=>{$e=!0},void 0,()=>{if($e)try{for(be--;pe.length&&be<J;){const te=pe.shift();Oe?(0,le.f)($,Oe,()=>Ee(te)):Ee(te)}Ce()}catch(te){$.error(te)}}))};return ce.subscribe((0,X.x)($,_e,()=>{Ye=!0,Ce()})),()=>{null==Ve||Ve()}}(J,We,ce,H)))}},5363:(ut,Ae,P)=>{P.d(Ae,{Q:()=>le});var p=P(9672),Y=P(4482),O=P(5403);function le(X,ge=0){return(0,Y.e)((se,fe)=>{se.subscribe((0,O.x)(fe,ce=>(0,p.f)(fe,X,()=>fe.next(ce),ge),()=>(0,p.f)(fe,X,()=>fe.complete(),ge),ce=>(0,p.f)(fe,X,()=>fe.error(ce),ge)))})}},3099:(ut,Ae,P)=>{P.d(Ae,{B:()=>ge});var p=P(8996),Y=P(5698),O=P(7579),le=P(2961),X=P(4482);function ge(fe={}){const{connector:ce=(()=>new O.x),resetOnError:$=!0,resetOnComplete:H=!0,resetOnRefCountZero:J=!0}=fe;return We=>{let Se=null,Oe=null,Ve=null,pe=0,be=!1,tt=!1;const Ye=()=>{null==Oe||Oe.unsubscribe(),Oe=null},Ce=()=>{Ye(),Se=Ve=null,be=tt=!1},_e=()=>{const Ee=Se;Ce(),null==Ee||Ee.unsubscribe()};return(0,X.e)((Ee,Ge)=>{pe++,!tt&&!be&&Ye();const $e=Ve=null!=Ve?Ve:ce();Ge.add(()=>{pe--,0===pe&&!tt&&!be&&(Oe=se(_e,J))}),$e.subscribe(Ge),Se||(Se=new le.Hp({next:te=>$e.next(te),error:te=>{tt=!0,Ye(),Oe=se(Ce,$,te),$e.error(te)},complete:()=>{be=!0,Ye(),Oe=se(Ce,H),$e.complete()}}),(0,p.D)(Ee).subscribe(Se))})(We)}}function se(fe,ce,...$){return!0===ce?(fe(),null):!1===ce?null:ce(...$).pipe((0,Y.q)(1)).subscribe(()=>fe())}},9468:(ut,Ae,P)=>{P.d(Ae,{R:()=>Y});var p=P(4482);function Y(O,le=0){return(0,p.e)((X,ge)=>{ge.add(O.schedule(()=>X.subscribe(ge),le))})}},5698:(ut,Ae,P)=>{P.d(Ae,{q:()=>le});var p=P(515),Y=P(4482),O=P(5403);function le(X){return X<=0?()=>p.E:(0,Y.e)((ge,se)=>{let fe=0;ge.subscribe((0,O.x)(se,ce=>{++fe<=X&&(se.next(ce),X<=fe&&se.complete())}))})}},8505:(ut,Ae,P)=>{P.d(Ae,{b:()=>X});var p=P(576),Y=P(4482),O=P(5403),le=P(4671);function X(ge,se,fe){const ce=(0,p.m)(ge)||se||fe?{next:ge,error:se,complete:fe}:ge;return ce?(0,Y.e)(($,H)=>{var J;null===(J=ce.subscribe)||void 0===J||J.call(ce);let We=!0;$.subscribe((0,O.x)(H,Se=>{var Oe;null===(Oe=ce.next)||void 0===Oe||Oe.call(ce,Se),H.next(Se)},()=>{var Se;We=!1,null===(Se=ce.complete)||void 0===Se||Se.call(ce),H.complete()},Se=>{var Oe;We=!1,null===(Oe=ce.error)||void 0===Oe||Oe.call(ce,Se),H.error(Se)},()=>{var Se,Oe;We&&(null===(Se=ce.unsubscribe)||void 0===Se||Se.call(ce)),null===(Oe=ce.finalize)||void 0===Oe||Oe.call(ce)}))}):le.y}},4408:(ut,Ae,P)=>{P.d(Ae,{o:()=>X});var p=P(727);class Y extends p.w0{constructor(se,fe){super()}schedule(se,fe=0){return this}}const O={setInterval(ge,se,...fe){const{delegate:ce}=O;return(null==ce?void 0:ce.setInterval)?ce.setInterval(ge,se,...fe):setInterval(ge,se,...fe)},clearInterval(ge){const{delegate:se}=O;return((null==se?void 0:se.clearInterval)||clearInterval)(ge)},delegate:void 0};var le=P(8737);class X extends Y{constructor(se,fe){super(se,fe),this.scheduler=se,this.work=fe,this.pending=!1}schedule(se,fe=0){if(this.closed)return this;this.state=se;const ce=this.id,$=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId($,ce,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId($,this.id,fe),this}requestAsyncId(se,fe,ce=0){return O.setInterval(se.flush.bind(se,this),ce)}recycleAsyncId(se,fe,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return fe;O.clearInterval(fe)}execute(se,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(se,fe);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,fe){let $,ce=!1;try{this.work(se)}catch(H){ce=!0,$=H||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:se,scheduler:fe}=this,{actions:ce}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(ce,this),null!=se&&(this.id=this.recycleAsyncId(fe,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Ae,P)=>{P.d(Ae,{v:()=>O});var p=P(6063);class Y{constructor(X,ge=Y.now){this.schedulerActionCtor=X,this.now=ge}schedule(X,ge=0,se){return new this.schedulerActionCtor(this,X).schedule(se,ge)}}Y.now=p.l.now;class O extends Y{constructor(X,ge=Y.now){super(X,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:ge}=this;if(this._active)return void ge.push(X);let se;this._active=!0;do{if(se=X.execute(X.state,X.delay))break}while(X=ge.shift());if(this._active=!1,se){for(;X=ge.shift();)X.unsubscribe();throw se}}}},4986:(ut,Ae,P)=>{P.d(Ae,{z:()=>O});var p=P(4408);const O=new(P(7565).v)(p.o)},6063:(ut,Ae,P)=>{P.d(Ae,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(ut,Ae,P)=>{P.d(Ae,{z:()=>p});const p={setTimeout(Y,O,...le){const{delegate:X}=p;return(null==X?void 0:X.setTimeout)?X.setTimeout(Y,O,...le):setTimeout(Y,O,...le)},clearTimeout(Y){const{delegate:O}=p;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(ut,Ae,P)=>{P.d(Ae,{h:()=>Y});const Y=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Ae,P)=>{P.d(Ae,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ut,Ae,P)=>{P.d(Ae,{_6:()=>ge,jO:()=>le,yG:()=>X});var p=P(576);function O(se){return se[se.length-1]}function le(se){return(0,p.m)(O(se))?se.pop():void 0}function X(se){return function Y(se){return se&&(0,p.m)(se.schedule)}(O(se))?se.pop():void 0}function ge(se,fe){return"number"==typeof O(se)?se.pop():fe}},8737:(ut,Ae,P)=>{function p(Y,O){if(Y){const le=Y.indexOf(O);0<=le&&Y.splice(le,1)}}P.d(Ae,{P:()=>p})},3888:(ut,Ae,P)=>{function p(Y){const le=Y(X=>{Error.call(X),X.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}P.d(Ae,{d:()=>p})},2806:(ut,Ae,P)=>{P.d(Ae,{x:()=>O,O:()=>le});var p=P(2416);let Y=null;function O(X){if(p.v.useDeprecatedSynchronousErrorHandling){const ge=!Y;if(ge&&(Y={errorThrown:!1,error:null}),X(),ge){const{errorThrown:se,error:fe}=Y;if(Y=null,se)throw fe}}else X()}function le(X){p.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=X)}},9672:(ut,Ae,P)=>{function p(Y,O,le,X=0,ge=!1){const se=O.schedule(function(){le(),ge?Y.add(this.schedule(null,X)):this.unsubscribe()},X);if(Y.add(se),!ge)return se}P.d(Ae,{f:()=>p})},4671:(ut,Ae,P)=>{function p(Y){return Y}P.d(Ae,{y:()=>p})},1144:(ut,Ae,P)=>{P.d(Ae,{z:()=>p});const p=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(ut,Ae,P)=>{P.d(Ae,{D:()=>Y});var p=P(576);function Y(O){return Symbol.asyncIterator&&(0,p.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(ut,Ae,P)=>{function p(Y){return"function"==typeof Y}P.d(Ae,{m:()=>p})},3670:(ut,Ae,P)=>{P.d(Ae,{c:()=>O});var p=P(8822),Y=P(576);function O(le){return(0,Y.m)(le[p.L])}},6495:(ut,Ae,P)=>{P.d(Ae,{T:()=>O});var p=P(2202),Y=P(576);function O(le){return(0,Y.m)(null==le?void 0:le[p.h])}},8239:(ut,Ae,P)=>{P.d(Ae,{t:()=>Y});var p=P(576);function Y(O){return(0,p.m)(null==O?void 0:O.then)}},3260:(ut,Ae,P)=>{P.d(Ae,{Q:()=>O,L:()=>le});var p=P(655),Y=P(576);function O(X){return(0,p.FC)(this,arguments,function*(){const se=X.getReader();try{for(;;){const{value:fe,done:ce}=yield(0,p.qq)(se.read());if(ce)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(fe)}}finally{se.releaseLock()}})}function le(X){return(0,Y.m)(null==X?void 0:X.getReader)}},4482:(ut,Ae,P)=>{P.d(Ae,{A:()=>Y,e:()=>O});var p=P(576);function Y(le){return(0,p.m)(null==le?void 0:le.lift)}function O(le){return X=>{if(Y(X))return X.lift(function(ge){try{return le(ge,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ut,Ae,P)=>{P.d(Ae,{h:()=>O});var p=P(2416),Y=P(3410);function O(le){Y.z.setTimeout(()=>{const{onUnhandledError:X}=p.v;if(!X)throw le;X(le)})}},4532:(ut,Ae,P)=>{function p(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ae,{z:()=>p})},655:(ut,Ae,P)=>{function le(W,ie){var me={};for(var oe in W)Object.prototype.hasOwnProperty.call(W,oe)&&ie.indexOf(oe)<0&&(me[oe]=W[oe]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(oe=Object.getOwnPropertySymbols(W);Re<oe.length;Re++)ie.indexOf(oe[Re])<0&&Object.prototype.propertyIsEnumerable.call(W,oe[Re])&&(me[oe[Re]]=W[oe[Re]])}return me}function fe(W,ie,me,oe){return new(me||(me=Promise))(function(ue,At){function Xt(vt){try{lt(oe.next(vt))}catch(cn){At(cn)}}function Ln(vt){try{lt(oe.throw(vt))}catch(cn){At(cn)}}function lt(vt){vt.done?ue(vt.value):function Re(ue){return ue instanceof me?ue:new me(function(At){At(ue)})}(vt.value).then(Xt,Ln)}lt((oe=oe.apply(W,ie||[])).next())})}function pe(W){return this instanceof pe?(this.v=W,this):new pe(W)}function be(W,ie,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,oe=me.apply(W,ie||[]),ue=[];return Re={},At("next"),At("throw"),At("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function At(dn){oe[dn]&&(Re[dn]=function(xi){return new Promise(function(on,ds){ue.push([dn,xi,on,ds])>1||Xt(dn,xi)})})}function Xt(dn,xi){try{!function Ln(dn){dn.value instanceof pe?Promise.resolve(dn.value.v).then(lt,vt):cn(ue[0][2],dn)}(oe[dn](xi))}catch(on){cn(ue[0][3],on)}}function lt(dn){Xt("next",dn)}function vt(dn){Xt("throw",dn)}function cn(dn,xi){dn(xi),ue.shift(),ue.length&&Xt(ue[0][0],ue[0][1])}}function Ye(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,ie=W[Symbol.asyncIterator];return ie?ie.call(W):(W=function J(W){var ie="function"==typeof Symbol&&Symbol.iterator,me=ie&&W[ie],oe=0;if(me)return me.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&oe>=W.length&&(W=void 0),{value:W&&W[oe++],done:!W}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),me={},oe("next"),oe("throw"),oe("return"),me[Symbol.asyncIterator]=function(){return this},me);function oe(ue){me[ue]=W[ue]&&function(At){return new Promise(function(Xt,Ln){!function Re(ue,At,Xt,Ln){Promise.resolve(Ln).then(function(lt){ue({value:lt,done:Xt})},At)}(Xt,Ln,(At=W[ue](At)).done,At.value)})}}}P.d(Ae,{_T:()=>le,mG:()=>fe,qq:()=>pe,FC:()=>be,KL:()=>Ye})},5e3:(ut,Ae,P)=>{P.d(Ae,{deG:()=>Yp,tb:()=>kc,AFp:()=>Pc,ip1:()=>Ca,CZH:()=>jm,hGG:()=>wT,z2F:()=>Qt,sBO:()=>_o,Sil:()=>Ob,_Vd:()=>Mm,EJc:()=>d0,SBq:()=>ah,qLn:()=>Pr,vpe:()=>re,tBr:()=>jr,XFs:()=>dt,OlP:()=>Nn,zs3:()=>lo,ZZ4:()=>A0,aQg:()=>S0,soG:()=>Gm,YKP:()=>Jf,h0i:()=>Cc,PXZ:()=>Ub,R0b:()=>yo,FiY:()=>vi,Lbi:()=>Hm,g9A:()=>$m,Qsj:()=>gb,FYo:()=>Yf,JOm:()=>ae,tp0:()=>Fo,Rgc:()=>dh,dDg:()=>vh,q4F:()=>uh,GfV:()=>xm,s_b:()=>km,ifc:()=>qt,eFA:()=>ul,G48:()=>Fn,Gpc:()=>H,X6Q:()=>si,_c5:()=>ET,VLi:()=>Dr,c2e:()=>c0,zSh:()=>kg,wAp:()=>bt,vHH:()=>Oe,cg1:()=>Tv,kL8:()=>ym,dqk:()=>$t,sIi:()=>pc,CqO:()=>ww,QGY:()=>ov,F4k:()=>av,RDi:()=>_s,AaK:()=>fe,qOj:()=>Sf,TTD:()=>Io,_Bn:()=>Gv,xp6:()=>oI,uIk:()=>mc,ekj:()=>hv,Suo:()=>su,Xpm:()=>Vt,lG2:()=>Yt,Yz7:()=>on,cJS:()=>en,oAB:()=>Q,Yjl:()=>Tr,Y36:()=>Hd,_UZ:()=>iv,qZA:()=>Qg,TgZ:()=>Nf,n5z:()=>ud,LFG:()=>Je,$8M:()=>oa,$Z:()=>Qu,NdJ:()=>Xg,CRH:()=>Qn,ALo:()=>Om,lcZ:()=>ke,xi3:()=>dr,Hsn:()=>XI,F$t:()=>JI,Q6J:()=>rv,VKq:()=>Kv,iGM:()=>br,LSH:()=>$u,YNc:()=>K_,_uU:()=>sm,Oqu:()=>om});var p=P(7579),Y=P(727),O=P(8306),le=P(6451),X=P(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function se(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ce(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=ge({__forward_ref__:ge});function H(s){return s.__forward_ref__=H,s.toString=function(){return fe(this())},s}function J(s){return We(s)?s():s}function We(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===H}class Oe extends Error{constructor(o,a){super(function Ve(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function pe(s){return"string"==typeof s?s:null==s?"":String(s)}function be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():pe(s)}function _e(s,o){const a=o?` in ${o}`:"";throw new Oe(-201,`No provider for ${be(s)} found${a}`)}function lt(s,o){null==s&&function vt(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function on(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function en(s){return{providers:s.providers||[],imports:s.imports||[]}}function Gt(s){return gr(s,Ki)||gr(s,hs)}function gr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Fr(s){return s&&(s.hasOwnProperty(Lr)||s.hasOwnProperty(fs))?s[Lr]:null}const Ki=ge({\u0275prov:ge}),Lr=ge({\u0275inj:ge}),hs=ge({ngInjectableDef:ge}),fs=ge({ngInjectorDef:ge});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let Zr;function Xn(s){const o=Zr;return Zr=s,o}function li(s,o,a){const l=Gt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&dt.Optional?null:void 0!==o?o:void _e(fe(s),"Injector")}function wn(s){return{toString:s}.toString()}var or=(()=>((or=or||{})[or.OnPush=0]="OnPush",or[or.Default=1]="Default",or))(),qt=(()=>{return(s=qt||(qt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",qt;var s})();const ot="undefined"!=typeof globalThis&&globalThis,It="undefined"!=typeof window&&window,mr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$t=ot||"undefined"!=typeof global&&global||It||mr,yr={},ht=[],Cr=ge({\u0275cmp:ge}),Bt=ge({\u0275dir:ge}),Qe=ge({\u0275pipe:ge}),Te=ge({\u0275mod:ge}),Xe=ge({\u0275fac:ge}),ft=ge({__NG_ELEMENT_ID__:ge});let jt=0;function Vt(s){return wn(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===or.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||ht,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||qt.Emulated,id:"c",styles:s.styles||ht,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,g=s.features,v=s.pipes;return l.id+=jt++,l.inputs=Et(s.inputs,a),l.outputs=Et(s.outputs),g&&g.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(V):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(q):null,l})}function V(s){return zt(s)||function Mn(s){return s[Bt]||null}(s)}function q(s){return function Ot(s){return s[Qe]||null}(s)}const de={};function Q(s){return wn(()=>{const o={type:s.type,bootstrap:s.bootstrap||ht,declarations:s.declarations||ht,imports:s.imports||ht,exports:s.exports||ht,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(de[s.id]=s.type),o})}function Et(s,o){if(null==s)return yr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,o&&(o[d]=g)}return a}const Yt=Vt;function Tr(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function zt(s){return s[Cr]||null}function fn(s,o){const a=s[Te]||null;if(!a&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return a}function Ri(s){return Array.isArray(s)&&"object"==typeof s[1]}function di(s){return Array.isArray(s)&&!0===s[1]}function $c(s){return 0!=(8&s.flags)}function $s(s){return 2==(2&s.flags)}function gu(s){return 1==(1&s.flags)}function Yr(s){return null!==s.template}function Lh(s){return 0!=(512&s[2])}function Qr(s,o){return s.hasOwnProperty(Xe)?s[Xe]:null}class Yo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Io(){return Fa}function Fa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Wp),Wc}function Wc(){const s=qs(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===yr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Wp(s,o,a,l){const d=qs(s)||function hi(s,o){return s[Ar]=o}(s,{previous:yr,current:null}),g=d.current||(d.current={}),v=d.previous,w=this.declaredInputs[a],D=v[w];g[w]=new Yo(D&&D.currentValue,o,v===yr),s[l]=o}Io.ngInherit=!0;const Ar="__ngSimpleChanges__";function qs(s){return s[Ar]||null}let bu;function _s(s){bu=s}function yn(s){return!!s.listen}const Qo={createRenderer:(s,o)=>function La(){return void 0!==bu?bu:"undefined"!=typeof document?document:void 0}()};function ln(s){for(;Array.isArray(s);)s=s[0];return s}function To(s,o){return ln(o[s])}function Sr(s,o){return ln(o[s.index])}function Va(s,o){return s.data[o]}function Oi(s,o){return s[o]}function Mr(s,o){const a=o[s];return Ri(a)?a:a[0]}function Ws(s){return 4==(4&s[2])}function vs(s){return 128==(128&s[2])}function Jr(s,o){return null==o?null:s[o]}function Ks(s){s[18]=0}function Zs(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const pt={lFrame:So(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Au(){return pt.bindingsEnabled}function De(){return pt.lFrame.lView}function Ut(){return pt.lFrame.tView}function bn(){let s=Jo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Jo(){return pt.lFrame.currentTNode}function Xr(s,o){const a=pt.lFrame;a.currentTNode=s,a.isParent=o}function Dl(){return pt.lFrame.isParent}function Il(){pt.lFrame.isParent=!1}function Su(){return pt.isInCheckNoChangesMode}function Ys(s){pt.isInCheckNoChangesMode=s}function Er(){const s=pt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Qs(){return pt.lFrame.bindingIndex++}function Nu(s,o){const a=pt.lFrame;a.bindingIndex=a.bindingRootIndex=s,Ba(o)}function Ba(s){pt.lFrame.currentDirectiveIndex=s}function Sl(){return pt.lFrame.currentQueryIndex}function Ml(s){pt.lFrame.currentQueryIndex=s}function Jc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function xl(s,o,a){if(a&dt.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||a&dt.Host||(d=Jc(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const l=pt.lFrame=Xc();return l.currentTNode=o,l.lView=s,!0}function Ao(s){const o=Xc(),a=s[1];pt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Xc(){const s=pt.lFrame,o=null===s?null:s.child;return null===o?So(s):o}function So(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function ed(){const s=pt.lFrame;return pt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const td=ed;function Mo(){const s=ed();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function xr(){return pt.lFrame.selectedIndex}function Xs(s){pt.lFrame.selectedIndex=s}function xn(){const s=pt.lFrame;return Va(s.tView,s.selectedIndex)}function Es(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:A,ngOnDestroy:x}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),w&&((s.contentHooks||(s.contentHooks=[])).push(a,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,w)),D&&(s.viewHooks||(s.viewHooks=[])).push(-a,D),A&&((s.viewHooks||(s.viewHooks=[])).push(a,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,A)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(a,x)}}function ja(s,o,a){nd(s,o,3,a)}function Ru(s,o,a,l){(3&s[2])===a&&nd(s,o,a,l)}function zn(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function nd(s,o,a,l){const g=null!=l?l:-1,v=o.length-1;let w=0;for(let D=void 0!==l?65535&s[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(w=o[D],null!=l&&w>=l)break}else o[D]<0&&(s[18]+=65536),(w<g||-1==g)&&(Kp(s,a,o,D),s[18]=(4294901760&s[18])+D+2),D++}function Kp(s,o,a,l){const d=a[l]<0,g=a[l+1],w=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class ta{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function mt(s,o,a){const l=yn(s);let d=0;for(;d<a.length;){const g=a[d];if("number"==typeof g){if(0!==g)break;d++;const v=a[d++],w=a[d++],D=a[d++];l?s.setAttribute(o,w,D,v):o.setAttributeNS(v,w,D)}else{const v=g,w=a[++d];ei(v)?l&&s.setProperty(o,v,w):l?s.setAttribute(o,v,w):o.setAttribute(v,w),d++}}return d}function lr(s){return 3===s||4===s||6===s}function ei(s){return 64===s.charCodeAt(0)}function Ur(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||na(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function na(s,o,a,l,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}function sd(s){return-1!==s}function gn(s){return 32767&s}function ki(s,o){let a=function Hh(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Ou=!0;function pi(s){const o=Ou;return Ou=s,o}let Fl=0;function Wn(s,o){const a=ra(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,bs(l.data,s),bs(o,null),bs(l.blueprint,null));const d=gi(s,o),g=s.injectorIndex;if(sd(d)){const v=gn(d),w=ki(d,o),D=w[1].data;for(let A=0;A<8;A++)o[g+A]=w[v+A]|D[v+A]}return o[g+8]=d,g}function bs(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ra(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function gi(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const g=d[1],v=g.type;if(l=2===v?g.declTNode:1===v?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function eo(s,o,a){!function No(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ft)&&(l=a[ft]),null==l&&(l=a[ft]=Fl++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Qi(s,o,a){if(a&dt.Optional)return s;_e(o,"NodeInjector")}function Ll(s,o,a,l){if(a&dt.Optional&&void 0===l&&(l=null),0==(a&(dt.Self|dt.Host))){const d=s[9],g=Xn(void 0);try{return d?d.get(o,l,a&dt.Optional):li(o,l,a&dt.Optional)}finally{Xn(g)}}return Qi(l,o,a)}function to(s,o,a,l=dt.Default,d){if(null!==s){const g=function ia(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ft)?s[ft]:void 0;return"number"==typeof o?o>=0?255&o:Vl:o}(a);if("function"==typeof g){if(!xl(o,s,l))return l&dt.Host?Qi(d,a,l):Ll(o,a,l,d);try{const v=g(l);if(null!=v||l&dt.Optional)return v;_e(a)}finally{td()}}else if("number"==typeof g){let v=null,w=ra(s,o),D=-1,A=l&dt.Host?o[16][6]:null;for((-1===w||l&dt.SkipSelf)&&(D=-1===w?gi(s,o):o[w+8],-1!==D&&Br(l,!1)?(v=o[1],w=gn(D),o=ki(D,o)):w=-1);-1!==w;){const x=o[1];if(sa(g,w,x.data)){const k=ad(w,o,a,v,l,A);if(k!==Ji)return k}D=o[w+8],-1!==D&&Br(l,o[1].data[w+8]===A)&&sa(g,w,o)?(v=x,w=gn(D),o=ki(D,o)):w=-1}}}return Ll(o,a,l,d)}const Ji={};function Vl(){return new Li(bn(),De())}function ad(s,o,a,l,d,g){const v=o[1],w=v.data[s+8],x=Ro(w,v,a,null==l?$s(w)&&Ou:l!=v&&0!=(3&w.type),d&dt.Host&&g===w);return null!==x?Fi(o,v,x,w):Ji}function Ro(s,o,a,l,d){const g=s.providerIndexes,v=o.data,w=1048575&g,D=s.directiveStart,x=g>>20,B=d?w+x:s.directiveEnd;for(let Z=l?w:w+x;Z<B;Z++){const ye=v[Z];if(Z<D&&a===ye||Z>=D&&ye.type===a)return Z}if(d){const Z=v[D];if(Z&&Yr(Z)&&Z.type===a)return D}return null}function Fi(s,o,a,l){let d=s[a];const g=o.data;if(function rd(s){return s instanceof ta}(d)){const v=d;v.resolving&&function tt(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${s}${a}`)}(be(g[a]));const w=pi(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?Xn(v.injectImpl):null;xl(s,l,dt.Default);try{d=s[a]=v.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function Ol(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(l){const v=Fa(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==D&&Xn(D),pi(w),v.resolving=!1,td()}}return d}function sa(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Br(s,o){return!(s&dt.Self||s&dt.Host&&o)}class Li{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return to(this._tNode,this._lView,o,l,a)}}function ud(s){return wn(()=>{const o=s.prototype.constructor,a=o[Xe]||$n(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const g=d[Xe]||$n(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function $n(s){return We(s)?()=>{const o=$n(J(s));return o&&o()}:Qr(s)}function oa(s){return function mi(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(lr(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(bn(),s)}const aa="__parameters__";function An(s,o,a){return wn(()=>{const l=function es(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...g){if(this instanceof d)return l.apply(this,g),this;const v=new d(...g);return w.annotation=v,w;function w(D,A,x){const k=D.hasOwnProperty(aa)?D[aa]:Object.defineProperty(D,aa,{value:[]})[aa];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(v),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Nn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=on({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Yp=new Nn("AnalyzeForEntryComponents");function Rr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Rr(l,o)):o!==s&&o.push(l)}return o}function yi(s,o){s.forEach(a=>Array.isArray(a)?yi(a,o):o(a))}function jl(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Is(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Ui(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}function tr(s,o,a){let l=so(s,o);return l>=0?s[1|l]=a:(l=~l,function $l(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function ql(s,o){const a=so(s,o);if(a>=0)return s[1|a]}function so(s,o){return function Oo(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const g=l+(d-l>>1),v=s[g<<a];if(o===v)return g<<a;v>o?d=g:l=g+1}return~(d<<a)}(s,o,1)}const Po={},la="__NG_DI_FLAG__",Lu="ngTempTokenPath",C=/\n/gm,L="__source",K=ge({provide:String,useValue:ge});let ee;function Me(s){const o=ee;return ee=s,o}function xe(s,o=dt.Default){if(void 0===ee)throw new Oe(203,"");return null===ee?li(s,void 0,o):ee.get(s,o&dt.Optional?null:void 0,o)}function Je(s,o=dt.Default){return(function sr(){return Zr}()||xe)(J(s),o)}const Pt=Je;function Mt(s){const o=[];for(let a=0;a<s.length;a++){const l=J(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Oe(900,"");let d,g=dt.Default;for(let v=0;v<l.length;v++){const w=l[v],D=Rn(w);"number"==typeof D?-1===D?d=w.token:g|=D:d=w}o.push(Je(d,g))}else o.push(Je(l))}return o}function Kn(s,o){return s[la]=o,s.prototype[la]=o,s}function Rn(s){return s[la]}const jr=Kn(An("Inject",s=>({token:s})),-1),vi=Kn(An("Optional"),8),Fo=Kn(An("SkipSelf"),4);class _d{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function oo(s){return s instanceof _d?s.changingThisBreaksApplicationSecurity:s}const ao=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Qh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var rn=(()=>((rn=rn||{})[rn.NONE=0]="NONE",rn[rn.HTML=1]="HTML",rn[rn.STYLE=2]="STYLE",rn[rn.SCRIPT=3]="SCRIPT",rn[rn.URL=4]="URL",rn[rn.RESOURCE_URL=5]="RESOURCE_URL",rn))();function $u(s){const o=function pa(){const s=De();return s&&s[12]}();return o?o.sanitize(rn.URL,s)||"":function ha(s,o){const a=function Uu(s){return s instanceof _d&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?oo(s):function Bu(s){return(s=String(s)).match(ao)||s.match(Qh)?s:"unsafe:"+s}(pe(s))}const uf="__ngContext__";function $r(s,o){s[uf]=o}function lf(s){const o=function za(s){return s[uf]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Za(s){return s.ngOriginalError}function hg(s,...o){s.error(...o)}class Pr{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function qy(s){return s&&s.ngErrorLogger||hg}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Za(o);for(;a&&Za(a);)a=Za(a);return a||null}}const Zy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($t))();function m(s){return s instanceof Function?s():s}var ae=(()=>((ae=ae||{})[ae.Important=1]="Important",ae[ae.DashCase=2]="DashCase",ae))();function et(s,o){return undefined(s,o)}function On(s){const o=s[3];return di(o)?o[3]:o}function Hu(s){return yf(s[13])}function Gu(s){return yf(s[4])}function yf(s){for(;null!==s&&!di(s);)s=s[4];return s}function ga(s,o,a,l,d){if(null!=l){let g,v=!1;di(l)?g=l:Ri(l)&&(v=!0,l=l[0]);const w=ln(l);0===s&&null!==a?null==d?n_(o,a,w):Ts(o,a,w,d||null,!0):1===s&&null!==a?Ts(o,a,w,d||null,!0):2===s?function o_(s,o,a){const l=ma(s,o);l&&function JD(s,o,a,l){yn(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,w,v):3===s&&o.destroyNode(w),null!=g&&function fE(s,o,a,l,d){const g=a[7];g!==ln(a)&&ga(o,s,l,g,d);for(let w=10;w<a.length;w++){const D=a[w];yg(D[1],D,s,o,l,g)}}(o,s,g,a,d)}}function Td(s,o,a){if(yn(s))return s.createElement(o,a);{const l=null!==a?function wu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function iE(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Zs(d,-1)),a.splice(l,1)}function Xy(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&iE(d,l),o>0&&(s[a-1][4]=l[4]);const g=Is(s,10+o);!function wi(s,o){yg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=g[19];null!==v&&v.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function e_(s,o){if(!(256&o[2])){const a=o[11];yn(a)&&a.destroyNode&&yg(s,o,a,3,null,null),function Jy(s){let o=s[13];if(!o)return t_(s[1],s);for(;o;){let a=null;if(Ri(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Ri(o)&&t_(o[1],o),o=o[3];null===o&&(o=s),Ri(o)&&t_(o[1],o),a=o&&o[4]}o=a}}(o)}}function t_(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function oE(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof ta)){const g=a[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=d[g[v]],D=g[v+1];try{D.call(w)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function sE(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+1],w="function"==typeof v?v(o):ln(o[v]),D=l[d=a[g+2]],A=a[g+3];"boolean"==typeof A?w.removeEventListener(a[g],D,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),g+=2}else{const v=l[d=a[g+1]];a[g].call(v)}if(null!==l){for(let g=d+1;g<l.length;g++)l[g]();o[7]=null}}(s,o),1===o[1].type&&yn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&di(o[3])){a!==o[3]&&iE(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function gg(s,o,a){return function QD(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===qt.None||d===qt.Emulated)return null}return Sr(l,a)}(s,o.parent,a)}function Ts(s,o,a,l,d){yn(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function n_(s,o,a){yn(s)?s.appendChild(o,a):o.appendChild(a)}function aE(s,o,a,l,d){null!==l?Ts(s,o,a,l,d):n_(s,o,a)}function ma(s,o){return yn(s)?s.parentNode(o):o.parentNode}function uE(s,o,a){return r_(s,o,a)}let r_=function lE(s,o,a){return 40&s.type?Sr(s,a):null};function mg(s,o,a,l){const d=gg(s,l,o),g=o[11],w=uE(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)aE(g,d,a[D],w,!1);else aE(g,d,a,w,!1)}function Sd(s,o){if(null!==o){const a=o.type;if(3&a)return Sr(o,s);if(4&a)return s_(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return Sd(s,l);{const d=s[o.index];return di(d)?s_(-1,d):ln(d)}}if(32&a)return et(o,s)()||ln(s[o.index]);{const l=dE(s,o);return null!==l?Array.isArray(l)?l[0]:Sd(On(s[16]),l):Sd(s,o.next)}}return null}function dE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function s_(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Sd(l,d)}return o[7]}function a_(s,o,a,l,d,g,v){for(;null!=a;){const w=l[a.index],D=a.type;if(v&&0===o&&(w&&$r(ln(w),l),a.flags|=4),64!=(64&a.flags))if(8&D)a_(s,o,a.child,l,d,g,!1),ga(o,s,d,w,g);else if(32&D){const A=et(a,l);let x;for(;x=A();)ga(o,s,d,x,g);ga(o,s,d,w,g)}else 16&D?Ef(s,o,l,a,d,g):ga(o,s,d,w,g);a=v?a.projectionNext:a.next}}function yg(s,o,a,l,d,g){a_(a,l,s.firstChild,o,d,g,!1)}function Ef(s,o,a,l,d,g){const v=a[16],D=v[6].projection[l.projection];if(Array.isArray(D))for(let A=0;A<D.length;A++)ga(o,s,d,D[A],g);else a_(s,o,D,v[3],d,g,!0)}function pE(s,o,a){yn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function _g(s,o,a){yn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function tI(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}a=d+1}}const gE="ng-template";function nI(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==tI(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Pn(s){return 4===s.type&&s.value!==gE}function lM(s,o,a){return o===(4!==s.type||a?s.value:gE)}function cM(s,o,a){let l=4;const d=s.attrs||[],g=function fM(s){for(let o=0;o<s.length;o++)if(lr(s[o]))return o;return s.length}(d);let v=!1;for(let w=0;w<o.length;w++){const D=o[w];if("number"!=typeof D){if(!v)if(4&l){if(l=2|1&l,""!==D&&!lM(s,D,a)||""===D&&1===o.length){if(ya(l))return!1;v=!0}}else{const A=8&l?D:o[++w];if(8&l&&null!==s.attrs){if(!nI(s.attrs,A,a)){if(ya(l))return!1;v=!0}continue}const k=dM(8&l?"class":D,d,Pn(s),a);if(-1===k){if(ya(l))return!1;v=!0;continue}if(""!==A){let B;B=k>g?"":d[k+1].toLowerCase();const Z=8&l?B:null;if(Z&&-1!==tI(Z,A,0)||2&l&&A!==B){if(ya(l))return!1;v=!0}}}}else{if(!v&&!ya(l)&&!ya(D))return!1;if(v&&ya(D))continue;v=!1,l=D|1&l}}return ya(l)||v}function ya(s){return 0==(1&s)}function dM(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function pM(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function rI(s,o,a=!1){for(let l=0;l<o.length;l++)if(cM(s,o[l],a))return!0;return!1}function gM(s,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(s.length===l.length){for(let d=0;d<s.length;d++)if(s[d]!==l[d])continue e;return!0}}return!1}function iI(s,o){return s?":not("+o.trim()+")":o}function mM(s){let o=s[0],a=1,l=2,d="",g=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const w=s[++a];d+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!ya(v)&&(o+=iI(g,d),d=""),l=v,g=g||!ya(l);a++}return""!==d&&(o+=iI(g,d)),o}const xt={};function oI(s){uc(Ut(),De(),xr()+s,Su())}function uc(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&ja(o,g,a)}else{const g=s.preOrderHooks;null!==g&&Ru(o,g,0,a)}Xs(a)}function vg(s,o){return s<<17|o<<2}function Hi(s){return s>>17&32767}function yE(s){return 2|s}function qu(s){return(131068&s)>>2}function Eg(s,o){return-131069&s|o<<2}function vE(s){return 1|s}function m_(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],g=a[l+1];if(-1!==g){const v=s.data[g];Ml(d),v.contentQueries(2,o[g],g)}}}function Rd(s,o,a,l,d,g,v,w,D,A){const x=o.blueprint.slice();return x[0]=d,x[2]=140|l,Ks(x),x[3]=x[15]=s,x[8]=a,x[10]=v||s&&s[10],x[11]=w||s&&s[11],x[12]=D||s&&s[12]||null,x[9]=A||s&&s[9]||null,x[6]=g,x[16]=2==o.type?s[16]:x,x}function _a(s,o,a,l,d){let g=s.data[o];if(null===g)g=function y_(s,o,a,l,d){const g=Jo(),v=Dl(),D=s.data[o]=function SE(s,o,a,l,d,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=D),null!==g&&(v?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D)),D}(s,o,a,l,d),function Tl(){return pt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const v=function Xo(){const s=pt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Xr(g,!0),g}function _n(s,o,a,l){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function Od(s,o,a){Ao(o);try{const l=s.viewQuery;null!==l&&x_(1,l,a);const d=s.template;null!==d&&Tg(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&m_(s,o),s.staticViewQueries&&x_(2,s.viewQuery,a);const g=s.components;null!==g&&function IE(s,o){for(let a=0;a<o.length;a++)AI(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Mo()}}function Wu(s,o,a,l){const d=o[2];if(256==(256&d))return;Ao(o);const g=Su();try{Ks(o),function Mu(s){return pt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&Tg(s,o,a,2,l);const v=3==(3&d);if(!g)if(v){const A=s.preOrderCheckHooks;null!==A&&ja(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Ru(o,A,0,null),zn(o,0)}if(function CI(s){for(let o=Hu(s);null!==o;o=Gu(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],g=d[3];0==(1024&d[2])&&Zs(g,1),d[2]|=1024}}}(o),function II(s){for(let o=Hu(s);null!==o;o=Gu(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];vs(l)&&Wu(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&m_(s,o),!g)if(v){const A=s.contentCheckHooks;null!==A&&ja(o,A)}else{const A=s.contentHooks;null!==A&&Ru(o,A,1),zn(o,1)}!function Cg(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Xs(~d);else{const g=d,v=a[++l],w=a[++l];Nu(v,g),w(2,o[g])}}}finally{Xs(-1)}}(s,o);const w=s.components;null!==w&&function DE(s,o){for(let a=0;a<o.length;a++)TI(s,o[a])}(o,w);const D=s.viewQuery;if(null!==D&&x_(2,D,l),!g)if(v){const A=s.viewCheckHooks;null!==A&&ja(o,A)}else{const A=s.viewHooks;null!==A&&Ru(o,A,2),zn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Zs(o[3],-1))}finally{Mo()}}function __(s,o,a,l){const d=o[10],g=!Su(),v=Ws(o);try{g&&!v&&d.begin&&d.begin(),v&&Od(s,o,l),Wu(s,o,a,l)}finally{g&&!v&&d.end&&d.end()}}function Tg(s,o,a,l,d){const g=xr(),v=2&l;try{Xs(-1),v&&o.length>20&&uc(s,o,20,Su()),a(l,d)}finally{Xs(g)}}function E_(s,o,a){!Au()||(function yI(s,o,a,l){const d=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||Wn(a,o),$r(l,o);const v=a.initialInputs;for(let w=d;w<g;w++){const D=s.data[w],A=Yr(D);A&&wI(o,a,D);const x=Fi(o,s,w,a);$r(x,o),null!==v&&lc(0,w-d,x,D,0,v),A&&(Mr(a.index,o)[8]=x)}}(s,o,a,Sr(a,o)),128==(128&a.flags)&&function _I(s,o,a){const l=a.directiveStart,d=a.directiveEnd,v=a.index,w=function Al(){return pt.lFrame.currentDirectiveIndex}();try{Xs(v);for(let D=l;D<d;D++){const A=s.data[D],x=o[D];Ba(D),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&I_(A,x)}}finally{Xs(-1),Ba(w)}}(s,o,a))}function Ag(s,o,a=Sr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],w=-1===v?a(o,s):s[v];s[d++]=w}}}function Sg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Mg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Mg(s,o,a,l,d,g,v,w,D,A){const x=20+l,k=x+d,B=function CE(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:xt);return a}(x,k),Z="function"==typeof A?A():A;return B[1]={type:s,blueprint:B,template:a,queries:null,viewQuery:w,declTNode:o,data:B.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:Z,incompleteFirstPass:!1}}function Df(s,o,a,l){const d=kE(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&FE(s).push(l,d.length-1))}function w_(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function D_(s,o,a,l){let d=!1;if(Au()){const g=function Ng(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];rI(a,v.selectors,!1)&&(d||(d=[]),eo(Wn(a,o),s,v.type),Yr(v)?(vI(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==g){d=!0,C_(a,s.data.length,g.length);for(let x=0;x<g.length;x++){const k=g[x];k.providersResolver&&k.providersResolver(k)}let w=!1,D=!1,A=_n(s,o,g.length,null);for(let x=0;x<g.length;x++){const k=g[x];a.mergedAttrs=Ur(a.mergedAttrs,k.hostAttrs),RE(s,a,o,A,k),EI(A,k,v),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const B=k.type.prototype;!w&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),w=!0),!D&&(B.ngOnChanges||B.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),D=!0),A++}!function b_(s,o){const l=o.directiveEnd,d=s.data,g=o.attrs,v=[];let w=null,D=null;for(let A=o.directiveStart;A<l;A++){const x=d[A],k=x.inputs,B=null===g||Pn(o)?null:bI(k,g);v.push(B),w=w_(k,A,w),D=w_(x.outputs,A,D)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=D}(s,a)}v&&function If(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new Oe(-301,!1);l.push(o[d],g)}}}(a,l,v)}return a.mergedAttrs=Ur(a.mergedAttrs,a.attrs),d}function NE(s,o,a,l,d,g){const v=g.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const D=~o.index;(function mI(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=D&&w.push(D),w.push(l,d,v)}}function I_(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function vI(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function EI(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Yr(o)&&(a[""]=s)}}function C_(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function RE(s,o,a,l,d){s.data[l]=d;const g=d.factory||(d.factory=Qr(d.type)),v=new ta(g,Yr(d),null);s.blueprint[l]=v,a[l]=v,NE(s,o,0,l,_n(s,a,d.hostVars,xt),d)}function wI(s,o,a){const l=Sr(o,s),d=Sg(a),g=s[10],v=Og(s,Rd(s,d,null,a.onPush?64:16,l,o,g,g.createRenderer(l,a),null,null));s[o.index]=v}function va(s,o,a,l,d,g){const v=Sr(s,o);!function Rg(s,o,a,l,d,g,v){if(null==g)yn(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const w=null==v?pe(g):v(g,l||"",d);yn(s)?s.setAttribute(o,d,w,a):a?o.setAttributeNS(a,d,w):o.setAttribute(d,w)}}(o[11],v,g,s.value,a,l,d)}function lc(s,o,a,l,d,g){const v=g[o];if(null!==v){const w=l.setInput;for(let D=0;D<v.length;){const A=v[D++],x=v[D++],k=v[D++];null!==w?l.setInput(a,k,A,x):a[x]=k}}}function bI(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function T_(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function TI(s,o){const a=Mr(o,s);if(vs(a)){const l=a[1];80&a[2]?Wu(l,a,l.template,a[8]):a[5]>0&&A_(a)}}function A_(s){for(let l=Hu(s);null!==l;l=Gu(l))for(let d=10;d<l.length;d++){const g=l[d];if(1024&g[2]){const v=g[1];Wu(v,g,v.template,g[8])}else g[5]>0&&A_(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Mr(a[l],s);vs(d)&&d[5]>0&&A_(d)}}function AI(s,o){const a=Mr(o,s),l=a[1];(function OE(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),Od(l,a,a[8])}function Og(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Pd(s){for(;s;){s[2]|=64;const o=On(s);if(Lh(s)&&!o)return s;s=o}return null}function S_(s,o,a){const l=o[10];l.begin&&l.begin();try{Wu(s,o,s.template,a)}catch(d){throw Ya(o,d),d}finally{l.end&&l.end()}}function M_(s){!function kd(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=lf(a),d=l[1];__(d,l,d.template,a)}}(s[8])}function x_(s,o,a){Ml(0),o(s,a)}const MI=(()=>Promise.resolve(null))();function kE(s){return s[7]||(s[7]=[])}function FE(s){return s.cleanup||(s.cleanup=[])}function Ya(s,o){const a=s[9],l=a?a.get(Pr,null):null;l&&l.handleError(o)}function N_(s,o,a,l,d){for(let g=0;g<a.length;){const v=a[g++],w=a[g++],D=o[v],A=s.data[v];null!==A.setInput?A.setInput(D,d,l,w):D[w]=d}}function Hn(s,o,a){const l=To(o,s);!function Cd(s,o,a){yn(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function jo(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?g=w:1==g?d=ce(d,w):2==g&&(l=ce(l,w+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const Pg=new Nn("INJECTOR",-1);class R_{get(o,a=Po){if(a===Po){const l=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw l.name="NullInjectorError",l}return a}}const kg=new Nn("Set Injector scope."),Fd={},LE={};let Fg;function O_(){return void 0===Fg&&(Fg=new R_),Fg}function Tf(s,o=null,a=null,l){const d=P_(s,o,a,l);return d._resolveInjectorDefTypes(),d}function P_(s,o=null,a=null,l){return new VE(s,a,o||O_(),l)}class VE{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&yi(a,w=>this.processProvider(w,o,a)),yi([o],w=>this.processInjectorType(w,[],g)),this.records.set(Pg,dc(void 0,this));const v=this.records.get(kg);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:fe(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Po,l=dt.Default){this.assertNotDestroyed();const d=Me(this),g=Xn(void 0);try{if(!(l&dt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const D=function Ug(s){return"function"==typeof s||"object"==typeof s&&s instanceof Nn}(o)&&Gt(o);w=D&&this.injectableDefInScope(D)?dc(Lg(o),Fd):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&dt.Self?O_():this.parent).get(o,a=l&dt.Optional&&a===Po?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Lu]=v[Lu]||[]).unshift(fe(o)),d)throw v;return function ca(s,o,a,l){const d=s[Lu];throw o[L]&&d.unshift(o[L]),s.message=function ko(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=fe(o);if(Array.isArray(o))d=o.map(fe).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):fe(w)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(C,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[Lu]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Xn(g),Me(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(fe(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(o,a,l){if(!(o=J(o)))return!1;let d=Fr(o);const g=null==d&&o.ngModule||void 0,v=void 0===g?o:g,w=-1!==l.indexOf(v);if(void 0!==g&&(d=Fr(g)),null==d)return!1;if(null!=d.imports&&!w){let x;l.push(v);try{yi(d.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===x&&(x=[]),x.push(k))})}finally{}if(void 0!==x)for(let k=0;k<x.length;k++){const{ngModule:B,providers:Z}=x[k];yi(Z,ye=>this.processProvider(ye,B,Z||ht))}}this.injectorDefTypes.add(v);const D=Qr(v)||(()=>new v);this.records.set(v,dc(D,Fd));const A=d.providers;if(null!=A&&!w){const x=o;yi(A,k=>this.processProvider(k,x,A))}return void 0!==g&&void 0!==o.providers}processProvider(o,a,l){let d=hc(o=J(o))?o:J(o&&o.provide);const g=function OI(s,o,a){return Vg(s)?dc(void 0,s.useValue):dc(k_(s),Fd)}(o);if(hc(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=dc(void 0,Fd,!0),v.factory=()=>Mt(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,g)}hydrate(o,a){return a.value===Fd&&(a.value=LE,a.value=a.factory()),"object"==typeof a.value&&a.value&&function L_(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=J(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Lg(s){const o=Gt(s),a=null!==o?o.factory:Qr(s);if(null!==a)return a;if(s instanceof Nn)throw new Oe(204,!1);if(s instanceof Function)return function UE(s){const o=s.length;if(o>0)throw Ui(o,"?"),new Oe(204,!1);const a=function ui(s){const o=s&&(s[Ki]||s[hs]);if(o){const a=function Fs(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Oe(204,!1)}function k_(s,o,a){let l;if(hc(s)){const d=J(s);return Qr(d)||Lg(d)}if(Vg(s))l=()=>J(s.useValue);else if(function F_(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Mt(s.deps||[]));else if(function BE(s){return!(!s||!s.useExisting)}(s))l=()=>Je(J(s.useExisting));else{const d=J(s&&(s.useClass||s.provide));if(!function $E(s){return!!s.deps}(s))return Qr(d)||Lg(d);l=()=>new d(...Mt(s.deps))}return l}function dc(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function Vg(s){return null!==s&&"object"==typeof s&&K in s}function hc(s){return"function"==typeof s}let lo=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return Tf({name:""},l,a,"");{const g=null!==(d=a.name)&&void 0!==d?d:"";return Tf({name:g},a.parent,a.providers,g)}}}return s.THROW_IF_NOT_FOUND=Po,s.NULL=new R_,s.\u0275prov=on({token:s,providedIn:"any",factory:()=>Je(Pg)}),s.__NG_ELEMENT_ID__=-1,s})();function $g(s,o){Es(lf(s)[1],bn())}function Sf(s){let o=function KE(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(Yr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Oe(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const v=s;v.inputs=H_(s.inputs),v.declaredInputs=H_(s.declaredInputs),v.outputs=H_(s.outputs);const w=d.hostBindings;w&&VI(s,w);const D=d.viewQuery,A=d.contentQueries;if(D&&LI(s,D),A&&ZE(s,A),se(s.inputs,d.inputs),se(s.declaredInputs,d.declaredInputs),se(s.outputs,d.outputs),Yr(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===Sf&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Hg(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Ur(d.hostAttrs,a=Ur(a,d.hostAttrs))}}(l)}function H_(s){return s===yr?{}:s===ht?[]:s}function LI(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function ZE(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,g)=>{o(l,d,g),a(l,d,g)}:o}function VI(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Gg=null;function fc(){if(!Gg){const s=$t.Symbol;if(s&&s.iterator)Gg=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Gg=l)}}}return Gg}function pc(s){return!!Mf(s)&&(Array.isArray(s)||!(s instanceof Map)&&fc()in s)}function Mf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ho(s,o,a){return s[o]=a}function Hr(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function mc(s,o,a,l){const d=De();return Hr(d,Qs(),o)&&(Ut(),va(xn(),d,s,o,a,l)),mc}function K_(s,o,a,l,d,g,v,w){const D=De(),A=Ut(),x=s+20,k=A.firstCreatePass?function W_(s,o,a,l,d,g,v,w,D){const A=o.consts,x=_a(o,s,4,v||null,Jr(A,w));D_(o,a,x,Jr(A,D)),Es(o,x);const k=x.tViews=Mg(2,x,l,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,x),k.queries=o.queries.embeddedTView(x)),x}(x,A,D,o,a,l,d,g,v):A.data[x];Xr(k,!1);const B=D[11].createComment("");mg(A,D,B,k),$r(B,D),Og(D,D[x]=T_(B,D,B,k)),gu(k)&&E_(A,D,k),null!=v&&Ag(D,k,w)}function Hd(s,o=dt.Default){const a=De();return null===a?Je(s,o):to(bn(),a,J(s),o)}function Qu(){throw new Error("invalid")}function rv(s,o,a){const l=De();return Hr(l,Qs(),o)&&function Ss(s,o,a,l,d,g,v,w){const D=Sr(o,a);let x,A=o.inputs;!w&&null!=A&&(x=A[l])?(N_(s,a,x,l,d),$s(o)&&function xg(s,o){const a=Mr(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function ME(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,yn(g)?g.setProperty(D,l,d):ei(l)||(D.setProperty?D.setProperty(l,d):D[l]=d))}(Ut(),xn(),l,s,o,l[11],a,!1),rv}function Yg(s,o,a,l,d){const v=d?"class":"style";N_(s,a,o.inputs[v],v,l)}function Nf(s,o,a,l){const d=De(),g=Ut(),v=20+s,w=d[11],D=d[v]=Td(w,o,function Dy(){return pt.lFrame.currentNamespace}()),A=g.firstCreatePass?function KI(s,o,a,l,d,g,v){const w=o.consts,A=_a(o,s,2,d,Jr(w,g));return D_(o,a,A,Jr(w,v)),null!==A.attrs&&jo(A,A.attrs,!1),null!==A.mergedAttrs&&jo(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,g,d,0,o,a,l):g.data[v];Xr(A,!0);const x=A.mergedAttrs;null!==x&&mt(w,D,x);const k=A.classes;null!==k&&_g(w,D,k);const B=A.styles;return null!==B&&pE(w,D,B),64!=(64&A.flags)&&mg(g,d,D,A),0===function Ua(){return pt.lFrame.elementDepthCount}()&&$r(D,d),function Cu(){pt.lFrame.elementDepthCount++}(),gu(A)&&(E_(g,d,A),function v_(s,o,a){if($c(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}(g,A,d)),null!==l&&Ag(d,A),Nf}function Qg(){let s=bn();Dl()?Il():(s=s.parent,Xr(s,!1));const o=s;!function Tu(){pt.lFrame.elementDepthCount--}();const a=Ut();return a.firstCreatePass&&(Es(a,s),$c(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function $h(s){return 0!=(16&s.flags)}(o)&&Yg(a,o,De(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Zp(s){return 0!=(32&s.flags)}(o)&&Yg(a,o,De(),o.stylesWithoutHost,!1),Qg}function iv(s,o,a,l){return Nf(s,o,a,l),Qg(),iv}function ov(s){return!!s&&"function"==typeof s.then}function av(s){return!!s&&"function"==typeof s.subscribe}const ww=av;function Xg(s,o,a,l){const d=De(),g=Ut(),v=bn();return function YI(s,o,a,l,d,g,v,w){const D=gu(l),x=s.firstCreatePass&&FE(s),k=o[8],B=kE(o);let Z=!0;if(3&l.type||w){const He=Sr(l,o),rt=w?w(He):He,Ie=B.length,yt=w?Kt=>w(ln(Kt[l.index])):l.index;if(yn(a)){let Kt=null;if(!w&&D&&(Kt=function YM(s,o,a,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===l){const w=o[7],D=d[g+2];return w.length>D?w[D]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,l.index)),null!==Kt)(Kt.__ngLastListenerFn__||Kt).__ngNextListenerFn__=g,Kt.__ngLastListenerFn__=g,Z=!1;else{g=Dw(l,o,k,g,!1);const mn=a.listen(rt,d,g);B.push(g,mn),x&&x.push(d,yt,Ie,Ie+1)}}else g=Dw(l,o,k,g,!0),rt.addEventListener(d,g,v),B.push(g),x&&x.push(d,yt,Ie,v)}else g=Dw(l,o,k,g,!1);const ye=l.outputs;let Fe;if(Z&&null!==ye&&(Fe=ye[d])){const He=Fe.length;if(He)for(let rt=0;rt<He;rt+=2){const ls=o[Fe[rt]][Fe[rt+1]].subscribe(g),hl=B.length;B.push(g,ls),x&&x.push(d,l.index,hl,-(hl+1))}}}(g,d,d[11],v,s,o,!!a,l),Xg}function bw(s,o,a,l){try{return!1!==a(l)}catch(d){return Ya(s,d),!1}}function Dw(s,o,a,l,d){return function g(v){if(v===Function)return l;const w=2&s.flags?Mr(s.index,o):o;0==(32&o[2])&&Pd(w);let D=bw(o,0,l,v),A=g.__ngNextListenerFn__;for(;A;)D=bw(o,0,A,v)&&D,A=A.__ngNextListenerFn__;return d&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function QM(s,o){let a=null;const l=function hM(s){const o=s.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(s);for(let d=0;d<o.length;d++){const g=o[d];if("*"!==g){if(null===l?rI(s,g,!0):gM(l,g))return d}else a=d}return a}function JI(s){const o=De()[16][6];if(!o.projection){const l=o.projection=Ui(s?s.length:1,null),d=l.slice();let g=o.child;for(;null!==g;){const v=s?QM(g,s):0;null!==v&&(d[v]?d[v].projectionNext=g:l[v]=g,d[v]=g),g=g.next}}}function XI(s,o=0,a){const l=De(),d=Ut(),g=_a(d,20+s,16,null,a||null);null===g.projection&&(g.projection=o),Il(),64!=(64&g.flags)&&function hE(s,o,a){Ef(o[11],0,o,a,gg(s,a,o),uE(a.parent||o[6],a,o))}(d,l,g)}function Ht(s,o,a,l,d){const g=s[a+1],v=null===o;let w=l?Hi(g):qu(g),D=!1;for(;0!==w&&(!1===D||v);){const x=s[w+1];tC(s[w],o)&&(D=!0,s[w+1]=l?vE(x):yE(x)),w=l?Hi(x):qu(x)}D&&(s[a+1]=l?yE(g):vE(g))}function tC(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&so(s,o)>=0}function hv(s,o){return function po(s,o,a,l){const d=De(),g=Ut(),v=function Pi(s){const o=pt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2);g.firstUpdatePass&&function fv(s,o,a,l){const d=s.data;if(null===d[a+1]){const g=d[xr()],v=function Pf(s,o){return o>=s.expandoStartIndex}(s,a);(function mv(s,o){return 0!=(s.flags&(o?16:32))})(g,l)&&null===o&&!v&&(o=!1),o=function Gi(s,o,a,l){const d=function ea(s){const o=pt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Ec(a=nm(null,s,o,a,l),o.attrs,l),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=nm(d,s,o,a,l),null===g){let D=function pv(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==qu(l))return s[Hi(l)]}(s,o,l);void 0!==D&&Array.isArray(D)&&(D=nm(null,s,o,D[1],l),D=Ec(D,o.attrs,l),function qi(s,o,a,l){s[Hi(a?o.classBindings:o.styleBindings)]=l}(s,o,l,D))}else g=function Nw(s,o,a){let l;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)l=Ec(l,s[g].hostAttrs,a);return Ec(l,o.attrs,a)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,l),function tm(s,o,a,l,d,g){let v=g?o.classBindings:o.styleBindings,w=Hi(v),D=qu(v);s[l]=a;let x,A=!1;if(Array.isArray(a)){const k=a;x=k[1],(null===x||so(k,x)>0)&&(A=!0)}else x=a;if(d)if(0!==D){const B=Hi(s[w+1]);s[l+1]=vg(B,w),0!==B&&(s[B+1]=Eg(s[B+1],l)),s[w+1]=function yM(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=vg(w,0),0!==w&&(s[w+1]=Eg(s[w+1],l)),w=l;else s[l+1]=vg(D,0),0===w?w=l:s[D+1]=Eg(s[D+1],l),D=l;A&&(s[l+1]=yE(s[l+1])),Ht(s,x,l,!0),Ht(s,x,l,!1),function Ju(s,o,a,l,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&so(g,o)>=0&&(a[l+1]=vE(a[l+1]))}(o,x,s,l,g),v=vg(w,D),g?o.classBindings=v:o.styleBindings=v}(d,g,o,a,v,l)}}(g,s,v,l),o!==xt&&Hr(d,v,o)&&function rm(s,o,a,l,d,g,v,w){if(!(3&o.type))return;const D=s.data,A=D[w+1];im(function _E(s){return 1==(1&s)}(A)?Pw(D,o,a,d,qu(A),v):void 0)||(im(g)||function mE(s){return 2==(2&s)}(A)&&(g=Pw(D,null,a,d,w,v)),function eI(s,o,a,l,d){const g=yn(s);if(o)d?g?s.addClass(a,l):a.classList.add(l):g?s.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:ae.DashCase;if(null==d)g?s.removeStyle(a,l,v):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),v|=ae.Important),g?s.setStyle(a,l,d,v):a.style.setProperty(l,d,w?"important":"")}}}(l,v,To(xr(),a),d,g))}(g,g.data[xr()],d,d[11],s,d[v+1]=function zd(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=fe(oo(s)))),s}(o,a),l,v)}(s,o,null,!0),hv}function nm(s,o,a,l,d){let g=null;const v=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<v&&(g=o[w],l=Ec(l,g.hostAttrs,d),g!==s);)w++;return null!==s&&(a.directiveStylingLast=w),l}function Ec(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),tr(s,v,!!a||o[++g]))}return void 0===s?null:s}function Pw(s,o,a,l,d,g){const v=null===o;let w;for(;d>0;){const D=s[d],A=Array.isArray(D),x=A?D[1]:D,k=null===x;let B=a[d+1];B===xt&&(B=k?ht:void 0);let Z=k?ql(B,l):x===l?B:void 0;if(A&&!im(Z)&&(Z=ql(D,l)),im(Z)&&(w=Z,v))return w;const ye=s[d+1];d=v?Hi(ye):qu(ye)}if(null!==o){let D=g?o.residualClasses:o.residualStyles;null!=D&&(w=ql(D,l))}return w}function im(s){return void 0!==s}function sm(s,o=""){const a=De(),l=Ut(),d=s+20,g=l.firstCreatePass?_a(l,d,1,o,null):l.data[d],v=a[d]=function Id(s,o){return yn(s)?s.createText(o):s.createTextNode(o)}(a[11],o);mg(l,a,v,g),Xr(g,!1)}function om(s){return yv("",s,""),om}function yv(s,o,a){const l=De(),d=function Ku(s,o,a,l){return Hr(s,Qs(),a)?o+pe(a)+l:xt}(l,s,o,a);return d!==xt&&Hn(l,xr(),d),yv}const eu=void 0;var dC=["en",[["a","p"],["AM","PM"],eu],[["AM","PM"],eu,eu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],eu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],eu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",eu,"{1} 'at' {0}",eu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function cC(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let wc={};function Tv(s){const o=function hC(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=$w(o);if(a)return a;const l=o.split("-")[0];if(a=$w(l),a)return a;if("en"===l)return dC;throw new Error(`Missing locale data for the locale "${s}".`)}function ym(s){return Tv(s)[bt.PluralCase]}function $w(s){return s in wc||(wc[s]=$t.ng&&$t.ng.common&&$t.ng.common.locales&&$t.ng.common.locales[s]),wc[s]}var bt=(()=>((bt=bt||{})[bt.LocaleId=0]="LocaleId",bt[bt.DayPeriodsFormat=1]="DayPeriodsFormat",bt[bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",bt[bt.DaysFormat=3]="DaysFormat",bt[bt.DaysStandalone=4]="DaysStandalone",bt[bt.MonthsFormat=5]="MonthsFormat",bt[bt.MonthsStandalone=6]="MonthsStandalone",bt[bt.Eras=7]="Eras",bt[bt.FirstDayOfWeek=8]="FirstDayOfWeek",bt[bt.WeekendRange=9]="WeekendRange",bt[bt.DateFormat=10]="DateFormat",bt[bt.TimeFormat=11]="TimeFormat",bt[bt.DateTimeFormat=12]="DateTimeFormat",bt[bt.NumberSymbols=13]="NumberSymbols",bt[bt.NumberFormats=14]="NumberFormats",bt[bt.CurrencyCode=15]="CurrencyCode",bt[bt.CurrencySymbol=16]="CurrencySymbol",bt[bt.CurrencyName=17]="CurrencyName",bt[bt.Currencies=18]="Currencies",bt[bt.Directionality=19]="Directionality",bt[bt.PluralCase=20]="PluralCase",bt[bt.ExtraData=21]="ExtraData",bt))();const Wd="en-US";let Sv=Wd;function Wf(s,o,a,l,d){if(s=J(s),Array.isArray(s))for(let g=0;g<s.length;g++)Wf(s[g],o,a,l,d);else{const g=Ut(),v=De();let w=hc(s)?s:J(s.provide),D=k_(s);const A=bn(),x=1048575&A.providerIndexes,k=A.directiveStart,B=A.providerIndexes>>20;if(hc(s)||!s.multi){const Z=new ta(D,d,Hd),ye=$v(w,o,d?x:x+B,k);-1===ye?(eo(Wn(A,v),g,w),jv(g,s,o.length),o.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(Z),v.push(Z)):(a[ye]=Z,v[ye]=Z)}else{const Z=$v(w,o,x+B,k),ye=$v(w,o,x,x+B),Fe=Z>=0&&a[Z],He=ye>=0&&a[ye];if(d&&!He||!d&&!Fe){eo(Wn(A,v),g,w);const rt=function Hv(s,o,a,l,d){const g=new ta(s,a,Hd);return g.multi=[],g.index=o,g.componentProviders=0,fb(g,d,l&&!a),g}(d?Kf:Sm,a.length,d,l,D);!d&&He&&(a[ye].providerFactory=rt),jv(g,s,o.length,0),o.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(rt),v.push(rt)}else jv(g,s,Z>-1?Z:ye,fb(a[d?ye:Z],D,!d&&l));!d&&l&&He&&a[ye].componentProviders++}}}function jv(s,o,a,l){const d=hc(o),g=function jE(s){return!!s.useClass}(o);if(d||g){const D=(g?J(o.useClass):o).prototype.ngOnDestroy;if(D){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const x=A.indexOf(a);-1===x?A.push(a,[l,D]):A[x+1].push(l,D)}else A.push(a,D)}}}function fb(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function $v(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function Sm(s,o,a,l){return ih(this.multi,[])}function Kf(s,o,a,l){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Fi(a,a[1],this.providerFactory.index,l);g=w.slice(0,v),ih(d,g);for(let D=v;D<w.length;D++)g.push(w[D])}else g=[],ih(d,g);return g}function ih(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function Gv(s,o=[]){return a=>{a.providersResolver=(l,d)=>function hb(s,o,a){const l=Ut();if(l.firstCreatePass){const d=Yr(s);Wf(a,l.data,l.blueprint,d,!0),Wf(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class sh{}class SC{resolveComponentFactory(o){throw function TC(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Mm=(()=>{class s{}return s.NULL=new SC,s})();function MC(){return oh(bn(),De())}function oh(s,o){return new ah(Sr(s,o))}let ah=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=MC,s})();function pb(s){return s instanceof ah?s.nativeElement:s}class Yf{}let gb=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function mb(){const s=De(),a=Mr(bn().index,s);return function nu(s){return s[11]}(Ri(a)?a:s)}(),s})(),NC=(()=>{class s{}return s.\u0275prov=on({token:s,providedIn:"root",factory:()=>null}),s})();class xm{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const uh=new xm("13.2.7"),Nm={};function lh(s,o,a,l,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(ln(g)),di(g))for(let w=10;w<g.length;w++){const D=g[w],A=D[1].firstChild;null!==A&&lh(D[1],D,A,l)}const v=a.type;if(8&v)lh(s,o,a.child,l);else if(32&v){const w=et(a,o);let D;for(;D=w();)l.push(D)}else if(16&v){const w=dE(o,a);if(Array.isArray(w))l.push(...w);else{const D=On(o[16]);lh(D[1],D,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class il{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return lh(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(di(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Xy(o,l),Is(a,l))}this._attachedToViewContainer=!1}e_(this._lView[1],this._lView)}onDestroy(o){Df(this._lView[1],this._lView,null,o)}markForCheck(){Pd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){S_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function cc(s,o,a){Ys(!0);try{S_(s,o,a)}finally{Ys(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function pg(s,o){yg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=o}}class yb extends il{constructor(o){super(o),this._view=o}detectChanges(){M_(this._view)}checkNoChanges(){!function Ea(s){Ys(!0);try{M_(s)}finally{Ys(!1)}}(this._view)}get context(){return null}}class Rm extends Mm{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=zt(o);return new Ic(a,this.ngModule)}}function Qf(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class Ic extends sh{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function sI(s){return s.map(mM).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Qf(this.componentDef.inputs)}get outputs(){return Qf(this.componentDef.outputs)}create(o,a,l,d){const g=(d=d||this.ngModule)?function _b(s,o){return{get:(a,l,d)=>{const g=s.get(a,Nm,d);return g!==Nm||l===Nm?g:o.get(a,l,d)}}}(o,d.injector):o,v=g.get(Yf,Qo),w=g.get(NC,null),D=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=l?function AE(s,o,a){if(yn(s))return s.selectRootElement(o,a===qt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(D,l,this.componentDef.encapsulation):Td(v.createRenderer(null,this.componentDef),A,function RC(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),k=this.componentDef.onPush?576:528,B=function Ld(s,o){return{components:[],scheduler:s||Zy,clean:MI,playerHandler:o||null,flags:0}}(),Z=Mg(0,null,null,1,0,null,null,null,null,null),ye=Rd(null,Z,B,k,null,null,v,D,w,g);let Fe,He;Ao(ye);try{const rt=function WE(s,o,a,l,d,g){const v=a[1];a[20]=s;const D=_a(v,20,2,"#host",null),A=D.mergedAttrs=o.hostAttrs;null!==A&&(jo(D,A,!0),null!==s&&(mt(d,s,A),null!==D.classes&&_g(d,s,D.classes),null!==D.styles&&pE(d,s,D.styles)));const x=l.createRenderer(s,o),k=Rd(a,Sg(o),null,o.onPush?64:16,a[20],D,l,x,g||null,null);return v.firstCreatePass&&(eo(Wn(D,a),v,o.type),vI(v,D),C_(D,a.length,1)),Og(a,k),a[20]=k}(x,this.componentDef,ye,v,D);if(x)if(l)mt(D,x,["ng-version",uh.full]);else{const{attrs:Ie,classes:yt}=function As(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++l]):8===d&&a.push(g);else{if(!ya(d))break;d=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Ie&&mt(D,x,Ie),yt&&yt.length>0&&_g(D,x,yt.join(" "))}if(He=Va(Z,20),void 0!==a){const Ie=He.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const Kt=a[yt];Ie.push(null!=Kt?Array.from(Kt):null)}}Fe=function Af(s,o,a,l,d){const g=a[1],v=function gI(s,o,a){const l=bn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),RE(s,l,o,_n(s,o,1,null),a));const d=Fi(o,s,l.directiveStart,l);$r(d,o);const g=Sr(l,o);return g&&$r(g,o),d}(g,a,o);if(l.components.push(v),s[8]=v,d&&d.forEach(D=>D(v,o)),o.contentQueries){const D=bn();o.contentQueries(1,v,D.directiveStart)}const w=bn();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Xs(w.index),NE(a[1],w,0,w.directiveStart,w.directiveEnd,o),I_(o,v)),v}(rt,this.componentDef,ye,B,[$g]),Od(Z,ye,null)}finally{Mo()}return new qv(this.componentType,Fe,oh(He,ye),ye,He)}}class qv extends class Zf{}{constructor(o,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new yb(d),this.componentType=o}get injector(){return new Li(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Cc{}class Jf{}const Tc=new Map;class Xf extends Cc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Rm(this);const l=fn(o);this._bootstrapComponents=m(l.bootstrap),this._r3Injector=P_(o,a,[{provide:Cc,useValue:this},{provide:Mm,useValue:this.componentFactoryResolver}],fe(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=lo.THROW_IF_NOT_FOUND,l=dt.Default){return o===lo||o===Cc||o===Pg?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Wi extends Jf{constructor(o){super(),this.moduleType=o,null!==fn(o)&&function Eb(s){const o=new Set;!function a(l){const d=fn(l,!0),g=d.id;null!==g&&(function sl(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${fe(o)} vs ${fe(o.name)}`)}(g,Tc.get(g),l),Tc.set(g,l));const v=m(d.imports);for(const w of v)o.has(w)||(o.add(w),a(w))}(s)}(o)}create(o){return new Xf(this.moduleType,o)}}function Kv(s,o,a,l){return Db(De(),Er(),s,o,a,l)}function ol(s,o){const a=s[o];return a===xt?void 0:a}function Db(s,o,a,l,d,g){const v=o+a;return Hr(s,v,d)?ho(s,v+1,g?l.call(g,d):l(d)):ol(s,v+1)}function Yv(s,o,a,l,d,g,v){const w=o+a;return function $o(s,o,a,l){const d=Hr(s,o,a);return Hr(s,o+1,l)||d}(s,w,d,g)?ho(s,w+2,v?l.call(v,d,g):l(d,g)):ol(s,w+2)}function Om(s,o){const a=Ut();let l;const d=s+20;a.firstCreatePass?(l=function $C(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const g=l.factory||(l.factory=Qr(l.type)),v=Xn(Hd);try{const w=pi(!1),D=g();return pi(w),function $M(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,De(),d,D),D}finally{Xn(v)}}function ke(s,o,a){const l=s+20,d=De(),g=Oi(d,l);return Ct(d,l)?Db(d,Er(),o,g.transform,a,g):g.transform(a)}function dr(s,o,a,l){const d=s+20,g=De(),v=Oi(g,d);return Ct(g,d)?Yv(g,Er(),o,v.transform,a,l,v):v.transform(a,l)}function Ct(s,o){return s[1].data[o].pure}function qe(s){return o=>{setTimeout(s,void 0,o)}}const re=class HC extends p.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,g,v;let w=o,D=a||(()=>null),A=l;if(o&&"object"==typeof o){const k=o;w=null===(d=k.next)||void 0===d?void 0:d.bind(k),D=null===(g=k.error)||void 0===g?void 0:g.bind(k),A=null===(v=k.complete)||void 0===v?void 0:v.bind(k)}this.__isAsync&&(D=qe(D),w&&(w=qe(w)),A&&(A=qe(A)));const x=super.subscribe({next:w,error:D,complete:A});return o instanceof Y.w0&&o.add(x),x}};function Ne(){return this._results[fc()]()}class wr{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=fc(),l=wr.prototype;l[a]||(l[a]=Ne)}get changes(){return this._changes||(this._changes=new re)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Rr(o);(this._changesDetected=!function Bl(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=o[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let dh=(()=>{class s{}return s.__NG_ELEMENT_ID__=zC,s})();const GC=dh,qC=class extends GC{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=Rd(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),Od(a,l,o),new il(l)}};function zC(){return Pm(bn(),De())}function Pm(s,o){return 4&s.type?new qC(o,s,oh(s,o)):null}let km=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ib,s})();function Ib(){return Xv(bn(),De())}const WC=km,KC=class extends WC{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return oh(this._hostTNode,this._hostLView)}get injector(){return new Li(this._hostTNode,this._hostLView)}get parentInjector(){const o=gi(this._hostTNode,this._hostLView);if(sd(o)){const a=ki(o,this._hostLView),l=gn(o);return new Li(a[1].data[l+8],a)}return new Li(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=as(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,g){const v=o&&!function ua(s){return"function"==typeof s}(o);let w;if(v)w=a;else{const k=a||{};w=k.index,l=k.injector,d=k.projectableNodes,g=k.ngModuleRef}const D=v?o:new Ic(zt(o)),A=l||this.parentInjector;if(!g&&null==D.ngModule){const B=(v?A:this.parentInjector).get(Cc,null);B&&(g=B)}const x=D.create(A,d,void 0,g);return this.insert(x.hostView,w),x}insert(o,a){const l=o._lView,d=l[1];if(function Du(s){return di(s[3])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const k=l[3],B=new KC(k,k[6],k[3]);B.detach(B.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function ac(s,o,a,l){const d=10+l,g=a.length;l>0&&(a[d-1][4]=o),l<g-10?(o[4]=a[d],jl(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Ad(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(d,l,v,g);const w=s_(g,v),D=l[11],A=ma(D,v[7]);return null!==A&&function vf(s,o,a,l,d,g){l[0]=d,l[6]=o,yg(s,l,a,1,d,g)}(d,v[6],D,l,A,w),o.attachToViewContainerRef(),jl(Jv(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=as(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Xy(this._lContainer,a);l&&(Is(Jv(this._lContainer),a),e_(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Xy(this._lContainer,a);return l&&null!=Is(Jv(this._lContainer),a)?new il(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function as(s){return s[8]}function Jv(s){return s[8]||(s[8]=[])}function Xv(s,o){let a;const l=o[s.index];if(di(l))a=l;else{let d;if(8&s.type)d=ln(l);else{const g=o[11];d=g.createComment("");const v=Sr(s,o);Ts(g,ma(g,v),d,function XD(s,o){return yn(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=a=T_(l,o,d,s),Og(o,a)}return new KC(a,s,o)}class Yn{constructor(o){this.queryList=o,this.matches=null}clone(){return new Yn(this.queryList)}setDirty(){this.queryList.setDirty()}}class Dt{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new Dt(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Cb(o,a).matches&&this.queries[a].setDirty()}}class e0{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class iu{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new iu(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Fm{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Fm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(o,a,tp(a,g)),this.matchTNodeWithReadOption(o,a,Ro(a,o,g,!1,!1))}else l===dh?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Ro(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===ah||d===km||d===dh&&4&a.type)this.addMatch(a.index,-2);else{const g=Ro(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function tp(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function YC(s,o,a,l){return-1===a?function tn(s,o){return 11&s.type?oh(s,o):4&s.type?Pm(s,o):null}(o,s):-2===a?function Wr(s,o,a){return a===ah?oh(o,s):a===dh?Pm(o,s):a===km?Xv(o,s):void 0}(s,o,l):Fi(s,s[1],a,o)}function Sc(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const g=s.data,v=a.matches,w=[];for(let D=0;D<v.length;D+=2){const A=v[D];w.push(A<0?null:YC(o,g[A],v[D+1],a.metadata.read))}d.matches=w}return d.matches}function t0(s,o,a,l){const d=s.queries.getByIndex(a),g=d.matches;if(null!==g){const v=Sc(s,o,d,a);for(let w=0;w<g.length;w+=2){const D=g[w];if(D>0)l.push(v[w/2]);else{const A=g[w+1],x=o[-D];for(let k=10;k<x.length;k++){const B=x[k];B[17]===B[3]&&t0(B[1],B,A,l)}if(null!==x[9]){const k=x[9];for(let B=0;B<k.length;B++){const Z=k[B];t0(Z[1],Z,A,l)}}}}}return l}function br(s){const o=De(),a=Ut(),l=Sl();Ml(l+1);const d=Cb(a,l);if(s.dirty&&Ws(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?t0(a,o,l,[]):Sc(a,o,d,l);s.reset(g,pb),s.notifyOnChanges()}return!0}return!1}function su(s,o,a,l){const d=Ut();if(d.firstCreatePass){const g=bn();(function n0(s,o,a){null===s.queries&&(s.queries=new iu),s.queries.track(new Fm(o,a))})(d,new e0(o,a,l),g.index),function np(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function Lm(s,o,a){const l=new wr(4==(4&a));Df(s,o,l,l.destroy),null===o[19]&&(o[19]=new Dt),o[19].queries.push(new Yn(l))}(d,De(),a)}function Qn(){return function Mc(s,o){return s[19].queries[o].queryList}(De(),Sl())}function Cb(s,o){return s.queries.getByIndex(o)}function hp(...s){}const Ca=new Nn("Application Initializer");let jm=(()=>{class s{constructor(a){this.appInits=a,this.resolve=hp,this.reject=hp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(ov(g))a.push(g);else if(ww(g)){const v=new Promise((w,D)=>{g.subscribe({complete:w,error:D})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Je(Ca,8))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Pc=new Nn("AppId",{providedIn:"root",factory:function fp(){return`${pp()}${pp()}${pp()}`}});function pp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $m=new Nn("Platform Initializer"),Hm=new Nn("Platform ID"),kc=new Nn("appBootstrapListener");let c0=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})();const Gm=new Nn("LocaleId",{providedIn:"root",factory:()=>Pt(Gm,dt.Optional|dt.SkipSelf)||function gp(){return"undefined"!=typeof $localize&&$localize.locale||Wd}()}),d0=new Nn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class aT{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Ob=(()=>{class s{compileModuleSync(a){return new Wi(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=m(fn(a).declarations).reduce((v,w)=>{const D=zt(w);return D&&v.push(new Ic(D)),v},[]);return new aT(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const qm=(()=>Promise.resolve(0))();function h0(s){"undefined"==typeof Zone?qm.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class yo{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new re(!1),this.onMicrotaskEmpty=new re(!1),this.onStable=new re(!1),this.onError=new re(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function lT(){let s=$t.requestAnimationFrame,o=$t.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Fc(s){const o=()=>{!function kb(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call($t,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,zm(s),s.isCheckStableRunning=!0,uu(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),zm(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,v,w)=>{try{return Lc(s),a.invokeTask(d,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),f0(s)}},onInvoke:(a,l,d,g,v,w,D)=>{try{return Lc(s),a.invoke(d,g,v,w,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),f0(s)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,zm(s),uu(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(yo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,_h,hp,hp);try{return g.runTask(v,a,l)}finally{g.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const _h={};function uu(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function zm(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Lc(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function f0(s){s._nesting--,uu(s)}class Fb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new re,this.onMicrotaskEmpty=new re,this.onStable=new re,this.onError=new re}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let vh=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yo.assertNotInAngularZone(),h0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())h0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Je(yo))},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})(),Lb=(()=>{class s{constructor(){this._applications=new Map,Eh.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Eh.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})();class cT{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function Dr(s){Eh=s}let us,Eh=new cT;const p0=new Nn("AllowMultipleToken");class Ub{constructor(o,a){this.name=o,this.token=a}}function ul(s,o,a=[]){const l=`Platform: ${o}`,d=new Nn(l);return(g=[])=>{let v=g0();if(!v||v.injector.get(p0,!1))if(s)s(a.concat(g).concat({provide:d,useValue:!0}));else{const w=a.concat(g).concat({provide:d,useValue:!0},{provide:kg,useValue:"platform"});!function mp(s){if(us&&!us.destroyed&&!us.injector.get(p0,!1))throw new Oe(400,"");us=s.get(wh);const o=s.get($m,null);o&&o.forEach(a=>a())}(lo.create({providers:w,name:l}))}return function Bb(s){const o=g0();if(!o)throw new Oe(401,"");return o}()}}function g0(){return us&&!us.destroyed?us:null}let wh=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function m0(s,o){let a;return a="noop"===s?new Fb:("zone.js"===s?void 0:s)||new yo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),D=[{provide:yo,useValue:w}];return w.run(()=>{const A=lo.create({providers:D,parent:this.injector,name:a.moduleType.name}),x=a.create(A),k=x.injector.get(Pr,null);if(!k)throw new Oe(402,"");return w.runOutsideAngular(()=>{const B=w.onError.subscribe({next:Z=>{k.handleError(Z)}});x.onDestroy(()=>{Wm(this._modules,x),B.unsubscribe()})}),function pT(s,o,a){try{const l=a();return ov(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(k,w,()=>{const B=x.injector.get(jm);return B.runInitializers(),B.donePromise.then(()=>(function Em(s){lt(s,"Expected localeId to be defined"),"string"==typeof s&&(Sv=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(Gm,Wd)||Wd),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=fr({},l);return function dT(s,o,a){const l=new Wi(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(Qt);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Oe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Je(lo))},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})();function fr(s,o){return Array.isArray(o)?o.reduce(fr,s):Object.assign(Object.assign({},s),o)}let Qt=(()=>{class s{constructor(a,l,d,g,v){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),D=new O.y(A=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{yo.assertNotInAngularZone(),h0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{yo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{x.unsubscribe(),k.unsubscribe()}});this.isStable=(0,le.T)(w,D.pipe((0,X.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Oe(405,"");let d;d=a instanceof sh?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const g=function hT(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Cc),w=d.create(lo.NULL,[],l||d.selector,g),D=w.location.nativeElement,A=w.injector.get(vh,null),x=A&&w.injector.get(Lb);return A&&x&&x.registerApplication(D,A),w.onDestroy(()=>{this.detachView(w.hostView),Wm(this.components,w),x&&x.unregisterApplication(D)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Wm(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(kc,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(Je(yo),Je(lo),Je(Pr),Je(Mm),Je(jm))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Wm(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let rr=!0,yp=!1;function si(){return yp=!0,rr}function Fn(){if(yp)throw new Error("Cannot enable prod mode after platform setup.");rr=!1}let _o=(()=>{class s{}return s.__NG_ELEMENT_ID__=mT,s})();function mT(s){return function _0(s,o,a){if($s(s)&&!a){const l=Mr(s.index,o);return new il(l,l)}return 47&s.type?new il(o[16],o):null}(bn(),De(),16==(16&s))}class ey{constructor(){}supports(o){return pc(o)}create(o){return new Ep(o)}}const Hb=(s,o)=>o;class Ep{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Hb}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const v=!l||a&&a.currentIndex<bh(l,d,g)?a:l,w=bh(v,d,g),D=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const A=w-d,x=D-d;if(A!=x){for(let B=0;B<A;B++){const Z=B<g.length?g[B]:g[B]=0,ye=Z+B;x<=ye&&ye<A&&(g[B]=Z+1)}g[v.previousIndex]=x-A}}w!==D&&o(v,w,D)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!pc(o))throw new Oe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)g=o[w],v=this._trackByFn(w,g),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,g,v,w)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,w),l=!0),a=a._next}else d=0,function QE(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[fc()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{v=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,w,v,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new Ta(a,l),g,d),o}_verifyReinsertion(o,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new C0),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new C0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Ta{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class I0{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class C0{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new I0,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bh(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class T0{constructor(){}supports(o){return o instanceof Map||Mf(o)}create(){return new Gb}}class Gb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Mf(o)))throw new Oe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const l=new qb(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class qb{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function zb(){return new A0([new ey])}let A0=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||zb()),deps:[[s,new Fo,new vi]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Oe(901,"")}}return s.\u0275prov=on({token:s,providedIn:"root",factory:zb}),s})();function ny(){return new S0([new T0])}let S0=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||ny()),deps:[[s,new Fo,new vi]]}}find(a){const l=this.factories.find(g=>g.supports(a));if(l)return l;throw new Oe(901,"")}}return s.\u0275prov=on({token:s,providedIn:"root",factory:ny}),s})();const ET=ul(null,"core",[{provide:Hm,useValue:"unknown"},{provide:wh,deps:[lo]},{provide:Lb,deps:[]},{provide:c0,deps:[]}]);let wT=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Je(Qt))},s.\u0275mod=Q({type:s}),s.\u0275inj=en({}),s})()},3942:(ut,Ae,P)=>{P.d(Ae,{Z:()=>Oe});var p=P(2090),Y=P(4859),O=P(9681),le=P(1877);class X{constructor(pe,be){this._delegate=pe,this.firebase=be,(0,O._addComponent)(pe,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(pe,be=O._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(pe);return!Ye.isInitialized()&&"EXPLICIT"===(null===(tt=Ye.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:be})}_removeServiceInstance(pe,be=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(be)}_addComponent(pe){(0,O._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,O._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ce(){const Ve=function fe(Ve){const pe={},be={__esModule:!0,initializeApp:function Ce($e,te={}){const W=O.initializeApp($e,te);if((0,p.r3)(pe,W.name))return pe[W.name];const ie=new Ve(W,be);return pe[W.name]=ie,ie},app:Ye,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee($e){const te=$e.name,W=te.replace("-compat","");if(O._registerComponent($e)&&"PUBLIC"===$e.type){const ie=(me=Ye())=>{if("function"!=typeof me[W])throw se.create("invalid-app-argument",{appName:te});return me[W]()};void 0!==$e.serviceProps&&(0,p.ZB)(ie,$e.serviceProps),be[W]=ie,Ve.prototype[W]=function(...me){return this._getService.bind(this,te).apply(this,$e.multipleInstances?me:[])}}return"PUBLIC"===$e.type?be[W]:null},removeApp:function tt($e){delete pe[$e]},useAsService:function Ge($e,te){return"serverAuth"===te?null:te},modularAPIs:O}};function Ye($e){if(!(0,p.r3)(pe,$e=$e||O._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:$e});return pe[$e]}return be.default=be,Object.defineProperty(be,"apps",{get:function _e(){return Object.keys(pe).map($e=>pe[$e])}}),Ye.App=Ve,be}(X);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function pe(be){(0,p.ZB)(Ve,be)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Ve}(),H=new le.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=$;!function Se(Ve){(0,O.registerVersion)("@firebase/app-compat","0.1.21",Ve)}()},9681:(ut,Ae,P)=>{P.r(Ae),P.d(Ae,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>Fr,_DEFAULT_ENTRY_NAME:()=>Ln,_addComponent:()=>dn,_addOrOverwriteComponent:()=>xi,_apps:()=>vt,_clearComponents:()=>Gt,_components:()=>cn,_getProvider:()=>ds,_registerComponent:()=>on,_removeServiceInstance:()=>en,deleteApp:()=>fs,getApp:()=>Lr,getApps:()=>hs,initializeApp:()=>Ki,onLog:()=>sr,registerVersion:()=>Zr,setLogLevel:()=>Xn});var p=P(5861),Y=P(4859),O=P(1877),le=P(2090);class X{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function ge(Qe){const Te=Qe.getComponent();return"VERSION"===(null==Te?void 0:Te.type)}(Xe)){const ft=Xe.getImmediate();return`${ft.library}/${ft.version}`}return null}).filter(Xe=>Xe).join(" ")}}const se="@firebase/app",ce=new O.Yd("@firebase/app"),Ln="[DEFAULT]",lt={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vt=new Map,cn=new Map;function dn(Qe,Te){try{Qe.container.addComponent(Te)}catch(Xe){ce.debug(`Component ${Te.name} failed to register with FirebaseApp ${Qe.name}`,Xe)}}function xi(Qe,Te){Qe.container.addOrOverwriteComponent(Te)}function on(Qe){const Te=Qe.name;if(cn.has(Te))return ce.debug(`There were multiple attempts to register component ${Te}.`),!1;cn.set(Te,Qe);for(const Xe of vt.values())dn(Xe,Qe);return!0}function ds(Qe,Te){const Xe=Qe.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),Qe.container.getProvider(Te)}function en(Qe,Te,Xe=Ln){ds(Qe,Te).clearInstance(Xe)}function Gt(){cn.clear()}const ui=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Fs{constructor(Te,Xe,ft){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=ft,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}const Fr="9.6.10";function Ki(Qe,Te={}){"object"!=typeof Te&&(Te={name:Te});const Xe=Object.assign({name:Ln,automaticDataCollectionEnabled:!1},Te),ft=Xe.name;if("string"!=typeof ft||!ft)throw ui.create("bad-app-name",{appName:String(ft)});const jt=vt.get(ft);if(jt){if((0,le.vZ)(Qe,jt.options)&&(0,le.vZ)(Xe,jt.config))return jt;throw ui.create("duplicate-app",{appName:ft})}const Vt=new Y.H0(ft);for(const V of cn.values())Vt.addComponent(V);const j=new Fs(Qe,Xe,Vt);return vt.set(ft,j),j}function Lr(Qe=Ln){const Te=vt.get(Qe);if(!Te)throw ui.create("no-app",{appName:Qe});return Te}function hs(){return Array.from(vt.values())}function fs(Qe){return dt.apply(this,arguments)}function dt(){return(dt=(0,p.Z)(function*(Qe){const Te=Qe.name;vt.has(Te)&&(vt.delete(Te),yield Promise.all(Qe.container.getProviders().map(Xe=>Xe.delete())),Qe.isDeleted=!0)})).apply(this,arguments)}function Zr(Qe,Te,Xe){var ft;let jt=null!==(ft=lt[Qe])&&void 0!==ft?ft:Qe;Xe&&(jt+=`-${Xe}`);const Vt=jt.match(/\s|\//),j=Te.match(/\s|\//);if(Vt||j){const V=[`Unable to register library "${jt}" with version "${Te}":`];return Vt&&V.push(`library name "${jt}" contains illegal characters (whitespace or "/")`),Vt&&j&&V.push("and"),j&&V.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void ce.warn(V.join(" "))}on(new Y.wA(`${jt}-version`,()=>({library:jt,version:Te}),"VERSION"))}function sr(Qe,Te){if(null!==Qe&&"function"!=typeof Qe)throw ui.create("invalid-log-argument");(0,O.Am)(Qe,Te)}function Xn(Qe){(0,O.Ub)(Qe)}const wn="firebase-heartbeat-store";let or=null;function Ls(){return or||(or=(0,le.X3)("firebase-heartbeat-database",1,(Qe,Te)=>{0===Te&&Qe.createObjectStore(wn)}).catch(Qe=>{throw ui.create("storage-open",{originalErrorMessage:Qe.message})})),or}function qt(){return(qt=(0,p.Z)(function*(Qe){try{return(yield Ls()).transaction(wn).objectStore(wn).get(mr(Qe))}catch(Te){throw ui.create("storage-get",{originalErrorMessage:Te.message})}})).apply(this,arguments)}function ot(Qe,Te){return It.apply(this,arguments)}function It(){return(It=(0,p.Z)(function*(Qe,Te){try{const ft=(yield Ls()).transaction(wn,"readwrite");return yield ft.objectStore(wn).put(Te,mr(Qe)),ft.complete}catch(Xe){throw ui.create("storage-set",{originalErrorMessage:Xe.message})}})).apply(this,arguments)}function mr(Qe){return`${Qe.name}!${Qe.options.appId}`}class wo{constructor(Te){this.container=Te,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new ht(Xe),this._heartbeatsCachePromise=this._storage.read().then(ft=>(this._heartbeatsCache=ft,ft))}triggerHeartbeat(){var Te=this;return(0,p.Z)(function*(){const ft=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),jt=Ir();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==jt&&!Te._heartbeatsCache.heartbeats.some(Vt=>Vt.date===jt))return Te._heartbeatsCache.heartbeats.push({date:jt,agent:ft}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(Vt=>{const j=new Date(Vt.date).valueOf();return Date.now()-j<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,p.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const Xe=Ir(),{heartbeatsToSend:ft,unsentEntries:jt}=function yr(Qe,Te=1024){const Xe=[];let ft=Qe.slice();for(const jt of Qe){const Vt=Xe.find(j=>j.agent===jt.agent);if(Vt){if(Vt.dates.push(jt.date),Cr(Xe)>Te){Vt.dates.pop();break}}else if(Xe.push({agent:jt.agent,dates:[jt.date]}),Cr(Xe)>Te){Xe.pop();break}ft=ft.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:ft}}(Te._heartbeatsCache.heartbeats),Vt=(0,le.L)(JSON.stringify({version:2,heartbeats:ft}));return Te._heartbeatsCache.lastSentHeartbeatDate=Xe,jt.length>0?(Te._heartbeatsCache.heartbeats=jt,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),Vt})()}}function Ir(){return(new Date).toISOString().substring(0,10)}class ht{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,p.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function Na(Qe){return qt.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var Xe=this;return(0,p.Z)(function*(){var ft;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return ot(Xe.app,{lastSentHeartbeatDate:null!==(ft=Te.lastSentHeartbeatDate)&&void 0!==ft?ft:Vt.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var Xe=this;return(0,p.Z)(function*(){var ft;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return ot(Xe.app,{lastSentHeartbeatDate:null!==(ft=Te.lastSentHeartbeatDate)&&void 0!==ft?ft:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...Te.heartbeats]})}})()}}function Cr(Qe){return(0,le.L)(JSON.stringify({version:2,heartbeats:Qe})).length}!function Bt(Qe){on(new Y.wA("platform-logger",Te=>new X(Te),"PRIVATE")),on(new Y.wA("heartbeat",Te=>new wo(Te),"PRIVATE")),Zr(se,"0.7.20",Qe),Zr(se,"0.7.20","esm2017"),Zr("fire-js","")}("")},4859:(ut,Ae,P)=>{P.d(Ae,{wA:()=>O,H0:()=>fe});var p=P(5861),Y=P(2090);class O{constructor($,H,J){this.name=$,this.instanceFactory=H,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const le="[DEFAULT]";class X{constructor($,H){this.name=$,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const H=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(H)){const J=new Y.BH;if(this.instancesDeferred.set(H,J),this.isInitialized(H)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:H});We&&J.resolve(We)}catch(We){}}return this.instancesDeferred.get(H).promise}getImmediate($){var H;const J=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),We=null!==(H=null==$?void 0:$.optional)&&void 0!==H&&H;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Se){if(We)return null;throw Se}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function se(ce){return"EAGER"===ce.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:le})}catch(H){}for(const[H,J]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(H);try{const Se=this.getOrInitializeService({instanceIdentifier:We});J.resolve(Se)}catch(Se){}}}}clearInstance($=le){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,p.Z)(function*(){const H=Array.from($.instances.values());yield Promise.all([...H.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...H.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=le){return this.instances.has($)}getOptions($=le){return this.instancesOptions.get($)||{}}initialize($={}){const{options:H={}}=$,J=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:J,options:H});for(const[Se,Oe]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Se)&&Oe.resolve(We);return We}onInit($,H){var J;const We=this.normalizeInstanceIdentifier(H),Se=null!==(J=this.onInitCallbacks.get(We))&&void 0!==J?J:new Set;Se.add($),this.onInitCallbacks.set(We,Se);const Oe=this.instances.get(We);return Oe&&$(Oe,We),()=>{Se.delete($)}}invokeOnInitCallbacks($,H){const J=this.onInitCallbacks.get(H);if(J)for(const We of J)try{We($,H)}catch(Se){}}getOrInitializeService({instanceIdentifier:$,options:H={}}){let J=this.instances.get($);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=$,ce===le?void 0:ce),options:H}),this.instances.set($,J),this.instancesOptions.set($,H),this.invokeOnInitCallbacks(J,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,J)}catch(We){}var ce;return J||null}normalizeInstanceIdentifier($=le){return this.component?this.component.multipleInstances?$:le:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor($){this.name=$,this.providers=new Map}addComponent($){const H=this.getProvider($.name);if(H.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);H.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const H=new X($,this);return this.providers.set($,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Ae,P)=>{P.d(Ae,{in:()=>Y,Yd:()=>se,Ub:()=>fe,Am:()=>ce});const p=[];var Y=(()=>{return($=Y||(Y={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Y;var $})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},le=Y.INFO,X={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ge=($,H,...J)=>{if(H<$.logLevel)return;const We=(new Date).toISOString(),Se=X[H];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Se](`[${We}]  ${$.name}:`,...J)};class se{constructor(H){this.name=H,this._logLevel=le,this._logHandler=ge,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in Y))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?O[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...H),this._logHandler(this,Y.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...H),this._logHandler(this,Y.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...H),this._logHandler(this,Y.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...H),this._logHandler(this,Y.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...H),this._logHandler(this,Y.ERROR,...H)}}function fe($){p.forEach(H=>{H.setLogLevel($)})}function ce($,H){for(const J of p){let We=null;H&&H.level&&(We=O[H.level]),J.userLogHandler=null===$?null:(Se,Oe,...Ve)=>{const pe=Ve.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(tt){return null}}).filter(be=>be).join(" ");Oe>=(null!=We?We:Se.logLevel)&&$({level:Y[Oe].toLowerCase(),message:pe,args:Ve,type:Se.name})}}}},5861:(ut,Ae,P)=>{function p(O,le,X,ge,se,fe,ce){try{var $=O[fe](ce),H=$.value}catch(J){return void X(J)}$.done?le(H):Promise.resolve(H).then(ge,se)}function Y(O){return function(){var le=this,X=arguments;return new Promise(function(ge,se){var fe=O.apply(le,X);function ce(H){p(fe,ge,se,ce,$,"next",H)}function $(H){p(fe,ge,se,ce,$,"throw",H)}ce(void 0)})}}P.d(Ae,{Z:()=>Y})}},ut=>{ut(ut.s=9307)}]);